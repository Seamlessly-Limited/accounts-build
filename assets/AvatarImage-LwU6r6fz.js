import{Ai as e,Di as t,Dr as n,Gi as r,Gr as i,Ii as a,Ki as o,Nr as s,Xi as c,bi as l,ca as u,ha as d,ki as f,na as p,ni as m,qi as h,ra as g,sa as _,xa as v,ya as y}from"./index-DUz5oLRf.js";var[b,x]=m(`AvatarRoot`),S=a({__name:`AvatarRoot`,props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:`span`}},setup(e){return s(),x({imageLoadingStatus:d(`idle`)}),(e,t)=>(h(),f(v(n),{"as-child":e.asChild,as:e.as},{default:_(()=>[c(e.$slots,`default`)]),_:3},8,[`as-child`,`as`]))}}),C=a({__name:`AvatarFallback`,props:{delayMs:{type:Number,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:`span`}},setup(t){let r=t,a=b();s();let o=d(r.delayMs===void 0);return g(e=>{if(r.delayMs&&i){let t=window.setTimeout(()=>{o.value=!0},r.delayMs);e(()=>{window.clearTimeout(t)})}}),(t,r)=>o.value&&v(a).imageLoadingStatus.value!==`loaded`?(h(),f(v(n),{key:0,"as-child":t.asChild,as:t.as},{default:_(()=>[c(t.$slots,`default`)]),_:3},8,[`as-child`,`as`])):e(`v-if`,!0)}});function w(e,t){return e?t?(e.src!==t&&(e.src=t),e.complete&&e.naturalWidth>0?`loaded`:`loading`):`error`:`idle`}function T(e,{referrerPolicy:n,crossOrigin:a}={}){let s=d(!1),c=d(null),l=t(()=>s.value?(!c.value&&i&&(c.value=new window.Image),c.value):null),u=d(w(l.value,e.value)),f=e=>()=>{s.value&&(u.value=e)};return r(()=>{s.value=!0,g(t=>{let r=l.value;if(!r)return;u.value=w(r,e.value);let i=f(`loaded`),o=f(`error`);r.addEventListener(`load`,i),r.addEventListener(`error`,o),n?.value&&(r.referrerPolicy=n.value),typeof a?.value==`string`&&(r.crossOrigin=a.value),t(()=>{r.removeEventListener(`load`,i),r.removeEventListener(`error`,o)})})}),o(()=>{s.value=!1}),u}var E=a({__name:`AvatarImage`,props:{src:{type:String,required:!0},referrerPolicy:{type:null,required:!1},crossOrigin:{type:null,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:`img`}},emits:[`loadingStatusChange`],setup(e,{emit:t}){let r=e,i=t,{src:a,referrerPolicy:o,crossOrigin:d}=y(r);s();let m=b(),g=T(a,{referrerPolicy:o,crossOrigin:d});return p(g,e=>{i(`loadingStatusChange`,e),e!==`idle`&&(m.imageLoadingStatus.value=e)},{immediate:!0}),(e,t)=>u((h(),f(v(n),{role:`img`,"as-child":e.asChild,as:e.as,src:v(a),"referrer-policy":v(o)},{default:_(()=>[c(e.$slots,`default`)]),_:3},8,[`as-child`,`as`,`src`,`referrer-policy`])),[[l,v(g)===`loaded`]])}});export{C as n,S as r,E as t};