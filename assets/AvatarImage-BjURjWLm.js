import{Bi as e,Ca as t,Lr as n,Ni as r,Pi as i,Ta as a,Xi as o,Yi as s,Yr as c,Zi as l,da as u,ea as d,fa as f,ji as p,jr as m,oa as h,oi as g,sa as _,wi as v,ya as y}from"./index-CHNvwQRL.js";var[b,x]=g(`AvatarRoot`),S=e({__name:`AvatarRoot`,props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:`span`}},setup(e){return n(),x({imageLoadingStatus:y(`idle`)}),(e,t)=>(l(),r(a(m),{"as-child":e.asChild,as:e.as},{default:u(()=>[d(e.$slots,`default`)]),_:3},8,[`as-child`,`as`]))}}),C=e({__name:`AvatarFallback`,props:{delayMs:{type:Number,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:`span`}},setup(e){let t=e,o=b();n();let s=y(t.delayMs===void 0);return _(e=>{if(t.delayMs&&c){let n=window.setTimeout(()=>{s.value=!0},t.delayMs);e(()=>{window.clearTimeout(n)})}}),(e,t)=>s.value&&a(o).imageLoadingStatus.value!==`loaded`?(l(),r(a(m),{key:0,"as-child":e.asChild,as:e.as},{default:u(()=>[d(e.$slots,`default`)]),_:3},8,[`as-child`,`as`])):i(`v-if`,!0)}});function w(e,t){return e?t?(e.src!==t&&(e.src=t),e.complete&&e.naturalWidth>0?`loaded`:`loading`):`error`:`idle`}function T(e,{referrerPolicy:t,crossOrigin:n}={}){let r=y(!1),i=y(null),a=p(()=>r.value?(!i.value&&c&&(i.value=new window.Image),i.value):null),l=y(w(a.value,e.value)),u=e=>()=>{r.value&&(l.value=e)};return s(()=>{r.value=!0,_(r=>{let i=a.value;if(!i)return;l.value=w(i,e.value);let o=u(`loaded`),s=u(`error`);i.addEventListener(`load`,o),i.addEventListener(`error`,s),t?.value&&(i.referrerPolicy=t.value),typeof n?.value==`string`&&(i.crossOrigin=n.value),r(()=>{i.removeEventListener(`load`,o),i.removeEventListener(`error`,s)})})}),o(()=>{r.value=!1}),l}var E=e({__name:`AvatarImage`,props:{src:{type:String,required:!0},referrerPolicy:{type:null,required:!1},crossOrigin:{type:null,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:`img`}},emits:[`loadingStatusChange`],setup(e,{emit:i}){let o=e,s=i,{src:c,referrerPolicy:p,crossOrigin:g}=t(o);n();let _=b(),y=T(c,{referrerPolicy:p,crossOrigin:g});return h(y,e=>{s(`loadingStatusChange`,e),e!==`idle`&&(_.imageLoadingStatus.value=e)},{immediate:!0}),(e,t)=>f((l(),r(a(m),{role:`img`,"as-child":e.asChild,as:e.as,src:a(c),"referrer-policy":a(p)},{default:u(()=>[d(e.$slots,`default`)]),_:3},8,[`as-child`,`as`,`src`,`referrer-policy`])),[[v,a(y)===`loaded`]])}});export{C as n,S as r,E as t};