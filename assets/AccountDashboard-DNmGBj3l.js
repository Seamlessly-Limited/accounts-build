import"./utils-ZiIksPq3.js";import"./ListboxItem-BQ6CRXPv.js";import"./useNonce-EL4PrdHY.js";import"./nullish-CfjOSA4G.js";import"./ConfigProvider-m9UwVYqY.js";import"./useHideOthers-CchHA0Nk.js";import{A as e,E as t,O as n,_ as r,a as i,g as a,i as o,j as s,k as c,n as l,r as u,t as d,v as f,y as p}from"./AccountAssistant--W6bwbrj.js";import"./useDirection-in50hSnm.js";import{h as m}from"./chevron-up-whY44_ur.js";import{t as h}from"./useId-xsRq2HUO.js";import"./PopperContent-Dr_YT0U5.js";import"./DialogTitle-D6jfXwgI.js";import"./Teleport-DZCwNhBv.js";import"./AvatarImage-CnCf5Fls.js";import"./RovingFocusGroup-DP1d2R7c.js";import"./RovingFocusItem-CcYSbYDy.js";import"./VisuallyHiddenInput-m3iLWOCv.js";import{a as g,c as _,i as ee,n as te,o as v,r as ne,s as re,t as ie}from"./ComboboxItem-BTZggNRh.js";import"./Label-kU4gSqFJ.js";import"./paperclip-DjKqMwbz.js";import"./SwitchThumb-BNcEfQ1P.js";import{a as ae,i as oe,l as y,n as se,o as b,r as x,s as S,t as ce,u as C}from"./SelectValue-D7Grfaac.js";import{t as le}from"./check-B7iHaW4z.js";import"./user-D-cSDL10.js";import"./credit-card-Xekz-_lr.js";import"./feather-BUaGPuYp.js";import"./loader-circle-DUbYIXkx.js";import{$t as ue,At as w,Dt as T,Et as E,Ft as D,Ht as de,Kt as O,Mt as k,N as fe,Nt as A,O as j,Ot as M,P as pe,Sn as N,St as P,Tt as me,Wt as F,a as I,bn as L,bt as R,fn as z,ft as he,g as B,i as ge,in as V,jt as H,kt as U,m as _e,n as ve,qt as W,t as ye,vn as G,yn as K,zt as q}from"./index-BNQA11Dp.js";import{t as J}from"./Input-D_pLypJz.js";import{t as Y}from"./button-DUNwOsg8.js";import{n as be,t as xe}from"./DialogContent-CVE79l4U.js";import{i as Se,n as Ce,r as we,t as Te}from"./DialogTitle-BBO_pGr_.js";import{n as X}from"./button-BDkXS-d5.js";import"./badge-CZVI5lFy.js";import{t as Ee}from"./Card-sAievDGC.js";import{t as De}from"./badge-C3rYkx4f.js";import{t as Z}from"./Label-WpCx0DrT.js";import{t as Q}from"./Card-adaswQAz.js";import{t as Oe}from"./BankAccountService-BlQMNa5o.js";import{t as $}from"./TransactionService-CQR_lZrQ.js";var ke=A({__name:`ComboboxAnchor`,props:{reference:{type:null,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},setup(e){let{forwardRef:t}=pe();return(e,n)=>(F(),T(G(m),{"as-child":``,reference:e.reference},{default:V(()=>[k(G(j),q({ref:G(t),"as-child":e.asChild,as:e.as},e.$attrs),{default:V(()=>[W(e.$slots,`default`)]),_:3},16,[`as-child`,`as`])]),_:3},8,[`reference`]))}}),Ae=A({__name:`ComboboxEmpty`,props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},setup(e){let t=e,n=_(),r=me(()=>n.ignoreFilter.value?n.allItems.value.size===0:n.filterState.value.count===0);return(e,n)=>r.value?(F(),T(G(j),L(q({key:0},t)),{default:V(()=>[W(e.$slots,`default`,{},()=>[n[0]||=H(`No options`)])]),_:3},16)):M(`v-if`,!0)}}),je=A({__name:`ComboboxLabel`,props:{for:{type:String,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:`div`}},setup(e){let t=e;pe();let n=v({id:``,labelId:``});return n.labelId||=h(void 0,`reka-combobox-group-label`),(e,r)=>(F(),T(G(j),q(t,{id:G(n).labelId}),{default:V(()=>[W(e.$slots,`default`)]),_:3},16,[`id`]))}}),Me=A({__name:`DialogTrigger`,props:{asChild:{type:Boolean},as:{}},setup(e){let t=e;return(e,r)=>(F(),T(G(n),L(D(t)),{default:V(()=>[W(e.$slots,`default`)]),_:3},16))}}),Ne={class:`grid grid-cols-1 md:grid-cols-3 gap-6 mb-8`},Pe={class:`text-2xl font-bold text-slate-800 mt-2`},Fe={class:`text-lg font-semibold text-slate-800 mt-2`},Ie={class:`space-y-4`},Le={key:0,class:`text-center py-8`},Re={key:1,class:`text-center py-8 text-gray-500`},ze={class:`flex items-center gap-3`},Be={class:`w-10 h-10 rounded-full bg-gray-100 flex items-center justify-center`},Ve={class:`font-medium text-slate-800`},He={class:`text-xs text-gray-500`},Ue={__name:`OverviewTab`,props:{account:{type:Object,required:!0}},setup(e){let t=e,n=z([]),r=z(!0);de(async()=>{await i()});async function i(){try{r.value=!0,n.value=(await $.getTransactions({bankAccountReference:t.account.reference,page:0,size:5,sort:`transactionDate,desc`})).content||[]}catch(e){console.error(`Failed to load recent transactions`,e)}finally{r.value=!1}}function a(e){return e==null?`N/A`:new Intl.NumberFormat(`en-NG`,{style:`currency`,currency:t.account.currency||`NGN`}).format(e)}function o(e){return e?new Date(e).toLocaleDateString(`en-US`,{year:`numeric`,month:`short`,day:`numeric`}):`Never`}function s(e){return`fa-money-bill-wave`}return(t,i)=>(F(),U(`div`,null,[E(`div`,Ne,[k(G(Q),{class:`p-6`},{default:V(()=>[i[0]||=E(`h3`,{class:`text-sm font-medium text-gray-500`},`Current Balance`,-1),E(`p`,Pe,N(a(e.account?.balance)),1)]),_:1}),k(G(Q),{class:`p-6`},{default:V(()=>[i[1]||=E(`h3`,{class:`text-sm font-medium text-gray-500`},`Last Synced`,-1),E(`p`,Fe,N(o(e.account?.lastSyncedAt)),1)]),_:1}),k(G(Q),{class:`p-6`},{default:V(()=>[...i[2]||=[E(`h3`,{class:`text-sm font-medium text-gray-500`},`Pending Review`,-1),E(`p`,{class:`text-2xl font-bold text-amber-600 mt-2`},`0`,-1)]]),_:1})]),k(G(Q),{class:`p-6`},{default:V(()=>[i[4]||=E(`h3`,{class:`text-lg font-semibold text-slate-800 mb-4`},`Recent Activity`,-1),E(`div`,Ie,[r.value?(F(),U(`div`,Le,[...i[3]||=[E(`i`,{class:`fa fa-cog animate-spin text-gray-400`},null,-1)]])):n.value.length===0?(F(),U(`div`,Re,` No recent activity `)):(F(!0),U(P,{key:2},O(n.value,e=>(F(),U(`div`,{key:e.id,class:`flex justify-between items-center py-3 border-b last:border-0`},[E(`div`,ze,[E(`div`,Be,[E(`i`,{class:K([`fa text-gray-500`,s(e)])},null,2)]),E(`div`,null,[E(`p`,Ve,N(e.description),1),E(`p`,He,N(o(e.transactionDate)),1)])]),E(`span`,{class:K([`font-semibold`,e.amount<0?`text-slate-800`:e.type===`DEBIT`?`text-red-600`:`text-green-600`])},N(a(e.amount)),3)]))),128))])]),_:1})]))}},We=A({__name:`ComboboxAnchor`,props:{reference:{},asChild:{type:Boolean},as:{},class:{}},setup(e){let t=e,n=he(t,`class`),r=fe(n);return(e,n)=>(F(),T(G(ke),q(G(r),{class:G(B)(`w-full`,t.class)}),{default:V(()=>[W(e.$slots,`default`)]),_:3},16,[`class`]))}}),Ge=A({__name:`ComboboxEmpty`,props:{asChild:{type:Boolean},as:{},class:{}},setup(e){let t=e,n=he(t,`class`);return(e,r)=>(F(),T(G(Ae),q(G(n),{class:G(B)(`py-6 px-10 text-center text-sm`,t.class)}),{default:V(()=>[W(e.$slots,`default`)]),_:3},16,[`class`]))}}),Ke=A({__name:`ComboboxGroup`,props:{asChild:{type:Boolean},as:{},class:{},heading:{}},setup(e){let t=e,n=he(t,`class`);return(r,i)=>(F(),T(G(g),q(G(n),{class:G(B)(`overflow-hidden p-1 text-foreground [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:py-1.5 [&_[cmdk-group-heading]]:text-xs [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group-heading]]:text-muted-foreground`,t.class)}),{default:V(()=>[e.heading?(F(),T(G(je),{key:0,class:`px-2 py-1.5 text-xs font-medium text-muted-foreground`},{default:V(()=>[H(N(e.heading),1)]),_:1})):M(``,!0),W(r.$slots,`default`)]),_:3},16,[`class`]))}}),qe=`/org/categories`,Je={getCategories(){return I.get(qe,{organisationAware:!0,authorizeRequest:!0})},createCategory(e){return I.post(qe,{data:e,organisationAware:!0,authorizeRequest:!0})},updateCategory(e,t){return I.put(`${qe}/${e}`,{data:t,organisationAware:!0,authorizeRequest:!0})},deleteCategory(e){return I.delete(`${qe}/${e}`,{organisationAware:!0,authorizeRequest:!0})}},Ye={class:`space-y-6`},Xe={class:`grid grid-cols-1 md:grid-cols-2 gap-6`},Ze={class:`p-4 border-b flex flex-col md:flex-row justify-between gap-4`},Qe={class:`flex gap-2 flex-1`},$e={class:`relative flex-1 max-w-sm`},et={class:`flex gap-2`},tt={class:`overflow-x-auto`},nt={class:`w-full text-sm text-left`},rt={class:`divide-y`},it={key:0},at={key:1},ot={class:`px-6 py-4 whitespace-nowrap text-gray-600`},st={class:`px-6 py-4 font-medium text-slate-800`},ct={class:`px-6 py-4`},lt={class:`flex items-center gap-2 p-2`},ut={class:`border-t mt-2 pt-2 px-2`},dt={key:0,class:`text-gray-400 w-4 h-4 flex items-center justify-center`},ft={key:1,class:`text-green-500 w-4 h-4 flex items-center justify-center`},pt={class:`px-6 py-4 text-center`},mt={class:`p-4 border-t flex justify-between items-center text-sm text-gray-500`},ht={class:`flex gap-2`},gt={class:`grid gap-6 py-4`},_t={class:`grid grid-cols-2 gap-4`},vt={class:`space-y-2`},yt={class:`space-y-2`},bt={class:`grid grid-cols-2 gap-4`},xt={class:`space-y-2`},St={class:`space-y-2`},Ct={class:`grid grid-cols-2 gap-4`},wt={class:`space-y-2`},Tt={class:`space-y-2`},Et={class:`space-y-2`},Dt={class:`grid gap-4 py-4`},Ot={class:`space-y-2`},kt={__name:`TransactionsTab`,props:{account:{type:Object,required:!0}},setup(n){let r=n,a=ge().toast,d=z([]),f=z([]),p=z(!0),m=z(``),h=z(0),g=z(20),_=z(0),v=z(!1),y=z(!1),b=z(``),S=z(!1),C=z(null),w=z(!1),D=z({startDate:null,endDate:null,minAmount:null,maxAmount:null,type:`ALL`,status:`ALL`,categoryIds:[]}),fe=new c(`en-US`,{dateStyle:`medium`}),A=me({get:()=>D.value.startDate?e(D.value.startDate):void 0,set:e=>{D.value.startDate=e?e.toString():null}}),j=me({get:()=>D.value.endDate?e(D.value.endDate):void 0,set:e=>{D.value.endDate=e?e.toString():null}}),pe=me(()=>[...new Set(D.value.categoryIds)]);function I(e){C.value=e,y.value=!0}de(async()=>{await Promise.all([L(),he()])}),ue([h,m],()=>{L()});async function L(){try{p.value=!0;let e={bankAccountReference:r.account.reference,page:h.value,size:g.value,sort:`transactionDate,desc`,search:m.value};D.value.startDate&&(e.startDate=D.value.startDate),D.value.endDate&&(e.endDate=D.value.endDate),D.value.minAmount&&(e.minAmount=D.value.minAmount),D.value.maxAmount&&(e.maxAmount=D.value.maxAmount),D.value.type&&D.value.type!==`ALL`&&(e.type=D.value.type),D.value.status&&D.value.status!==`ALL`&&(e.status=D.value.status),D.value.categoryIds&&D.value.categoryIds.length>0&&(e.categoryIds=D.value.categoryIds);let t=await $.getTransactions(e);t&&(d.value=(t.content||[]).map(e=>({...e,selectedCategoryId:e.category?.id||null,saving:!1})),_.value=t.totalElements||0)}catch(e){console.error(`Failed to load transactions`,e)}finally{p.value=!1}}async function he(){try{f.value=await Je.getCategories()||[]}catch(e){console.error(`Failed to load categories`,e)}}async function ve(e){let t=e.category?.reference||null;if(e.selectedCategoryId)try{e.saving=!0;let t=await $.categorizeTransaction(e.reference,e.selectedCategoryId);a({title:`Categorized`,description:`Transaction updated successfully`}),t&&t.category&&(e.category=t.category,e.categoryName=t.category.name,e.selectedCategoryId=t.category.reference)}catch(n){console.error(`Failed to categorize transaction`,n),e.selectedCategoryId=t,a({title:`Error`,description:`Failed to categorize transaction`,variant:`destructive`})}finally{e.saving=!1}}async function W(){try{v.value=!0;let e=await $.autoCategorizeAll();a({title:`Auto-Categorization Started`,description:e.message||`AI is processing your transactions.`}),setTimeout(L,3e3)}catch{a({title:`Error`,description:`Failed to start auto-categorization`,variant:`destructive`})}finally{v.value=!1}}async function ye(){if(b.value)try{S.value=!0;let e=await Je.createCategory({name:b.value});f.value.push(e),C.value&&=(C.value.selectedCategoryId=e.reference,await ve(C.value),null),y.value=!1,b.value=``,a({title:`Category Created`,description:`${e.name} added successfully`})}catch{a({title:`Error`,description:`Failed to create category`,variant:`destructive`})}finally{S.value=!1}}function q(){L()}function X(){h.value=0,w.value=!1,L()}function Q(){D.value={startDate:null,endDate:null,minAmount:null,maxAmount:null,type:`ALL`,status:`ALL`,categoryIds:[]},X()}function Oe(e){let t=D.value.categoryIds.indexOf(e);t!==-1&&D.value.categoryIds.splice(t,1)}function ke(e){return e==null?`N/A`:new Intl.NumberFormat(`en-NG`,{style:`currency`,currency:r.account.currency||`NGN`}).format(e)}function Ae(e){return e?new Date(e).toLocaleDateString(`en-US`,{year:`numeric`,month:`short`,day:`numeric`}):`N/A`}function je(e){return{APPROVED:`default`,PENDING_REVIEW:`warning`,REJECTED:`destructive`}[e]||`secondary`}return(e,n)=>(F(),U(`div`,Ye,[E(`div`,Xe,[k(G(Ee),{class:`p-6 flex items-center justify-between`},{default:V(()=>[n[15]||=E(`div`,null,[E(`h3`,{class:`text-lg font-semibold text-slate-800`},`AI Auto-Categorization`),E(`p`,{class:`text-gray-500 text-sm`},`Automatically assign categories to transactions using AI.`)],-1),k(G(Y),{onClick:W,disabled:v.value},{default:V(()=>[E(`i`,{class:K([`fa mr-2`,v.value?`fa-cog animate-spin`:`fa-magic`])},null,2),H(` `+N(v.value?`Processing...`:`Auto-Categorize All`),1)]),_:1},8,[`disabled`])]),_:1})]),k(G(Ee),{class:`p-0 overflow-hidden`},{default:V(()=>[E(`div`,Ze,[E(`div`,Qe,[E(`div`,$e,[n[16]||=E(`i`,{class:`fa fa-search absolute left-3 top-1/2 -translate-y-1/2 text-gray-400`},null,-1),k(G(J),{modelValue:m.value,"onUpdate:modelValue":n[0]||=e=>m.value=e,placeholder:`Search transactions...`,class:`pl-9 rounded-full`},null,8,[`modelValue`])]),k(G(Y),{variant:`outline`,class:`rounded-full`,onClick:n[1]||=e=>w.value=!0},{default:V(()=>[...n[17]||=[E(`i`,{class:`fa fa-filter mr-2`},null,-1),H(` Filter `,-1)]]),_:1})]),E(`div`,et,[k(G(Y),{variant:`outline`,class:`rounded-full`,onClick:q},{default:V(()=>[E(`i`,{class:K([`fa fa-sync-alt`,{"animate-spin":p.value}])},null,2)]),_:1})])]),E(`div`,tt,[E(`table`,nt,[n[23]||=E(`thead`,{class:`bg-gray-50 text-gray-600 font-medium border-b`},[E(`tr`,null,[E(`th`,{class:`px-6 py-3`},`Date`),E(`th`,{class:`px-6 py-3`},`Description`),E(`th`,{class:`px-6 py-3`},`Category`),E(`th`,{class:`px-6 py-3 text-right`},`Amount`),E(`th`,{class:`px-6 py-3 text-center`},`Status`)])],-1),E(`tbody`,rt,[p.value&&d.value.length===0?(F(),U(`tr`,it,[...n[18]||=[E(`td`,{colspan:`5`,class:`px-6 py-12 text-center text-gray-500`},[E(`i`,{class:`fa fa-cog animate-spin mr-2`}),H(` Loading transactions... `)],-1)]])):d.value.length===0?(F(),U(`tr`,at,[...n[19]||=[E(`td`,{colspan:`5`,class:`px-6 py-12 text-center text-gray-500`},` No transactions found `,-1)]])):M(``,!0),(F(!0),U(P,null,O(d.value,e=>(F(),U(`tr`,{key:e.id,class:`hover:bg-gray-50 transition-colors`},[E(`td`,ot,N(Ae(e.transactionDate)),1),E(`td`,st,N(e.description),1),E(`td`,ct,[E(`div`,lt,[k(G(ne),{"model-value":e.selectedCategoryId,"onUpdate:modelValue":t=>{e.selectedCategoryId=t,ve(e)},class:`relative w-full max-w-xs`},{default:V(()=>[k(G(ee),{class:`w-full`},{default:V(()=>[k(G(te),{class:`rounded-full w-full shadow-none border-stone-100 bg-stone-50 focus:bg-white mt-1 text-xs`,placeholder:e.categoryName||`Select category...`,"display-value":e=>f.value.find(t=>t.reference===e)?.name||``},null,8,[`placeholder`,`display-value`])]),_:2},1024),k(G(re),{class:`absolute bg-white z-50 border rounded-sm mt-1 px-2 py-3 max-h-[200px] overflow-y-auto w-full min-w-[200px]`},{default:V(()=>[(F(!0),U(P,null,O(f.value,e=>(F(),T(G(ie),{key:e.reference,value:e.reference,class:`px-4 py-2 rounded-full cursor-pointer hover:bg-gray-100 text-xs`},{default:V(()=>[H(N(e.name),1)]),_:2},1032,[`value`]))),128)),E(`div`,ut,[k(G(Y),{variant:`ghost`,size:`sm`,class:`w-full justify-start text-blue-600 rounded-full`,onClick:R(t=>I(e),[`stop`])},{default:V(()=>[...n[20]||=[E(`i`,{class:`fa fa-plus mr-2`},null,-1),H(` Create New `,-1)]]),_:1},8,[`onClick`])])]),_:2},1024)]),_:2},1032,[`model-value`,`onUpdate:modelValue`]),e.saving?(F(),U(`div`,dt,[...n[21]||=[E(`i`,{class:`fa fa-cog animate-spin text-xs`},null,-1)]])):e.selectedCategoryId&&e.selectedCategoryId===e.category?.id?(F(),U(`div`,ft,[...n[22]||=[E(`i`,{class:`fa fa-check text-xs`},null,-1)]])):M(``,!0)])]),E(`td`,{class:K([`px-6 py-4 text-right font-semibold`,e.amount<0?`text-slate-800`:e.type==`DEBIT`?`text-red-800`:`text-green-700`])},N(ke(e.amount)),3),E(`td`,pt,[k(G(De),{variant:je(e.status),class:`rounded-full text-xs`},{default:V(()=>[H(N(e.status),1)]),_:2},1032,[`variant`])])]))),128))])])]),E(`div`,mt,[E(`span`,null,`Showing `+N(h.value*g.value+1)+` to `+N(Math.min((h.value+1)*g.value,_.value))+` of `+N(_.value)+` results`,1),E(`div`,ht,[k(G(Y),{variant:`outline`,size:`sm`,disabled:h.value===0,onClick:n[2]||=e=>h.value--},{default:V(()=>[...n[24]||=[H(` Previous `,-1)]]),_:1},8,[`disabled`]),k(G(Y),{variant:`outline`,size:`sm`,disabled:(h.value+1)*g.value>=_.value,onClick:n[3]||=e=>h.value++},{default:V(()=>[...n[25]||=[H(` Next `,-1)]]),_:1},8,[`disabled`])])])]),_:1}),k(G(be),{open:w.value,"onUpdate:open":n[11]||=e=>w.value=e},{default:V(()=>[k(G(xe),{class:`sm:max-w-[500px]`},{default:V(()=>[k(G(Ce),null,{default:V(()=>[k(G(Te),null,{default:V(()=>[...n[26]||=[H(`Filter Transactions`,-1)]]),_:1}),k(G(Se),null,{default:V(()=>[...n[27]||=[H(`Refine your transaction list.`,-1)]]),_:1})]),_:1}),E(`div`,gt,[E(`div`,_t,[E(`div`,vt,[k(G(Z),null,{default:V(()=>[...n[28]||=[H(`Start Date`,-1)]]),_:1}),k(G(o),null,{default:V(()=>[k(G(l),{"as-child":``},{default:V(()=>[k(G(Y),{variant:`outline`,class:K(G(B)(`w-full justify-start text-left font-normal rounded-full`,!A.value&&`text-muted-foreground`))},{default:V(()=>[k(G(t),{class:`mr-2 h-4 w-4`}),H(` `+N(A.value?G(fe).format(A.value.toDate(G(s)())):`Pick a date`),1)]),_:1},8,[`class`])]),_:1}),k(G(u),{class:`w-auto p-0`},{default:V(()=>[k(G(i),{modelValue:A.value,"onUpdate:modelValue":n[4]||=e=>A.value=e,"initial-focus":``},null,8,[`modelValue`])]),_:1})]),_:1})]),E(`div`,yt,[k(G(Z),null,{default:V(()=>[...n[29]||=[H(`End Date`,-1)]]),_:1}),k(G(o),null,{default:V(()=>[k(G(l),{"as-child":``},{default:V(()=>[k(G(Y),{variant:`outline`,class:K(G(B)(`w-full justify-start text-left font-normal rounded-full`,!j.value&&`text-muted-foreground`))},{default:V(()=>[k(G(t),{class:`mr-2 h-4 w-4`}),H(` `+N(j.value?G(fe).format(j.value.toDate(G(s)())):`Pick a date`),1)]),_:1},8,[`class`])]),_:1}),k(G(u),{class:`w-auto p-0`},{default:V(()=>[k(G(i),{modelValue:j.value,"onUpdate:modelValue":n[5]||=e=>j.value=e,"initial-focus":``},null,8,[`modelValue`])]),_:1})]),_:1})])]),E(`div`,bt,[E(`div`,xt,[k(G(Z),null,{default:V(()=>[...n[30]||=[H(`Min Amount`,-1)]]),_:1}),k(G(J),{type:`number`,modelValue:D.value.minAmount,"onUpdate:modelValue":n[6]||=e=>D.value.minAmount=e,placeholder:`0.00`,class:`rounded-full`},null,8,[`modelValue`])]),E(`div`,St,[k(G(Z),null,{default:V(()=>[...n[31]||=[H(`Max Amount`,-1)]]),_:1}),k(G(J),{type:`number`,modelValue:D.value.maxAmount,"onUpdate:modelValue":n[7]||=e=>D.value.maxAmount=e,placeholder:`∞`,class:`rounded-full`},null,8,[`modelValue`])])]),E(`div`,Ct,[E(`div`,wt,[k(G(Z),null,{default:V(()=>[...n[32]||=[H(`Type`,-1)]]),_:1}),k(G(ae),{modelValue:D.value.type,"onUpdate:modelValue":n[8]||=e=>D.value.type=e},{default:V(()=>[k(G(se),{class:`rounded-full`},{default:V(()=>[k(G(ce),{placeholder:`All`})]),_:1}),k(G(oe),null,{default:V(()=>[k(G(x),{value:`ALL`},{default:V(()=>[...n[33]||=[H(`All`,-1)]]),_:1}),k(G(x),{value:`DEBIT`},{default:V(()=>[...n[34]||=[H(`Debit`,-1)]]),_:1}),k(G(x),{value:`CREDIT`},{default:V(()=>[...n[35]||=[H(`Credit`,-1)]]),_:1})]),_:1})]),_:1},8,[`modelValue`])]),E(`div`,Tt,[k(G(Z),null,{default:V(()=>[...n[36]||=[H(`Status`,-1)]]),_:1}),k(G(ae),{modelValue:D.value.status,"onUpdate:modelValue":n[9]||=e=>D.value.status=e},{default:V(()=>[k(G(se),{class:`rounded-full`},{default:V(()=>[k(G(ce),{placeholder:`All`})]),_:1}),k(G(oe),null,{default:V(()=>[k(G(x),{value:`ALL`},{default:V(()=>[...n[37]||=[H(`All`,-1)]]),_:1}),k(G(x),{value:`APPROVED`},{default:V(()=>[...n[38]||=[H(`Approved`,-1)]]),_:1}),k(G(x),{value:`PENDING_REVIEW`},{default:V(()=>[...n[39]||=[H(`Pending Review`,-1)]]),_:1}),k(G(x),{value:`REJECTED`},{default:V(()=>[...n[40]||=[H(`Rejected`,-1)]]),_:1})]),_:1})]),_:1},8,[`modelValue`])])]),E(`div`,Et,[k(G(Z),null,{default:V(()=>[...n[41]||=[H(`Categories`,-1)]]),_:1}),k(G(ne),{modelValue:D.value.categoryIds,"onUpdate:modelValue":n[10]||=e=>D.value.categoryIds=e,multiple:``},{default:V(()=>[k(G(We),{class:`flex h-auto min-h-10 w-full flex-wrap items-center justify-start gap-1 rounded-full border bg-transparent px-3 py-2 text-sm shadow-sm ring-offset-background placeholder:text-muted-foreground focus-within:ring-0 focus-within:ring-ring focus-within:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50`},{default:V(()=>[(F(!0),U(P,null,O(pe.value,e=>(F(),T(G(De),{key:e,variant:`outline`,class:`rounded-full px-2 py-0.5 text-xs flex items-center bg-white gap-1`},{default:V(()=>[H(N(f.value.find(t=>t.reference===e)?.name)+` `,1),k(G(_e),{class:`h-3 w-3 cursor-pointer hover:text-red-500`,onClick:R(t=>Oe(e),[`stop`])},null,8,[`onClick`])]),_:2},1024))),128)),k(G(te),{class:`flex-1 h-6 min-w-[100px] border-none shadow-none focus-visible:ring-0 p-0 text-sm bg-transparent placeholder:text-muted-foreground`,placeholder:`Select categories...`})]),_:1}),k(G(re),{class:`z-50 min-w-[200px] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md`},{default:V(()=>[k(G(Ge),null,{default:V(()=>[...n[42]||=[H(`No category found.`,-1)]]),_:1}),k(G(Ke),null,{default:V(()=>[(F(!0),U(P,null,O(f.value,e=>(F(),T(G(ie),{key:e.reference,value:e.reference,class:`cursor-pointer select-none rounded-sm px-2 py-1.5 text-sm outline-none data-[highlighted]:bg-accent data-[highlighted]:text-accent-foreground`},{default:V(()=>[H(N(e.name)+` `,1),k(G(le),{class:K(G(B)(`mr-2 h-4 w-4`,D.value.categoryIds.includes(e.reference)?`opacity-100`:`opacity-0`))},null,8,[`class`])]),_:2},1032,[`value`]))),128))]),_:1})]),_:1})]),_:1},8,[`modelValue`])])]),k(G(we),{class:`gap-2`},{default:V(()=>[k(G(Y),{variant:`ghost`,onClick:Q,class:`rounded-full`},{default:V(()=>[...n[43]||=[H(`Clear Filters`,-1)]]),_:1}),k(G(Y),{onClick:X,class:`rounded-full`},{default:V(()=>[...n[44]||=[H(`Apply`,-1)]]),_:1})]),_:1})]),_:1})]),_:1},8,[`open`]),k(G(be),{open:y.value,"onUpdate:open":n[14]||=e=>y.value=e},{default:V(()=>[k(G(xe),{class:`sm:max-w-[425px]`},{default:V(()=>[k(G(Ce),null,{default:V(()=>[k(G(Te),null,{default:V(()=>[...n[45]||=[H(`Create New Category`,-1)]]),_:1}),k(G(Se),null,{default:V(()=>[...n[46]||=[H(`Add a new category for your transactions.`,-1)]]),_:1})]),_:1}),E(`div`,Dt,[E(`div`,Ot,[k(G(Z),null,{default:V(()=>[...n[47]||=[H(`Name`,-1)]]),_:1}),k(G(J),{modelValue:b.value,"onUpdate:modelValue":n[12]||=e=>b.value=e,placeholder:`e.g., Office Supplies`,class:`rounded-full`},null,8,[`modelValue`])])]),k(G(we),null,{default:V(()=>[k(G(Y),{variant:`outline`,onClick:n[13]||=e=>y.value=!1,class:`rounded-full`},{default:V(()=>[...n[48]||=[H(`Cancel`,-1)]]),_:1}),k(G(Y),{onClick:ye,disabled:S.value,class:`rounded-full`},{default:V(()=>[H(N(S.value?`Creating...`:`Create`),1)]),_:1},8,[`disabled`])]),_:1})]),_:1})]),_:1},8,[`open`])]))}},At={class:`p-6`},jt={class:`mb-8 text-center`},Mt={class:`text-gray-500 text-sm`},Nt={key:0,class:`grid grid-cols-1 md:grid-cols-2 gap-4`},Pt={key:1,class:`mt-6 text-center`},Ft={key:2,class:`space-y-6`},It={class:`flex justify-between`},Lt={key:3,class:`text-center py-12`},Rt={key:4,class:`space-y-6 text-center`},zt={__name:`UploadWizard`,props:{account:{type:Object,required:!0}},emits:[`upload-complete`,`close`],setup(e,{emit:t}){let n=e,r=t,i=ge().toast,a=z(1),o=z(null),s=z(null);function c(e){o.value=e,e===`file`?a.value=2:i({title:`Coming Soon`,description:`Bank API integration will be available shortly.`,variant:`secondary`})}function l(){s.value.click()}function u(e){let t=e.target.files[0];t&&f(t)}function d(e){let t=e.dataTransfer.files[0];t&&f(t)}async function f(e){a.value=3;try{await $.uploadTransactionFile(n.account.reference,e),a.value=4,i({title:`Upload Complete`,description:`File uploaded successfully.`,variant:`success`})}catch(e){a.value=2,i({title:`Upload Failed`,description:e.message||`Failed to upload file.`,variant:`destructive`})}}function p(){r(`upload-complete`),setTimeout(()=>{a.value=1,o.value=null},500)}return(t,n)=>(F(),U(`div`,At,[E(`div`,jt,[n[5]||=E(`h2`,{class:`text-xl font-semibold text-slate-800`},`Sync Transactions`,-1),E(`p`,Mt,`Choose how you want to import transactions into `+N(e.account?.accountName||`this account`),1)]),a.value===1?(F(),U(`div`,Nt,[k(G(Q),{class:K([`p-6 cursor-pointer hover:border-blue-500 transition-all border-2`,o.value===`file`?`border-blue-500 bg-blue-50`:`border-transparent hover:bg-slate-50`]),onClick:n[0]||=e=>c(`file`)},{default:V(()=>[...n[6]||=[E(`div`,{class:`flex flex-col items-center text-center gap-3`},[E(`div`,{class:`h-12 w-12 rounded-full bg-blue-100 flex items-center justify-center text-blue-600`},[E(`i`,{class:`fa fa-file-upload text-xl`})]),E(`div`,null,[E(`h3`,{class:`font-medium text-slate-800`},`Upload File`),E(`p`,{class:`text-xs text-gray-500 mt-1`},`PDF, CSV, or Excel bank statements`)])],-1)]]),_:1},8,[`class`]),k(G(Q),{class:K([`p-6 cursor-pointer hover:border-yellow-500 transition-all border-2`,o.value===`api`?`border-yellow-500 bg-yellow-50`:`border-transparent hover:bg-slate-50`]),onClick:n[1]||=e=>c(`api`)},{default:V(()=>[...n[7]||=[E(`div`,{class:`flex flex-col items-center text-center gap-3`},[E(`div`,{class:`h-12 w-12 rounded-full bg-yellow-100 flex items-center justify-center text-yellow-600`},[E(`i`,{class:`fa fa-university text-xl`})]),E(`div`,null,[E(`h3`,{class:`font-medium text-slate-800`},`Connect Bank API`),E(`p`,{class:`text-xs text-gray-500 mt-1`},`Mono, Flutterwave, Paystack`)])],-1)]]),_:1},8,[`class`])])):M(``,!0),a.value===1?(F(),U(`div`,Pt,[k(G(X),{variant:`ghost`,onClick:n[2]||=e=>t.$emit(`close`)},{default:V(()=>[...n[8]||=[H(`Cancel`,-1)]]),_:1})])):M(``,!0),a.value===2&&o.value===`file`?(F(),U(`div`,Ft,[E(`div`,{class:`border-2 border-dashed border-gray-300 rounded-lg p-12 text-center hover:bg-gray-50 transition-colors cursor-pointer`,onDragover:n[3]||=R(()=>{},[`prevent`]),onDrop:R(d,[`prevent`]),onClick:l},[E(`input`,{type:`file`,ref_key:`fileInput`,ref:s,class:`hidden`,onChange:u,accept:`.csv,.xlsx,.xls,.pdf`},null,544),n[9]||=E(`i`,{class:`fa fa-cloud-upload-alt text-5xl text-blue-100 mb-4`},null,-1),n[10]||=E(`h3`,{class:`text-lg font-medium text-slate-700`},`Click or drag file to upload`,-1),n[11]||=E(`p`,{class:`text-sm text-gray-500 mt-2`},`Supported formats: CSV, Excel, PDF`,-1)],32),E(`div`,It,[k(G(X),{variant:`ghost`,onClick:n[4]||=e=>a.value=1},{default:V(()=>[...n[12]||=[H(`Back`,-1)]]),_:1})])])):M(``,!0),a.value===3?(F(),U(`div`,Lt,[...n[13]||=[w(`<div class="relative w-24 h-24 mx-auto mb-6"><div class="absolute inset-0 border-4 border-gray-100 rounded-full"></div><div class="absolute inset-0 border-4 border-blue-500 rounded-full border-t-transparent animate-spin"></div><i class="fa fa-magic absolute inset-0 flex items-center justify-center text-blue-500 text-2xl"></i></div><h3 class="text-lg font-medium text-slate-800">Processing...</h3><p class="text-gray-500 mt-2">Uploading and analyzing your transaction file.</p>`,3)]])):M(``,!0),a.value===4?(F(),U(`div`,Rt,[n[15]||=E(`div`,{class:`bg-green-50 text-green-700 p-6 rounded-full w-20 h-20 mx-auto flex items-center justify-center`},[E(`i`,{class:`fa fa-check text-3xl`})],-1),n[16]||=E(`div`,null,[E(`h3`,{class:`text-xl font-semibold text-slate-800`},`Upload Successful!`),E(`p`,{class:`text-gray-500 mt-2`},`Your transactions are being processed in the background.`)],-1),k(G(X),{onClick:p,class:`w-full md:w-auto min-w-[200px]`},{default:V(()=>[...n[14]||=[H(`View Transactions`,-1)]]),_:1})])):M(``,!0)]))}},Bt={__name:`ReviewQueue`,props:{account:{type:Object,required:!0}},setup(e){return(e,t)=>(F(),T(G(Q),{class:`p-0 overflow-hidden`},{default:V(()=>[...t[0]||=[E(`div`,{class:`p-6 border-b`},[E(`h2`,{class:`text-lg font-semibold text-slate-800`},`Review Queue`),E(`p`,{class:`text-gray-500 text-sm`},`Transactions flagged for manual review (low confidence).`)],-1),E(`div`,{class:`text-center py-12 text-gray-500`},[E(`i`,{class:`fa fa-check-double text-4xl text-gray-200 mb-4`}),E(`p`,null,`No items in review queue`),E(`p`,{class:`text-xs mt-1`},`Great job! All transactions are processed.`)],-1)]]),_:1}))}},Vt={class:`relative w-full min-h-screen overflow-y-scroll rounded-sm py-5`,style:{"scrollbar-width":`none`}},Ht={class:`container mx-auto p-8 relative`},Ut={class:`flex flex-col md:flex-row justify-between items-start md:items-center gap-4 mb-8`},Wt={class:`flex flex-col`},Gt={class:`text-2xl font-bold text-slate-800 flex items-center gap-2`},Kt={class:`text-gray-600 text-sm`},qt={class:`flex gap-3 w-full md:w-auto`},Jt={class:`min-h-[400px]`},Yt={key:0,class:`flex justify-center items-center h-64`},Xt={class:`mb-6 z-0 relative`},Zt={__name:`AccountDashboard`,setup(e){let t=ye(),n=ve(),i=ge().toast,o=t.params.reference,s=z(null),c=z(!0),l=z(!1),u=z(`overview`),m=z(0),h=[{id:`overview`,name:`Overview`,icon:`fa-chart-pie`},{id:`transactions`,name:`Transactions`,icon:`fa-list`},{id:`review`,name:`Review Queue`,icon:`fa-tasks`},{id:`settings`,name:`Settings`,icon:`fa-cog`}];de(async()=>{await g()});async function g(){try{if(c.value=!0,s.value=((await Oe.getBankAccounts()).data||[]).find(e=>e.reference===o),!s.value)throw Error(`Account not found`)}catch{i({id:`load-error`,title:`Error`,description:`Failed to load account details`,variant:`destructive`}),n.push(`/accounts`)}finally{c.value=!1}}function _(){l.value=!1,u.value=`transactions`,g(),m.value++}function ee(e){return e?`****${e.slice(-4)}`:`N/A`}return(e,t)=>(F(),U(`div`,Vt,[E(`div`,Ht,[E(`div`,Ut,[E(`div`,Wt,[E(`h1`,Gt,N(s.value?.accountName||`Loading...`),1),E(`p`,Kt,N(s.value?.bankName)+` • `+N(ee(s.value?.accountNumber)),1)]),E(`div`,qt,[k(G(be),{open:l.value,"onUpdate:open":t[1]||=e=>l.value=e},{default:V(()=>[k(G(Me),{"as-child":``},{default:V(()=>[k(G(X),{variant:`outline`,class:`rounded-full flex-1 md:flex-none`,disabled:!s.value},{default:V(()=>[...t[3]||=[E(`i`,{class:`fa fa-sync mr-2`},null,-1),H(` Sync `,-1)]]),_:1},8,[`disabled`])]),_:1}),k(G(xe),{class:`max-w-3xl p-0`},{default:V(()=>[k(zt,{account:s.value,onUploadComplete:_,onClose:t[0]||=e=>l.value=!1},null,8,[`account`])]),_:1})]),_:1},8,[`open`]),k(G(f),null,{default:V(()=>[k(G(a),{"as-child":``},{default:V(()=>[k(G(X),{class:`rounded-full flex-1 md:flex-none shadow-md hover:shadow-blue-400`},{default:V(()=>[k(G(p),{class:`mr-2 h-4 w-4 text-blue-200`}),t[4]||=H(` Flow `,-1)]),_:1})]),_:1}),k(G(r),{class:`w-[400px] sm:w-[540px] p-0 border-l shadow-2xl`},{default:V(()=>[k(d,{account:s.value},null,8,[`account`])]),_:1})]),_:1})])]),E(`div`,Jt,[c.value?(F(),U(`div`,Yt,[...t[5]||=[E(`i`,{class:`fa fa-cog animate-spin text-3xl text-gray-400`},null,-1)]])):(F(),T(G(C),{key:1,modelValue:u.value,"onUpdate:modelValue":t[2]||=e=>u.value=e,class:`w-full`},{default:V(()=>[E(`div`,Xt,[t[6]||=E(`hr`,{class:`h-1 bg-slate-50 mb-1 mt-10 opacity-20`},null,-1),k(G(S),{class:`rounded-full bg-stone-100 text-blue-950 px-0.5 py-0.5 w-fit`},{default:V(()=>[(F(),U(P,null,O(h,e=>k(G(b),{key:e.id,value:e.id,class:`px-4 py-1 rounded-full data-[state=active]:bg-stone-50 data-[state=active]:text-blue-950 transition-all`},{default:V(()=>[E(`i`,{class:K([`fa mr-2`,e.icon])},null,2),H(` `+N(e.name),1)]),_:2},1032,[`value`])),64))]),_:1}),t[7]||=E(`hr`,{class:`h-1 bg-slate-50 mt-2 mb-10 opacity-30`},null,-1)]),k(G(y),{value:`overview`,class:``},{default:V(()=>[k(Ue,{account:s.value},null,8,[`account`])]),_:1}),k(G(y),{value:`transactions`,class:``},{default:V(()=>[(F(),T(kt,{account:s.value,key:m.value},null,8,[`account`]))]),_:1}),k(G(y),{value:`review`,class:``},{default:V(()=>[k(Bt,{account:s.value},null,8,[`account`])]),_:1}),k(G(y),{value:`settings`,class:``},{default:V(()=>[...t[8]||=[E(`div`,{class:`p-8 text-center text-gray-500 bg-slate-50 rounded-lg border border-dashed`},[E(`i`,{class:`fa fa-cog text-4xl mb-4 text-gray-300`}),E(`p`,null,`Settings coming soon`)],-1)]]),_:1})]),_:1},8,[`modelValue`]))])])]))}};export{Zt as default};