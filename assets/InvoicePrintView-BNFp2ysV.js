import{Aa as e,Bi as t,Cn as n,Hi as ee,Li as r,Ni as te,Pa as i,Ri as ne,ea as a,i as o,ia as re,na as s,o as c,wa as l,zi as u}from"./index-BW6FH5S4.js";import"./typeof-CVhf3tVy.js";import{n as d}from"./PDFExportService-kLn7dH0W.js";var ie={class:`invoice-print-container`},ae={class:`no-print flex justify-end mb-4`},f=[`disabled`],p={key:1,class:`w-4 h-4 border-2 border-white/30 border-t-white rounded-full animate-spin`},m={ref:`invoiceRef`,class:`invoice-document bg-white p-8 shadow-lg rounded-lg max-w-3xl mx-auto`},h={class:`flex justify-between items-start mb-8`},g=[`src`],_={class:`text-2xl font-bold text-gray-900`},v={class:`text-sm text-gray-600`},y={class:`text-sm text-gray-600`},b={class:`text-sm text-gray-600`},x={class:`text-right`},S={class:`text-lg font-semibold text-gray-900`},C={class:`text-sm text-gray-600`},w={class:`text-sm text-gray-600`},T={class:`mb-8 p-4 bg-gray-50 rounded-lg`},E={class:`text-lg font-semibold text-gray-900`},D={class:`w-full mb-8 invoice-items`},O={class:`py-3 text-sm text-gray-600`},k={class:`py-3 text-sm text-gray-900`},A={class:`py-3 text-sm text-gray-900 text-right`},j={class:`py-3 text-sm text-gray-900 text-right`},M={class:`py-3 text-sm text-gray-900 text-right`},N={class:`py-3 text-sm text-gray-900 text-right font-medium`},P={class:`flex justify-end mb-8`},oe={class:`w-64`},F={class:`flex justify-between py-2 border-b border-gray-100`},I={class:`font-medium`},L={key:0,class:`flex justify-between py-2 border-b border-gray-100`},R={class:`font-medium`},z={class:`flex justify-between py-3 text-lg font-bold`},B={class:`text-blue-600`},V={key:0,class:`flex items-center gap-4 mb-8 p-4 bg-gray-50 rounded-lg`},H=[`src`],U={key:1,class:`mb-6`},W={class:`text-sm text-gray-700 whitespace-pre-line`},G={key:2,class:`mb-6 pt-4 border-t border-gray-200`},K={class:`text-xs text-gray-600 whitespace-pre-line`},q={class:`pt-4 border-t border-gray-200 text-center`},se={key:0,class:`text-xs text-gray-400`},J={__name:`InvoicePrintView`,props:{invoiceRef:{type:String,required:!0}},setup(o){let J=o,Y=l({}),X=l({}),Z=l(!1);function Q(e){return e==null?`â‚¦0.00`:new Intl.NumberFormat(`en-NG`,{style:`currency`,currency:`NGN`}).format(e)}function $(e){return e?new Date(e).toLocaleDateString(`en-GB`,{day:`2-digit`,month:`short`,year:`numeric`}):`-`}async function ce(){Z.value=!0;try{d(Y.value,X.value)}catch(e){console.error(`Export failed:`,e)}finally{Z.value=!1}}async function le(){try{Y.value=(await c.get(`/org/doc/Sales Invoice/${encodeURIComponent(J.invoiceRef)}`)).data||{}}catch(e){console.error(`Failed to fetch invoice:`,e)}}async function ue(){try{X.value=(await c.get(`/org/doc/Brand Settings/Brand Settings`)).data||{}}catch{console.warn(`Brand settings not found`)}}return a(()=>{le(),ue()}),(a,o)=>(s(),t(`div`,ie,[r(`div`,ae,[r(`button`,{onClick:ce,disabled:Z.value,class:`px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed transition-colors`},[Z.value?(s(),t(`span`,p)):(s(),ne(e(n),{key:0,class:`w-4 h-4`})),ee(` `+i(Z.value?`Generating...`:`Download PDF`),1)],8,f)]),r(`div`,m,[r(`div`,h,[r(`div`,null,[X.value?.logo_url?(s(),t(`img`,{key:0,src:X.value.logo_url,alt:`Company Logo`,class:`h-16 mb-2`},null,8,g)):u(``,!0),r(`h1`,_,i(X.value?.legal_name||`Company Name`),1),r(`p`,v,i(X.value?.full_address||``),1),r(`p`,y,i(X.value?.phone||``),1),r(`p`,b,i(X.value?.email||``),1)]),r(`div`,x,[o[0]||=r(`h2`,{class:`text-3xl font-bold text-blue-600 mb-2`},`INVOICE`,-1),r(`p`,S,`#`+i(Y.value.name),1),r(`p`,C,`Date: `+i($(Y.value.posting_date)),1),r(`p`,w,`Due: `+i($(Y.value.due_date)),1)])]),r(`div`,T,[o[1]||=r(`h3`,{class:`text-sm font-semibold text-gray-500 uppercase mb-2`},`Bill To`,-1),r(`p`,E,i(Y.value.customer_name),1)]),r(`table`,D,[o[2]||=r(`thead`,null,[r(`tr`,{class:`border-b-2 border-gray-200`},[r(`th`,{class:`text-left py-2 text-sm font-semibold text-gray-600`},`#`),r(`th`,{class:`text-left py-2 text-sm font-semibold text-gray-600`},`Description`),r(`th`,{class:`text-right py-2 text-sm font-semibold text-gray-600`},`Qty`),r(`th`,{class:`text-right py-2 text-sm font-semibold text-gray-600`},`Rate`),r(`th`,{class:`text-right py-2 text-sm font-semibold text-gray-600`},`Tax`),r(`th`,{class:`text-right py-2 text-sm font-semibold text-gray-600`},`Amount`)])],-1),r(`tbody`,null,[(s(!0),t(te,null,re(Y.value.items||[],(e,n)=>(s(),t(`tr`,{key:n,class:`border-b border-gray-100`},[r(`td`,O,i(n+1),1),r(`td`,k,i(e.description),1),r(`td`,A,i(e.qty),1),r(`td`,j,i(Q(e.rate)),1),r(`td`,M,i(Q(e.tax_amount||0)),1),r(`td`,N,i(Q(e.net_amount||e.amount)),1)]))),128))])]),r(`div`,P,[r(`div`,oe,[r(`div`,F,[o[3]||=r(`span`,{class:`text-gray-600`},`Subtotal`,-1),r(`span`,I,i(Q(Y.value.grand_total)),1)]),Y.value.total_tax?(s(),t(`div`,L,[o[4]||=r(`span`,{class:`text-gray-600`},`Tax`,-1),r(`span`,R,i(Q(Y.value.total_tax)),1)])):u(``,!0),r(`div`,z,[o[5]||=r(`span`,null,`Total Due`,-1),r(`span`,B,i(Q(Y.value.outstanding_amount)),1)])])]),Y.value.qr_code?(s(),t(`div`,V,[r(`img`,{src:Y.value.qr_code,alt:`Payment QR Code`,class:`w-24 h-24`},null,8,H),o[6]||=r(`div`,null,[r(`p`,{class:`text-sm font-semibold text-gray-700`},`Scan to Pay`),r(`p`,{class:`text-xs text-gray-500`},`Use your phone to scan and pay instantly`)],-1)])):u(``,!0),Y.value.payment_instructions?(s(),t(`div`,U,[o[7]||=r(`h3`,{class:`text-sm font-semibold text-gray-500 uppercase mb-2`},`Payment Instructions`,-1),r(`p`,W,i(Y.value.payment_instructions),1)])):u(``,!0),Y.value.terms_and_conditions?(s(),t(`div`,G,[o[8]||=r(`h3`,{class:`text-sm font-semibold text-gray-500 uppercase mb-2`},`Terms & Conditions`,-1),r(`p`,K,i(Y.value.terms_and_conditions),1)])):u(``,!0),r(`div`,q,[o[9]||=r(`p`,{class:`text-xs text-gray-500`},`Thank you for your business!`,-1),X.value?.website?(s(),t(`p`,se,i(X.value.website),1)):u(``,!0)])],512)]))}},Y=o(J,[[`__scopeId`,`data-v-6d691b22`]]);export{Y as default};