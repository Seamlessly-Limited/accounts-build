import{D as e,F as t,S as n,U as r,V as i,W as a,X as o,b as s,ft as c,gt as l,m as u,tt as d,v as f,vt as p,x as m,y as h}from"./index-YI6KouJw.js";import{n as g,t as _}from"./Collection-tbJdTjiy.js";import{l as v,t as y}from"./VisuallyHidden-B4V-wydk.js";import{t as b}from"./nullish-DDde92Cm.js";import{u as x}from"./useForwardExpose-BQik0q1A.js";import{t as S}from"./useDirection-CGBuu1U5.js";import{n as C}from"./Presence-BvCetuOx.js";import{t as w}from"./PopperRoot-DwD3QcP_.js";var T=[` `,`Enter`,`ArrowUp`,`ArrowDown`],E=[` `,`Enter`],D=10;function O(e,t,n){return e===void 0?!1:Array.isArray(e)?e.some(e=>k(e,t,n)):k(e,t,n)}function k(e,t,n){return e===void 0||t===void 0?!1:typeof e==`string`?e===t:typeof n==`function`?n(e,t):typeof n==`string`?e?.[n]===t?.[n]:g(e,t)}function A(e){return e==null||e===``||Array.isArray(e)&&e.length===0}var j={key:0,value:``},[M,N]=v(`SelectRoot`),P=e({inheritAttrs:!1,__name:`SelectRoot`,props:{open:{type:Boolean,required:!1,default:void 0},defaultOpen:{type:Boolean,required:!1},defaultValue:{type:null,required:!1},modelValue:{type:null,required:!1,default:void 0},by:{type:[String,Function],required:!1},dir:{type:String,required:!1},multiple:{type:Boolean,required:!1},autocomplete:{type:String,required:!1},disabled:{type:Boolean,required:!1},name:{type:String,required:!1},required:{type:Boolean,required:!1}},emits:[`update:modelValue`,`update:open`],setup(e,{emit:o}){let h=e,g=o,{required:v,disabled:y,multiple:T,dir:E}=l(h),D=x(h,`modelValue`,g,{defaultValue:h.defaultValue??(T.value?[]:void 0),passive:h.modelValue===void 0,deep:!0}),A=x(h,`open`,g,{defaultValue:h.defaultOpen,passive:h.open===void 0}),M=c(),P=c(),I=c({x:0,y:0}),L=f(()=>T.value&&Array.isArray(D.value)?D.value?.length===0:b(D.value));_({isProvider:!0});let R=S(E),z=C(M),B=c(new Set),V=f(()=>Array.from(B.value).map(e=>e.value).join(`;`));function H(e){if(T.value){let t=Array.isArray(D.value)?[...D.value]:[],n=t.findIndex(t=>k(t,e,h.by));n===-1?t.push(e):t.splice(n,1),D.value=[...t]}else D.value=e}function U(e){return Array.from(B.value).find(t=>O(e,t.value,h.by))}return N({triggerElement:M,onTriggerChange:e=>{M.value=e},valueElement:P,onValueElementChange:e=>{P.value=e},contentId:``,modelValue:D,onValueChange:H,by:h.by,open:A,multiple:T,required:v,onOpenChange:e=>{A.value=e},dir:R,triggerPointerDownPosRef:I,disabled:y,isEmptyModelValue:L,optionsSet:B,onOptionAdd:e=>{let t=U(e.value);t&&B.value.delete(t),B.value.add(e)},onOptionRemove:e=>{let t=U(e.value);t&&B.value.delete(t)}}),(e,o)=>(i(),s(p(w),null,{default:d(()=>[a(e.$slots,`default`,{modelValue:p(D),open:p(A)}),p(z)?(i(),s(F,{key:V.value,"aria-hidden":`true`,tabindex:`-1`,multiple:p(T),required:p(v),name:e.name,autocomplete:e.autocomplete,disabled:p(y),value:p(D)},{default:d(()=>[p(b)(p(D))?(i(),n(`option`,j)):m(`v-if`,!0),(i(!0),n(u,null,r(Array.from(B.value),e=>(i(),n(`option`,t({key:e.value??``},{ref_for:!0},e),null,16))),128))]),_:1},8,[`multiple`,`required`,`name`,`autocomplete`,`disabled`,`value`])):m(`v-if`,!0)]),_:3}))}}),F=e({__name:`BubbleSelect`,props:{autocomplete:{type:String,required:!1},autofocus:{type:Boolean,required:!1},disabled:{type:Boolean,required:!1},form:{type:String,required:!1},multiple:{type:Boolean,required:!1},name:{type:String,required:!1},required:{type:Boolean,required:!1},size:{type:Number,required:!1},value:{type:null,required:!1}},setup(e){let n=e,r=c(),l=M();o(()=>n.value,(e,t)=>{let n=window.HTMLSelectElement.prototype,i=Object.getOwnPropertyDescriptor(n,`value`).set;if(e!==t&&i&&r.value){let t=new Event(`change`,{bubbles:!0});i.call(r.value,e),r.value.dispatchEvent(t)}});function u(e){l.onValueChange(e.target.value)}return(e,o)=>(i(),s(p(y),{"as-child":``},{default:d(()=>[h(`select`,t({ref_key:`selectElement`,ref:r},n,{onInput:u}),[a(e.$slots,`default`)],16)]),_:3}))}});export{T as a,O as c,D as i,M as n,E as o,N as r,A as s,P as t};