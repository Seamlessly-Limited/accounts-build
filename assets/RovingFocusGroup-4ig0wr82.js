import{B as e,D as t,T as n,U as r,_t as i,b as a,dt as o,et as s,ht as c}from"./index-BbbjTprl.js";import{l}from"./VisuallyHidden-CYcIbhM-.js";import{n as u}from"./dist-rCl7Sutb.js";import{u as d}from"./useForwardExpose-Bmr5sraL.js";import{t as f}from"./useDirection-COFyl7Rw.js";import{t as p}from"./Collection-CdDZ6a1V.js";import{n as m,r as h,t as g}from"./utils-DbYuLlnC.js";var[_,v]=l(`RovingFocusGroup`),y=t({__name:`RovingFocusGroup`,props:{orientation:{type:String,required:!1,default:void 0},dir:{type:String,required:!1},loop:{type:Boolean,required:!1,default:!1},currentTabStopId:{type:[String,null],required:!1},defaultCurrentTabStopId:{type:String,required:!1},preventScrollOnEntryFocus:{type:Boolean,required:!1,default:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},emits:[`entryFocus`,`update:currentTabStopId`],setup(t,{expose:l,emit:_}){let y=t,b=_,{loop:x,orientation:S,dir:C}=c(y),w=f(C),T=d(y,`currentTabStopId`,b,{defaultValue:y.defaultCurrentTabStopId,passive:y.currentTabStopId===void 0}),E=o(!1),D=o(!1),O=o(0),{getItems:k,CollectionSlot:A}=p({isProvider:!0});function j(e){let t=!D.value;if(e.currentTarget&&e.target===e.currentTarget&&t&&!E.value){let t=new CustomEvent(g,m);if(e.currentTarget.dispatchEvent(t),b(`entryFocus`,t),!t.defaultPrevented){let e=k().map(e=>e.ref).filter(e=>e.dataset.disabled!==``),t=e.find(e=>e.getAttribute(`data-active`)===``),n=e.find(e=>e.getAttribute(`data-highlighted`)===``),r=e.find(e=>e.id===T.value),i=[t,n,r,...e].filter(Boolean);h(i,y.preventScrollOnEntryFocus)}}D.value=!1}function M(){setTimeout(()=>{D.value=!1},1)}return l({getItems:k}),v({loop:x,dir:w,orientation:S,currentTabStopId:T,onItemFocus:e=>{T.value=e},onItemShiftTab:()=>{E.value=!0},onFocusableItemAdd:()=>{O.value++},onFocusableItemRemove:()=>{O.value--}}),(t,o)=>(e(),a(i(A),null,{default:s(()=>[n(i(u),{tabindex:E.value||O.value===0?-1:0,"data-orientation":i(S),as:t.as,"as-child":t.asChild,dir:i(w),style:{outline:`none`},onMousedown:o[0]||=e=>D.value=!0,onMouseup:M,onFocus:j,onBlur:o[1]||=e=>E.value=!1},{default:s(()=>[r(t.$slots,`default`)]),_:3},8,[`tabindex`,`data-orientation`,`as`,`as-child`,`dir`])]),_:3}))}});export{_ as n,y as t};