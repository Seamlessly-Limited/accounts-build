import"./ConfigProvider-B066E8TU.js";import"./useHideOthers-U-V8VQZO.js";import"./useId-qFLGzaj5.js";import"./DialogTitle-rItNeF9i.js";import{t as e}from"./check-BjrPAnh1.js";import{t}from"./circle-x-CYFmY5KI.js";import{t as n}from"./credit-card-CwNDanPJ.js";import{i as r,n as i,r as a,t as o}from"./DialogTitle-OZjapAfr.js";import{t as s}from"./DialogHeader-D6w5ZbOO.js";import{Ct as c,Dt as l,Ot as u,St as d,Tt as f,Ut as p,Vt as m,a as h,g,gn as _,hn as v,ln as y,o as b,tn as x,vt as S,wt as C,xt as w,yn as T,zt as E}from"./index-6eTYohyW.js";import{t as D}from"./OrganisationService-CXCy6NQg.js";import{n as O,t as k}from"./CardContent-Ng7jm7Z0.js";import{n as ee,r as te,t as ne}from"./CardTitle-DVuER0f7.js";import{t as A}from"./Badge-Sl8OJ8XA.js";var re=g(`receipt-text`,[[`path`,{d:`M13 16H8`,key:`wsln4y`}],[`path`,{d:`M14 8H8`,key:`1l3xfs`}],[`path`,{d:`M16 12H8`,key:`1fr5h0`}],[`path`,{d:`M4 3a1 1 0 0 1 1-1 1.3 1.3 0 0 1 .7.2l.933.6a1.3 1.3 0 0 0 1.4 0l.934-.6a1.3 1.3 0 0 1 1.4 0l.933.6a1.3 1.3 0 0 0 1.4 0l.933-.6a1.3 1.3 0 0 1 1.4 0l.934.6a1.3 1.3 0 0 0 1.4 0l.933-.6A1.3 1.3 0 0 1 19 2a1 1 0 0 1 1 1v18a1 1 0 0 1-1 1 1.3 1.3 0 0 1-.7-.2l-.933-.6a1.3 1.3 0 0 0-1.4 0l-.934.6a1.3 1.3 0 0 1-1.4 0l-.933-.6a1.3 1.3 0 0 0-1.4 0l-.933.6a1.3 1.3 0 0 1-1.4 0l-.934-.6a1.3 1.3 0 0 0-1.4 0l-.933.6a1.3 1.3 0 0 1-.7.2 1 1 0 0 1-1-1z`,key:`ycz6yz`}]]),ie=g(`receipt`,[[`path`,{d:`M4 2v20l2-1 2 1 2-1 2 1 2-1 2 1 2-1 2 1V2l-2 1-2-1-2 1-2-1-2 1-2-1-2 1Z`,key:`q3az6g`}],[`path`,{d:`M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8`,key:`1h4pet`}],[`path`,{d:`M12 17.5v-11`,key:`1jc1ny`}]]),j={class:`space-y-8`},ae={class:`flex items-start justify-between`},oe={class:`flex flex-col sm:flex-row gap-4`},se={key:0,class:`space-y-4`},ce={class:`flex items-center justify-between`},le={class:`flex items-start gap-4 flex-1`},ue={class:`p-3 rounded-full bg-slate-100 dark:bg-slate-900`},de={class:`flex-1`},fe={class:`flex items-center gap-2`},pe={class:`font-semibold text-gray-900 dark:text-white`},me={class:`text-sm text-gray-500 dark:text-gray-400 mt-1`},he={key:0,class:`text-xs text-gray-400 dark:text-gray-500 mt-1`},M={class:`text-right`},N={class:`text-lg font-bold text-gray-900 dark:text-white`},P={class:`flex justify-center my-6`},F={class:`rounded-full bg-stone-100 text-slate-900 px-0.5 py-0.5 w-fit inline-flex items-center`},I={class:`grid md:grid-cols-3 gap-6`},L={class:`mb-4`},ge={class:`text-lg font-bold text-gray-900 dark:text-white`},R={class:`text-xs text-gray-500 dark:text-gray-400 mt-1`},_e={class:`mb-4`},ve={class:`text-3xl font-bold text-gray-900 dark:text-white`},ye={class:`text-gray-500 dark:text-gray-400`},be={class:`space-y-2 mb-6 flex-1 text-sm`},xe={class:`text-xs text-gray-600 dark:text-gray-300`},z={__name:`ActiveSubscription`,props:{subscription:{type:Object,required:!0},payments:{type:Array,default:()=>[]},plans:{type:Array,required:!0},isYearly:{type:Boolean,default:!1}},emits:[`subscription-updated`,`subscription-cancelled`],setup(g,{emit:E}){let z=b().toast,B=g,V=E,H=y(!1),U=y(!1),W=y(B.isYearly),G=w(()=>B.subscription?B.subscription.plan||B.subscription.planName||`Current Plan`:`No Plan`),K=w(()=>B.subscription?(B.subscription.duration||B.subscription.billingCycle)===`YEARLY`?`Billed Yearly`:`Billed Monthly`:``),q=w(()=>{let e=B.subscription?.status?.toLowerCase();return e===`active`?`default`:e===`cancelled`||e===`expired`?`destructive`:e===`expiring`?`warning`:`secondary`});function J(e){return e?Number(e).toLocaleString(`en-NG`,{minimumFractionDigits:0,maximumFractionDigits:0}):`0`}function Y(e){let t=e?.toLowerCase();return t===`completed`||t===`successful`||t===`success`?`default`:t===`pending`?`secondary`:t===`failed`?`destructive`:`secondary`}function X(e){return B.subscription?(B.subscription.plan||B.subscription.planType)===e.planType:!1}async function Z(e){H.value=!0;try{let t=W.value?e.idYearly:e.idMonthly,n=W.value?e.priceYearly:e.priceMonthly,r=W.value?`YEARLY`:`MONTHLY`;window.FlutterwaveCheckout||await Q();let i=JSON.parse(localStorage.getItem(`user`)||`{}`),a=i.email||`user@example.com`,o=i.name||`User`;window.FlutterwaveCheckout({public_key:`FLWPUBK_TEST-d29ac0d460f0cbec3c0201ed7d4120f6-X`,tx_ref:`SUB-CHANGE-${Date.now()}-${t}`,amount:n,currency:`NGN`,payment_plan:t,payment_options:`card,banktransfer,ussd`,customer:{email:a,name:o},customizations:{title:`Change Subscription Plan`,description:`${e.name} - ${r}`,logo:`https://seamlessly.ng/logo.png`},callback:async function(t){if(t.status===`successful`)try{await D.setSubscription({"payment.reference":`${t.transaction_id}`,"payment.provider":`FLUTTERWAVE`,plan:e.planType,duration:`${r}`}),z({title:`Success`,message:`Subscription plan changed successfully!`,variant:`success`}),U.value=!1,V(`subscription-updated`)}catch(e){z({title:`Error`,message:e.message||`Failed to update subscription.`,variant:`error`})}else z({title:`Payment Failed`,message:`Your payment was not successful. Please try again.`,variant:`error`});H.value=!1},onclose:function(){H.value=!1}})}catch(e){z({title:`Error`,message:e.message||`Failed to initiate plan change.`,variant:`error`}),H.value=!1}}function Q(){return new Promise((e,t)=>{if(window.FlutterwaveCheckout){e();return}let n=document.createElement(`script`);n.src=`https://checkout.flutterwave.com/v3.js`,n.onload=e,n.onerror=t,document.head.appendChild(n)})}async function $(){if(confirm(`Are you sure you want to cancel your subscription? You'll lose access to premium features at the end of your billing period.`)){H.value=!0;try{await D.cancelSubscription(),z({title:`Cancelled`,message:`Subscription cancelled successfully. You'll retain access until the end of your billing period.`,variant:`success`}),V(`subscription-cancelled`),window.location.reload()}catch(e){z({title:`Error`,message:e.message||`Failed to cancel subscription.`,variant:`error`})}finally{H.value=!1}}}async function Se(e){try{let t=await D.downloadReceipt(e);t.data&&t.data.url?window.open(t.data.url,`_blank`):z({title:`Error`,message:`Receipt download link not found.`,variant:`error`})}catch{z({title:`Error`,message:`Failed to download receipt.`,variant:`error`})}}return(y,b)=>(m(),f(`div`,j,[u(O,{class:`overflow-hidden`},{default:x(()=>[u(ee,{class:`bg-gradient-to-r from-primary-50 to-primary-100 dark:from-gray-800 dark:to-gray-700`},{default:x(()=>[d(`div`,ae,[d(`div`,null,[u(ne,{class:`text-2xl`},{default:x(()=>[l(T(G.value),1)]),_:1}),u(te,{class:`mt-2`},{default:x(()=>[l(T(K.value),1)]),_:1})]),u(A,{variant:q.value,class:`text-sm`},{default:x(()=>[l(T(g.subscription?.status||`Active`),1)]),_:1},8,[`variant`])])]),_:1}),u(k,{class:`pt-6`},{default:x(()=>[d(`div`,oe,[u(h,{onClick:b[0]||=e=>U.value=!0,class:`flex-1 rounded-full bg-black dark:bg-white dark:text-black text-white hover:bg-gray-800 dark:hover:bg-gray-100`,disabled:H.value},{default:x(()=>[u(v(n),{class:`mr-2 h-4 w-4`}),b[4]||=l(` Change Plan `,-1)]),_:1},8,[`disabled`]),u(h,{onClick:$,variant:`outline`,class:`flex-1 rounded-full border-gray-300 text-gray-600 hover:bg-gray-50 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-950`,disabled:H.value},{default:x(()=>[u(v(t),{class:`mr-2 h-4 w-4`}),b[5]||=l(` Cancel Subscription `,-1)]),_:1},8,[`disabled`])])]),_:1})]),_:1}),d(`div`,null,[b[7]||=d(`h2`,{class:`text-2xl font-bold text-gray-900 dark:text-white mb-4`},`Payment History`,-1),g.payments&&g.payments.length>0?(m(),f(`div`,se,[(m(!0),f(S,null,p(g.payments,e=>(m(),c(O,{key:e.id,class:`hover:border-dashed transition-shadow`},{default:x(()=>[u(k,{class:`pt-6`},{default:x(()=>[d(`div`,ce,[d(`div`,le,[d(`div`,ue,[u(v(re),{class:`h-5 w-5 text-blue-600 dark:text-blue-400`})]),d(`div`,de,[d(`div`,fe,[d(`h3`,pe,T(e.plan||`Subscription Payment`),1),u(A,{variant:Y(e.status),class:`text-xs`},{default:x(()=>[l(T(e.status||`Completed`),1)]),_:2},1032,[`variant`])]),d(`p`,me,` Completed on `+T(e.timeCompleted),1),e.reference?(m(),f(`p`,he,` Ref: `+T(e.reference),1)):C(``,!0)])]),d(`div`,M,[d(`p`,N,` ₦`+T(J(e.amountPaid)),1),e.id?(m(),c(h,{key:0,onClick:t=>Se(e.id),variant:`ghost`,size:`sm`,class:`mt-2 text-xs`},null,8,[`onClick`])):C(``,!0)])])]),_:2},1024)]),_:2},1024))),128))])):(m(),c(O,{key:1,class:`border-dashed`},{default:x(()=>[u(k,{class:`pt-12 pb-12 text-center`},{default:x(()=>[u(v(ie),{class:`h-12 w-12 text-gray-400 mx-auto mb-4`}),b[6]||=d(`p`,{class:`text-gray-500 dark:text-gray-400`},`No payment history yet`,-1)]),_:1})]),_:1}))]),u(r,{open:U.value,"onUpdate:open":b[3]||=e=>U.value=e},{default:x(()=>[u(a,{class:`max-w-5xl max-h-[90vh] overflow-y-auto`},{default:x(()=>[u(s,null,{default:x(()=>[u(o,{class:`text-2xl`},{default:x(()=>[...b[8]||=[l(`Change Your Plan`,-1)]]),_:1}),u(i,null,{default:x(()=>[...b[9]||=[l(` Select a new plan to upgrade or downgrade your subscription `,-1)]]),_:1})]),_:1}),d(`div`,P,[d(`div`,F,[d(`button`,{onClick:b[1]||=e=>W.value=!1,class:_([`rounded-full px-4 py-0.5 w-fit font-medium transition-all`,W.value?`text-gray-500 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white`:`bg-stone-50 dark:bg-gray-700 shadow-sm text-gray-900 dark:text-white`])},` Monthly `,2),d(`button`,{onClick:b[2]||=e=>W.value=!0,class:_([`rounded-full bg-stone-100 text-slate-900 px-4 py-0.5 w-fit font-medium transition-all`,W.value?`bg-stone-50 dark:bg-gray-700 shadow-sm text-gray-900 dark:text-white`:`text-gray-500 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white`])},[...b[10]||=[l(` Yearly `,-1),d(`span`,{class:`ml-2 text-xs text-green-600 font-bold`},`-17%`,-1)]],2)])]),d(`div`,I,[(m(!0),f(S,null,p(g.plans,t=>(m(),f(`div`,{key:t.name,class:`relative flex flex-col p-6 bg-white dark:bg-gray-800 rounded-sm border border-gray-200 dark:border-gray-700 shadow-sm hover:border-dashed transition-shadow`},[d(`div`,L,[d(`h3`,ge,T(t.name),1),d(`p`,R,T(t.description),1)]),d(`div`,_e,[d(`span`,ve,` ₦`+T(J(W.value?t.priceYearly:t.priceMonthly)),1),d(`span`,ye,`/`+T(W.value?`year`:`month`),1)]),d(`ul`,be,[(m(!0),f(S,null,p(t.features.slice(0,6),t=>(m(),f(`li`,{key:t,class:`flex items-start`},[u(v(e),{class:`h-4 w-4 text-green-500 mr-2 flex-shrink-0 mt-0.5`}),d(`span`,xe,T(t),1)]))),128))]),u(h,{onClick:e=>Z(t),disabled:H.value||X(t),class:_([`w-full rounded-full font-semibold transition-colors`,X(t)?`bg-gray-100 dark:bg-gray-700 text-gray-400 cursor-not-allowed`:`bg-black hover:bg-gray-800 text-white dark:bg-white dark:text-black dark:hover:bg-gray-100`])},{default:x(()=>[l(T(X(t)?`Current Plan`:`Select Plan`),1)]),_:2},1032,[`onClick`,`disabled`,`class`])]))),128))])]),_:1})]),_:1},8,[`open`])]))}},B={class:`container mx-auto py-28 px-4 max-w-7xl`},V={key:1},H={class:`flex justify-center mb-10`},U={class:`rounded-full bg-stone-100 text-slate-900 px-0.5 py-0.5 w-fit inline-flex items-center`},W={class:`grid md:grid-cols-3 gap-8 mb-20`},G={class:`mb-6`},K={class:`text-xl font-bold text-gray-900 dark:text-white`},q={class:`text-sm text-gray-500 dark:text-gray-400 mt-2`},J={class:`mb-6`},Y={class:`text-4xl font-bold text-gray-900 dark:text-white`},X={class:`text-gray-500 dark:text-gray-400`},Z={class:`space-y-4 mb-8 flex-1`},Q={class:`text-sm text-gray-600 dark:text-gray-300`},$={__name:`Billing`,setup(t){let n=b().toast,r=y(!1),i=y(!1),a=y(null),o=y([]),s=[{name:`Basic`,message:`Good for starters and mom-&-pop shops.`,priceMonthly:14500,priceYearly:145e3,idMonthly:227736,idYearly:227736,planType:`BASIC`,features:[`Transactions categorization`,`Financial statements`,`Custom dashboards`,`AI assisted planning`,`Human support`,`1 Bank account sync (NG)`,`Single user access`,`500 transactions per month`,`Bulk data export`,`Third Party integration`,`Cashflow forecast`,`Monthly Budget`,`Tax forms completion`]},{name:`SME/NGO`,message:`Perfect for growing businesses.`,priceMonthly:44500,priceYearly:445e3,idMonthly:227738,idYearly:227739,planType:`SME_NGO`,features:[`Transactions categorization`,`Financial statements`,`Custom dashboards`,`AI assisted planning`,`Live human support`,`5 Bank account sync (NG)`,`Infinite user access`,`1,000 transactions per month`,`Bulk data export`,`Third party integration`,`Cashflow forecast`,`Monthly Budget`,`Tax forms completion`]},{name:`Business`,message:`Deploy large-scale reconciliations.`,priceMonthly:1e5,priceYearly:1e6,idMonthly:227740,idYearly:227741,planType:`BUSINESS`,features:[`Transactions categorization`,`Financial statements`,`Custom dashboards`,`AI assisted planning`,`Live support`,`15 Bank account sync (NG)`,`Infinite user access`,`4,500 transactions per month`,`Bulk data export`,`Third party integration`,`Cashflow forecast`,`Monthly Budget`,`Tax forms completion`]}];E(async()=>{await g()});async function g(){try{let[e,t]=await Promise.all([D.getSubscription().catch(()=>null),D.getPayments().catch(()=>[])]);e&&e.data&&(a.value=e.data),t&&t.data?o.value=t.data:Array.isArray(t)&&(o.value=t)}catch(e){console.error(`Failed to load billing data`,e)}}async function C(e){i.value=!0;try{let t=r.value?e.idYearly:e.idMonthly,a=r.value?e.priceYearly:e.priceMonthly,o=r.value?`YEARLY`:`MONTHLY`;window.FlutterwaveCheckout||await w();let s=JSON.parse(localStorage.getItem(`user`)||`{}`),c=s.email||`user@example.com`,l=s.name||`User`;window.FlutterwaveCheckout({public_key:`FLWPUBK_TEST-d29ac0d460f0cbec3c0201ed7d4120f6-X`,tx_ref:`SUB-${Date.now()}-${t}`,amount:a,currency:`NGN`,payment_plan:t,payment_options:`card,banktransfer,ussd`,customer:{email:c,name:l},customizations:{title:`Seamlessly Subscription`,message:`${e.name} - ${o}`,logo:`https://seamlessly.ng/logo.png`},callback:async function(t){if(t.status===`successful`)try{await D.setSubscription({"payment.reference":`${t.transaction_id}`,"payment.provider":`FLUTTERWAVE`,plan:e.planType,duration:`${o}`}),n({title:`Welcome!`,message:`Your subscription has been activated successfully!`,variant:`success`}),setTimeout(()=>{window.location.reload()},5e3)}catch(e){n({title:`Error`,message:e.message||`Failed to activate subscription.`,variant:`error`})}else n({title:`Payment Failed`,message:`Your payment was not successful. Please try again.`,variant:`error`});i.value=!1},onclose:function(){i.value=!1}})}catch(e){n({title:`Subscription Error`,message:e.message||`Failed to initiate subscription.`,variant:`error`}),i.value=!1}}function w(){return new Promise((e,t)=>{if(window.FlutterwaveCheckout){e();return}let n=document.createElement(`script`);n.src=`https://checkout.flutterwave.com/v3.js`,n.onload=e,n.onerror=t,document.head.appendChild(n)})}function O(e){return Number(e).toLocaleString(`en-NG`,{minimumFractionDigits:0,maximumFractionDigits:0})}function k(e){if(!a.value)return!1;let t=r.value?e.idYearly:e.idMonthly;return a.value.planId===t||a.value.planName===e.name}return(t,n)=>(m(),f(`div`,B,[a.value?(m(),c(z,{key:0,subscription:a.value,payments:o.value,plans:s,"is-yearly":r.value,onSubscriptionUpdated:g,onSubscriptionCancelled:g},null,8,[`subscription`,`payments`,`is-yearly`])):(m(),f(`div`,V,[n[3]||=d(`div`,{class:`text-center mb-8`},[d(`h1`,{class:`text-4xl font-bold tracking-tight text-gray-900 dark:text-white mb-4`},` Simple Pricing - Zero Exclusion `),d(`p`,{class:`text-lg text-gray-600 dark:text-gray-400`},[l(` Every plan is premium and gives access to `),d(`strong`,null,`SIMI`),l(` - our consultant. `)])],-1),d(`div`,H,[d(`div`,U,[d(`button`,{onClick:n[0]||=e=>r.value=!1,class:_([`rounded-full px-4 py-0.5 w-fit font-medium transition-all`,r.value?`text-gray-500 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white`:`bg-stone-50 dark:bg-gray-700 shadow-sm text-gray-900 dark:text-white`])},` Monthly `,2),d(`button`,{onClick:n[1]||=e=>r.value=!0,class:_([`rounded-full bg-stone-100 text-slate-900 px-4 py-0.5 w-fit font-medium transition-all`,r.value?`bg-stone-50 dark:bg-gray-700 shadow-sm text-gray-900 dark:text-white`:`text-gray-500 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white`])},[...n[2]||=[l(` Yearly `,-1),d(`span`,{class:`ml-2 text-xs text-green-600 font-bold`},`-17%`,-1)]],2)])]),d(`div`,W,[(m(),f(S,null,p(s,t=>d(`div`,{key:t.name,class:`relative flex flex-col p-8 bg-white dark:bg-gray-800 rounded-sm border border-gray-200 dark:border-gray-700 shadow-sm hover:border-dashed transition-shadow`},[d(`div`,G,[d(`h3`,K,T(t.name),1),d(`p`,q,T(t.message),1)]),d(`div`,J,[d(`span`,Y,`₦`+T(O(r.value?t.priceYearly:t.priceMonthly)),1),d(`span`,X,`/`+T(r.value?`year`:`month`),1)]),d(`ul`,Z,[(m(!0),f(S,null,p(t.features,t=>(m(),f(`li`,{key:t,class:`flex items-start`},[u(v(e),{class:`h-5 w-5 text-green-500 mr-3 flex-shrink-0`}),d(`span`,Q,T(t),1)]))),128))]),u(h,{onClick:e=>C(t),disabled:i.value||k(t),class:_([`w-full rounded-full font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500`,k(t)?`bg-gray-100 dark:bg-gray-700 text-gray-400 cursor-not-allowed`:`bg-primary-600 hover:bg-primary-700 text-white bg-black dark:bg-white dark:text-black`])},{default:x(()=>[l(T(k(t)?`Current Plan`:`Subscribe`),1)]),_:2},1032,[`onClick`,`disabled`,`class`])])),64))])]))]))}};export{$ as default};