import"./ohash.D__AXeF1-CGofPpTT.js";import"./nullish-CfjOSA4G.js";import"./ConfigProvider-CF_Zn67Q.js";import"./useHideOthers-BwO_FU0k.js";import"./useDirection-D77LTkCz.js";import"./useFormControl-DpqXf6v7.js";import"./useId-Dh9pzOl8.js";import"./DialogTitle-_JaSoOqC.js";import"./PopperRoot-CRsfwCoR.js";import{t as e}from"./BubbleSelect-ZIgDXD1r.js";import{At as t,Ct as n,Dt as r,It as i,N as a,Nt as o,Ot as s,St as c,Tt as l,Ut as u,Vt as d,Wt as f,_ as p,gn as m,gt as h,hn as g,ln as _,m as v,o as y,p as ee,r as te,tn as b,vt as x,wt as S,yn as C,zt as ne}from"./index-DUYI2_g5.js";import{t as w}from"./OrganisationService-CsobKzxG.js";import{t as re}from"./Card-eywxWxCP.js";import"./BackgroundAnimation-C_ou8Yr8.js";import{t as T}from"./button-BRE5vWy0.js";import{t as E}from"./Input-6hh4IKsp.js";import{a as D,i as O,n as k,o as A,r as j,t as M}from"./DialogTitle-Bh6wvBc8.js";var N=t({__name:`Select`,props:{open:{type:Boolean},defaultOpen:{type:Boolean},defaultValue:{},modelValue:{},by:{type:[String,Function]},dir:{},multiple:{type:Boolean},autocomplete:{},disabled:{type:Boolean},name:{},required:{type:Boolean}},emits:[`update:modelValue`,`update:open`],setup(t,{emit:r}){let o=a(t,r);return(t,r)=>(d(),n(g(e),i({"data-slot":`select`},g(o)),{default:b(()=>[f(t.$slots,`default`)]),_:3},16))}}),P=t({__name:`DialogFooter`,props:{class:{}},setup(e){let t=e;return(e,n)=>(d(),l(`div`,{"data-slot":`dialog-footer`,class:m(g(p)(`flex flex-col-reverse gap-2 sm:flex-row sm:justify-end`,t.class))},[f(e.$slots,`default`)],2))}}),F={class:`relative w-full min-h-screen overflow-y-scroll rounded-sm`,style:{"scrollbar-width":`none`}},I={class:`container mx-auto py-12 md:py-15 relative`},L={key:0,class:`flex justify-between items-center mb-8`},R={key:1,class:`text-center py-20`},z={key:2,class:`text-center py-40`},B={key:3,class:`grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6`},ie={class:`flex justify-between items-start mb-4`},V={class:`font-semibold text-lg text-slate-800`},H={class:`space-y-2 text-sm text-gray-600`},U={class:`flex items-center`},W={class:`flex items-center`},G={key:0,class:`flex items-center`},K={class:`flex justify-between items-center mt-6 pt-4 border-t`},q={class:`text-xs text-gray-500`},J={class:`grid gap-4 py-4`},Y={class:`grid grid-cols-2 gap-4`},ae={class:`grid grid-cols-2 gap-4`},oe={key:0,class:`fa fa-cog animate-spin mr-2`},X={__name:`Manage`,setup(e){let{toast:t}=v(),i=te(),a=y(),f=_(!0),p=_(!1),m=_(!1),X=_([]),se=[{label:`Limited Company`,value:`limited`},{label:`Enterprise`,value:`enterprise`},{label:`Sole Proprietorship`,value:`sole_proprietorship`},{label:`Partnership`,value:`partnership`}],Z=_({name:``,industry:``,country:``,state:``});ne(async()=>{await Q()});async function Q(){try{f.value=!0,X.value=(await w.getOrganisations()).data}catch{t({id:`load-organisations-error`,title:`Uh oh! Something went wrong.`,description:`We could not load your organisations`,action:o(T,{variant:`default`,size:`sm`,onClick:Q},`Retry`)})}finally{f.value=!1}}async function ce(){try{p.value=!0;let e=await w.create(Z.value);a.toast({message:`Organisation created successfully!`,duration:3e3,variant:`success`}),m.value=!1,X.value.push(e),fe()}catch(e){a.toast({message:e.message||`Failed to create organisation`,duration:5e3,variant:`error`})}finally{p.value=!1}}function le(e){i.push(`/organisations/${e.reference}/dashboard`)}function $(e){i.push(`/organisations/${e.reference}/settings`)}function ue(e){return{Owner:`default`,Accountant:`secondary`,Auditor:`outline`}[e]||`outline`}function de(e){return new Date(e).toLocaleDateString()}function fe(){Z.value={name:``,type:``,tin:``,cac_no:``,country:``,state:``}}return(e,t)=>(d(),l(x,null,[s(g(ee),{top:``}),c(`div`,F,[c(`div`,I,[X.value.length===0?S(``,!0):(d(),l(`div`,L,[t[11]||=c(`div`,null,[c(`h1`,{class:`text-3xl font-bold text-slate-700`},`My Organisations`),c(`p`,{class:`text-gray-600 mt-2`},`Manage your business entities and teams`)],-1),s(g(T),{class:`rounded-full`,onClick:t[0]||=e=>m.value=!0},{default:b(()=>[...t[10]||=[c(`i`,{class:`fa fa-plus mr-2`},null,-1),r(` New Organisation `,-1)]]),_:1})])),f.value?(d(),l(`div`,R,[...t[12]||=[c(`i`,{class:`fa fa-cog animate-spin text-4xl text-gray-500`},null,-1),c(`p`,{class:`mt-4 text-gray-600`},`Loading organisations...`,-1)]])):X.value.length===0?(d(),l(`div`,z,[t[14]||=c(`i`,{class:`fa fa-building text-4xl text-gray-300 mb-4`},null,-1),t[15]||=c(`h3`,{class:`text-xl font-semibold text-gray-700`},`No organisations yet`,-1),t[16]||=c(`p`,{class:`text-gray-600 mt-2 mb-6`},`Create your first organisation to get started`,-1),s(g(T),{class:`rounded-full`,onClick:t[1]||=e=>g(i).push(`/setup-organisation`)},{default:b(()=>[...t[13]||=[r(` Create Organisation `,-1)]]),_:1})])):(d(),l(`div`,B,[(d(!0),l(x,null,u(X.value,e=>(d(),n(g(re),{key:e.reference,class:`p-6 shadow-none transition-shadow cursor-pointer`,onClick:t=>le(e)},{default:b(()=>[c(`div`,ie,[c(`div`,null,[c(`h3`,V,C(e.name),1),s(g(A),{variant:ue(e.userRole),class:`mt-1`},{default:b(()=>[r(C(e.userRole),1)]),_:2},1032,[`variant`])]),t[17]||=c(`i`,{class:`fa fa-building text-gray-400 text-xl`},null,-1)]),c(`div`,H,[c(`div`,U,[t[18]||=c(`i`,{class:`fa fa-id-card mr-2 w-4`},null,-1),c(`span`,null,C(e.type),1)]),c(`div`,W,[t[19]||=c(`i`,{class:`fa fa-map-marker mr-2 w-4`},null,-1),c(`span`,null,C(e.country)+`, `+C(e.state),1)]),e.jurisdiction_code?(d(),l(`div`,G,[t[20]||=c(`i`,{class:`fa fa-balance-scale mr-2 w-4`},null,-1),c(`span`,null,C(e.jurisdiction_code),1),e.ai_confidence_score?(d(),n(g(A),{key:0,class:`ml-2`,variant:`outline`},{default:b(()=>[r(C(Math.round(e.ai_confidence_score*100))+`% `,1)]),_:2},1024)):S(``,!0)])):S(``,!0)]),c(`div`,K,[c(`span`,q,C(de(e.created_at)),1),e.userRole===`Owner`?(d(),n(g(T),{key:0,variant:`ghost`,size:`sm`,onClick:h(t=>$(e),[`stop`]),class:`rounded-full`},{default:b(()=>[...t[21]||=[c(`i`,{class:`fa fa-cog`},null,-1)]]),_:1},8,[`onClick`])):S(``,!0)])]),_:2},1032,[`onClick`]))),128))]))]),s(g(D),{open:m.value,"onUpdate:open":t[9]||=e=>m.value=e},{default:b(()=>[s(g(O),{class:`sm:max-w-[500px]`},{default:b(()=>[s(g(k),null,{default:b(()=>[s(g(M),null,{default:b(()=>[...t[22]||=[r(`Create New Organisation`,-1)]]),_:1}),s(g(j),null,{default:b(()=>[...t[23]||=[r(` Register a new business entity to manage taxes and compliance. `,-1)]]),_:1})]),_:1}),c(`form`,{onSubmit:h(ce,[`prevent`])},[c(`div`,J,[s(g(E),{label:`Organisation Name`,modelValue:Z.value.name,"onUpdate:modelValue":t[2]||=e=>Z.value.name=e,required:``},null,8,[`modelValue`]),s(g(N),{label:`Organisation Type`,modelValue:Z.value.type,"onUpdate:modelValue":t[3]||=e=>Z.value.type=e,options:se,required:``},null,8,[`modelValue`]),c(`div`,Y,[s(g(E),{label:`TIN`,modelValue:Z.value.tin,"onUpdate:modelValue":t[4]||=e=>Z.value.tin=e,required:``},null,8,[`modelValue`]),s(g(E),{label:`CAC Number`,modelValue:Z.value.cac_no,"onUpdate:modelValue":t[5]||=e=>Z.value.cac_no=e},null,8,[`modelValue`])]),c(`div`,ae,[s(g(E),{label:`Country`,modelValue:Z.value.country,"onUpdate:modelValue":t[6]||=e=>Z.value.country=e,required:``},null,8,[`modelValue`]),s(g(E),{label:`State/Region`,modelValue:Z.value.state,"onUpdate:modelValue":t[7]||=e=>Z.value.state=e,required:``},null,8,[`modelValue`])])]),s(g(P),null,{default:b(()=>[s(g(T),{type:`button`,variant:`outline`,onClick:t[8]||=e=>m.value=!1},{default:b(()=>[...t[24]||=[r(`Cancel`,-1)]]),_:1}),s(g(T),{type:`submit`,disabled:p.value},{default:b(()=>[p.value?(d(),l(`i`,oe)):S(``,!0),t[25]||=r(` Create Organisation `,-1)]),_:1},8,[`disabled`])]),_:1})],32)]),_:1})]),_:1},8,[`open`])])],64))}};export{X as default};