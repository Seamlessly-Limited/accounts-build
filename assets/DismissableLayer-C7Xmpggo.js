import{D as e,I as t,St as n,V as r,W as i,X as a,Z as o,_t as s,b as c,ft as l,tt as u,ut as d,v as f,vt as p,z as m}from"./index-vegYmq3T.js";import{s as h}from"./VisuallyHidden-DQsaJJLU.js";import{n as g}from"./dist-7nj00zp2.js";import{a as _,g as v,h as y,i as b,m as x,r as S,t as C,y as w}from"./useForwardExpose-CjVMQCNw.js";function T(e,t,n){let r=n.originalEvent.target,i=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:n});t&&r.addEventListener(e,t,{once:!0}),r.dispatchEvent(i)}function E(e){if(typeof e!=`object`||!e)return!1;let t=Object.getPrototypeOf(e);return t!==null&&t!==Object.prototype&&Object.getPrototypeOf(t)!==null||Symbol.iterator in e?!1:Symbol.toStringTag in e?Object.prototype.toString.call(e)===`[object Module]`:!0}function D(e,t,n=`.`,r){if(!E(t))return D(e,{},n,r);let i=Object.assign({},t);for(let t in e){if(t===`__proto__`||t===`constructor`)continue;let a=e[t];a!=null&&(r&&r(i,t,a,n)||(Array.isArray(a)&&Array.isArray(i[t])?i[t]=[...a,...i[t]]:E(a)&&E(i[t])?i[t]=D(a,i[t],(n?`${n}.`:``)+t.toString(),r):i[t]=a))}return i}function O(e){return(...t)=>t.reduce((t,n)=>D(t,n,``,e),{})}var k=O(),A=x(()=>{let e=l(new Map),n=l(),r=f(()=>{for(let t of e.value.values())if(t)return!0;return!1}),i=h({scrollBody:l(!0)}),o=null,s=()=>{document.body.style.paddingRight=``,document.body.style.marginRight=``,document.body.style.pointerEvents=``,document.documentElement.style.removeProperty(`--scrollbar-width`),document.body.style.overflow=n.value??``,v&&o?.(),n.value=void 0};return a(r,(e,r)=>{if(!y)return;if(!e){r&&s();return}n.value===void 0&&(n.value=document.body.style.overflow);let a=window.innerWidth-document.documentElement.clientWidth,c={padding:a,margin:0},l=i.scrollBody?.value?typeof i.scrollBody.value==`object`?k({padding:i.scrollBody.value.padding===!0?a:i.scrollBody.value.padding,margin:i.scrollBody.value.margin===!0?a:i.scrollBody.value.margin},c):c:{padding:0,margin:0};a>0&&(document.body.style.paddingRight=typeof l.padding==`number`?`${l.padding}px`:String(l.padding),document.body.style.marginRight=typeof l.margin==`number`?`${l.margin}px`:String(l.margin),document.documentElement.style.setProperty(`--scrollbar-width`,`${a}px`),document.body.style.overflow=`hidden`),v&&(o=_(document,`touchmove`,e=>N(e),{passive:!1})),t(()=>{document.body.style.pointerEvents=`none`,document.body.style.overflow=`hidden`})},{immediate:!0,flush:`sync`}),e});function j(e){let t=Math.random().toString(36).substring(2,7),n=A();n.value.set(t,e??!1);let r=f({get:()=>n.value.get(t)??!1,set:e=>n.value.set(t,e)});return w(()=>{n.value.delete(t)}),r}function M(e){let t=window.getComputedStyle(e);if(t.overflowX===`scroll`||t.overflowY===`scroll`||t.overflowX===`auto`&&e.clientWidth<e.scrollWidth||t.overflowY===`auto`&&e.clientHeight<e.scrollHeight)return!0;{let t=e.parentNode;return!(t instanceof Element)||t.tagName===`BODY`?!1:M(t)}}function N(e){let t=e||window.event,n=t.target;return n instanceof Element&&M(n)?!1:t.touches.length>1?!0:(t.preventDefault&&t.cancelable&&t.preventDefault(),!1)}var P=function(e){return typeof document>`u`?null:(Array.isArray(e)?e[0]:e).ownerDocument.body},F=new WeakMap,I=new WeakMap,L={},R=0,z=function(e){return e&&(e.host||z(e.parentNode))},B=function(e,t){return t.map(function(t){if(e.contains(t))return t;var n=z(t);return n&&e.contains(n)?n:(console.error(`aria-hidden`,t,`in not contained inside`,e,`. Doing nothing`),null)}).filter(function(e){return!!e})},V=function(e,t,n,r){var i=B(t,Array.isArray(e)?e:[e]);L[n]||(L[n]=new WeakMap);var a=L[n],o=[],s=new Set,c=new Set(i),l=function(e){!e||s.has(e)||(s.add(e),l(e.parentNode))};i.forEach(l);var u=function(e){!e||c.has(e)||Array.prototype.forEach.call(e.children,function(e){if(s.has(e))u(e);else try{var t=e.getAttribute(r),i=t!==null&&t!==`false`,c=(F.get(e)||0)+1,l=(a.get(e)||0)+1;F.set(e,c),a.set(e,l),o.push(e),c===1&&i&&I.set(e,!0),l===1&&e.setAttribute(n,`true`),i||e.setAttribute(r,`true`)}catch(t){console.error(`aria-hidden: cannot operate on `,e,t)}})};return u(t),s.clear(),R++,function(){o.forEach(function(e){var t=F.get(e)-1,i=a.get(e)-1;F.set(e,t),a.set(e,i),t||(I.has(e)||e.removeAttribute(r),I.delete(e)),i||e.removeAttribute(n)}),R--,R||(F=new WeakMap,F=new WeakMap,I=new WeakMap,L={})}},H=function(e,t,n){n===void 0&&(n=`data-aria-hidden`);var r=Array.from(Array.isArray(e)?e:[e]),i=t||P(e);return i?(r.push.apply(r,Array.from(i.querySelectorAll(`[aria-live], script`))),V(r,i,n,`aria-hidden`)):function(){return null}};function U(e){let t;a(()=>b(e),e=>{e?t=H(e):t&&t()}),m(()=>{t&&t()})}var W=`dismissableLayer.pointerDownOutside`,G=`dismissableLayer.focusOutside`;function K(e,t){let n=t.closest(`[data-dismissable-layer]`),r=e.dataset.dismissableLayer===``?e:e.querySelector(`[data-dismissable-layer]`),i=Array.from(e.ownerDocument.querySelectorAll(`[data-dismissable-layer]`));return!!(n&&(r===n||i.indexOf(r)<i.indexOf(n)))}function q(e,t,n=!0){let r=t?.value?.ownerDocument??globalThis?.document,i=l(!1),a=l(()=>{});return o(o=>{if(!y||!s(n))return;let c=async n=>{let o=n.target;if(!(!t?.value||!o)){if(K(t.value,o)){i.value=!1;return}if(n.target&&!i.value){let t={originalEvent:n};function i(){T(W,e,t)}n.pointerType===`touch`?(r.removeEventListener(`click`,a.value),a.value=i,r.addEventListener(`click`,a.value,{once:!0})):i()}else r.removeEventListener(`click`,a.value);i.value=!1}},l=window.setTimeout(()=>{r.addEventListener(`pointerdown`,c)},0);o(()=>{window.clearTimeout(l),r.removeEventListener(`pointerdown`,c),r.removeEventListener(`click`,a.value)})}),{onPointerDownCapture:()=>{s(n)&&(i.value=!0)}}}function J(e,n,r=!0){let i=n?.value?.ownerDocument??globalThis?.document,a=l(!1);return o(o=>{if(!y||!s(r))return;let c=async r=>{if(!n?.value)return;await t(),await t();let i=r.target;!n.value||!i||K(n.value,i)||r.target&&!a.value&&T(G,e,{originalEvent:r})};i.addEventListener(`focusin`,c),o(()=>i.removeEventListener(`focusin`,c))}),{onFocusCapture:()=>{s(r)&&(a.value=!0)},onBlurCapture:()=>{s(r)&&(a.value=!1)}}}var Y=d({layersRoot:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),X=e({__name:`DismissableLayer`,props:{disableOutsidePointerEvents:{type:Boolean,required:!1,default:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},emits:[`escapeKeyDown`,`pointerDownOutside`,`focusOutside`,`interactOutside`,`dismiss`],setup(e,{emit:a}){let s=e,l=a,{forwardRef:d,currentElement:m}=C(),h=f(()=>m.value?.ownerDocument??globalThis.document),_=f(()=>Y.layersRoot),v=f(()=>m.value?Array.from(_.value).indexOf(m.value):-1),y=f(()=>Y.layersWithOutsidePointerEventsDisabled.size>0),b=f(()=>{let e=Array.from(_.value),[t]=[...Y.layersWithOutsidePointerEventsDisabled].slice(-1),n=e.indexOf(t);return v.value>=n}),x=q(async e=>{let n=[...Y.branches].some(t=>t?.contains(e.target));!b.value||n||(l(`pointerDownOutside`,e),l(`interactOutside`,e),await t(),e.defaultPrevented||l(`dismiss`))},m),w=J(e=>{[...Y.branches].some(t=>t?.contains(e.target))||(l(`focusOutside`,e),l(`interactOutside`,e),e.defaultPrevented||l(`dismiss`))},m);S(`Escape`,e=>{v.value===_.value.size-1&&(l(`escapeKeyDown`,e),e.defaultPrevented||l(`dismiss`))});let T;return o(e=>{m.value&&(s.disableOutsidePointerEvents&&(Y.layersWithOutsidePointerEventsDisabled.size===0&&(T=h.value.body.style.pointerEvents,h.value.body.style.pointerEvents=`none`),Y.layersWithOutsidePointerEventsDisabled.add(m.value)),_.value.add(m.value),e(()=>{s.disableOutsidePointerEvents&&Y.layersWithOutsidePointerEventsDisabled.size===1&&(h.value.body.style.pointerEvents=T)}))}),o(e=>{e(()=>{m.value&&(_.value.delete(m.value),Y.layersWithOutsidePointerEventsDisabled.delete(m.value))})}),(e,t)=>(r(),c(p(g),{ref:p(d),"as-child":e.asChild,as:e.as,"data-dismissable-layer":``,style:n({pointerEvents:y.value?b.value?`auto`:`none`:void 0}),onFocusCapture:p(w).onFocusCapture,onBlurCapture:p(w).onBlurCapture,onPointerdownCapture:p(x).onPointerDownCapture},{default:u(()=>[i(e.$slots,`default`)]),_:3},8,[`as-child`,`as`,`style`,`onFocusCapture`,`onBlurCapture`,`onPointerdownCapture`]))}});export{T as a,j as i,Y as n,U as r,X as t};