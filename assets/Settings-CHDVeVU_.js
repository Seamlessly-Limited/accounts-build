import"./useFormControl-I5e8ntVi.js";import"./useNonce--_RD7e6O.js";import"./nullish-CfjOSA4G.js";import"./ConfigProvider-Cf3TFtJ9.js";import"./useHideOthers-DOFiNZks.js";import"./useDirection-CUs44sCO.js";import"./PopperAnchor-DaI7jKFA.js";import"./useId-DsZNdByk.js";import"./PopperContent-Bfs6wgZt.js";import"./useTypeahead-c2JOyg4Z.js";import"./DialogPortal-CcJn8zns.js";import"./Teleport-CsMvEVY_.js";import"./utils-3tEteioG.js";import"./DialogTitle-DpqPGwZt.js";import"./utils-BVHQiFXk.js";import"./RovingFocusGroup-gX5cpgO4.js";import"./RovingFocusItem-jWiVSdNF.js";import"./Label-B9QWuJ3E.js";import"./SelectViewport-DrxmBooI.js";import{t as e}from"./SelectGroup-BkIR8Sj0.js";import{a as t,i as n,n as r,t as i}from"./tabs-aVhZqZcb.js";import{Bi as a,Bn as o,Bt as s,Fa as c,Ft as l,Hi as u,It as d,Ki as f,Li as p,Mn as m,Oa as h,Pa as g,Qn as _,Ra as v,Ui as y,Vi as b,Wi as x,a as S,ba as C,ca as w,ft as T,i as E,ia as D,m as O,oa as k,on as A,pn as j,pt as M,qi as N,sr as P,yt as F}from"./index-HKVTK5TI.js";import{n as I,t as L}from"./DialogContent-Cjoaz2Fr.js";import{n as R,r as z,t as B}from"./DialogTitle-BwthNUJE.js";import{t as V}from"./DialogFooter-Cxs7R0UA.js";import{t as H}from"./button-DuGet5pa.js";import{t as U}from"./Input-BwfiGKb1.js";import{t as W}from"./OrganisationService-CoApdYtc.js";import{t as G}from"./Card-B5RTHVvK.js";import{t as K}from"./CardContent-0wfG0J7U.js";import{t as ee}from"./CardDescription-DDrBRHHg.js";import{n as te,t as ne}from"./CardTitle-paugHE_v.js";import{t as re}from"./Card-Bi4zMNws.js";import{t as q}from"./Label-DYU2ZsWM.js";import{a as J,i as Y,n as X,r as Z,t as Q}from"./SelectValue-DDiy6CKz.js";import{t as $}from"./badge-DDbnvIBR.js";var ie={class:`w-full pb-10`},ae={key:0,class:`flex flex-col items-center justify-center h-64 space-y-4`},oe={key:1,class:`max-w-4xl mx-auto`},se={class:`grid grid-cols-1 md:grid-cols-1 gap-8`},ce={class:`space-y-4`},le={class:`flex items-center space-x-2 border-b pb-2 mb-4 border-slate-100`},ue={class:`grid grid-cols-1 md:grid-cols-2 gap-6`},de={class:`md:col-span-2`},fe={class:`space-y-4`},pe={class:`flex items-center space-x-2 border-b pb-2 mb-4 border-slate-100`},me={class:`grid grid-cols-1 md:grid-cols-2 gap-6`},he={class:`md:col-span-2`},ge={class:`space-y-4`},_e={class:`flex items-center space-x-2 border-b pb-2 mb-4 border-slate-100`},ve={class:`grid grid-cols-1 md:grid-cols-2 gap-6`},ye={class:`relative mt-2`},be={class:`relative mt-2`},xe={class:`md:col-span-2`},Se={class:`flex items-center`},Ce={class:`md:col-span-2`},we={class:`relative mt-2`},Te={class:`flex justify-end pt-6 border-t border-slate-50`},Ee={key:1},De={key:2},Oe=E({__name:`Profile`,setup(e){let t=h({reference:null,name:``,legalName:``,classification:``,taxId:``,legalIDNumber:``,email:``,phone:``,fullAddress:``,country:``,state:``,website:``,industry:``}),n=h(!0),r=h(!1),i=h(!1),o=h([]),c=h([]),m=h(`Agriculture.Food and Beverage.Mining.Social Service / Non Profit.Manufacturing.Energy.Water.Construction.Sports.Wholesale and Retail Trade.Transportation.Beauty & Wellness.Information and Communication.Finance and Insurance.Real Estate.Professional and Consultancy Services.Science Research and Technical Services.Tourism and Hospitality.Administrative and Support Service.Public Administration and Defence.Fashion and Textile.Education.Human Health.Animal Health.Arts, Entertainment and Recreation.Other Activities`.split(`.`)),_=h([`Private Company Limited by Shares`,`Public Company Limited by Shares`,`Company Limited by Guarantee`,`Unlimited Company`,`Limited Liability Partnership`,`Limited Partnership`,`Business Name`,`Incorporated Trustee`,`Branch of Foreign Company`,`Cooperative Society`,`Financial Institution (Bank / Fintech / Insurance)`,`Foundation / Trust`,`Joint Venture (JV)`,`Microfinance Institution (MFI)`,`Non-Governmental Organisation (NGO)`,`Professional Firm`,`Public-Private Partnership (PPP)`]),S=a(()=>t.value.name&&t.value.name.length>2&&t.value.industry);D(async()=>{let e=JSON.parse(localStorage.getItem(`organisation`)||`null`);e&&(t.value={...t.value,...e},n.value=!1,e.country&&M(e.country));try{await E(),await T()}catch(e){console.warn(`Background data refresh failed`,e)}finally{n.value=!1}});async function T(){try{let e=await W.getOrganisationDetails(t.value.reference);if(e){let n=e.organisation||e;t.value={reference:n.reference,name:n.name||``,legalName:n.legalName||``,classification:n.classification||``,industry:n.industry||``,taxId:n.taxId||``,legalIDNumber:n.legalIDNumber||``,email:n.email||``,phone:n.phone||``,fullAddress:n.fullAddress||``,country:n.country||``,state:n.state||``,website:n.website||``},n.country&&await M(n.country)}}catch(e){console.error(e),O({title:`Error`,description:`Failed to load organisation profile. Please refresh.`,variant:`destructive`})}}async function E(){let e=window.configurations?.countries||[];Array.isArray(e)&&(o.value=e.map(e=>({label:e.name||e,value:e.code||e.name||e})))}async function M(e){if(!e){c.value=[];return}if(!i.value){i.value=!0;try{c.value=((await(await fetch(`https://countriesnow.space/api/v0.1/countries/states`,{method:`POST`,headers:{"Content-Type":`application/json`},body:JSON.stringify({country:e})})).json()).data?.states||[]).map(e=>({label:e.name,value:e.name}))||[]}catch(e){console.warn(`Failed to fetch states`,e)}finally{i.value=!1}}}async function I(){r.value=!0;try{let e={name:t.value.name,legalName:t.value.legalName,classification:t.value.classification,industry:t.value.industry,taxId:t.value.taxId,legalIDNumber:t.value.legalIDNumber,email:t.value.email,phone:t.value.phone,fullAddress:t.value.fullAddress,country:t.value.country,state:t.value.state,website:t.value.website};await W.update(t.value.reference,e),O({title:`Saved`,description:`Your organisation profile has been updated.`}),setTimeout(()=>window.location.reload(),2e3)}catch(e){console.error(e),O({title:`Failed to save`,description:`An unexpected error occurred. Please try again.`,variant:`destructive`})}finally{r.value=!1}}return(e,a)=>(k(),x(`div`,ie,[n.value?(k(),x(`div`,ae,[...a[12]||=[b(`div`,{class:`animate-spin rounded-full h-8 w-8 border-b-2 border-primary`},null,-1),b(`p`,{class:`text-muted-foreground text-sm`},`Loading profile...`,-1)]])):(k(),x(`div`,oe,[b(`div`,se,[b(`section`,ce,[b(`div`,le,[N(g(P),{class:`w-5 h-5 text-primary/80`}),a[13]||=b(`h3`,{class:`font-medium text-lg text-slate-800`},`Corporate Identity`,-1)]),b(`div`,ue,[b(`div`,de,[N(g(q),{for:`name`},{default:C(()=>[...a[14]||=[f(`Organisation Name (Trading Name) `,-1),b(`span`,{class:`text-red-500`},`*`,-1)]]),_:1}),N(g(U),{id:`name`,modelValue:t.value.name,"onUpdate:modelValue":a[0]||=e=>t.value.name=e,placeholder:`e.g. Acme Corp`,class:`mt-2`},null,8,[`modelValue`])]),b(`div`,null,[N(g(q),{for:`classification`},{default:C(()=>[...a[15]||=[f(`Business Type`,-1)]]),_:1}),N(g(J),{modelValue:t.value.classification,"onUpdate:modelValue":a[1]||=e=>t.value.classification=e},{default:C(()=>[N(g(X),{id:`classification`,class:`mt-2 w-full`},{default:C(()=>[N(g(Q),{placeholder:`Select type`})]),_:1}),N(g(Y),null,{default:C(()=>[(k(!0),x(p,null,w(_.value,e=>(k(),u(g(Z),{key:e,value:e},{default:C(()=>[f(v(e),1)]),_:2},1032,[`value`]))),128))]),_:1})]),_:1},8,[`modelValue`])]),b(`div`,null,[N(g(q),{for:`industry`},{default:C(()=>[...a[16]||=[f(`Industry `,-1),b(`span`,{class:`text-red-500`},`*`,-1)]]),_:1}),N(g(J),{modelValue:t.value.industry,"onUpdate:modelValue":a[2]||=e=>t.value.industry=e},{default:C(()=>[N(g(X),{id:`industry`,class:`mt-2 w-full`},{default:C(()=>[N(g(Q),{placeholder:`Select industry`})]),_:1}),N(g(Y),null,{default:C(()=>[(k(!0),x(p,null,w(m.value,e=>(k(),u(g(Z),{key:e,value:e},{default:C(()=>[f(v(e),1)]),_:2},1032,[`value`]))),128))]),_:1})]),_:1},8,[`modelValue`])])])]),b(`section`,fe,[b(`div`,pe,[N(g(j),{class:`w-5 h-5 text-primary/80`}),a[17]||=b(`h3`,{class:`font-medium text-lg text-slate-800`},`Legal & Registration`,-1)]),b(`div`,me,[b(`div`,he,[N(g(q),{for:`legalName`},{default:C(()=>[...a[18]||=[f(`Registered Legal Name`,-1)]]),_:1}),N(g(U),{id:`legalName`,modelValue:t.value.legalName,"onUpdate:modelValue":a[3]||=e=>t.value.legalName=e,placeholder:`e.g. Acme Corporation Limited`,class:`mt-2`},null,8,[`modelValue`]),a[19]||=b(`p`,{class:`text-[11px] text-muted-foreground mt-1`},`The official name as it appears on your registration documents.`,-1)]),b(`div`,null,[N(g(q),{for:`legalIDNumber`},{default:C(()=>[...a[20]||=[f(`Registration Number (RC/BN)`,-1)]]),_:1}),N(g(U),{id:`legalIDNumber`,modelValue:t.value.legalIDNumber,"onUpdate:modelValue":a[4]||=e=>t.value.legalIDNumber=e,placeholder:`e.g. RC123456`,class:`mt-2`},null,8,[`modelValue`]),a[21]||=b(`p`,{class:`text-[11px] text-muted-foreground mt-1`},`Found on your CAC certificate`,-1)]),b(`div`,null,[N(g(q),{for:`taxId`},{default:C(()=>[...a[22]||=[f(`Tax Identification Number (TIN)`,-1)]]),_:1}),N(g(U),{id:`taxId`,modelValue:t.value.taxId,"onUpdate:modelValue":a[5]||=e=>t.value.taxId=e,placeholder:`e.g. 12345678-0001`,class:`mt-2`},null,8,[`modelValue`]),a[23]||=b(`p`,{class:`text-[11px] text-muted-foreground mt-1`},`Used for tax reporting and invoices`,-1)])])]),b(`section`,ge,[b(`div`,_e,[N(g(l),{class:`w-5 h-5 text-primary/80`}),a[24]||=b(`h3`,{class:`font-medium text-lg text-slate-800`},`Location & Contact`,-1)]),b(`div`,ve,[b(`div`,null,[N(g(q),{for:`email`},{default:C(()=>[...a[25]||=[f(`Official Email`,-1)]]),_:1}),b(`div`,ye,[N(g(d),{class:`absolute left-3 top-2.5 h-4 w-4 text-muted-foreground`}),N(g(U),{id:`email`,modelValue:t.value.email,"onUpdate:modelValue":a[6]||=e=>t.value.email=e,type:`email`,placeholder:`contact@company.com`,class:`pl-9`},null,8,[`modelValue`])])]),b(`div`,null,[N(g(q),{for:`phone`},{default:C(()=>[...a[26]||=[f(`Official Phone`,-1)]]),_:1}),b(`div`,be,[N(g(F),{class:`absolute left-3 top-2.5 h-4 w-4 text-muted-foreground`}),N(g(U),{id:`phone`,modelValue:t.value.phone,"onUpdate:modelValue":a[7]||=e=>t.value.phone=e,type:`tel`,placeholder:`+234...`,class:`pl-9`},null,8,[`modelValue`])])]),b(`div`,xe,[N(g(q),{for:`fullAddress`},{default:C(()=>[...a[27]||=[f(`Office Address`,-1)]]),_:1}),N(g(U),{id:`fullAddress`,modelValue:t.value.fullAddress,"onUpdate:modelValue":a[8]||=e=>t.value.fullAddress=e,placeholder:`Street address, building, suite...`,class:`mt-2`},null,8,[`modelValue`])]),b(`div`,null,[N(g(q),{for:`country`},{default:C(()=>[...a[28]||=[f(`Country`,-1)]]),_:1}),N(g(J),{modelValue:t.value.country,"onUpdate:modelValue":[a[9]||=e=>t.value.country=e,M]},{default:C(()=>[N(g(X),{id:`country`,class:`mt-2 w-full`},{default:C(()=>[N(g(Q),{placeholder:`Select country`})]),_:1}),N(g(Y),null,{default:C(()=>[(k(!0),x(p,null,w(o.value,e=>(k(),u(g(Z),{key:e.value,value:e.label},{default:C(()=>[b(`div`,Se,[b(`span`,null,v(e.label),1)])]),_:2},1032,[`value`]))),128))]),_:1})]),_:1},8,[`modelValue`])]),b(`div`,null,[N(g(q),{for:`state`},{default:C(()=>[...a[29]||=[f(`State / Region`,-1)]]),_:1}),N(g(J),{modelValue:t.value.state,"onUpdate:modelValue":a[10]||=e=>t.value.state=e,disabled:i.value||!t.value.country},{default:C(()=>[N(g(X),{id:`state`,class:`mt-2 w-full`},{default:C(()=>[i.value?(k(),u(g(Q),{key:0,placeholder:`Loading states...`})):(k(),u(g(Q),{key:1,placeholder:`Select state`}))]),_:1}),N(g(Y),null,{default:C(()=>[(k(!0),x(p,null,w(c.value,e=>(k(),u(g(Z),{key:e.value,value:e.label},{default:C(()=>[f(v(e.label),1)]),_:2},1032,[`value`]))),128))]),_:1})]),_:1},8,[`modelValue`,`disabled`])]),b(`div`,Ce,[N(g(q),{for:`website`},{default:C(()=>[...a[30]||=[f(`Website`,-1)]]),_:1}),b(`div`,we,[N(g(A),{class:`absolute left-3 top-2.5 h-4 w-4 text-muted-foreground`}),N(g(U),{id:`website`,modelValue:t.value.website,"onUpdate:modelValue":a[11]||=e=>t.value.website=e,placeholder:`https://yourbusiness.com`,class:`pl-9`},null,8,[`modelValue`])])])])]),b(`div`,Te,[N(g(H),{class:`px-8 min-w-[140px] rounded-full`,disabled:r.value||!S.value,onClick:I},{default:C(()=>[r.value?(k(),u(g(s),{key:0,class:`mr-2 h-4 w-4 animate-spin`})):y(``,!0),r.value?(k(),x(`span`,De,`Saving...`)):(k(),x(`span`,Ee,`Save Changes`))]),_:1},8,[`disabled`])])])]))]))}},[[`__scopeId`,`data-v-13a3ac81`]]),ke={class:`space-y-8`},Ae={class:`flex items-start justify-between`},je={class:`flex flex-col sm:flex-row gap-4`},Me={key:0,class:`space-y-4`},Ne={class:`flex items-center justify-between`},Pe={class:`flex items-start gap-4 flex-1`},Fe={class:`p-3 rounded-full bg-slate-100 dark:bg-slate-900`},Ie={class:`flex-1`},Le={class:`flex items-center gap-2`},Re={class:`font-semibold text-gray-900 dark:text-white`},ze={class:`text-sm text-gray-500 dark:text-gray-400 mt-1`},Be={key:0,class:`text-xs text-gray-400 dark:text-gray-500 mt-1`},Ve={class:`text-right`},He={class:`text-lg font-bold text-gray-900 dark:text-white`},Ue={class:`flex justify-center my-6`},We={class:`rounded-full bg-stone-100 text-blue-950 px-0.5 py-0.5 w-fit inline-flex items-center`},Ge={class:`grid md:grid-cols-3 gap-6`},Ke={class:`mb-4`},qe={class:`text-lg font-bold text-gray-900 dark:text-white`},Je={class:`text-xs text-gray-500 dark:text-gray-400 mt-1`},Ye={class:`mb-4`},Xe={class:`text-3xl font-bold text-gray-900 dark:text-white`},Ze={class:`text-gray-500 dark:text-gray-400`},Qe={class:`space-y-2 mb-6 flex-1 text-sm`},$e={class:`text-xs text-gray-600 dark:text-gray-300`},et={__name:`ActiveSubscription`,props:{subscription:{type:Object,required:!0},payments:{type:Array,default:()=>[]},plans:{type:Array,required:!0},isYearly:{type:Boolean,default:!1}},emits:[`subscription-updated`,`subscription-cancelled`],setup(e,{emit:t}){let n=S().toast,r=e,i=t,s=h(!1),l=h(!1),d=h(r.isYearly),E=a(()=>r.subscription?r.subscription.plan||r.subscription.planName||`Current Plan`:`No Plan`),D=a(()=>r.subscription?(r.subscription.duration||r.subscription.billingCycle)===`YEARLY`?`Billed Yearly`:`Billed Monthly`:``),O=a(()=>{let e=r.subscription?.status?.toLowerCase();return e===`active`?`default`:e===`cancelled`||e===`expired`?`destructive`:e===`expiring`?`warning`:`secondary`});function A(e){return e?Number(e).toLocaleString(`en-NG`,{minimumFractionDigits:0,maximumFractionDigits:0}):`0`}function j(e){return r.subscription?(r.subscription.plan||r.subscription.planType)===e.planType:!1}async function P(e){s.value=!0;try{let t=d.value?e.idYearly:e.idMonthly,r=d.value?e.priceYearly:e.priceMonthly,a=d.value?`YEARLY`:`MONTHLY`;window.FlutterwaveCheckout||await F();let o=JSON.parse(localStorage.getItem(`user`)||`{}`),c=o.email||`user@example.com`,u=o.name||`User`;window.FlutterwaveCheckout({public_key:`FLWPUBK_TEST-SANDBOXDEMOKEY-X`,tx_ref:`SUB-CHANGE-${Date.now()}-${t}`,amount:r,currency:`NGN`,payment_plan:t,payment_options:`card,banktransfer,ussd`,customer:{email:c,name:u},customizations:{title:`Change Subscription Plan`,description:`${e.name} - ${a}`,logo:`https://seamlessly.ng/logo.png`},callback:async function(t){if(t.status===`successful`)try{await W.setSubscription({"payment.reference":`${t.transaction_id}`,"payment.provider":`FLUTTERWAVE`,plan:e.planType,duration:`${a}`}),n({title:`Success`,message:`Subscription plan changed successfully!`,variant:`success`}),l.value=!1,i(`subscription-updated`)}catch{n({title:`Error`,message:`Failed to update subscription.`,variant:`error`})}else n({title:`Payment Failed`,message:`Your payment was not successful. Please try again.`,variant:`error`});s.value=!1},onclose:function(){s.value=!1}})}catch{n({title:`Error`,message:`Failed to initiate plan change.`,variant:`error`}),s.value=!1}}function F(){return new Promise((e,t)=>{if(window.FlutterwaveCheckout){e();return}let n=document.createElement(`script`);n.src=`https://checkout.flutterwave.com/v3.js`,n.onload=e,n.onerror=t,document.head.appendChild(n)})}async function V(){if(confirm(`Are you sure you want to cancel your subscription? You'll lose access to premium features at the end of your billing period.`)){s.value=!0;try{await W.cancelSubscription(),n({title:`Cancelled`,message:`Subscription cancelled successfully. You'll retain access until the end of your billing period.`,variant:`success`}),i(`subscription-cancelled`),window.location.reload()}catch{n({title:`Error`,message:`Failed to cancel subscription.`,variant:`error`})}finally{s.value=!1}}}async function U(e){try{let t=await W.downloadReceipt(e);t.data&&t.data.url?window.open(t.data.url,`_blank`):n({title:`Error`,message:`Receipt download link not found.`,variant:`error`})}catch{n({title:`Error`,message:`Failed to download receipt.`,variant:`error`})}}return(t,n)=>(k(),x(`div`,ke,[N(G,{class:`overflow-hidden`},{default:C(()=>[N(te,{class:`bg-gradient-to-r from-primary-50 to-primary-100 dark:from-gray-800 dark:to-gray-700`},{default:C(()=>[b(`div`,Ae,[b(`div`,null,[N(ne,{class:`text-2xl`},{default:C(()=>[f(v(E.value),1)]),_:1}),N(ee,{class:`mt-2`},{default:C(()=>[f(v(D.value),1)]),_:1})]),N($,{variant:O.value,class:`text-sm`},{default:C(()=>[f(v(e.subscription?.status||`Active`),1)]),_:1},8,[`variant`])])]),_:1}),N(K,{class:`pt-6`},{default:C(()=>[b(`div`,je,[N(H,{onClick:n[0]||=e=>l.value=!0,class:`flex-1 rounded-full bg-black dark:bg-white dark:text-black text-white hover:bg-gray-800 dark:hover:bg-gray-100`,disabled:s.value},{default:C(()=>[N(g(m),{class:`mr-2 h-4 w-4`}),n[4]||=f(` Change Plan `,-1)]),_:1},8,[`disabled`]),N(H,{onClick:V,variant:`outline`,class:`flex-1 rounded-full border-gray-300 text-gray-600 hover:bg-gray-50 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-950`,disabled:s.value},{default:C(()=>[N(g(o),{class:`mr-2 h-4 w-4`}),n[5]||=f(` Cancel Subscription `,-1)]),_:1},8,[`disabled`])])]),_:1})]),_:1}),b(`div`,null,[n[7]||=b(`h2`,{class:`text-2xl font-bold text-gray-900 dark:text-white mb-4`},`Payment History`,-1),e.payments&&e.payments.length>0?(k(),x(`div`,Me,[(k(!0),x(p,null,w(e.payments,e=>(k(),u(G,{key:e.id,class:`hover:shadow-md transition-shadow`},{default:C(()=>[N(K,{class:`pt-6`},{default:C(()=>[b(`div`,Ne,[b(`div`,Pe,[b(`div`,Fe,[N(g(M),{class:`h-5 w-5 text-blue-600 dark:text-blue-400`})]),b(`div`,Ie,[b(`div`,Le,[b(`h3`,Re,v(e.plan||`Subscription Payment`),1),N($,{variant:`outline`,class:`text-xs`},{default:C(()=>[f(v(e.status||`Completed`),1)]),_:2},1024)]),b(`p`,ze,` Completed on `+v(e.timeCompleted),1),e.reference?(k(),x(`p`,Be,` Ref: `+v(e.reference),1)):y(``,!0)])]),b(`div`,Ve,[b(`p`,He,` ₦`+v(A(e.amountPaid)),1),e.id?(k(),u(H,{key:0,onClick:t=>U(e.id),variant:`ghost`,size:`sm`,class:`mt-2 text-xs`},null,8,[`onClick`])):y(``,!0)])])]),_:2},1024)]),_:2},1024))),128))])):(k(),u(G,{key:1,class:`shadow-md`},{default:C(()=>[N(K,{class:`pt-12 pb-12 text-center`},{default:C(()=>[N(g(T),{class:`h-12 w-12 text-gray-400 mx-auto mb-4`}),n[6]||=b(`p`,{class:`text-gray-500 dark:text-gray-400`},`No payment history yet`,-1)]),_:1})]),_:1}))]),N(I,{open:l.value,"onUpdate:open":n[3]||=e=>l.value=e},{default:C(()=>[N(L,{class:`max-w-5xl max-h-[90vh] overflow-y-auto`},{default:C(()=>[N(R,null,{default:C(()=>[N(B,{class:`text-2xl`},{default:C(()=>[...n[8]||=[f(`Change Your Plan`,-1)]]),_:1}),N(z,null,{default:C(()=>[...n[9]||=[f(` Select a new plan to upgrade or downgrade your subscription `,-1)]]),_:1})]),_:1}),b(`div`,Ue,[b(`div`,We,[b(`button`,{onClick:n[1]||=e=>d.value=!1,class:c([`rounded-full px-4 py-0.5 w-fit font-medium transition-all`,d.value?`text-gray-500 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white`:`bg-stone-50 dark:bg-gray-700 shadow-sm text-gray-900 dark:text-white`])},` Monthly `,2),b(`button`,{onClick:n[2]||=e=>d.value=!0,class:c([`rounded-full bg-stone-100 text-blue-950 px-4 py-0.5 w-fit font-medium transition-all`,d.value?`bg-stone-50 dark:bg-gray-700 shadow-sm text-gray-900 dark:text-white`:`text-gray-500 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white`])},[...n[10]||=[f(` Yearly `,-1),b(`span`,{class:`ml-2 text-xs text-green-600 font-bold`},`-17%`,-1)]],2)])]),b(`div`,Ge,[(k(!0),x(p,null,w(e.plans,e=>(k(),x(`div`,{key:e.name,class:`relative flex flex-col p-6 bg-white dark:bg-gray-800 rounded-sm border border-gray-200 dark:border-gray-700 shadow-sm hover:shadow-md transition-shadow`},[b(`div`,Ke,[b(`h3`,qe,v(e.name),1),b(`p`,Je,v(e.description),1)]),b(`div`,Ye,[b(`span`,Xe,` ₦`+v(A(d.value?e.priceYearly:e.priceMonthly)),1),b(`span`,Ze,`/`+v(d.value?`year`:`month`),1)]),b(`ul`,Qe,[(k(!0),x(p,null,w(e.features.slice(0,6),e=>(k(),x(`li`,{key:e,class:`flex items-start`},[N(g(_),{class:`h-4 w-4 text-green-500 mr-2 flex-shrink-0 mt-0.5`}),b(`span`,$e,v(e),1)]))),128))]),N(H,{onClick:t=>P(e),disabled:s.value||j(e),class:c([`w-full rounded-full font-semibold transition-colors`,j(e)?`bg-gray-100 dark:bg-gray-700 text-gray-400 cursor-not-allowed`:`bg-black hover:bg-gray-800 text-white dark:bg-white dark:text-black dark:hover:bg-gray-100`])},{default:C(()=>[f(v(j(e)?`Current Plan`:`Select Plan`),1)]),_:2},1032,[`onClick`,`disabled`,`class`])]))),128))])]),_:1})]),_:1},8,[`open`])]))}},tt={class:`container mx-auto py-10 px-4 max-w-7xl`},nt={__name:`Billing`,setup(e){let t=S().toast,n=h(!1),r=h(!1),i=h(null),a=h([]),o=h(!1),s=[{name:`Basic`,message:`Good for starters and mom-&-pop shops.`,priceMonthly:14500,priceYearly:145e3,idMonthly:227736,idYearly:227736,planType:`BASIC`,features:[`Transactions categorization`,`Financial statements`,`Custom dashboards`,`AI assisted planning`,`Human support`,`1 Bank account sync (NG)`,`Single user access`,`500 transactions per month`,`Bulk data export`,`Third Party integration`,`Cashflow forecast`,`Monthly Budget`,`Tax forms completion`]},{name:`SME/NGO`,message:`Perfect for growing businesses.`,priceMonthly:44500,priceYearly:445e3,idMonthly:227738,idYearly:227739,planType:`SME_NGO`,features:[`Transactions categorization`,`Financial statements`,`Custom dashboards`,`AI assisted planning`,`Live human support`,`5 Bank account sync (NG)`,`Infinite user access`,`1,000 transactions per month`,`Bulk data export`,`Third party integration`,`Cashflow forecast`,`Monthly Budget`,`Tax forms completion`]},{name:`Business`,message:`Deploy large-scale reconciliations.`,priceMonthly:1e5,priceYearly:1e6,idMonthly:227740,idYearly:227741,planType:`BUSINESS`,features:[`Transactions categorization`,`Financial statements`,`Custom dashboards`,`AI assisted planning`,`Live support`,`15 Bank account sync (NG)`,`Infinite user access`,`4,500 transactions per month`,`Bulk data export`,`Third party integration`,`Cashflow forecast`,`Monthly Budget`,`Tax forms completion`]}];D(async()=>{await c()});async function c(){try{let[e,t]=await Promise.all([W.getSubscription().catch(()=>null),W.getPayments().catch(()=>[])]);e&&e.data&&(i.value=e.data),t&&t.data?a.value=t.data:Array.isArray(t)&&(a.value=t)}catch{}}async function l(){r.value=!0;try{await W.cancelSubscription(),t({title:`Cancelled`,message:`Subscription cancelled successfully.`,variant:`success`}),i.value=null,await c(),o.value=!1}catch{t({title:`Error`,message:`Failed to cancel subscription.`,variant:`error`})}finally{r.value=!1}}return(e,t)=>(k(),x(p,null,[b(`div`,tt,[i.value?(k(),u(et,{key:0,subscription:i.value,payments:a.value,plans:s,"is-yearly":n.value,onSubscriptionUpdated:c,onSubscriptionCancelled:c},null,8,[`subscription`,`payments`,`is-yearly`])):y(``,!0)]),N(g(I),{open:o.value,"onUpdate:open":t[1]||=e=>o.value=e},{default:C(()=>[N(g(L),{class:`sm:max-w-md bg-white`},{default:C(()=>[N(g(R),null,{default:C(()=>[N(g(B),null,{default:C(()=>[...t[2]||=[f(`Cancel Subscription`,-1)]]),_:1}),N(g(z),null,{default:C(()=>[...t[3]||=[f(` Are you sure you want to cancel your subscription? You will lose access to premium features at the end of your billing period. `,-1)]]),_:1})]),_:1}),N(g(V),{class:`gap-2 sm:gap-0`},{default:C(()=>[N(H,{variant:`outline`,onClick:t[0]||=e=>o.value=!1},{default:C(()=>[...t[4]||=[f(`Keep Subscription`,-1)]]),_:1}),N(H,{variant:`destructive`,onClick:l,disabled:r.value},{default:C(()=>[f(v(r.value?`Cancelling...`:`Confirm Cancellation`),1)]),_:1},8,[`disabled`])]),_:1})]),_:1})]),_:1},8,[`open`])],64))}},rt={class:`rounded-sm`},it={class:`container mx-auto py-5 relative`},at={class:`flex justify-center`},ot={class:`flex flex-col md:flex-row gap-8 space-y-6`},st={class:`flex-1`},ct={class:`flex flex-col gap-8`},lt={class:`block md:hidden mb-6`},ut=E({__name:`Settings`,setup(a){let o=h(`general`);return(a,s)=>(k(),x(`div`,rt,[b(`div`,it,[b(`div`,at,[N(g(re),{class:`w-full p-8 shadow-none border-none bg-transparent rounded-2xl min-h-[80vh]`},{default:C(()=>[b(`div`,ot,[b(`div`,st,[s[8]||=b(`div`,{class:`flex flex-col sm:flex-row sm:justify-between w-full`},[b(`div`,null,[b(`h1`,{class:`text-2xl font-bold text-slate-800`},`Organisation Settings`),b(`p`,{class:`text-sm text-slate-600`},`Manage your organisation profile, team, and preferences`)])],-1),b(`div`,ct,[b(`div`,lt,[N(g(J),{modelValue:o.value,"onUpdate:modelValue":s[0]||=e=>o.value=e},{default:C(()=>[N(g(X),{class:`w-full border rounded-xl py-2 px-3 text-sm`},{default:C(()=>[N(g(Q),{placeholder:`Select section`})]),_:1}),N(g(Y),null,{default:C(()=>[N(g(e),null,{default:C(()=>[N(g(Z),{value:`general`},{default:C(()=>[...s[2]||=[f(`General`,-1)]]),_:1}),N(g(Z),{value:`billing`},{default:C(()=>[...s[3]||=[f(`Billing`,-1)]]),_:1})]),_:1})]),_:1})]),_:1},8,[`modelValue`])]),N(g(t),{modelValue:o.value,"onUpdate:modelValue":s[1]||=e=>o.value=e,"default-value":`general`,class:`mb-6 grid`},{default:C(()=>[s[6]||=b(`hr`,{class:`h-1 bg-slate-50 mt-10 mb-1 opacity-20`},null,-1),N(g(r),{class:`rounded-full bg-stone-100 text-blue-950 px-0.5 py-0.5 w-fit`},{default:C(()=>[N(g(i),{value:`general`,class:`px-4 py-1 rounded-full data-[state=active]:bg-stone-50 data-[state=active]:text-blue-950`},{default:C(()=>[...s[4]||=[f(` General `,-1)]]),_:1}),N(g(i),{value:`billing`,class:`px-4 py-1 rounded-full data-[state=active]:bg-stone-50 data-[state=active]:text-blue-950`},{default:C(()=>[...s[5]||=[f(` Billing `,-1)]]),_:1})]),_:1}),s[7]||=b(`hr`,{class:`h-1 bg-slate-50 mb-10 mt-2 opacity-30`},null,-1),N(g(n),{value:`general`,class:`mt-0`},{default:C(()=>[N(Oe)]),_:1}),N(g(n),{value:`billing`,class:`mt-0`},{default:C(()=>[N(nt)]),_:1})]),_:1},8,[`modelValue`])])])])]),_:1})])])]))}},[[`__scopeId`,`data-v-4ee3c8b3`]]);export{ut as default};