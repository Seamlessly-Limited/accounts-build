import{D as e,F as t,I as n,R as r,T as i,V as a,W as o,X as s,b as c,d as l,ft as u,gt as d,tt as f,v as p,vt as m,z as h}from"./index-vegYmq3T.js";import{s as g}from"./dist-CKYLtmjs.js";import{a as _,c as v,i as y,l as b,n as x}from"./VisuallyHidden-DQsaJJLU.js";import{n as S}from"./dist-7nj00zp2.js";import{t as C}from"./useArrowNavigation-BXQ95j5S.js";import{t as w,u as T}from"./useForwardExpose-CjVMQCNw.js";import{t as E}from"./useDirection-BqIOTVvD.js";import{t as D}from"./VisuallyHiddenInput-Bv8aVBal.js";import{t as O}from"./utils-CaRsx_gg.js";var[k,A]=b(`PinInputRoot`),j=e({inheritAttrs:!1,__name:`PinInputRoot`,props:{modelValue:{type:null,required:!1},defaultValue:{type:Array,required:!1},placeholder:{type:String,required:!1,default:``},mask:{type:Boolean,required:!1},otp:{type:Boolean,required:!1},type:{type:null,required:!1,default:`text`},dir:{type:String,required:!1},disabled:{type:Boolean,required:!1},id:{type:String,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1},name:{type:String,required:!1},required:{type:Boolean,required:!1}},emits:[`update:modelValue`,`complete`],setup(e,{emit:n}){let r=e,l=n,{mask:h,otp:g,placeholder:_,type:v,disabled:y,dir:b}=d(r),{forwardRef:x}=w(),C=E(b),O=T(r,`modelValue`,l,{defaultValue:r.defaultValue??[],passive:!0,deep:!0}),k=p(()=>Array.isArray(O.value)?[...O.value]:[]),j=u(new Set);function M(e){j.value.add(e)}let N=p(()=>r.type===`number`),P=p(()=>k.value.filter(e=>!!e||N.value&&e===0).length===j.value.size);return s(O,()=>{P.value&&l(`complete`,O.value)},{deep:!0}),A({modelValue:O,currentModelValue:k,mask:h,otp:g,placeholder:_,type:v,dir:C,disabled:y,isCompleted:P,inputElements:j,onInputElementChange:M,isNumericMode:N}),(e,n)=>(a(),c(m(S),t(e.$attrs,{ref:m(x),dir:m(C),"data-complete":P.value?``:void 0,"data-disabled":m(y)?``:void 0}),{default:f(()=>[o(e.$slots,`default`,{modelValue:m(O)}),i(D,{id:e.id,as:`input`,feature:`focusable`,tabindex:`-1`,value:k.value.join(``),name:e.name??``,disabled:m(y),required:e.required,onFocus:n[0]||=e=>Array.from(j.value)?.[0]?.focus()},null,8,[`id`,`value`,`name`,`disabled`,`required`])]),_:3},16,[`dir`,`data-complete`,`data-disabled`]))}}),M=e({__name:`PinInputInput`,props:{index:{type:Number,required:!0},disabled:{type:Boolean,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:`input`}},setup(e){let t=e,i=k(),u=p(()=>Array.from(i.inputElements.value)),d=p(()=>i.currentModelValue.value[t.index]),g=p(()=>t.disabled||i.disabled.value),_=p(()=>i.otp.value),y=p(()=>i.mask.value),{primitiveElement:b,currentElement:w}=x();function T(e){let n=e.target;if((e.data?.length??0)>1){P(n.value);return}if(i.isNumericMode.value&&!/^\d*$/.test(n.value)){n.value=n.value.replace(/\D/g,``);return}n.value=e.data||n.value.slice(-1),I(t.index,n.value);let r=u.value[t.index+1];r&&r.focus()}function E(){let e=w.value;n(()=>{e&&!e.value&&(e.placeholder=i.placeholder.value)})}function D(e){C(e,v(),void 0,{itemsArray:u.value,focus:!0,loop:!1,arrowKeyOptions:`horizontal`,dir:i.dir.value})}function O(e){if(e.preventDefault(),e.target.value)I(t.index,``);else{let e=u.value[t.index-1];e&&(e.focus(),I(t.index-1,``))}}function A(e){e.key===`Delete`&&(e.preventDefault(),I(t.index,``))}function j(e){let t=e.target;t.setSelectionRange(1,1),t.value||(t.placeholder=``)}function M(e){E()}function N(e){e.preventDefault();let t=e.clipboardData;if(!t)return;let n=t.getData(`text`);P(n)}function P(e){let n=[...i.currentModelValue.value],r=e.length>=u.value.length?0:t.index,a=Math.min(r+e.length,u.value.length);for(let t=r;t<a;t++){let a=u.value[t],o=e[t-r];i.isNumericMode.value&&!/^\d*$/.test(o)||(n[t]=o,a.focus())}i.modelValue.value=n,u.value[a]?.focus()}function F(e){let t=e.length-1;for(;t>=0&&e[t]===``;)e.pop(),t--;return e}function I(e,t){let n=[...i.currentModelValue.value];if(i.isNumericMode.value){let r=+t;t===``||isNaN(r)?delete n[e]:n[e]=r}else n[e]=t;i.modelValue.value=F(n)}return s(d,()=>{d.value||E()}),r(()=>{i.onInputElementChange(w.value)}),h(()=>{i.inputElements?.value.delete(w.value)}),(e,t)=>(a(),c(m(S),{ref_key:`primitiveElement`,ref:b,autocapitalize:`none`,as:e.as,"as-child":e.asChild,autocomplete:_.value?`one-time-code`:`false`,type:y.value?`password`:`text`,inputmode:m(i).isNumericMode.value?`numeric`:`text`,pattern:m(i).isNumericMode.value?`[0-9]*`:void 0,placeholder:m(i).placeholder.value,value:d.value,disabled:g.value,"data-disabled":g.value?``:void 0,"data-complete":m(i).isCompleted.value?``:void 0,"aria-label":`pin input ${e.index+1} of ${u.value.length}`,onInput:t[0]||=e=>T(e),onKeydown:[l(D,[`left`,`right`,`up`,`down`,`home`,`end`]),l(O,[`backspace`]),l(A,[`delete`])],onFocus:j,onBlur:M,onPaste:N},{default:f(()=>[o(e.$slots,`default`)]),_:3},8,[`as`,`as-child`,`autocomplete`,`type`,`inputmode`,`pattern`,`placeholder`,`value`,`disabled`,`data-disabled`,`data-complete`,`aria-label`]))}}),N=e({__name:`PinInput`,props:{modelValue:{default:()=>[]},defaultValue:{},placeholder:{},mask:{type:Boolean},otp:{type:Boolean},type:{},dir:{},disabled:{type:Boolean},id:{},asChild:{type:Boolean},as:{},name:{},required:{type:Boolean},class:{}},emits:[`update:modelValue`,`complete`],setup(e,{emit:n}){let r=e,i=n,s=g(r,`class`),l=y(s,i);return(e,n)=>(a(),c(m(j),t(m(l),{class:m(O)(`flex gap-2 items-center`,r.class)}),{default:f(()=>[o(e.$slots,`default`)]),_:3},16,[`class`]))}}),P=e({__name:`PinInputGroup`,props:{asChild:{type:Boolean},as:{},class:{}},setup(e){let n=e,r=g(n,`class`),i=_(r);return(e,r)=>(a(),c(m(S),t(m(i),{class:m(O)(`flex items-center`,n.class)}),{default:f(()=>[o(e.$slots,`default`)]),_:3},16,[`class`]))}}),F=e({__name:`PinInputSlot`,props:{index:{},disabled:{type:Boolean},asChild:{type:Boolean},as:{},class:{}},setup(e){let n=e,r=g(n,`class`),i=_(r);return(e,r)=>(a(),c(m(M),t(m(i),{class:m(O)(`relative text-center focus:outline-none focus:ring-2 focus:ring-ring focus:relative focus:z-10 flex h-9 w-9 items-center justify-center border-y border-r border-input text-sm transition-all first:rounded-l-md first:border-l last:rounded-r-md`,n.class)}),null,16,[`class`]))}});export{P as n,N as r,F as t};