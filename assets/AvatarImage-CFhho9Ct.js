import{Aa as e,Gi as t,Hr as n,Ii as r,Ir as i,Oa as a,Ri as o,_a as s,aa as c,da as l,di as u,ea as d,ei as f,fa as p,ga as m,ki as h,na as g,ta as _,wa as v,zi as y}from"./index-BW6FH5S4.js";var[b,x]=u(`AvatarRoot`),S=t({__name:`AvatarRoot`,props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:`span`}},setup(t){return n(),x({imageLoadingStatus:v(`idle`)}),(t,n)=>(g(),o(e(i),{"as-child":t.asChild,as:t.as},{default:m(()=>[c(t.$slots,`default`)]),_:3},8,[`as-child`,`as`]))}}),C=t({__name:`AvatarFallback`,props:{delayMs:{type:Number,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:`span`}},setup(t){let r=t,a=b();n();let s=v(r.delayMs===void 0);return p(e=>{if(r.delayMs&&f){let t=window.setTimeout(()=>{s.value=!0},r.delayMs);e(()=>{window.clearTimeout(t)})}}),(t,n)=>s.value&&e(a).imageLoadingStatus.value!==`loaded`?(g(),o(e(i),{key:0,"as-child":t.asChild,as:t.as},{default:m(()=>[c(t.$slots,`default`)]),_:3},8,[`as-child`,`as`])):y(`v-if`,!0)}});function w(e,t){return e?t?(e.src!==t&&(e.src=t),e.complete&&e.naturalWidth>0?`loaded`:`loading`):`error`:`idle`}function T(e,{referrerPolicy:t,crossOrigin:n}={}){let i=v(!1),a=v(null),o=r(()=>i.value?(!a.value&&f&&(a.value=new window.Image),a.value):null),s=v(w(o.value,e.value)),c=e=>()=>{i.value&&(s.value=e)};return d(()=>{i.value=!0,p(r=>{let i=o.value;if(!i)return;s.value=w(i,e.value);let a=c(`loaded`),l=c(`error`);i.addEventListener(`load`,a),i.addEventListener(`error`,l),t?.value&&(i.referrerPolicy=t.value),typeof n?.value==`string`&&(i.crossOrigin=n.value),r(()=>{i.removeEventListener(`load`,a),i.removeEventListener(`error`,l)})})}),_(()=>{i.value=!1}),s}var E=t({__name:`AvatarImage`,props:{src:{type:String,required:!0},referrerPolicy:{type:null,required:!1},crossOrigin:{type:null,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:`img`}},emits:[`loadingStatusChange`],setup(t,{emit:r}){let u=t,d=r,{src:f,referrerPolicy:p,crossOrigin:_}=a(u);n();let v=b(),y=T(f,{referrerPolicy:p,crossOrigin:_});return l(y,e=>{d(`loadingStatusChange`,e),e!==`idle`&&(v.imageLoadingStatus.value=e)},{immediate:!0}),(t,n)=>s((g(),o(e(i),{role:`img`,"as-child":t.asChild,as:t.as,src:e(f),"referrer-policy":e(p)},{default:m(()=>[c(t.$slots,`default`)]),_:3},8,[`as-child`,`as`,`src`,`referrer-policy`])),[[h,e(y)===`loaded`]])}});export{C as n,S as r,E as t};