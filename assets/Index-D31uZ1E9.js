import"./useArrowNavigation-siWGBYoD.js";import"./ConfigProvider-BeNpEDZu.js";import"./useDirection-CkCaHLjJ.js";import"./useId-C9uHTJK1.js";import"./VisuallyHiddenInput-Cr3vcfNb.js";import"./Label-BQWlwCJI.js";import{n as e,r as t,t as n}from"./PinInputSlot-D1MaWwH7.js";import{Bi as r,Hi as i,It as a,Li as o,Ni as s,Pa as c,Ui as l,a as u,ga as d,i as f,ia as p,ji as m,na as h,oa as g,s as _,wi as v,zi as y}from"./index-BW6FH5S4.js";import{t as b}from"./Input-AKTRhZx5.js";import{n as x}from"./button-Cg1Yo4L-.js";import{t as S}from"./Card-DmhOqSpI.js";import{t as C}from"./CardContent-BAgx-xvK.js";import{t as w}from"./CardDescription-D_x0yKEn.js";import{n as T,t as E}from"./CardTitle-C1RpEhlV.js";import{t as D}from"./BackgroundAnimation-D58OrQ52.js";import{t as O}from"./Label-CWz-ReQU.js";import{i as k,n as A,r as j}from"./form-Bk3copDF.js";var M={components:{Card:S,CardHeader:T,CardTitle:E,CardDescription:w,CardContent:C,Button:x,Input:b,Label:O,BackgroundAnimation:D,FormField:k,FormItem:A,FormControl:j,PinInput:t,PinInputGroup:e,PinInputSlot:n,Loader2:a},data(){return{email:``,token:[],loading:!1,message:``,requestingReset:!0,resendCount:0,resendWaitTime:0}},computed:{formDisabled(){return this.loading||void 0}},methods:{countDown(){this.resendWaitTime=60+this.resendCount;let e=setInterval(()=>{this.resendWaitTime<=1?(clearInterval(e),this.resendWaitTime=0):this.resendWaitTime--},1e3)},async requestPasswordReset(){if(!this.email)return;this.loading=!0;let e=u();try{if(this.resendCount>90)throw Error(`Too many attempts. Please try again later.`);let{message:e}=await _.requestPasswordReset(this.email);this.requestingReset=!1,this.resendWaitTime=0,this.resendCount+=30,this.countDown(),this.message=e}catch(t){e.toast({message:t.message,duration:5e3,variant:`error`})}this.loading=!1},async completeVerification(){let e=u(),t=``;try{if(t=this.token.join(``),t.length<6)throw Error(`Invalid code provided!`)}catch{e.toast({message:`Please enter the full 6-digit code.`,duration:3e3,variant:`error`});return}this.loading=!0;try{await _.validatePasswordReset(t),this.$router.push(`/password-reset/complete`)}catch(t){e.toast({message:t.message,duration:5e3,variant:`error`})}this.loading=!1}}},N={class:`min-h-screen flex flex-col items-center justify-center bg-stone-100 relative overflow-hidden`},P={key:`email`,class:`space-y-4 my-2`},F={class:`space-y-2`},I={class:`flex items-center gap-2`},L={key:`otp`,class:`space-y-6 mt-4 w-full`},R={class:`flex flex-col items-center gap-6`},z={class:`text-center px-6`},B=[`innerHTML`],V={class:`flex justify-end mt-6`},H={key:0},U={key:1,class:`flex items-center gap-2`},W={key:0,class:`mt-6 text-sm text-center`},G={key:0,class:`text-gray-500`},K={key:1,class:`text-gray-400 font-medium tracking-tight`};function q(e,t,n,a,u,f){let _=g(`BackgroundAnimation`),b=g(`CardTitle`),x=g(`CardDescription`),S=g(`CardHeader`),C=g(`Label`),w=g(`Input`),T=g(`PinInputSlot`),E=g(`PinInputGroup`),D=g(`PinInput`),O=g(`FormControl`),k=g(`FormItem`),A=g(`FormField`),j=g(`Loader2`),M=g(`Button`),q=g(`CardContent`),J=g(`Card`);return h(),r(`div`,N,[l(_),l(J,{class:`relative z-10 w-full max-w-lg rounded-2xl shadow-md border-solid border-slate-50 backdrop-blur bg-white/80 transition-all duration-500`},{default:d(()=>[l(S,{class:`space-y-2`},{default:d(()=>[l(b,{class:`text-2xl font-semibold`},{default:d(()=>[...t[4]||=[i(`Reset your password`,-1)]]),_:1}),l(x,null,{default:d(()=>[...t[5]||=[i(`Secure your account with a new password.`,-1)]]),_:1})]),_:1}),l(q,{class:``},{default:d(()=>[o(`form`,{onSubmit:t[3]||=m(e=>u.requestingReset?f.requestPasswordReset():f.completeVerification(),[`prevent`])},[l(v,{name:`slide-up`,mode:`out-in`},{default:d(()=>[u.requestingReset?(h(),r(`div`,P,[o(`div`,F,[l(C,{for:`email`,class:`text-gray-700`},{default:d(()=>[...t[6]||=[i(`Email Address`,-1)]]),_:1}),o(`div`,I,[l(w,{id:`email`,type:`email`,placeholder:`The email address linked to your account`,modelValue:u.email,"onUpdate:modelValue":t[0]||=e=>u.email=e,disabled:f.formDisabled,required:``,class:`flex-1 focus:ring-black border-gray-200`},null,8,[`modelValue`,`disabled`])])])])):(h(),r(`div`,L,[o(`div`,R,[l(A,{name:`pin`},{default:d(()=>[l(k,null,{default:d(()=>[l(O,null,{default:d(()=>[l(D,{class:`rounded-xl`,id:`pin-input`,modelValue:u.token,"onUpdate:modelValue":t[1]||=e=>u.token=e,placeholder:`○`,onComplete:f.completeVerification},{default:d(()=>[l(E,{class:`gap-2`},{default:d(()=>[(h(),r(s,null,p(6,(e,t)=>l(T,{key:e,index:t,class:`h-12 w-12 rounded-xl border-gray-200 bg-white text-lg font-semibold focus:ring-2 focus:ring-black transition-all`},null,8,[`index`])),64))]),_:1})]),_:1},8,[`modelValue`,`onComplete`])]),_:1})]),_:1})]),_:1}),o(`div`,z,[o(`p`,{class:`text-xs text-gray-500 leading-relaxed font-medium`,innerHTML:u.message},null,8,B)])])]))]),_:1}),o(`div`,V,[l(M,{type:`submit`,disabled:u.loading,class:`bg-black text-white rounded-full px-10 h-10 hover:bg-gray-800 transition-all active:scale-95 disabled:opacity-30`},{default:d(()=>[u.loading?(h(),r(`span`,U,[l(j,{class:`h-4 w-4 animate-spin`}),t[7]||=i(` Processing `,-1)])):(h(),r(`span`,H,`Continue`))]),_:1},8,[`disabled`])]),u.requestingReset?y(``,!0):(h(),r(`div`,W,[u.resendWaitTime==0?(h(),r(`span`,G,[t[8]||=i(` Didn’t get an email? `,-1),o(`span`,{class:`text-black font-bold cursor-pointer hover:underline decoration-2 underline-offset-4`,onClick:t[2]||=(...e)=>f.requestPasswordReset&&f.requestPasswordReset(...e)},` Resend Code `)])):(h(),r(`span`,K,`Resend available in `+c(u.resendWaitTime)+`s`,1))]))],32)]),_:1})]),_:1}),t[9]||=o(`div`,{class:`mt-8 text-center w-full max-w-lg px-2 animate-in fade-in slide-in-from-bottom-4 duration-700`},[o(`p`,{class:`text-xs text-gray-400`},[i(` Can’t access your email account? `),o(`a`,{href:`https://seamlessly.ng/contact`,class:`text-gray-900 font-bold hover:underline decoration-2 underline-offset-2`},`Contact Support`)])],-1)])}var J=f(M,[[`render`,q],[`__scopeId`,`data-v-22ef2228`]]);export{J as default};