import"./useFormControl-BWOmmYiS.js";import"./useNonce-VOgClyGr.js";import"./nullish-CfjOSA4G.js";import"./ConfigProvider-BwNXqMge.js";import"./useHideOthers-C416Re6d.js";import"./useDirection-DYJPYRsI.js";import"./PopperAnchor-BHV4Kv-d.js";import"./useId-BEfc-0Pq.js";import"./PopperContent-DYn2KUeQ.js";import"./useTypeahead-b61J-STi.js";import"./Teleport-DrGXNRYb.js";import"./utils-BEsFB3CI.js";import"./SelectViewport-BKt93lbc.js";import{Bi as e,C as t,Et as ee,Ft as n,H as r,Hi as i,Ki as a,La as o,Li as s,Lt as c,M as l,Oa as u,Pa as d,Ra as f,Ui as p,Vi as m,Wi as h,Yn as g,ba as _,ca as v,da as y,dn as te,dt as ne,fn as b,hr as re,ia as ie,ln as ae,mt as oe,o as x,oa as S,pr as C,qi as w,rr as T,rt as E,tt as D,ur as O,vn as k,zt as A}from"./index-CTHZVx0Q.js";import{t as j}from"./WorkspaceStore-gf1m868h.js";import{n as M}from"./button-BXx_oIr0.js";import{t as N}from"./Input-CYUkGq0t.js";import{a as P,i as F,n as I,r as L,t as R}from"./SelectValue-D9lo6-Gu.js";var z={class:`h-full flex flex-col bg-gray-50`},B={class:`flex-none px-6 py-4 bg-white border-b border-gray-200 flex items-center justify-between`},V={class:`flex items-center space-x-3`},H={class:`w-10 h-10 rounded-xl bg-slate-600 flex items-center justify-center`},U={class:`text-sm text-gray-500`},W={class:`flex-none px-6 py-3 bg-white border-b border-gray-100 flex items-center gap-4`},se={class:`relative flex-1 max-w-md`},G={class:`flex-1 overflow-auto`},K={key:0,class:`flex justify-center items-center h-64`},ce={key:1,class:`flex flex-col items-center justify-center h-64 text-gray-500`},le={key:2,class:`divide-y divide-gray-100`},ue=[`onClick`],de={class:`flex-1 min-w-0`},fe={class:`flex items-center gap-2`},pe={class:`font-medium text-gray-900`},me={key:0,class:`px-1.5 py-0.5 text-xs bg-gray-100 text-gray-600 rounded`},he={key:1,class:`px-1.5 py-0.5 text-xs bg-blue-100 text-blue-600 rounded`},ge={key:0,class:`text-sm text-gray-500 truncate`},_e={class:`flex-shrink-0 flex items-center gap-2`},ve={class:`px-2 py-1 text-xs font-medium bg-gray-100 text-gray-700 rounded-full flex items-center gap-1`},ye={class:`flex-shrink-0 text-right w-20`},be={class:`text-sm text-gray-500`},xe={__name:`DocTypeList`,props:{doctype:{type:String,default:`DocType`}},setup(xe){let q=j(),J=u(!0),Y=u([]),X=u(``),Z=u(``),Se={FileCode:k,FileText:b,Users:t,Package:ee,Receipt:ne,Box:O,Store:r,Truck:l,BookOpen:C,Bell:re,Mail:n,Lock:c,File:te,Folder:ae,Calendar:T,Settings:D},Ce=e(()=>{let e=new Set(Y.value.map(e=>e.module).filter(Boolean));return Array.from(e).sort()}),Q=e(()=>{let e=Y.value;if(X.value){let t=X.value.toLowerCase();e=e.filter(e=>e.name.toLowerCase().includes(t)||e.description?.toLowerCase().includes(t))}return Z.value&&Z.value!==`__all__`&&(e=e.filter(e=>e.module===Z.value)),e});async function we(){J.value=!0;try{Y.value=(await x.get(`/org/doctypes`,{authorizeRequest:!0,organisationAware:!0}))?.data||[]}catch(e){console.error(`Failed to load DocTypes:`,e)}finally{J.value=!1}}function Te(e){console.log(`Opening DocType:`,e.name),q.openTab({id:`doctype-form-DocType-${e.name}`,title:e.name,icon:e.icon||`FileCode`,type:`doctype-form`,doctype:`DocType`,docName:e.name,isNew:!1,closable:!0})}function $(){console.log(`Creating new DocType`),q.openTab({id:`doctype-form-DocType-new`,title:`New DocType`,icon:`FileCode`,type:`doctype-form`,doctype:`DocType`,isNew:!0,closable:!0})}return ie(()=>{we()}),(e,t)=>(S(),h(`div`,z,[m(`header`,B,[m(`div`,V,[m(`div`,H,[w(d(k),{class:`w-5 h-5 text-white`})]),m(`div`,null,[t[2]||=m(`h1`,{class:`text-xl font-bold text-gray-900`},`DocType`,-1),m(`p`,U,f(Y.value.length)+` DocTypes`,1)])]),w(d(M),{onClick:$,class:`rounded-full`},{default:_(()=>[w(d(oe),{class:`w-4 h-4 mr-2`}),t[3]||=a(` New `,-1)]),_:1})]),m(`div`,W,[m(`div`,se,[w(d(E),{class:`absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400`}),w(d(N),{modelValue:X.value,"onUpdate:modelValue":t[0]||=e=>X.value=e,placeholder:`Search DocTypes...`,class:`pl-10`},null,8,[`modelValue`])]),w(d(P),{modelValue:Z.value,"onUpdate:modelValue":t[1]||=e=>Z.value=e},{default:_(()=>[w(d(I),{class:`w-40 bg-white`},{default:_(()=>[w(d(R),{placeholder:`All Modules`})]),_:1}),w(d(F),null,{default:_(()=>[w(d(L),{value:`__all__`},{default:_(()=>[...t[4]||=[a(`All Modules`,-1)]]),_:1}),(S(!0),h(s,null,v(Ce.value,e=>(S(),i(d(L),{key:e,value:e},{default:_(()=>[a(f(e),1)]),_:2},1032,[`value`]))),128))]),_:1})]),_:1},8,[`modelValue`])]),m(`div`,G,[J.value?(S(),h(`div`,K,[w(d(A),{class:`w-8 h-8 animate-spin text-gray-400`})])):Q.value.length===0?(S(),h(`div`,ce,[w(d(k),{class:`w-12 h-12 mb-3 text-gray-300`}),t[6]||=m(`p`,null,`No DocTypes found`,-1),w(d(M),{onClick:$,variant:`link`,class:`mt-2`},{default:_(()=>[...t[5]||=[a(` Create your first DocType `,-1)]]),_:1})])):(S(),h(`div`,le,[(S(!0),h(s,null,v(Q.value,e=>(S(),h(`div`,{key:e.name,class:`px-6 py-4 bg-white hover:bg-gray-50 cursor-pointer transition-colors flex items-center gap-4`,onClick:t=>Te(e)},[m(`div`,{class:`w-10 h-10 rounded-lg flex items-center justify-center flex-shrink-0`,style:o({backgroundColor:e.color||`#6366F1`})},[(S(),i(y(Se[e.icon]||d(b)),{class:`w-5 h-5 text-white`}))],4),m(`div`,de,[m(`div`,fe,[m(`span`,pe,f(e.name),1),e.is_child?(S(),h(`span`,me,` Child `)):p(``,!0),e.is_submittable?(S(),h(`span`,he,` Submittable `)):p(``,!0)]),e.description?(S(),h(`p`,ge,f(e.description),1)):p(``,!0)]),m(`div`,_e,[m(`span`,ve,[e.module===`System`?(S(),i(d(c),{key:0,class:`w-3 h-3`})):p(``,!0),a(` `+f(e.module),1)])]),m(`div`,ye,[m(`span`,be,f(e.fields?.length||0)+` fields`,1)]),w(d(g),{class:`w-5 h-5 text-gray-300 flex-shrink-0`})],8,ue))),128))]))])]))}};export{xe as default};