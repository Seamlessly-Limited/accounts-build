import{dt as e,v as t}from"./index-BbbjTprl.js";var n=9,r=1e6,i={ADD_TOAST:`ADD_TOAST`,UPDATE_TOAST:`UPDATE_TOAST`,DISMISS_TOAST:`DISMISS_TOAST`,REMOVE_TOAST:`REMOVE_TOAST`},a=0;function o(){return a=(a+1)%Number.MAX_VALUE,a.toString()}var s=new Map;function c(e){if(s.has(e))return;let t=setTimeout(()=>{s.delete(e),u({type:i.REMOVE_TOAST,toastId:e})},r);s.set(e,t)}var l=e({toasts:[]});function u(e){switch(e.type){case i.ADD_TOAST:l.value.toasts=[e.toast,...l.value.toasts].slice(0,n);break;case i.UPDATE_TOAST:l.value.toasts=l.value.toasts.map(t=>t.id===e.toast.id?{...t,...e.toast}:t);break;case i.DISMISS_TOAST:{let{toastId:t}=e;t?c(t):l.value.toasts.forEach(e=>{c(e.id)}),l.value.toasts=l.value.toasts.map(e=>e.id===t||t===void 0?{...e,open:!1}:e);break}case i.REMOVE_TOAST:e.toastId===void 0?l.value.toasts=[]:l.value.toasts=l.value.toasts.filter(t=>t.id!==e.toastId);break}}function d(){return{toasts:t(()=>l.value.toasts),toast:f,dismiss:e=>u({type:i.DISMISS_TOAST,toastId:e})}}function f(e){let t=o(),n=e=>u({type:i.UPDATE_TOAST,toast:{...e,id:t}}),r=()=>u({type:i.DISMISS_TOAST,toastId:t});return u({type:i.ADD_TOAST,toast:{...e,id:t,open:!0,onOpenChange:e=>{e||r()}}}),{id:t,dismiss:r,update:n}}export{d as t};