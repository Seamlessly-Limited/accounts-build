import"./useFormControl-BWOmmYiS.js";import"./useNonce-VOgClyGr.js";import"./nullish-CfjOSA4G.js";import"./ConfigProvider-BwNXqMge.js";import"./useHideOthers-C416Re6d.js";import"./useDirection-DYJPYRsI.js";import"./PopperAnchor-BHV4Kv-d.js";import"./useId-BEfc-0Pq.js";import"./PopperContent-DYn2KUeQ.js";import"./useTypeahead-b61J-STi.js";import"./Teleport-DrGXNRYb.js";import"./utils-BEsFB3CI.js";import"./utils-DlRpuNf9.js";import"./RovingFocusGroup-DqYe3043.js";import"./RovingFocusItem-DGQRTR_g.js";import"./SelectViewport-BKt93lbc.js";import{t as e}from"./SelectGroup-d6DuvcVX.js";import{a as t,i as n,n as r,t as i}from"./tabs-BK26r2nl.js";import{$i as a,Bi as o,Cr as ee,Dr as te,E as ne,Fa as s,Gn as re,Hi as c,Ki as l,La as ie,Li as u,Oa as d,Pa as f,Pt as p,Qn as m,Ra as h,T as g,Ui as _,Vi as v,Wi as y,Wt as ae,Yn as b,ba as x,ca as S,ha as oe,i as se,ia as ce,in as le,n as ue,o as C,oa as w,qi as T,r as de,zt as E}from"./index-CTHZVx0Q.js";import{t as D}from"./OrganisationService-CcVH0X3p.js";import"./button-BXx_oIr0.js";import{t as O}from"./Card-jzahid1F.js";import{a as k,i as A,n as j,r as M,t as N}from"./SelectValue-DoC6zE2e.js";import{t as P}from"./TransactionService-C-zMtO4g.js";var F=`/org/logs`,I={getLogs(e){return C.get(F,{query:e,organisationAware:!0,authorizeRequest:!0})}},L={class:`rounded-sm`},R={class:`container mx-auto py-5 relative`},z={class:`flex justify-center`},B={class:`flex flex-col md:flex-row gap-8 space-y-6`},V={class:`flex-1`},H={class:`flex flex-col gap-8`},fe={class:`block md:hidden mb-6`},pe={class:`min-h-[220px] flex items-center justify-center text-slate-500`},me={class:`flex flex-col md:flex-row gap-4 w-full px-0`},he={class:`md:min-w-[375px]`},ge={class:`flex items-center justify-between`},_e={class:`text-right`},ve={class:`rounded-full size-10 text-xs bg-blue-400 text-white flex items-center justify-center`},ye={class:`space-y-4`},be=[`onClick`],xe={class:`flex-1`},Se={class:`flex items-center justify-between`},Ce={class:`font-medium text-slate-700`},we={class:`text-sm text-slate-500`},Te={class:`pt-1 flex items-center gap-2`},Ee={key:0,class:`rounded-full w-6 h-6 bg-blue-500 text-white flex items-center justify-center`},De={key:1,class:`rounded-full w-6 h-6 bg-slate-200 text-slate-500 flex items-center justify-center`},Oe={class:`grid grid-cols-1 sm:grid-cols-2 gap-4 w-full`},ke={class:`space-y-4`},Ae={key:0,class:`flex items-end gap-1 h-32`},je=[`title`],U={key:1,class:`h-32 flex items-center justify-center text-slate-400`},Me={key:0,class:`flex justify-center py-8`},Ne={key:1,class:`text-center py-8`},Pe={key:2,class:`space-y-3`},Fe={class:`flex items-center gap-3`},Ie={class:`font-medium text-slate-700 line-clamp-1`},Le={class:`text-sm text-slate-500`},Re={class:`space-y-6`},ze={key:0,class:`flex justify-center py-8`},Be={key:1,class:`text-center py-8`},Ve={key:2,class:`relative`},He={class:`space-y-4`},Ue={class:`bg-slate-50 rounded-lg p-4`},We={class:`flex items-start justify-between`},Ge={class:`font-medium text-slate-700`},Ke={class:`text-sm text-slate-500 mt-1`},qe={class:`inline-flex items-center gap-1`},Je={class:`text-xs text-slate-400`},Ye={key:0,class:`mt-2`},Xe={class:`inline-flex items-center px-2 py-0.5 rounded-full text-xs bg-slate-200 text-slate-600`},W=se({__name:`Overview`,setup(se){let C=de();ue();let F=a(`openApplications`),W=d(`overview`);d({});let G=d([]),K=d(!1),q=d([]),J=d(!1),Y=d([]),X=d(!1),Ze=o(()=>G.value.slice(0,20));function Qe(e){if(G.value.length===0)return 0;let t=Math.max(...G.value.map(e=>Math.abs(e.amount)));return t===0?0:Math.abs(e)/t*100}function Z(e){return new Intl.NumberFormat(`en-NG`,{style:`currency`,currency:`NGN`,minimumFractionDigits:0,maximumFractionDigits:0}).format(e)}function Q(e){return e?new Date(e).toLocaleDateString(`en-GB`,{day:`numeric`,month:`short`,year:`numeric`}):``}function $e(e){if(!e)return``;let t=new Date(e),n=new Date-t,r=Math.floor(n/6e4),i=Math.floor(n/36e5),a=Math.floor(n/864e5);return r<1?`Just now`:r<60?`${r}m ago`:i<24?`${i}h ago`:a<7?`${a}d ago`:Q(e)}async function et(){K.value=!0;try{let e=await P.getTransactions({size:20,page:0}),t=e?.data||e;G.value=t?.content||(Array.isArray(t)?t:[])}catch(e){console.error(`Failed to load transactions:`,e),G.value=[]}finally{K.value=!1}}async function tt(){J.value=!0;try{let e=await I.getLogs({size:20,page:0}),t=e?.data||e;q.value=t?.content||(Array.isArray(t)?t:[])}catch(e){console.error(`Failed to load logs:`,e),q.value=[]}finally{J.value=!1}}oe(W,e=>{e===`transactions`&&G.value.length===0&&et(),e===`activity`&&q.value.length===0&&tt()}),ce(async()=>{await nt()});async function nt(){X.value=!0;try{let e=await D.getSetupChecklist();e?.data?.items&&(Y.value=e.data.items)}catch(e){console.error(`Failed to load checklist:`,e),Y.value=[{key:`team`,title:`Add team members`,description:`Invite collaborators to your organisation`,done:!1,route:`/team`},{key:`jurisdiction`,title:`Set tax jurisdiction`,description:`Configure your tax authorities and policies`,done:!1,route:`/tax-jurisdiction`}]}finally{X.value=!1}}let rt=o(()=>{let e=Y.value.length;if(e===0)return 0;let t=Y.value.filter(e=>e.done).length;return Math.round(t/e*100)});function it(e){e.route&&C.push(e.route)}function $(e){let t={team:`/team`,vault:`/vault`,jurisdiction:`/tax-jurisdiction`,settings:`/settings`};t[e]&&C.push(t[e])}return(a,o)=>(w(),y(`div`,L,[v(`div`,R,[v(`div`,z,[T(f(O),{class:`w-full p-8 shadow-none border-none bg-transparent rounded-2xl min-h-[80vh]`},{default:x(()=>[v(`div`,B,[v(`div`,V,[o[30]||=v(`div`,{class:`flex flex-col sm:flex-row sm:justify-between w-full`},[v(`div`,null,[v(`h1`,{class:`text-2xl font-bold text-slate-800`},`Organisation Overview`),v(`p`,{class:`text-sm text-slate-600`},`Quick actions and charts for your workspace`)])],-1),v(`div`,H,[v(`div`,fe,[T(f(k),{modelValue:W.value,"onUpdate:modelValue":o[0]||=e=>W.value=e},{default:x(()=>[T(f(j),{class:`w-full border rounded-xl py-2 px-3 text-sm`},{default:x(()=>[T(f(N),{placeholder:`Select section`})]),_:1}),T(f(A),null,{default:x(()=>[T(f(e),null,{default:x(()=>[T(f(M),{value:`overview`},{default:x(()=>[...o[6]||=[l(`Overview`,-1)]]),_:1}),T(f(M),{value:`transactions`},{default:x(()=>[...o[7]||=[l(`Transactions`,-1)]]),_:1}),T(f(M),{value:`activity`},{default:x(()=>[...o[8]||=[l(`Activity`,-1)]]),_:1})]),_:1})]),_:1})]),_:1},8,[`modelValue`])]),T(f(t),{modelValue:W.value,"onUpdate:modelValue":o[5]||=e=>W.value=e,"default-value":`overview`,class:`mb-6`},{default:x(()=>[o[28]||=v(`hr`,{class:`h-1 bg-slate-50 mb-1 mt-10 opacity-20`},null,-1),T(f(r),{class:`rounded-full bg-stone-100/50 text-blue-950 px-0.5 py-0.5 w-fit`},{default:x(()=>[T(f(i),{value:`overview`,class:`px-5 py-1 rounded-full data-[state=active]:text-blue-900 transition-colors`},{default:x(()=>[...o[9]||=[l(` Start `,-1)]]),_:1}),T(f(i),{value:`transactions`,class:`px-5 py-1 rounded-full data-[state=active]:text-blue-900 transition-colors`},{default:x(()=>[...o[10]||=[l(` Overview `,-1)]]),_:1}),T(f(i),{value:`activity`,class:`px-5 py-1 rounded-full data-[state=active]:text-blue-900 transition-colors`},{default:x(()=>[...o[11]||=[l(` Activity `,-1)]]),_:1})]),_:1}),o[29]||=v(`hr`,{class:`h-1 bg-slate-50 mt-2 mb-10 opacity-30`},null,-1),T(f(n),{value:`overview`,class:`mt-0`},{default:x(()=>[v(`div`,pe,[v(`div`,me,[v(`aside`,he,[T(f(O),{class:`p-6 sticky top-24`},{default:x(()=>[v(`div`,ge,[o[12]||=v(`div`,null,[v(`h4`,{class:`text-lg font-semibold text-slate-800`},`Setup Checklist `),v(`p`,{class:`text-sm text-slate-600`},`Complete these steps to finish setup `)],-1),v(`div`,_e,[v(`div`,ve,h(rt.value)+`% `,1)])]),o[13]||=v(`hr`,{class:`mb-2`},null,-1),v(`div`,ye,[(w(!0),y(u,null,S(Y.value,(e,t)=>(w(),y(`div`,{key:t,class:`flex items-start gap-3 p-3 rounded-lg hover:bg-slate-50 cursor-pointer transition-colors`,onClick:t=>it(e)},[v(`div`,xe,[v(`div`,Se,[v(`div`,null,[v(`div`,Ce,h(e.title),1),v(`div`,we,h(e.description),1)])])]),v(`div`,Te,[e.done?(w(),y(`div`,Ee,[T(f(m),{class:`size-4`})])):(w(),y(`div`,De,h(t+1),1)),T(f(b),{class:`size-4 text-slate-400`})])],8,be))),128))])]),_:1})]),v(`div`,Oe,[T(f(O),{class:`cursor-pointer hover:shadow-md p-5 flex items-start gap-4`,onClick:o[1]||=e=>$(`team`)},{default:x(()=>[T(f(ne),{class:`size-6 text-blue-500`}),o[14]||=v(`div`,null,[v(`h5`,{class:`font-semibold text-slate-700`},`Add a Team Member `),v(`p`,{class:`text-gray-600 text-sm`},`Invite collaborators to your organisation. `)],-1),T(f(b),{class:`ml-auto text-muted-foreground`})]),_:1}),T(f(O),{class:`cursor-pointer hover:shadow-md p-5 flex items-start gap-4`,onClick:o[2]||=e=>$(`vault`)},{default:x(()=>[T(f(ae),{class:`size-6 text-blue-500`}),o[15]||=v(`div`,null,[v(`h5`,{class:`font-semibold text-slate-700`},`Connect Account `),v(`p`,{class:`text-gray-600 text-sm`},` Link your bank or settlement account. `)],-1),T(f(b),{class:`ml-auto text-muted-foreground`})]),_:1}),T(f(O),{class:`cursor-pointer hover:shadow-md p-5 flex items-start gap-4`,onClick:o[3]||=e=>$(`jurisdiction`)},{default:x(()=>[T(f(p),{class:`size-6 text-blue-500`}),o[16]||=v(`div`,null,[v(`h5`,{class:`font-semibold text-slate-700`},`Tax Jurisdiction `),v(`p`,{class:`text-gray-600 text-sm`},` View or change tax jurisdiction settings. `)],-1),T(f(b),{class:`ml-auto text-muted-foreground`})]),_:1}),T(f(O),{class:`cursor-pointer hover:shadow-md p-5 flex items-start gap-4`,onClick:o[4]||=e=>f(F)()},{default:x(()=>[T(f(le),{class:`size-6 text-slate-700`}),o[17]||=v(`div`,null,[v(`h5`,{class:`font-semibold text-slate-700`},`Flow`),v(`p`,{class:`text-gray-600 text-sm`},` Open quick applications and flow. `)],-1),T(f(b),{class:`ml-auto text-muted-foreground`})]),_:1})])])])]),_:1}),T(f(n),{value:`transactions`,class:`mt-0`},{default:x(()=>[v(`div`,ke,[T(f(O),{class:`p-6`},{default:x(()=>[o[19]||=v(`div`,{class:`flex items-center justify-between mb-4`},[v(`h3`,{class:`text-lg font-semibold text-slate-800`},`Inflow Overview `),v(`span`,{class:`text-sm text-slate-500`},`Last 20 transactions`)],-1),G.value.length>0?(w(),y(`div`,Ae,[(w(!0),y(u,null,S(Ze.value.reverse(),(e,t)=>(w(),y(`div`,{key:t,class:s([`flex-1 rounded-t transition-all hover:opacity-80`,e.type===`CREDIT`?`bg-sky-700 border-b-4 border-blue-700`:`bg-gradient-to-t from-stone-100 to-stone-200 border-b-4 border-blue-200`]),style:ie({height:Qe(e.amount)+`%`}),title:`${Z(e.amount)} - ${e.description}`},null,14,je))),128))])):(w(),y(`div`,U,[...o[18]||=[v(`span`,null,`No transaction data yet`,-1)]])),o[20]||=v(`div`,{class:`flex gap-4 mt-4 text-sm`},[v(`div`,{class:`flex items-center gap-2`},[v(`div`,{class:`w-3 h-3 rounded bg-stone-100 border`}),v(`span`,{class:`text-slate-600`},`Inflow`)]),v(`div`,{class:`flex items-center gap-2`},[v(`div`,{class:`w-3 h-3 rounded bg-blue-600`}),v(`span`,{class:`text-slate-600`},`Settlement`)])],-1)]),_:1}),T(f(O),{class:`p-6`},{default:x(()=>[o[22]||=v(`h3`,{class:`text-lg font-semibold text-slate-800 mb-4`},`Recent Transactions`,-1),K.value?(w(),y(`div`,Me,[T(f(E),{class:`size-6 animate-spin text-slate-400`})])):G.value.length===0?(w(),y(`div`,Ne,[...o[21]||=[v(`div`,{class:`text-lg font-medium text-slate-700`},`No transactions yet `,-1),v(`p`,{class:`text-sm text-slate-500 mt-2`},`Connect a bank or import CSV to see transactions`,-1)]])):(w(),y(`div`,Pe,[(w(!0),y(u,null,S(G.value,e=>(w(),y(`div`,{key:e.id,class:`flex items-center justify-between p-3 rounded-lg hover:bg-slate-50 transition-colors`},[v(`div`,Fe,[v(`div`,{class:s([`w-10 h-10 rounded-full flex items-center justify-center`,e.type===`CREDIT`?`bg-blue-100 text-blue-600`:`bg-stone-100 text-stone-500`])},[e.type===`CREDIT`?(w(),c(f(re),{key:0,class:`size-5`})):(w(),c(f(ee),{key:1,class:`size-5`}))],2),v(`div`,null,[v(`div`,Ie,h(e.description),1),v(`div`,Le,h(Q(e.transactionDate)),1)])]),v(`div`,{class:s([`font-semibold`,e.type===`CREDIT`?`text-blue-600`:`text-stone-600`])},h(Z(e.amount)),3)]))),128))]))]),_:1})])]),_:1}),T(f(n),{value:`activity`,class:`mt-0`},{default:x(()=>[v(`div`,Re,[T(f(O),{class:`p-6`},{default:x(()=>[o[27]||=v(`h3`,{class:`text-lg font-semibold text-slate-800 mb-4`},`Recent Activity `,-1),J.value?(w(),y(`div`,ze,[T(f(E),{class:`size-6 animate-spin text-slate-400`})])):q.value.length===0?(w(),y(`div`,Be,[T(f(te),{class:`size-12 mx-auto text-slate-300 mb-4`}),o[23]||=v(`div`,{class:`text-lg font-medium text-slate-700`},`No activity yet `,-1),o[24]||=v(`p`,{class:`text-sm text-slate-500 mt-2`},`Activity will appear here as you use the platform`,-1)])):(w(),y(`div`,Ve,[o[26]||=v(`div`,{class:`absolute left-4 top-0 bottom-0 w-0.5 bg-slate-200`},null,-1),v(`div`,He,[(w(!0),y(u,null,S(q.value,e=>(w(),y(`div`,{key:e.id,class:`relative pl-10`},[o[25]||=v(`div`,{class:`absolute left-2.5 w-3 h-3 rounded-full bg-blue-500 border-2 border-white`},null,-1),v(`div`,Ue,[v(`div`,We,[v(`div`,null,[v(`div`,Ge,h(e.description),1),v(`div`,Ke,[v(`span`,qe,[T(f(g),{class:`size-3`}),l(` `+h(e.actorEmail),1)])])]),v(`span`,Je,h($e(e.createdAt)),1)]),e.resourceType?(w(),y(`div`,Ye,[v(`span`,Xe,h(e.resourceType),1)])):_(``,!0)])]))),128))])]))]),_:1})])]),_:1})]),_:1},8,[`modelValue`])])])])]),_:1})])])]))}},[[`__scopeId`,`data-v-bfd063fa`]]);export{W as default};