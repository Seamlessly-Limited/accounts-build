import{t as e}from"./useArrowNavigation-siWGBYoD.js";import{t}from"./useDirection-DfJQtSIT.js";import{t as n}from"./VisuallyHiddenInput-BqN-V-XI.js";import{Bt as r,D as i,Et as a,Gt as o,Jt as s,M as c,N as l,Nt as u,O as d,Ot as f,P as p,Pt as m,Ut as h,V as g,Vt as _,Wt as v,_n as y,an as b,bt as x,en as S,ft as C,g as w,nt as T,pn as E,rt as D,yn as O}from"./index-NPUXaZ2c.js";var[k,A]=D(`PinInputRoot`),j=m({inheritAttrs:!1,__name:`PinInputRoot`,props:{modelValue:{type:null,required:!1},defaultValue:{type:Array,required:!1},placeholder:{type:String,required:!1,default:``},mask:{type:Boolean,required:!1},otp:{type:Boolean,required:!1},type:{type:null,required:!1,default:`text`},dir:{type:String,required:!1},disabled:{type:Boolean,required:!1},id:{type:String,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1},name:{type:String,required:!1},required:{type:Boolean,required:!1}},emits:[`update:modelValue`,`complete`],setup(e,{emit:i}){let c=e,l=i,{mask:m,otp:h,placeholder:_,type:v,disabled:x,dir:C}=y(c),{forwardRef:w}=p(),T=t(C),D=g(c,`modelValue`,l,{defaultValue:c.defaultValue??[],passive:!0,deep:!0}),k=a(()=>Array.isArray(D.value)?[...D.value]:[]),j=E(new Set);function M(e){j.value.add(e)}let N=a(()=>c.type===`number`),P=a(()=>k.value.filter(e=>!!e||N.value&&e===0).length===j.value.size);return S(D,()=>{P.value&&l(`complete`,D.value)},{deep:!0}),A({modelValue:D,currentModelValue:k,mask:m,otp:h,placeholder:_,type:v,dir:T,disabled:x,isCompleted:P,inputElements:j,onInputElementChange:M,isNumericMode:N}),(e,t)=>(o(),f(O(d),r(e.$attrs,{ref:O(w),dir:O(T),"data-complete":P.value?``:void 0,"data-disabled":O(x)?``:void 0}),{default:b(()=>[s(e.$slots,`default`,{modelValue:O(D)}),u(n,{id:e.id,as:`input`,feature:`focusable`,tabindex:`-1`,value:k.value.join(``),name:e.name??``,disabled:O(x),required:e.required,onFocus:t[0]||=e=>Array.from(j.value)?.[0]?.focus()},null,8,[`id`,`value`,`name`,`disabled`,`required`])]),_:3},16,[`dir`,`data-complete`,`data-disabled`]))}}),M=m({__name:`PinInputInput`,props:{index:{type:Number,required:!0},disabled:{type:Boolean,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:`input`}},setup(t){let n=t,r=k(),c=a(()=>Array.from(r.inputElements.value)),l=a(()=>r.currentModelValue.value[n.index]),u=a(()=>n.disabled||r.disabled.value),p=a(()=>r.otp.value),m=a(()=>r.mask.value),{primitiveElement:g,currentElement:y}=i();function C(e){let t=e.target;if((e.data?.length??0)>1){P(t.value);return}if(r.isNumericMode.value&&!/^\d*$/.test(t.value)){t.value=t.value.replace(/\D/g,``);return}t.value=e.data||t.value.slice(-1),I(n.index,t.value);let i=c.value[n.index+1];i&&i.focus()}function w(){let e=y.value;_(()=>{e&&!e.value&&(e.placeholder=r.placeholder.value)})}function E(t){e(t,T(),void 0,{itemsArray:c.value,focus:!0,loop:!1,arrowKeyOptions:`horizontal`,dir:r.dir.value})}function D(e){if(e.preventDefault(),e.target.value)I(n.index,``);else{let e=c.value[n.index-1];e&&(e.focus(),I(n.index-1,``))}}function A(e){e.key===`Delete`&&(e.preventDefault(),I(n.index,``))}function j(e){let t=e.target;t.setSelectionRange(1,1),t.value||(t.placeholder=``)}function M(e){w()}function N(e){e.preventDefault();let t=e.clipboardData;if(!t)return;let n=t.getData(`text`);P(n)}function P(e){let t=[...r.currentModelValue.value],i=e.length>=c.value.length?0:n.index,a=Math.min(i+e.length,c.value.length);for(let n=i;n<a;n++){let a=c.value[n],o=e[n-i];r.isNumericMode.value&&!/^\d*$/.test(o)||(t[n]=o,a.focus())}r.modelValue.value=t,c.value[a]?.focus()}function F(e){let t=e.length-1;for(;t>=0&&e[t]===``;)e.pop(),t--;return e}function I(e,t){let n=[...r.currentModelValue.value];if(r.isNumericMode.value){let r=+t;t===``||isNaN(r)?delete n[e]:n[e]=r}else n[e]=t;r.modelValue.value=F(n)}return S(l,()=>{l.value||w()}),h(()=>{r.onInputElementChange(y.value)}),v(()=>{r.inputElements?.value.delete(y.value)}),(e,t)=>(o(),f(O(d),{ref_key:`primitiveElement`,ref:g,autocapitalize:`none`,as:e.as,"as-child":e.asChild,autocomplete:p.value?`one-time-code`:`false`,type:m.value?`password`:`text`,inputmode:O(r).isNumericMode.value?`numeric`:`text`,pattern:O(r).isNumericMode.value?`[0-9]*`:void 0,placeholder:O(r).placeholder.value,value:l.value,disabled:u.value,"data-disabled":u.value?``:void 0,"data-complete":O(r).isCompleted.value?``:void 0,"aria-label":`pin input ${e.index+1} of ${c.value.length}`,onInput:t[0]||=e=>C(e),onKeydown:[x(E,[`left`,`right`,`up`,`down`,`home`,`end`]),x(D,[`backspace`]),x(A,[`delete`])],onFocus:j,onBlur:M,onPaste:N},{default:b(()=>[s(e.$slots,`default`)]),_:3},8,[`as`,`as-child`,`autocomplete`,`type`,`inputmode`,`pattern`,`placeholder`,`value`,`disabled`,`data-disabled`,`data-complete`,`aria-label`]))}}),N=m({__name:`PinInput`,props:{modelValue:{default:()=>[]},defaultValue:{},placeholder:{},mask:{type:Boolean},otp:{type:Boolean},type:{},dir:{},disabled:{type:Boolean},id:{},asChild:{type:Boolean},as:{},name:{},required:{type:Boolean},class:{}},emits:[`update:modelValue`,`complete`],setup(e,{emit:t}){let n=e,i=t,a=C(n,`class`),l=c(a,i);return(e,t)=>(o(),f(O(j),r(O(l),{class:O(w)(`flex gap-2 items-center`,n.class)}),{default:b(()=>[s(e.$slots,`default`)]),_:3},16,[`class`]))}}),P=m({__name:`PinInputGroup`,props:{asChild:{type:Boolean},as:{},class:{}},setup(e){let t=e,n=C(t,`class`),i=l(n);return(e,n)=>(o(),f(O(d),r(O(i),{class:O(w)(`flex items-center`,t.class)}),{default:b(()=>[s(e.$slots,`default`)]),_:3},16,[`class`]))}}),F=m({__name:`PinInputSlot`,props:{index:{},disabled:{type:Boolean},asChild:{type:Boolean},as:{},class:{}},setup(e){let t=e,n=C(t,`class`),i=l(n);return(e,n)=>(o(),f(O(M),r(O(i),{class:O(w)(`relative text-center focus:outline-none focus:ring-2 focus:ring-ring focus:relative focus:z-10 flex h-9 w-9 items-center justify-center border-y border-r border-input text-sm transition-all first:rounded-l-md first:border-l last:rounded-r-md`,t.class)}),null,16,[`class`]))}});export{P as n,N as r,F as t};