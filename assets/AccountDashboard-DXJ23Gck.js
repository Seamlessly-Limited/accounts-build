import"./useFormControl-DvkL6jNJ.js";import"./ListboxItem-qNA3-DTC.js";import"./useNonce-BMN6rGol.js";import"./nullish-CfjOSA4G.js";import"./ConfigProvider-COTvgjgS.js";import"./useHideOthers-DDpiFsmm.js";import{a as e,i as t,n,o as r,r as i,s as a,t as o}from"./PopoverTrigger-Jy5Bv-bg.js";import"./useDirection-D13jZBr-.js";import{t as s}from"./PopperAnchor-D24J2rYd.js";import"./useId-Cbz22I98.js";import"./useKbd-BvGB3m10.js";import"./PopperContent-C4v9BcUF.js";import"./useTypeahead-m4pU0-pP.js";import"./DialogPortal-DIyf6CsR.js";import"./Teleport-BgQd8kcT.js";import"./utils-B7nnpTSD.js";import"./DialogTitle-BUgZPGK9.js";import{i as c,n as l,r as u,t as d}from"./sheet-BRGxCmBz.js";import"./AvatarImage-Z6nQOR8p.js";import"./utils-DPCF9wwr.js";import"./RovingFocusGroup-C_eVAqgr.js";import"./RovingFocusItem-J1kH07XU.js";import"./VisuallyHiddenInput-Cjn1nZPy.js";import"./command-Cvu7jl1c.js";import{c as f,i as ee,n as p,r as te,s as ne,t as re}from"./ComboboxItem-DCOWyVRk.js";import{t as ie}from"./ComboboxGroup-DkKFLzRP.js";import"./Label-Nwra6Wd2.js";import"./ScrollAreaViewport-B8MNvpMz.js";import"./SelectViewport-BEIerl6o.js";import"./SwitchThumb-BPQL78vS.js";import{a as m,i as h,n as g,t as _}from"./tabs-siosCzCP.js";import{Ai as v,Ca as y,Di as b,Dr as x,Gi as ae,Hi as S,Hn as oe,Ii as C,Mi as w,Mr as T,Ni as E,Nr as D,Oi as O,Pi as k,Ri as se,Sa as A,Si as j,Ta as M,U as N,Xi as P,Yi as F,a as ce,b as le,di as I,ha as L,hr as R,ji as z,ki as B,n as ue,na as de,o as V,qi as H,qn as fe,r as pe,sa as U,wi as W,xa as G}from"./index-DYsAJfvN.js";import{n as me,t as he}from"./DialogContent-BldpPBwW.js";import{n as ge,r as _e,t as ve}from"./DialogTitle-g0gXcd15.js";import{t as ye}from"./DialogFooter-DKtkETD-.js";import{t as K}from"./Input-CVPFaPt_.js";import{t as q}from"./button-JGcPCTN0.js";import{n as J}from"./button-CTk8BIqm.js";import{t as be}from"./AccountAssistant-DzFZn2en.js";import"./ScrollArea-Dbevvb5I.js";import"./Textarea-BbBT2vj1.js";import"./badge-MmCqtBxz.js";import{t as Y}from"./Card-Dxwe4kgH.js";import{t as xe}from"./Card-B2Jpc861.js";import{t as X}from"./Label-D_0LiB9C.js";import{a as Se,i as Ce,n as we,r as Z,t as Te}from"./SelectValue-BTSASMeG.js";import{t as Ee}from"./BankAccountService-BkKCeYBy.js";import{t as Q}from"./TransactionService-B5wMS1qr.js";import{t as De}from"./badge-D0SwtQcn.js";var Oe=C({__name:`ComboboxAnchor`,props:{reference:{type:null,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},setup(e){let{forwardRef:t}=D();return(e,n)=>(H(),B(G(s),{"as-child":``,reference:e.reference},{default:U(()=>[k(G(x),S({ref:G(t),"as-child":e.asChild,as:e.as},e.$attrs),{default:U(()=>[P(e.$slots,`default`)]),_:3},16,[`as-child`,`as`])]),_:3},8,[`reference`]))}}),ke=C({__name:`ComboboxEmpty`,props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},setup(e){let t=e,n=f(),r=b(()=>n.ignoreFilter.value?n.allItems.value.size===0:n.filterState.value.count===0);return(e,n)=>r.value?(H(),B(G(x),y(S({key:0},t)),{default:U(()=>[P(e.$slots,`default`,{},()=>[n[0]||=E(`No options`)])]),_:3},16)):v(`v-if`,!0)}}),Ae=C({__name:`DialogTrigger`,props:{asChild:{type:Boolean},as:{}},setup(e){let t=e;return(e,n)=>(H(),B(G(c),y(se(t)),{default:U(()=>[P(e.$slots,`default`)]),_:3},16))}}),je=C({__name:`ComboboxAnchor`,props:{reference:{},asChild:{type:Boolean},as:{},class:{}},setup(e){let t=e,n=I(t,`class`),r=T(n);return(e,n)=>(H(),B(G(Oe),S(G(r),{class:G(R)(`w-full`,t.class)}),{default:U(()=>[P(e.$slots,`default`)]),_:3},16,[`class`]))}}),Me=C({__name:`ComboboxEmpty`,props:{asChild:{type:Boolean},as:{},class:{}},setup(e){let t=e,n=I(t,`class`);return(e,r)=>(H(),B(G(ke),S(G(n),{class:G(R)(`py-6 px-10 text-center text-sm`,t.class)}),{default:U(()=>[P(e.$slots,`default`)]),_:3},16,[`class`]))}}),Ne={class:`grid grid-cols-1 md:grid-cols-3 gap-6 mb-8`},Pe={class:`text-2xl font-bold text-slate-800 mt-2`},Fe={class:`text-lg font-semibold text-slate-800 mt-2`},Ie={class:`space-y-4`},Le={key:0,class:`text-center py-8`},Re={key:1,class:`text-center py-8 text-gray-500`},ze={class:`flex items-center gap-3`},Be={class:`w-10 h-10 rounded-full bg-gray-100 flex items-center justify-center`},Ve={class:`font-medium text-slate-800`},He={class:`text-xs text-gray-500`},Ue={__name:`OverviewTab`,props:{account:{type:Object,required:!0}},setup(e){let t=e,n=L([]),r=L(!0);ae(async()=>{await i()});async function i(){try{r.value=!0,n.value=(await Q.getTransactions({bankAccountReference:t.account.reference,page:0,size:5,sort:`transactionDate,desc`})).content||[]}catch(e){console.error(`Failed to load recent transactions`,e)}finally{r.value=!1}}function a(e){return e==null?`N/A`:new Intl.NumberFormat(`en-NG`,{style:`currency`,currency:t.account.currency||`NGN`}).format(e)}function o(e){return e?new Date(e).toLocaleDateString(`en-US`,{year:`numeric`,month:`short`,day:`numeric`}):`Never`}function s(e){return`fa-money-bill-wave`}return(t,i)=>(H(),z(`div`,null,[O(`div`,Ne,[k(G(Y),{class:`p-6`},{default:U(()=>[i[0]||=O(`h3`,{class:`text-sm font-medium text-gray-500`},`Current Balance`,-1),O(`p`,Pe,M(a(e.account?.balance)),1)]),_:1}),k(G(Y),{class:`p-6`},{default:U(()=>[i[1]||=O(`h3`,{class:`text-sm font-medium text-gray-500`},`Last Synced`,-1),O(`p`,Fe,M(o(e.account?.lastSyncedAt)),1)]),_:1}),k(G(Y),{class:`p-6`},{default:U(()=>[...i[2]||=[O(`h3`,{class:`text-sm font-medium text-gray-500`},`Pending Review`,-1),O(`p`,{class:`text-2xl font-bold text-amber-600 mt-2`},`0`,-1)]]),_:1})]),k(G(Y),{class:`p-6`},{default:U(()=>[i[4]||=O(`h3`,{class:`text-lg font-semibold text-slate-800 mb-4`},`Recent Activity`,-1),O(`div`,Ie,[r.value?(H(),z(`div`,Le,[...i[3]||=[O(`i`,{class:`fa fa-cog animate-spin text-gray-400`},null,-1)]])):n.value.length===0?(H(),z(`div`,Re,` No recent activity `)):(H(!0),z(W,{key:2},F(n.value,e=>(H(),z(`div`,{key:e.id,class:`flex justify-between items-center py-3 border-b last:border-0`},[O(`div`,ze,[O(`div`,Be,[O(`i`,{class:A([`fa text-gray-500`,s(e)])},null,2)]),O(`div`,null,[O(`p`,Ve,M(e.description),1),O(`p`,He,M(o(e.transactionDate)),1)])]),O(`span`,{class:A([`font-semibold`,e.amount<0?`text-slate-800`:e.type===`DEBIT`?`text-red-600`:`text-green-600`])},M(a(e.amount)),3)]))),128))])]),_:1})]))}},$=`/org/categories`,We={getCategories(){return V.get($,{organisationAware:!0,authorizeRequest:!0})},createCategory(e){return V.post($,{data:e,organisationAware:!0,authorizeRequest:!0})},updateCategory(e,t){return V.put(`${$}/${e}`,{data:t,organisationAware:!0,authorizeRequest:!0})},deleteCategory(e){return V.delete(`${$}/${e}`,{organisationAware:!0,authorizeRequest:!0})}},Ge={class:`space-y-6`},Ke={class:`grid grid-cols-1 md:grid-cols-2 gap-6`},qe={class:`p-4 border-b flex flex-col md:flex-row justify-between gap-4`},Je={class:`flex gap-2 flex-1`},Ye={class:`relative flex-1 max-w-sm`},Xe={class:`flex gap-2`},Ze={class:`overflow-x-auto`},Qe={class:`w-full text-sm text-left`},$e={class:`divide-y`},et={key:0},tt={key:1},nt={class:`px-6 py-4 whitespace-nowrap text-gray-600`},rt={class:`px-6 py-4 font-medium text-slate-800`},it={class:`px-6 py-4`},at={class:`flex items-center gap-2 p-2`},ot={class:`border-t mt-2 pt-2 px-2`},st={key:0,class:`text-gray-400 w-4 h-4 flex items-center justify-center`},ct={key:1,class:`text-green-500 w-4 h-4 flex items-center justify-center`},lt={class:`px-6 py-4 text-center`},ut={class:`p-4 border-t flex justify-between items-center text-sm text-gray-500`},dt={class:`flex gap-2`},ft={class:`grid gap-6 py-4`},pt={class:`grid grid-cols-2 gap-4`},mt={class:`space-y-2`},ht={class:`space-y-2`},gt={class:`grid grid-cols-2 gap-4`},_t={class:`space-y-2`},vt={class:`space-y-2`},yt={class:`grid grid-cols-2 gap-4`},bt={class:`space-y-2`},xt={class:`space-y-2`},St={class:`space-y-2`},Ct={class:`grid gap-4 py-4`},wt={class:`space-y-2`},Tt={__name:`TransactionsTab`,props:{account:{type:Object,required:!0}},setup(s){let c=s,l=ce().toast,u=L([]),d=L([]),f=L(!0),m=L(``),h=L(0),g=L(20),_=L(0),y=L(!1),x=L(!1),S=L(``),C=L(!1),w=L(null),T=L(!1),D=L({startDate:null,endDate:null,minAmount:null,maxAmount:null,type:`ALL`,status:`ALL`,categoryIds:[]}),se=new e(`en-US`,{dateStyle:`medium`}),N=b({get:()=>D.value.startDate?r(D.value.startDate):void 0,set:e=>{D.value.startDate=e?e.toString():null}}),P=b({get:()=>D.value.endDate?r(D.value.endDate):void 0,set:e=>{D.value.endDate=e?e.toString():null}}),I=b(()=>[...new Set(D.value.categoryIds)]);function ue(e){w.value=e,x.value=!0}ae(async()=>{await Promise.all([V(),pe()])}),de([h,m],()=>{V()});async function V(){try{f.value=!0;let e={bankAccountReference:c.account.reference,page:h.value,size:g.value,sort:`transactionDate,desc`,search:m.value};D.value.startDate&&(e.startDate=D.value.startDate),D.value.endDate&&(e.endDate=D.value.endDate),D.value.minAmount&&(e.minAmount=D.value.minAmount),D.value.maxAmount&&(e.maxAmount=D.value.maxAmount),D.value.type&&D.value.type!==`ALL`&&(e.type=D.value.type),D.value.status&&D.value.status!==`ALL`&&(e.status=D.value.status),D.value.categoryIds&&D.value.categoryIds.length>0&&(e.categoryIds=D.value.categoryIds);let t=await Q.getTransactions(e);t&&(u.value=(t.content||[]).map(e=>({...e,selectedCategoryId:e.category?.id||null,saving:!1})),_.value=t.totalElements||0)}catch(e){console.error(`Failed to load transactions`,e)}finally{f.value=!1}}async function pe(){try{d.value=await We.getCategories()||[]}catch(e){console.error(`Failed to load categories`,e)}}async function J(e){let t=e.category?.reference||null;if(e.selectedCategoryId)try{e.saving=!0;let t=await Q.categorizeTransaction(e.reference,e.selectedCategoryId);l({title:`Categorized`,description:`Transaction updated successfully`}),t&&t.category&&(e.category=t.category,e.categoryName=t.category.name,e.selectedCategoryId=t.category.reference)}catch(n){console.error(`Failed to categorize transaction`,n),e.selectedCategoryId=t,l({title:`Error`,description:`Failed to categorize transaction`,variant:`destructive`})}finally{e.saving=!1}}async function be(){try{y.value=!0;let e=await Q.autoCategorizeAll();l({title:`Auto-Categorization Started`,description:e.message||`AI is processing your transactions.`}),setTimeout(V,3e3)}catch{l({title:`Error`,description:`Failed to start auto-categorization`,variant:`destructive`})}finally{y.value=!1}}async function Y(){if(S.value)try{C.value=!0;let e=await We.createCategory({name:S.value});d.value.push(e),w.value&&=(w.value.selectedCategoryId=e.reference,await J(w.value),null),x.value=!1,S.value=``,l({title:`Category Created`,description:`${e.name} added successfully`})}catch{l({title:`Error`,description:`Failed to create category`,variant:`destructive`})}finally{C.value=!1}}function Ee(){V()}function Oe(){h.value=0,T.value=!1,V()}function ke(){D.value={startDate:null,endDate:null,minAmount:null,maxAmount:null,type:`ALL`,status:`ALL`,categoryIds:[]},Oe()}function Ae(e){let t=D.value.categoryIds.indexOf(e);t!==-1&&D.value.categoryIds.splice(t,1)}function Ne(e){return e==null?`N/A`:new Intl.NumberFormat(`en-NG`,{style:`currency`,currency:c.account.currency||`NGN`}).format(e)}function Pe(e){return e?new Date(e).toLocaleDateString(`en-US`,{year:`numeric`,month:`short`,day:`numeric`}):`N/A`}function Fe(e){return{APPROVED:`default`,PENDING_REVIEW:`warning`,REJECTED:`destructive`}[e]||`secondary`}return(e,r)=>(H(),z(`div`,Ge,[O(`div`,Ke,[k(G(xe),{class:`p-6 flex items-center justify-between`},{default:U(()=>[r[15]||=O(`div`,null,[O(`h3`,{class:`text-lg font-semibold text-slate-800`},`AI Auto-Categorization`),O(`p`,{class:`text-gray-500 text-sm`},`Automatically assign categories to transactions using AI.`)],-1),k(G(q),{onClick:be,disabled:y.value},{default:U(()=>[O(`i`,{class:A([`fa mr-2`,y.value?`fa-cog animate-spin`:`fa-magic`])},null,2),E(` `+M(y.value?`Processing...`:`Auto-Categorize All`),1)]),_:1},8,[`disabled`])]),_:1})]),k(G(xe),{class:`p-0 overflow-hidden`},{default:U(()=>[O(`div`,qe,[O(`div`,Je,[O(`div`,Ye,[r[16]||=O(`i`,{class:`fa fa-search absolute left-3 top-1/2 -translate-y-1/2 text-gray-400`},null,-1),k(G(K),{modelValue:m.value,"onUpdate:modelValue":r[0]||=e=>m.value=e,placeholder:`Search transactions...`,class:`pl-9 rounded-full`},null,8,[`modelValue`])]),k(G(q),{variant:`outline`,class:`rounded-full`,onClick:r[1]||=e=>T.value=!0},{default:U(()=>[...r[17]||=[O(`i`,{class:`fa fa-filter mr-2`},null,-1),E(` Filter `,-1)]]),_:1})]),O(`div`,Xe,[k(G(q),{variant:`outline`,class:`rounded-full`,onClick:Ee},{default:U(()=>[O(`i`,{class:A([`fa fa-sync-alt`,{"animate-spin":f.value}])},null,2)]),_:1})])]),O(`div`,Ze,[O(`table`,Qe,[r[23]||=O(`thead`,{class:`bg-gray-50 text-gray-600 font-medium border-b`},[O(`tr`,null,[O(`th`,{class:`px-6 py-3`},`Date`),O(`th`,{class:`px-6 py-3`},`Description`),O(`th`,{class:`px-6 py-3`},`Category`),O(`th`,{class:`px-6 py-3 text-right`},`Amount`),O(`th`,{class:`px-6 py-3 text-center`},`Status`)])],-1),O(`tbody`,$e,[f.value&&u.value.length===0?(H(),z(`tr`,et,[...r[18]||=[O(`td`,{colspan:`5`,class:`px-6 py-12 text-center text-gray-500`},[O(`i`,{class:`fa fa-cog animate-spin mr-2`}),E(` Loading transactions... `)],-1)]])):u.value.length===0?(H(),z(`tr`,tt,[...r[19]||=[O(`td`,{colspan:`5`,class:`px-6 py-12 text-center text-gray-500`},` No transactions found `,-1)]])):v(``,!0),(H(!0),z(W,null,F(u.value,e=>(H(),z(`tr`,{key:e.id,class:`hover:bg-gray-50 transition-colors`},[O(`td`,nt,M(Pe(e.transactionDate)),1),O(`td`,rt,M(e.description),1),O(`td`,it,[O(`div`,at,[k(G(te),{"model-value":e.selectedCategoryId,"onUpdate:modelValue":t=>{e.selectedCategoryId=t,J(e)},class:`relative w-full max-w-xs`},{default:U(()=>[k(G(ee),{class:`w-full`},{default:U(()=>[k(G(p),{class:`rounded-full w-full shadow-none border-stone-100 bg-stone-50 focus:bg-white mt-1 text-xs`,placeholder:e.categoryName||`Select category...`,"display-value":e=>d.value.find(t=>t.reference===e)?.name||``},null,8,[`placeholder`,`display-value`])]),_:2},1024),k(G(ne),{class:`absolute bg-white z-50 border rounded-sm mt-1 px-2 py-3 max-h-[200px] overflow-y-auto w-full min-w-[200px]`},{default:U(()=>[(H(!0),z(W,null,F(d.value,e=>(H(),B(G(re),{key:e.reference,value:e.reference,class:`px-4 py-2 rounded-full cursor-pointer hover:bg-gray-100 text-xs`},{default:U(()=>[E(M(e.name),1)]),_:2},1032,[`value`]))),128)),O(`div`,ot,[k(G(q),{variant:`ghost`,size:`sm`,class:`w-full justify-start text-blue-600 rounded-full`,onClick:j(t=>ue(e),[`stop`])},{default:U(()=>[...r[20]||=[O(`i`,{class:`fa fa-plus mr-2`},null,-1),E(` Create New `,-1)]]),_:1},8,[`onClick`])])]),_:2},1024)]),_:2},1032,[`model-value`,`onUpdate:modelValue`]),e.saving?(H(),z(`div`,st,[...r[21]||=[O(`i`,{class:`fa fa-cog animate-spin text-xs`},null,-1)]])):e.selectedCategoryId&&e.selectedCategoryId===e.category?.id?(H(),z(`div`,ct,[...r[22]||=[O(`i`,{class:`fa fa-check text-xs`},null,-1)]])):v(``,!0)])]),O(`td`,{class:A([`px-6 py-4 text-right font-semibold`,e.amount<0?`text-slate-800`:e.type==`DEBIT`?`text-red-800`:`text-green-700`])},M(Ne(e.amount)),3),O(`td`,lt,[k(G(De),{variant:Fe(e.status),class:`rounded-full text-xs`},{default:U(()=>[E(M(e.status),1)]),_:2},1032,[`variant`])])]))),128))])])]),O(`div`,ut,[O(`span`,null,`Showing `+M(h.value*g.value+1)+` to `+M(Math.min((h.value+1)*g.value,_.value))+` of `+M(_.value)+` results`,1),O(`div`,dt,[k(G(q),{variant:`outline`,size:`sm`,disabled:h.value===0,onClick:r[2]||=e=>h.value--},{default:U(()=>[...r[24]||=[E(` Previous `,-1)]]),_:1},8,[`disabled`]),k(G(q),{variant:`outline`,size:`sm`,disabled:(h.value+1)*g.value>=_.value,onClick:r[3]||=e=>h.value++},{default:U(()=>[...r[25]||=[E(` Next `,-1)]]),_:1},8,[`disabled`])])])]),_:1}),k(G(me),{open:T.value,"onUpdate:open":r[11]||=e=>T.value=e},{default:U(()=>[k(G(he),{class:`sm:max-w-[500px]`},{default:U(()=>[k(G(ge),null,{default:U(()=>[k(G(ve),null,{default:U(()=>[...r[26]||=[E(`Filter Transactions`,-1)]]),_:1}),k(G(_e),null,{default:U(()=>[...r[27]||=[E(`Refine your transaction list.`,-1)]]),_:1})]),_:1}),O(`div`,ft,[O(`div`,pt,[O(`div`,mt,[k(G(X),null,{default:U(()=>[...r[28]||=[E(`Start Date`,-1)]]),_:1}),k(G(i),null,{default:U(()=>[k(G(o),{"as-child":``},{default:U(()=>[k(G(q),{variant:`outline`,class:A(G(R)(`w-full justify-start text-left font-normal rounded-full`,!N.value&&`text-muted-foreground`))},{default:U(()=>[k(G(fe),{class:`mr-2 h-4 w-4`}),E(` `+M(N.value?G(se).format(N.value.toDate(G(a)())):`Pick a date`),1)]),_:1},8,[`class`])]),_:1}),k(G(n),{class:`w-auto p-0`},{default:U(()=>[k(G(t),{modelValue:N.value,"onUpdate:modelValue":r[4]||=e=>N.value=e,"initial-focus":``},null,8,[`modelValue`])]),_:1})]),_:1})]),O(`div`,ht,[k(G(X),null,{default:U(()=>[...r[29]||=[E(`End Date`,-1)]]),_:1}),k(G(i),null,{default:U(()=>[k(G(o),{"as-child":``},{default:U(()=>[k(G(q),{variant:`outline`,class:A(G(R)(`w-full justify-start text-left font-normal rounded-full`,!P.value&&`text-muted-foreground`))},{default:U(()=>[k(G(fe),{class:`mr-2 h-4 w-4`}),E(` `+M(P.value?G(se).format(P.value.toDate(G(a)())):`Pick a date`),1)]),_:1},8,[`class`])]),_:1}),k(G(n),{class:`w-auto p-0`},{default:U(()=>[k(G(t),{modelValue:P.value,"onUpdate:modelValue":r[5]||=e=>P.value=e,"initial-focus":``},null,8,[`modelValue`])]),_:1})]),_:1})])]),O(`div`,gt,[O(`div`,_t,[k(G(X),null,{default:U(()=>[...r[30]||=[E(`Min Amount`,-1)]]),_:1}),k(G(K),{type:`number`,modelValue:D.value.minAmount,"onUpdate:modelValue":r[6]||=e=>D.value.minAmount=e,placeholder:`0.00`,class:`rounded-full`},null,8,[`modelValue`])]),O(`div`,vt,[k(G(X),null,{default:U(()=>[...r[31]||=[E(`Max Amount`,-1)]]),_:1}),k(G(K),{type:`number`,modelValue:D.value.maxAmount,"onUpdate:modelValue":r[7]||=e=>D.value.maxAmount=e,placeholder:`∞`,class:`rounded-full`},null,8,[`modelValue`])])]),O(`div`,yt,[O(`div`,bt,[k(G(X),null,{default:U(()=>[...r[32]||=[E(`Type`,-1)]]),_:1}),k(G(Se),{modelValue:D.value.type,"onUpdate:modelValue":r[8]||=e=>D.value.type=e},{default:U(()=>[k(G(we),{class:`rounded-full`},{default:U(()=>[k(G(Te),{placeholder:`All`})]),_:1}),k(G(Ce),null,{default:U(()=>[k(G(Z),{value:`ALL`},{default:U(()=>[...r[33]||=[E(`All`,-1)]]),_:1}),k(G(Z),{value:`DEBIT`},{default:U(()=>[...r[34]||=[E(`Debit`,-1)]]),_:1}),k(G(Z),{value:`CREDIT`},{default:U(()=>[...r[35]||=[E(`Credit`,-1)]]),_:1})]),_:1})]),_:1},8,[`modelValue`])]),O(`div`,xt,[k(G(X),null,{default:U(()=>[...r[36]||=[E(`Status`,-1)]]),_:1}),k(G(Se),{modelValue:D.value.status,"onUpdate:modelValue":r[9]||=e=>D.value.status=e},{default:U(()=>[k(G(we),{class:`rounded-full`},{default:U(()=>[k(G(Te),{placeholder:`All`})]),_:1}),k(G(Ce),null,{default:U(()=>[k(G(Z),{value:`ALL`},{default:U(()=>[...r[37]||=[E(`All`,-1)]]),_:1}),k(G(Z),{value:`APPROVED`},{default:U(()=>[...r[38]||=[E(`Approved`,-1)]]),_:1}),k(G(Z),{value:`PENDING_REVIEW`},{default:U(()=>[...r[39]||=[E(`Pending Review`,-1)]]),_:1}),k(G(Z),{value:`REJECTED`},{default:U(()=>[...r[40]||=[E(`Rejected`,-1)]]),_:1})]),_:1})]),_:1},8,[`modelValue`])])]),O(`div`,St,[k(G(X),null,{default:U(()=>[...r[41]||=[E(`Categories`,-1)]]),_:1}),k(G(te),{modelValue:D.value.categoryIds,"onUpdate:modelValue":r[10]||=e=>D.value.categoryIds=e,multiple:``},{default:U(()=>[k(G(je),{class:`flex h-auto min-h-10 w-full flex-wrap items-center justify-start gap-1 rounded-full border bg-transparent px-3 py-2 text-sm shadow-sm ring-offset-background placeholder:text-muted-foreground focus-within:ring-0 focus-within:ring-ring focus-within:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50`},{default:U(()=>[(H(!0),z(W,null,F(I.value,e=>(H(),B(G(De),{key:e,variant:`outline`,class:`rounded-full px-2 py-0.5 text-xs flex items-center bg-white gap-1`},{default:U(()=>[E(M(d.value.find(t=>t.reference===e)?.name)+` `,1),k(G(le),{class:`h-3 w-3 cursor-pointer hover:text-red-500`,onClick:j(t=>Ae(e),[`stop`])},null,8,[`onClick`])]),_:2},1024))),128)),k(G(p),{class:`flex-1 h-6 min-w-[100px] border-none shadow-none focus-visible:ring-0 p-0 text-sm bg-transparent placeholder:text-muted-foreground`,placeholder:`Select categories...`})]),_:1}),k(G(ne),{class:`z-50 min-w-[200px] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md`},{default:U(()=>[k(G(Me),null,{default:U(()=>[...r[42]||=[E(`No category found.`,-1)]]),_:1}),k(G(ie),null,{default:U(()=>[(H(!0),z(W,null,F(d.value,e=>(H(),B(G(re),{key:e.reference,value:e.reference,class:`cursor-pointer select-none rounded-sm px-2 py-1.5 text-sm outline-none data-[highlighted]:bg-accent data-[highlighted]:text-accent-foreground`},{default:U(()=>[E(M(e.name)+` `,1),k(G(oe),{class:A(G(R)(`mr-2 h-4 w-4`,D.value.categoryIds.includes(e.reference)?`opacity-100`:`opacity-0`))},null,8,[`class`])]),_:2},1032,[`value`]))),128))]),_:1})]),_:1})]),_:1},8,[`modelValue`])])]),k(G(ye),{class:`gap-2`},{default:U(()=>[k(G(q),{variant:`ghost`,onClick:ke,class:`rounded-full`},{default:U(()=>[...r[43]||=[E(`Clear Filters`,-1)]]),_:1}),k(G(q),{onClick:Oe,class:`rounded-full`},{default:U(()=>[...r[44]||=[E(`Apply`,-1)]]),_:1})]),_:1})]),_:1})]),_:1},8,[`open`]),k(G(me),{open:x.value,"onUpdate:open":r[14]||=e=>x.value=e},{default:U(()=>[k(G(he),{class:`sm:max-w-[425px]`},{default:U(()=>[k(G(ge),null,{default:U(()=>[k(G(ve),null,{default:U(()=>[...r[45]||=[E(`Create New Category`,-1)]]),_:1}),k(G(_e),null,{default:U(()=>[...r[46]||=[E(`Add a new category for your transactions.`,-1)]]),_:1})]),_:1}),O(`div`,Ct,[O(`div`,wt,[k(G(X),null,{default:U(()=>[...r[47]||=[E(`Name`,-1)]]),_:1}),k(G(K),{modelValue:S.value,"onUpdate:modelValue":r[12]||=e=>S.value=e,placeholder:`e.g., Office Supplies`,class:`rounded-full`},null,8,[`modelValue`])])]),k(G(ye),null,{default:U(()=>[k(G(q),{variant:`outline`,onClick:r[13]||=e=>x.value=!1,class:`rounded-full`},{default:U(()=>[...r[48]||=[E(`Cancel`,-1)]]),_:1}),k(G(q),{onClick:Y,disabled:C.value,class:`rounded-full`},{default:U(()=>[E(M(C.value?`Creating...`:`Create`),1)]),_:1},8,[`disabled`])]),_:1})]),_:1})]),_:1},8,[`open`])]))}},Et={class:`p-6`},Dt={class:`mb-8 text-center`},Ot={class:`text-gray-500 text-sm`},kt={key:0,class:`grid grid-cols-1 md:grid-cols-2 gap-4`},At={key:1,class:`mt-6 text-center`},jt={key:2,class:`space-y-6`},Mt={class:`flex justify-between`},Nt={key:3,class:`text-center py-12`},Pt={key:4,class:`space-y-6 text-center`},Ft={__name:`UploadWizard`,props:{account:{type:Object,required:!0}},emits:[`upload-complete`,`close`],setup(e,{emit:t}){let n=e,r=t,i=ce().toast,a=L(1),o=L(null),s=L(null);function c(e){o.value=e,e===`file`?a.value=2:i({title:`Coming Soon`,description:`Bank API integration will be available shortly.`,variant:`secondary`})}function l(){s.value.click()}function u(e){let t=e.target.files[0];t&&f(t)}function d(e){let t=e.dataTransfer.files[0];t&&f(t)}async function f(e){a.value=3;try{await Q.uploadTransactionFile(n.account.reference,e),a.value=4,i({title:`Upload Complete`,description:`File uploaded successfully.`,variant:`success`})}catch(e){a.value=2,i({title:`Upload Failed`,description:e.message||`Failed to upload file.`,variant:`destructive`})}}function ee(){r(`upload-complete`),setTimeout(()=>{a.value=1,o.value=null},500)}return(t,n)=>(H(),z(`div`,Et,[O(`div`,Dt,[n[5]||=O(`h2`,{class:`text-xl font-semibold text-slate-800`},`Sync Transactions`,-1),O(`p`,Ot,`Choose how you want to import transactions into `+M(e.account?.accountName||`this account`),1)]),a.value===1?(H(),z(`div`,kt,[k(G(Y),{class:A([`p-6 cursor-pointer hover:border-blue-500 transition-all border-2`,o.value===`file`?`border-blue-500 bg-blue-50`:`border-transparent hover:bg-slate-50`]),onClick:n[0]||=e=>c(`file`)},{default:U(()=>[...n[6]||=[O(`div`,{class:`flex flex-col items-center text-center gap-3`},[O(`div`,{class:`h-12 w-12 rounded-full bg-blue-100 flex items-center justify-center text-blue-600`},[O(`i`,{class:`fa fa-file-upload text-xl`})]),O(`div`,null,[O(`h3`,{class:`font-medium text-slate-800`},`Upload File`),O(`p`,{class:`text-xs text-gray-500 mt-1`},`PDF, CSV, or Excel bank statements`)])],-1)]]),_:1},8,[`class`]),k(G(Y),{class:A([`p-6 cursor-pointer hover:border-yellow-500 transition-all border-2`,o.value===`api`?`border-yellow-500 bg-yellow-50`:`border-transparent hover:bg-slate-50`]),onClick:n[1]||=e=>c(`api`)},{default:U(()=>[...n[7]||=[O(`div`,{class:`flex flex-col items-center text-center gap-3`},[O(`div`,{class:`h-12 w-12 rounded-full bg-yellow-100 flex items-center justify-center text-yellow-600`},[O(`i`,{class:`fa fa-university text-xl`})]),O(`div`,null,[O(`h3`,{class:`font-medium text-slate-800`},`Connect Bank API`),O(`p`,{class:`text-xs text-gray-500 mt-1`},`Mono, Flutterwave, Paystack`)])],-1)]]),_:1},8,[`class`])])):v(``,!0),a.value===1?(H(),z(`div`,At,[k(G(J),{variant:`ghost`,onClick:n[2]||=e=>t.$emit(`close`)},{default:U(()=>[...n[8]||=[E(`Cancel`,-1)]]),_:1})])):v(``,!0),a.value===2&&o.value===`file`?(H(),z(`div`,jt,[O(`div`,{class:`border-2 border-dashed border-gray-300 rounded-lg p-12 text-center hover:bg-gray-50 transition-colors cursor-pointer`,onDragover:n[3]||=j(()=>{},[`prevent`]),onDrop:j(d,[`prevent`]),onClick:l},[O(`input`,{type:`file`,ref_key:`fileInput`,ref:s,class:`hidden`,onChange:u,accept:`.csv,.xlsx,.xls,.pdf`},null,544),n[9]||=O(`i`,{class:`fa fa-cloud-upload-alt text-5xl text-blue-100 mb-4`},null,-1),n[10]||=O(`h3`,{class:`text-lg font-medium text-slate-700`},`Click or drag file to upload`,-1),n[11]||=O(`p`,{class:`text-sm text-gray-500 mt-2`},`Supported formats: CSV, Excel, PDF`,-1)],32),O(`div`,Mt,[k(G(J),{variant:`ghost`,onClick:n[4]||=e=>a.value=1},{default:U(()=>[...n[12]||=[E(`Back`,-1)]]),_:1})])])):v(``,!0),a.value===3?(H(),z(`div`,Nt,[...n[13]||=[w(`<div class="relative w-24 h-24 mx-auto mb-6"><div class="absolute inset-0 border-4 border-gray-100 rounded-full"></div><div class="absolute inset-0 border-4 border-blue-500 rounded-full border-t-transparent animate-spin"></div><i class="fa fa-magic absolute inset-0 flex items-center justify-center text-blue-500 text-2xl"></i></div><h3 class="text-lg font-medium text-slate-800">Processing...</h3><p class="text-gray-500 mt-2">Uploading and analyzing your transaction file.</p>`,3)]])):v(``,!0),a.value===4?(H(),z(`div`,Pt,[n[15]||=O(`div`,{class:`bg-green-50 text-green-700 p-6 rounded-full w-20 h-20 mx-auto flex items-center justify-center`},[O(`i`,{class:`fa fa-check text-3xl`})],-1),n[16]||=O(`div`,null,[O(`h3`,{class:`text-xl font-semibold text-slate-800`},`Upload Successful!`),O(`p`,{class:`text-gray-500 mt-2`},`Your transactions are being processed in the background.`)],-1),k(G(J),{onClick:ee,class:`w-full md:w-auto min-w-[200px]`},{default:U(()=>[...n[14]||=[E(`View Transactions`,-1)]]),_:1})])):v(``,!0)]))}},It={__name:`ReviewQueue`,props:{account:{type:Object,required:!0}},setup(e){return(e,t)=>(H(),B(G(Y),{class:`p-0 overflow-hidden`},{default:U(()=>[...t[0]||=[O(`div`,{class:`p-6 border-b`},[O(`h2`,{class:`text-lg font-semibold text-slate-800`},`Review Queue`),O(`p`,{class:`text-gray-500 text-sm`},`Transactions flagged for manual review (low confidence).`)],-1),O(`div`,{class:`text-center py-12 text-gray-500`},[O(`i`,{class:`fa fa-check-double text-4xl text-gray-200 mb-4`}),O(`p`,null,`No items in review queue`),O(`p`,{class:`text-xs mt-1`},`Great job! All transactions are processed.`)],-1)]]),_:1}))}},Lt={class:`relative w-full min-h-screen overflow-y-scroll rounded-sm py-5`,style:{"scrollbar-width":`none`}},Rt={class:`container mx-auto p-8 relative`},zt={class:`flex flex-col md:flex-row justify-between items-start md:items-center gap-4 mb-8`},Bt={class:`flex flex-col`},Vt={class:`text-2xl font-bold text-slate-800 flex items-center gap-2`},Ht={class:`text-gray-600 text-sm`},Ut={class:`flex gap-3 w-full md:w-auto`},Wt={class:`min-h-[400px]`},Gt={key:0,class:`flex justify-center items-center h-64`},Kt={class:`mb-6 z-0 relative`},qt={__name:`AccountDashboard`,setup(e){let t=ue(),n=pe(),r=ce().toast,i=t.params.reference,a=L(null),o=L(!0),s=L(!1),c=L(`overview`),f=L(0),ee=[{id:`overview`,name:`Overview`,icon:`fa-chart-pie`},{id:`transactions`,name:`Transactions`,icon:`fa-list`},{id:`review`,name:`Review Queue`,icon:`fa-tasks`},{id:`settings`,name:`Settings`,icon:`fa-cog`}];ae(async()=>{await p()});async function p(){try{if(o.value=!0,a.value=((await Ee.getBankAccounts()).data||[]).find(e=>e.reference===i),!a.value)throw Error(`Account not found`)}catch{r({id:`load-error`,title:`Error`,description:`Failed to load account details`,variant:`destructive`}),n.push(`/accounts`)}finally{o.value=!1}}function te(){s.value=!1,c.value=`transactions`,p(),f.value++}function ne(e){return e?`****${e.slice(-4)}`:`N/A`}return(e,t)=>(H(),z(`div`,Lt,[O(`div`,Rt,[O(`div`,zt,[O(`div`,Bt,[O(`h1`,Vt,M(a.value?.accountName||`Loading...`),1),O(`p`,Ht,M(a.value?.bankName)+` • `+M(ne(a.value?.accountNumber)),1)]),O(`div`,Ut,[k(G(me),{open:s.value,"onUpdate:open":t[1]||=e=>s.value=e},{default:U(()=>[k(G(Ae),{"as-child":``},{default:U(()=>[k(G(J),{variant:`outline`,class:`rounded-full flex-1 md:flex-none`,disabled:!a.value},{default:U(()=>[...t[3]||=[O(`i`,{class:`fa fa-sync mr-2`},null,-1),E(` Sync `,-1)]]),_:1},8,[`disabled`])]),_:1}),k(G(he),{class:`max-w-3xl p-0`},{default:U(()=>[k(Ft,{account:a.value,onUploadComplete:te,onClose:t[0]||=e=>s.value=!1},null,8,[`account`])]),_:1})]),_:1},8,[`open`]),k(G(u),null,{default:U(()=>[k(G(d),{"as-child":``},{default:U(()=>[k(G(J),{class:`rounded-full flex-1 md:flex-none shadow-md hover:shadow-blue-400`},{default:U(()=>[k(G(N),{class:`mr-2 h-4 w-4 text-blue-200`}),t[4]||=E(` Flow `,-1)]),_:1})]),_:1}),k(G(l),{class:`w-[400px] sm:w-[540px] p-0 border-l shadow-2xl`},{default:U(()=>[k(be,{account:a.value},null,8,[`account`])]),_:1})]),_:1})])]),O(`div`,Wt,[o.value?(H(),z(`div`,Gt,[...t[5]||=[O(`i`,{class:`fa fa-cog animate-spin text-3xl text-gray-400`},null,-1)]])):(H(),B(G(m),{key:1,modelValue:c.value,"onUpdate:modelValue":t[2]||=e=>c.value=e,class:`w-full`},{default:U(()=>[O(`div`,Kt,[t[6]||=O(`hr`,{class:`h-1 bg-slate-50 mb-1 mt-10 opacity-20`},null,-1),k(G(g),{class:`rounded-full bg-stone-100 text-blue-950 px-0.5 py-0.5 w-fit`},{default:U(()=>[(H(),z(W,null,F(ee,e=>k(G(_),{key:e.id,value:e.id,class:`px-4 py-1 rounded-full data-[state=active]:bg-stone-50 data-[state=active]:text-blue-950 transition-all`},{default:U(()=>[O(`i`,{class:A([`fa mr-2`,e.icon])},null,2),E(` `+M(e.name),1)]),_:2},1032,[`value`])),64))]),_:1}),t[7]||=O(`hr`,{class:`h-1 bg-slate-50 mt-2 mb-10 opacity-30`},null,-1)]),k(G(h),{value:`overview`,class:``},{default:U(()=>[k(Ue,{account:a.value},null,8,[`account`])]),_:1}),k(G(h),{value:`transactions`,class:``},{default:U(()=>[(H(),B(Tt,{account:a.value,key:f.value},null,8,[`account`]))]),_:1}),k(G(h),{value:`review`,class:``},{default:U(()=>[k(It,{account:a.value},null,8,[`account`])]),_:1}),k(G(h),{value:`settings`,class:``},{default:U(()=>[...t[8]||=[O(`div`,{class:`p-8 text-center text-gray-500 bg-slate-50 rounded-lg border border-dashed`},[O(`i`,{class:`fa fa-cog text-4xl mb-4 text-gray-300`}),O(`p`,null,`Settings coming soon`)],-1)]]),_:1})]),_:1},8,[`modelValue`]))])])]))}};export{qt as default};