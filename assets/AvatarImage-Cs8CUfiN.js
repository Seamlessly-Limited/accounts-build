import{At as e,Bt as t,D as n,G as r,N as i,St as a,Tt as o,Vt as s,Wt as c,Xt as l,Zt as u,hn as d,ht as f,ln as p,nn as m,nt as h,pn as g,tn as _,wt as v,zt as y}from"./index-Du2czi9R.js";var[b,x]=h(`AvatarRoot`),S=e({__name:`AvatarRoot`,props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:`span`}},setup(e){return i(),x({imageLoadingStatus:p(`idle`)}),(e,t)=>(s(),v(d(n),{"as-child":e.asChild,as:e.as},{default:_(()=>[c(e.$slots,`default`)]),_:3},8,[`as-child`,`as`]))}}),C=e({__name:`AvatarFallback`,props:{delayMs:{type:Number,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:`span`}},setup(e){let t=e,a=b();i();let l=p(t.delayMs===void 0);return u(e=>{if(t.delayMs&&r){let n=window.setTimeout(()=>{l.value=!0},t.delayMs);e(()=>{window.clearTimeout(n)})}}),(e,t)=>l.value&&d(a).imageLoadingStatus.value!==`loaded`?(s(),v(d(n),{key:0,"as-child":e.asChild,as:e.as},{default:_(()=>[c(e.$slots,`default`)]),_:3},8,[`as-child`,`as`])):o(`v-if`,!0)}});function w(e,t){return e?t?(e.src!==t&&(e.src=t),e.complete&&e.naturalWidth>0?`loaded`:`loading`):`error`:`idle`}function T(e,{referrerPolicy:n,crossOrigin:i}={}){let o=p(!1),s=p(null),c=a(()=>o.value?(!s.value&&r&&(s.value=new window.Image),s.value):null),l=p(w(c.value,e.value)),d=e=>()=>{o.value&&(l.value=e)};return y(()=>{o.value=!0,u(t=>{let r=c.value;if(!r)return;l.value=w(r,e.value);let a=d(`loaded`),o=d(`error`);r.addEventListener(`load`,a),r.addEventListener(`error`,o),n?.value&&(r.referrerPolicy=n.value),typeof i?.value==`string`&&(r.crossOrigin=i.value),t(()=>{r.removeEventListener(`load`,a),r.removeEventListener(`error`,o)})})}),t(()=>{o.value=!1}),l}var E=e({__name:`AvatarImage`,props:{src:{type:String,required:!0},referrerPolicy:{type:null,required:!1},crossOrigin:{type:null,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:`img`}},emits:[`loadingStatusChange`],setup(e,{emit:t}){let r=e,a=t,{src:o,referrerPolicy:u,crossOrigin:p}=g(r);i();let h=b(),y=T(o,{referrerPolicy:u,crossOrigin:p});return l(y,e=>{a(`loadingStatusChange`,e),e!==`idle`&&(h.imageLoadingStatus.value=e)},{immediate:!0}),(e,t)=>m((s(),v(d(n),{role:`img`,"as-child":e.asChild,as:e.as,src:d(o),"referrer-policy":d(u)},{default:_(()=>[c(e.$slots,`default`)]),_:3},8,[`as-child`,`as`,`src`,`referrer-policy`])),[[f,d(y)===`loaded`]])}});export{C as n,S as r,E as t};