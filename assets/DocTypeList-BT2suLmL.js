import"./useFormControl-Dnp3iC5X.js";import"./useNonce-CnEoXn07.js";import"./nullish-CfjOSA4G.js";import"./ConfigProvider-Ckl6KgMj.js";import"./useHideOthers-L15EfXxs.js";import"./useDirection-B1kSZwKq.js";import"./PopperAnchor-Sq61S0mP.js";import"./useId-Da-MS2me.js";import"./PopperContent-b6gGwF_E.js";import"./useTypeahead---iVCXRs.js";import"./Teleport-BJpx-KiC.js";import"./utils-BpsHH13c.js";import"./SelectViewport-BHDGvtQj.js";import{$ as e,$i as t,At as n,Fi as r,Hn as ee,Li as i,Mi as a,Mt as o,N as s,Ni as c,Nt as te,Oa as l,Oi as u,Pi as d,Ri as f,St as ne,Ta as p,V as m,Xn as h,Yi as g,Zi as _,ar as re,ct as ie,da as v,dt as ae,en as oe,ji as y,ka as b,na as se,nn as x,o as S,rn as C,rr as w,sr as T,tt as E,un as D,w as O,ya as k}from"./index-CHNvwQRL.js";import{t as A}from"./WorkspaceStore-Djee2ZJb.js";import{n as j}from"./button-DSlecn3R.js";import{t as M}from"./Input-C1gBbhGk.js";import{a as N,i as P,n as F,r as I,t as L}from"./SelectValue-C8x3HZX3.js";var R={class:`h-full flex flex-col bg-gray-50`},z={class:`flex-none px-6 py-4 bg-white border-b border-gray-200 flex items-center justify-between`},B={class:`flex items-center space-x-3`},V={class:`w-10 h-10 rounded-xl bg-slate-600 flex items-center justify-center`},H={class:`text-sm text-gray-500`},U={class:`flex-none px-6 py-3 bg-white border-b border-gray-100 flex items-center gap-4`},W={class:`relative flex-1 max-w-md`},ce={class:`flex-1 overflow-auto`},G={key:0,class:`flex justify-center items-center h-64`},le={key:1,class:`flex flex-col items-center justify-center h-64 text-gray-500`},ue={key:2,class:`divide-y divide-gray-100`},de=[`onClick`],fe={class:`flex-1 min-w-0`},pe={class:`flex items-center gap-2`},me={class:`font-medium text-gray-900`},he={key:0,class:`px-1.5 py-0.5 text-xs bg-gray-100 text-gray-600 rounded`},ge={key:1,class:`px-1.5 py-0.5 text-xs bg-blue-100 text-blue-600 rounded`},_e={key:0,class:`text-sm text-gray-500 truncate`},ve={class:`flex-shrink-0 flex items-center gap-2`},ye={class:`px-2 py-1 text-xs font-medium bg-gray-100 text-gray-700 rounded-full flex items-center gap-1`},be={class:`flex-shrink-0 text-right w-20`},xe={class:`text-sm text-gray-500`},Se={__name:`DocTypeList`,props:{doctype:{type:String,default:`DocType`}},setup(Se){let K=A(),q=k(!0),J=k([]),Y=k(``),X=k(``),Ce={FileCode:D,FileText:C,Users:O,Package:ne,Receipt:ie,Box:w,Store:m,Truck:s,BookOpen:re,Bell:T,Mail:n,Lock:o,File:x,Folder:oe,Calendar:h,Settings:e},we=y(()=>{let e=new Set(J.value.map(e=>e.module).filter(Boolean));return Array.from(e).sort()}),Z=y(()=>{let e=J.value;if(Y.value){let t=Y.value.toLowerCase();e=e.filter(e=>e.name.toLowerCase().includes(t)||e.description?.toLowerCase().includes(t))}return X.value&&X.value!==`__all__`&&(e=e.filter(e=>e.module===X.value)),e});async function Q(){q.value=!0;try{J.value=(await S.get(`/org/doctypes`,{authorizeRequest:!0,organisationAware:!0}))?.data||[]}catch(e){console.error(`Failed to load DocTypes:`,e)}finally{q.value=!1}}function Te(e){console.log(`Opening DocType:`,e.name),K.openTab({id:`doctype-form-DocType-${e.name}`,title:e.name,icon:e.icon||`FileCode`,type:`doctype-form`,doctype:`DocType`,docName:e.name,isNew:!1,closable:!0})}function $(){console.log(`Creating new DocType`),K.openTab({id:`doctype-form-DocType-new`,title:`New DocType`,icon:`FileCode`,type:`doctype-form`,doctype:`DocType`,isNew:!0,closable:!0})}return g(()=>{Q()}),(e,n)=>(_(),r(`div`,R,[a(`header`,z,[a(`div`,B,[a(`div`,V,[f(p(D),{class:`w-5 h-5 text-white`})]),a(`div`,null,[n[2]||=a(`h1`,{class:`text-xl font-bold text-gray-900`},`DocType`,-1),a(`p`,H,b(J.value.length)+` DocTypes`,1)])]),f(p(j),{onClick:$,class:`rounded-full`},{default:v(()=>[f(p(ae),{class:`w-4 h-4 mr-2`}),n[3]||=i(` New `,-1)]),_:1})]),a(`div`,U,[a(`div`,W,[f(p(E),{class:`absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400`}),f(p(M),{modelValue:Y.value,"onUpdate:modelValue":n[0]||=e=>Y.value=e,placeholder:`Search DocTypes...`,class:`pl-10`},null,8,[`modelValue`])]),f(p(N),{modelValue:X.value,"onUpdate:modelValue":n[1]||=e=>X.value=e},{default:v(()=>[f(p(F),{class:`w-40 bg-white`},{default:v(()=>[f(p(L),{placeholder:`All Modules`})]),_:1}),f(p(P),null,{default:v(()=>[f(p(I),{value:`__all__`},{default:v(()=>[...n[4]||=[i(`All Modules`,-1)]]),_:1}),(_(!0),r(u,null,t(we.value,e=>(_(),c(p(I),{key:e,value:e},{default:v(()=>[i(b(e),1)]),_:2},1032,[`value`]))),128))]),_:1})]),_:1},8,[`modelValue`])]),a(`div`,ce,[q.value?(_(),r(`div`,G,[f(p(te),{class:`w-8 h-8 animate-spin text-gray-400`})])):Z.value.length===0?(_(),r(`div`,le,[f(p(D),{class:`w-12 h-12 mb-3 text-gray-300`}),n[6]||=a(`p`,null,`No DocTypes found`,-1),f(p(j),{onClick:$,variant:`link`,class:`mt-2`},{default:v(()=>[...n[5]||=[i(` Create your first DocType `,-1)]]),_:1})])):(_(),r(`div`,ue,[(_(!0),r(u,null,t(Z.value,e=>(_(),r(`div`,{key:e.name,class:`px-6 py-4 bg-white hover:bg-gray-50 cursor-pointer transition-colors flex items-center gap-4`,onClick:t=>Te(e)},[a(`div`,{class:`w-10 h-10 rounded-lg flex items-center justify-center flex-shrink-0`,style:l({backgroundColor:e.color||`#6366F1`})},[(_(),c(se(Ce[e.icon]||p(C)),{class:`w-5 h-5 text-white`}))],4),a(`div`,fe,[a(`div`,pe,[a(`span`,me,b(e.name),1),e.is_child?(_(),r(`span`,he,` Child `)):d(``,!0),e.is_submittable?(_(),r(`span`,ge,` Submittable `)):d(``,!0)]),e.description?(_(),r(`p`,_e,b(e.description),1)):d(``,!0)]),a(`div`,ve,[a(`span`,ye,[e.module===`System`?(_(),c(p(o),{key:0,class:`w-3 h-3`})):d(``,!0),i(` `+b(e.module),1)])]),a(`div`,be,[a(`span`,xe,b(e.fields?.length||0)+` fields`,1)]),f(p(ee),{class:`w-5 h-5 text-gray-300 flex-shrink-0`})],8,de))),128))]))])]))}};export{Se as default};