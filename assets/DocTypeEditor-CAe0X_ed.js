import"./useFormControl-BWOmmYiS.js";import"./useNonce-VOgClyGr.js";import"./nullish-CfjOSA4G.js";import"./CheckboxIndicator-Blzh6aVh.js";import"./useArrowNavigation-siWGBYoD.js";import"./ConfigProvider-BwNXqMge.js";import"./useHideOthers-C416Re6d.js";import"./PopoverTrigger-BZLuwVXx.js";import"./useDirection-DYJPYRsI.js";import"./PopperAnchor-BHV4Kv-d.js";import"./useId-BEfc-0Pq.js";import"./useKbd-BvGB3m10.js";import"./PopperContent-DYn2KUeQ.js";import"./useTypeahead-b61J-STi.js";import"./Teleport-DrGXNRYb.js";import"./utils-BEsFB3CI.js";import"./utils-DlRpuNf9.js";import"./RovingFocusGroup-DqYe3043.js";import"./RovingFocusItem-DGQRTR_g.js";import"./VisuallyHiddenInput-DK27W3yR.js";import"./DropdownMenuTrigger-BcawehIV.js";import"./DropdownMenuLabel-bHLoSNvO.js";import"./MenuSeparator-CdyJpxbp.js";import"./DropdownMenuSeparator-BpqBZXgG.js";import"./Label-BycvDR_g.js";import"./SelectViewport-BKt93lbc.js";import{a as e,i as t,r as n,t as r}from"./tabs-BK26r2nl.js";import{A as i,B as a,Bi as o,Bt as ee,C as s,Ct as te,Et as ne,F as c,Fa as l,Fi as u,Ft as re,H as ie,Hi as d,I as f,In as ae,Jn as oe,K as se,Ki as p,La as ce,Li as m,Ln as le,Lt as ue,M as h,Mi as de,Nn as fe,Oa as g,On as pe,Ot as _,Pa as v,Pn as y,Pt as me,Qt as he,R as b,Ra as x,Sn as ge,Tn as _e,Tt as ve,Ui as S,Vi as C,Vt as w,Wi as T,Wt as ye,Yn as E,Zn as be,a as xe,ar as D,b as O,ba as k,ca as A,cn as Se,da as j,dn as Ce,dt as we,fn as Te,hr as Ee,i as De,ia as Oe,ir as M,ln as ke,lr as Ae,mt as N,o as P,oa as F,pr as I,qi as L,qt as R,r as je,rn as z,rr as Me,st as Ne,tn as Pe,tt as Fe,ur as Ie,vn as Le,vt as Re,wt as ze,xa as Be,xn as Ve,xt as He,y as Ue,yr as We,yt as Ge,zt as Ke}from"./index-CTHZVx0Q.js";import{t as qe}from"./purify.es-CR14pynC.js";import"./button-DTHLpYkO.js";import{t as Je}from"./WorkspaceStore-gf1m868h.js";import{t as B}from"./Input-lhwdatZg.js";import{i as Ye,n as V,r as Xe,t as Ze}from"./DropdownMenuTrigger-DbkkbPD4.js";import{t as H}from"./DropdownMenuLabel-DI3UOPEr.js";import{t as Qe}from"./DropdownMenuSeparator-B_buUvpU.js";import{n as U}from"./button-BXx_oIr0.js";import{t as W}from"./Input-CYUkGq0t.js";import{t as $e}from"./Textarea-CJYS2FQM.js";import{t as G}from"./Card-jzahid1F.js";import{t as K}from"./Label-DSO81TnJ.js";import{t as q}from"./Checkbox-BuQ-_Uo5.js";import{t as et}from"./DateField-B6H4tpap.js";import{a as J,i as Y,n as X,r as Z,t as Q}from"./SelectValue-DoC6zE2e.js";import{t as tt}from"./marked.esm-L-WIQlRx.js";import{a as nt,i as rt,n as it,r as at,t as ot}from"./SelectValue-D9lo6-Gu.js";const $={DATA:{label:`Short Text`,icon:`Type`,category:`text`,dbType:`VARCHAR(255)`,description:`Single line text input`},TEXT:{label:`Long Text`,icon:`AlignLeft`,category:`text`,dbType:`TEXT`,description:`Multi-line text area`},SMALL_TEXT:{label:`Small Text`,icon:`Text`,category:`text`,dbType:`VARCHAR(500)`,description:`Short multi-line text`},LONG_TEXT:{label:`Rich Text`,icon:`FileText`,category:`text`,dbType:`TEXT`,description:`Long text with larger UI`},INT:{label:`Integer`,icon:`Hash`,category:`number`,dbType:`BIGINT`,description:`Whole number`},FLOAT:{label:`Decimal`,icon:`Calculator`,category:`number`,dbType:`DOUBLE PRECISION`,description:`Decimal number`},CURRENCY:{label:`Currency`,icon:`DollarSign`,category:`number`,dbType:`DECIMAL(19,4)`,description:`Money with 4 decimal places`},PERCENT:{label:`Percent`,icon:`Percent`,category:`number`,dbType:`DECIMAL(5,2)`,description:`Percentage (0-100)`},DATE:{label:`Date`,icon:`Calendar`,category:`datetime`,dbType:`DATE`,description:`Date picker`},DATETIME:{label:`Date & Time`,icon:`CalendarClock`,category:`datetime`,dbType:`TIMESTAMP`,description:`Date and time picker`},TIME:{label:`Time`,icon:`Clock`,category:`datetime`,dbType:`TIME`,description:`Time picker`},DURATION:{label:`Duration`,icon:`Timer`,category:`datetime`,dbType:`BIGINT`,description:`Duration in seconds`},CHECKBOX:{label:`Checkbox`,icon:`CheckSquare`,category:`choice`,dbType:`BOOLEAN`,description:`Yes/No checkbox`},SELECT:{label:`Select`,icon:`List`,category:`choice`,dbType:`VARCHAR(255)`,description:`Single select dropdown`,requiresOptions:!0},MULTI_SELECT:{label:`Multi Select`,icon:`ListChecks`,category:`choice`,dbType:`JSONB`,description:`Multiple selection`},LINK:{label:`Link`,icon:`Link2`,category:`relationship`,dbType:`VARCHAR(255)`,description:`Link to another DocType`,requiresOptions:!0,optionsLabel:`Target DocType`},TABLE:{label:`Table`,icon:`Table`,category:`relationship`,dbType:null,description:`Child table`,requiresOptions:!0,optionsLabel:`Child DocType`},ATTACH:{label:`Attachment`,icon:`Paperclip`,category:`file`,dbType:`VARCHAR(500)`,description:`File attachment`},ATTACH_IMAGE:{label:`Image`,icon:`Image`,category:`file`,dbType:`VARCHAR(500)`,description:`Image attachment`},SIGNATURE:{label:`Signature`,icon:`PenTool`,category:`file`,dbType:`TEXT`,description:`Signature capture`},PHONE:{label:`Phone`,icon:`Phone`,category:`contact`,dbType:`VARCHAR(50)`,description:`Phone number`},EMAIL:{label:`Email`,icon:`Mail`,category:`contact`,dbType:`VARCHAR(255)`,description:`Email address`},COLOR:{label:`Color`,icon:`Palette`,category:`special`,dbType:`VARCHAR(20)`,description:`Hex color picker`},JSON:{label:`JSON`,icon:`Braces`,category:`special`,dbType:`JSONB`,description:`Arbitrary JSON data`},PASSWORD:{label:`Password`,icon:`Lock`,category:`special`,dbType:`VARCHAR(255)`,description:`Masked password input`},READ_ONLY:{label:`Read Only`,icon:`Eye`,category:`special`,dbType:null,description:`Display only, no storage`},HTML:{label:`HTML`,icon:`Code`,category:`special`,dbType:`TEXT`,description:`Rich HTML content`},GEOLOCATION:{label:`Geolocation`,icon:`MapPin`,category:`special`,dbType:`JSONB`,description:`Lat/Lng coordinates`},SECTION_BREAK:{label:`Section Break`,icon:`Minus`,category:`layout`,dbType:null,description:`Section separator`,isLayout:!0},COLUMN_BREAK:{label:`Column Break`,icon:`Columns`,category:`layout`,dbType:null,description:`Column separator`,isLayout:!0},TAB_BREAK:{label:`Tab Break`,icon:`LayoutGrid`,category:`layout`,dbType:null,description:`Tab separator`,isLayout:!0}},st={text:{label:`Text`,icon:`Type`},number:{label:`Number`,icon:`Hash`},datetime:{label:`Date & Time`,icon:`Calendar`},choice:{label:`Choice`,icon:`List`},relationship:{label:`Relationship`,icon:`Link2`},file:{label:`File`,icon:`Paperclip`},contact:{label:`Contact`,icon:`User`},special:{label:`Special`,icon:`Sparkles`},layout:{label:`Layout`,icon:`LayoutGrid`}},ct=[{value:`Accounting`,label:`Accounting`,icon:`BookOpen`,color:`#10B981`},{value:`Billing`,label:`Billing`,icon:`Receipt`,color:`#84CC16`},{value:`Buying`,label:`Buying`,icon:`ShoppingBag`,color:`#EAB308`},{value:`CRM`,label:`CRM`,icon:`Users`,color:`#F97316`},{value:`Sales`,label:`Sales`,icon:`TrendingUp`,color:`#EF4444`},{value:`Stock`,label:`Stock`,icon:`Package`,color:`#EC4899`},{value:`System`,label:`System`,icon:`Settings`,color:`#000000`}],lt=[{value:`AUTO_INCREMENT`,label:`Auto Increment`,description:`Sequential numbers (e.g., 00001, 00002)`},{value:`UUID`,label:`UUID`,description:`Random unique identifier`}],ut={name:``,module:`CRM`,description:``,documentation:``,icon:`File`,color:`#3B82F6`,isChild:!1,isSubmittable:!1,isSingle:!1,trackChanges:!0,hasId:!0,idPrefix:``,idSuffix:``,idMinLength:5,idGenerationStrategy:`AUTO_INCREMENT`,titleField:`name`,searchFields:``,sortField:`created_at`,sortOrder:`DESC`,fields:[]},dt={fieldname:``,label:``,fieldtype:`DATA`,options:``,reqd:!1,is_unique:!1,default_value:``,hidden:!1,read_only:!1,in_list_view:!1,in_filter:!1,search_index:!1,placeholder:``,description:``};function ft(){let e={};for(let[t,n]of Object.entries($))e[n.category]||(e[n.category]=[]),e[n.category].push({type:t,...n});return e}function pt(e){return e.toLowerCase().replace(/[^a-z0-9\s]/g,``).replace(/\s+/g,`_`).substring(0,63)}var mt={class:`flex items-center justify-between mb-4`},ht={key:0,class:`border-2 shadow-md border-gray-200 rounded-lg p-8 text-center`},gt={key:0,class:`text-sm text-gray-400`},_t={key:1,class:`text-sm text-gray-400`},vt={key:1,class:`space-y-2`},yt=[`onClick`],bt={class:`flex-1 min-w-0`},xt={class:`flex items-center gap-2`},St={class:`font-medium truncate`},Ct={key:0,class:`text-red-500 text-xs`},wt={class:`flex items-center gap-2 text-xs text-gray-500`},Tt={class:`bg-gray-100 px-1 rounded`},Et={class:`px-1.5 py-0.5 bg-gray-100 rounded`},Dt={key:0,class:`p-4 border-t bg-gray-50/50 space-y-4`},Ot={class:`grid grid-cols-2 gap-4`},kt={class:`space-y-1.5`},At={class:`space-y-1.5`},jt={key:0,class:`col-span-2 space-y-1.5`},Mt={key:1,class:`space-y-1.5 flex-1`},Nt={key:2,class:`space-y-1.5`},Pt={class:`col-span-2 pt-4 border-t`},Ft={class:`grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-4`},It={class:`col-span-2 space-y-1.5`},Lt={__name:`FieldBuilder`,props:{modelValue:{type:Array,default:()=>[]},availableDocTypes:{type:Array,default:()=>[]},disabled:{type:Boolean,default:!1}},emits:[`update:modelValue`],setup(e,{emit:t}){let n=e,r=t,s=g(null),ne={Type:i,AlignLeft:b,Text:b,Hash:Pe,Calculator:D,DollarSign:pe,Percent:Ge,Calendar:Me,CalendarClock:M,Clock:le,Timer:f,CheckSquare:se,List:ee,ListChecks:w,Link2:ye,Table:a,Paperclip:te,Image:he,PenTool:He,Phone:Re,Mail:re,Palette:ve,Braces:Ae,Lock:ue,Eye:Ve,Code:ae,Minus:_,Columns:y,LayoutGrid:R,MapPin:me},ie={text:`bg-blue-500`,number:`bg-green-500`,datetime:`bg-blue-400`,choice:`bg-orange-500`,relationship:`bg-pink-500`,file:`bg-yellow-500`,contact:`bg-cyan-500`,special:`bg-gray-500`,layout:`bg-slate-400`},ce=[{key:`reqd`,label:`Required`},{key:`in_list_view`,label:`Show in List`},{key:`in_filter`,label:`Filterable`},{key:`search_index`,label:`Indexed`},{key:`is_unique`,label:`Unique`},{key:`hidden`,label:`Hidden`},{key:`read_only`,label:`Read Only`}],h=new WeakMap,de=0,fe=o(()=>ft()),ge=ce;function _e(e){return h.has(e)||h.set(e,`f-${++de}`),h.get(e)}function xe(e){let t=$[e]?.category;return ie[t]||`bg-gray-500`}function O(e){return $[e]||null}function Se(e){let t={...dt,fieldtype:e,fieldname:``,label:``};r(`update:modelValue`,[...n.modelValue,t]),s.value=n.modelValue.length}function Ce(e){let t=[...n.modelValue];t.splice(e,1),r(`update:modelValue`,t),s.value===e?s.value=null:s.value>e&&s.value--}function we(e,t){let i=e+t;if(i<0||i>=n.modelValue.length)return;let a=[...n.modelValue],[o]=a.splice(e,1);a.splice(i,0,o),r(`update:modelValue`,a),s.value===e?s.value=i:s.value===i&&(s.value=e)}function Te(e){s.value=s.value===e?null:e}function Ee(e){!e.fieldname&&e.label&&(e.fieldname=pt(e.label))}return(t,n)=>(F(),d(v(G),{class:`p-6 bg-white/80`},{default:k(()=>[C(`div`,mt,[n[4]||=C(`div`,null,[C(`h3`,{class:`font-semibold text-lg`},`Fields`),C(`p`,{class:`text-sm text-gray-500`},`Define the data structure for this DocType`)],-1),e.disabled?S(``,!0):(F(),d(v(Ye),{key:0},{default:k(()=>[L(v(Ze),{asChild:``},{default:k(()=>[L(v(U),{class:`rounded-full`},{default:k(()=>[L(v(N),{class:`w-4 h-4 mr-2`}),n[2]||=p(` Add Field `,-1)]),_:1})]),_:1}),L(v(Xe),{class:`w-56 overflow-y-scroll max-h-[400px]`,style:{"scrollbar-width":`none`}},{default:k(()=>[L(v(H),null,{default:k(()=>[...n[3]||=[p(`Field Type`,-1)]]),_:1}),L(v(Qe)),(F(!0),T(m,null,A(fe.value,(e,t)=>(F(),T(m,{key:t},[L(v(H),{class:`text-xs text-gray-400 uppercase`},{default:k(()=>[p(x(v(st)[t]?.label||t),1)]),_:2},1024),(F(!0),T(m,null,A(e,e=>(F(),d(v(V),{key:e.type,onClick:t=>Se(e.type)},{default:k(()=>[(F(),d(j(ne[e.icon]),{class:`w-4 h-4 mr-2`})),p(` `+x(e.label),1)]),_:2},1032,[`onClick`]))),128)),L(v(Qe))],64))),128))]),_:1})]),_:1}))]),e.modelValue.length===0?(F(),T(`div`,ht,[L(v(ee),{class:`w-12 h-12 mx-auto text-gray-300 mb-3`}),n[5]||=C(`p`,{class:`text-gray-500`},`No fields defined yet`,-1),e.disabled?(F(),T(`p`,_t,`This DocType has no fields and is read-only.`)):(F(),T(`p`,gt,`Click "Add Field" to start building your DocType`))])):(F(),T(`div`,vt,[(F(!0),T(m,null,A(e.modelValue,(t,r)=>(F(),T(`div`,{key:_e(t),class:l([`border border-gray-200 rounded-lg bg-white transition-all overflow-hidden`,{"ring-2 ring-blue-500 shadow-md scale-[1.01] z-10":s.value===r}])},[C(`div`,{class:`flex items-center gap-3 p-3 cursor-pointer hover:bg-gray-50`,onClick:e=>Te(r)},[C(`div`,{class:`cursor-grab text-gray-400 hover:text-gray-600`,onMousedown:n[0]||=u(()=>{},[`stop`])},[L(v(z),{class:`w-4 h-4`})],32),C(`div`,{class:l([`w-8 h-8 rounded flex items-center justify-center transition-colors`,xe(t.fieldtype)])},[(F(),d(j(ne[v($)[t.fieldtype]?.icon||`Type`]),{class:`w-4 h-4 text-white`}))],2),C(`div`,bt,[C(`div`,xt,[C(`span`,St,x(t.label||`Untitled Field`),1),t.reqd?(F(),T(`span`,Ct,`*`)):S(``,!0)]),C(`div`,wt,[C(`code`,Tt,x(t.fieldname||`...`),1),C(`span`,Et,x(v($)[t.fieldtype]?.label||t.fieldtype),1)])]),e.disabled?S(``,!0):(F(),T(`div`,{key:0,class:`flex items-center gap-1`,onClick:n[1]||=u(()=>{},[`stop`])},[L(v(U),{variant:`ghost`,size:`sm`,onClick:e=>we(r,-1),disabled:r===0,class:`h-8 w-8 p-0`},{default:k(()=>[L(v(oe),{class:`w-4 h-4`})]),_:1},8,[`onClick`,`disabled`]),L(v(U),{variant:`ghost`,size:`sm`,onClick:e=>we(r,1),disabled:r===e.modelValue.length-1,class:`h-8 w-8 p-0`},{default:k(()=>[L(v(be),{class:`w-4 h-4`})]),_:1},8,[`onClick`,`disabled`]),L(v(U),{variant:`ghost`,size:`sm`,class:`text-red-500 hover:text-red-600 hover:bg-red-50 h-8 w-8 p-0`,onClick:e=>Ce(r)},{default:k(()=>[L(v(c),{class:`w-4 h-4`})]),_:1},8,[`onClick`])])),L(v(E),{class:l([`w-4 h-4 text-gray-400 transition-transform`,{"rotate-90":s.value===r}])},null,8,[`class`])],8,yt),s.value===r?(F(),T(`div`,Dt,[C(`div`,Ot,[C(`div`,kt,[L(v(K),null,{default:k(()=>[...n[6]||=[p(`Label *`,-1)]]),_:1}),L(v(W),{modelValue:t.label,"onUpdate:modelValue":e=>t.label=e,placeholder:`Display label`,onInput:e=>Ee(t),disabled:e.disabled},null,8,[`modelValue`,`onUpdate:modelValue`,`onInput`,`disabled`])]),C(`div`,At,[L(v(K),null,{default:k(()=>[...n[7]||=[p(`Field Name *`,-1)]]),_:1}),L(v(W),{modelValue:t.fieldname,"onUpdate:modelValue":e=>t.fieldname=e,placeholder:`database_column_name`,class:`font-mono text-sm`},null,8,[`modelValue`,`onUpdate:modelValue`]),n[8]||=C(`p`,{class:`text-xs text-gray-400`},`Lowercase with underscores`,-1)]),O(t.fieldtype)?(F(),T(m,{key:0},[O(t.fieldtype)?.requiresOptions?(F(),T(`div`,jt,[L(v(K),null,{default:k(()=>[p(x(O(t.fieldtype)?.optionsLabel||`Options`)+` *`,1)]),_:2},1024),[`SELECT`,`MULTI_SELECT`].includes(t.fieldtype)?(F(),d(v($e),{key:0,modelValue:t.options,"onUpdate:modelValue":e=>t.options=e,placeholder:`Option 1
Option 2
Option 3`,class:`font-mono text-sm`,rows:`3`},null,8,[`modelValue`,`onUpdate:modelValue`])):(F(),d(v(nt),{key:1,modelValue:t.options,"onUpdate:modelValue":e=>t.options=e,disabled:e.disabled},{default:k(()=>[L(v(it),{class:`bg-white`},{default:k(()=>[L(v(ot),{placeholder:`Select DocType`})]),_:1}),L(v(rt),null,{default:k(()=>[(F(!0),T(m,null,A(e.availableDocTypes,e=>(F(),d(v(at),{key:e,value:e},{default:k(()=>[p(x(e),1)]),_:2},1032,[`value`]))),128))]),_:1})]),_:1},8,[`modelValue`,`onUpdate:modelValue`,`disabled`]))])):S(``,!0),O(t.fieldtype)?.isLayout?S(``,!0):(F(),T(`div`,Mt,[L(v(K),null,{default:k(()=>[...n[9]||=[p(`Default Value`,-1)]]),_:1}),t.fieldtype===`DATE`?(F(),d(et,{key:0,modelValue:t.default_value,"onUpdate:modelValue":e=>t.default_value=e,placeholder:`Pick default date`,disabled:e.disabled},null,8,[`modelValue`,`onUpdate:modelValue`,`disabled`])):(F(),d(v(W),{key:1,modelValue:t.default_value,"onUpdate:modelValue":e=>t.default_value=e,placeholder:`Default value`,disabled:e.disabled},null,8,[`modelValue`,`onUpdate:modelValue`,`disabled`]))])),[`DATA`,`TEXT`,`SMALL_TEXT`,`LONG_TEXT`,`PHONE`,`EMAIL`].includes(t.fieldtype)?(F(),T(`div`,Nt,[L(v(K),null,{default:k(()=>[...n[10]||=[p(`Placeholder`,-1)]]),_:1}),L(v(W),{modelValue:t.placeholder,"onUpdate:modelValue":e=>t.placeholder=e,placeholder:`Placeholder text`,disabled:e.disabled},null,8,[`modelValue`,`onUpdate:modelValue`,`disabled`])])):S(``,!0)],64)):S(``,!0),C(`div`,Pt,[C(`div`,Ft,[(F(!0),T(m,null,A(v(ge),n=>(F(),T(`div`,{key:n.key,class:`flex items-center space-x-2`},[L(v(q),{checked:t[n.key],"onUpdate:checked":e=>t[n.key]=e,disabled:e.disabled},null,8,[`checked`,`onUpdate:checked`,`disabled`]),L(v(K),{class:`text-sm font-normal cursor-pointer`},{default:k(()=>[p(x(n.label),1)]),_:2},1024)]))),128))])]),C(`div`,It,[L(v(K),null,{default:k(()=>[...n[11]||=[p(`Help Text`,-1)]]),_:1}),L(v(W),{modelValue:t.description,"onUpdate:modelValue":e=>t.description=e,placeholder:`Help text shown below the field`,disabled:e.disabled},null,8,[`modelValue`,`onUpdate:modelValue`,`disabled`])])])])):S(``,!0)],2))),128))]))]),_:1}))}},Rt={class:`h-full flex flex-col bg-[radial-gradient(ellipse_at_top,_var(--tw-gradient-stops))] to-slate-100/50 from-stone-100/60 from-5%`},zt={class:`flex-none px-6 py-4 bg-white border-b border-gray-200 flex items-center justify-between sticky top-0 z-10`},Bt={class:`flex items-center space-x-4`},Vt={class:`text-xl font-bold text-gray-900 mt-1`},Ht={class:`flex items-center space-x-3`},Ut={key:0,class:`flex-none px-6 py-2 bg-slate-50 border-b border-slate-200 flex items-center justify-center gap-2 text-slate-600 text-sm font-medium`},Wt={key:1,class:`flex-none px-6 py-2 bg-amber-50 border-b border-amber-100 flex items-center justify-center gap-2 text-amber-800 text-sm font-medium`},Gt={class:`flex-1 overflow-hidden flex`},Kt={class:`flex-1 overflow-auto p-6`},qt={key:0,class:`flex justify-center items-center h-64`},Jt={key:1,class:`max-w-4xl mx-auto space-y-6`},Yt={class:`flex justify-center mb-8`},Xt={class:`grid grid-cols-2 gap-6`},Zt={class:`col-span-2 md:col-span-1`},Qt={class:`col-span-2 md:col-span-1`},$t={key:0,class:`text-xs text-amber-600 mt-1`},en={class:`col-span-2`},tn={key:0,class:`flex items-center gap-2`},nn={class:`flex items-center gap-2`},rn={class:`flex items-center gap-2 mt-1.5`},an=[`disabled`],on={class:`col-span-2 pt-4 border-t`},sn={class:`grid grid-cols-2 md:grid-cols-4 gap-4 mt-3`},cn={class:`flex items-center space-x-2`},ln={class:`flex items-center space-x-2`},un={class:`flex items-center space-x-2`},dn={key:0,class:`col-span-2`},fn={class:`space-y-6`},pn={class:`flex items-center space-x-2`},mn={key:0,class:`grid grid-cols-2 gap-6 pt-4 border-t`},hn={class:`col-span-2 p-4 bg-gray-50 rounded-lg`},gn={class:`font-mono text-lg mt-1`},_n={class:`grid grid-cols-2 gap-6`},vn={class:`space-y-6`},yn={class:`flex items-center space-x-2`},bn={key:0,class:`pt-4 border-t space-y-4`},xn={class:`p-4 bg-blue-50 rounded-lg`},Sn={class:`flex items-center gap-2 mt-2 text-sm`},Cn={class:`space-y-4`},wn={class:`flex items-center gap-2`},Tn={key:0},En=[`innerHTML`],Dn={key:0,class:`w-96 border-l bg-gray-900 text-gray-100 overflow-auto`},On={class:`p-4 border-b border-gray-700 flex items-center justify-between`},kn={class:`p-4 text-xs overflow-auto`},An={key:1,class:`w-96 border-l bg-white overflow-auto`},jn={class:`p-4 border-b border-gray-200 flex items-center justify-between`},Mn={class:`flex items-center gap-2`},Nn={class:`p-4`},Pn=[`innerHTML`],Fn={key:1,class:`text-center py-8`},In={__name:`DocTypeEditor`,props:{doctype:{type:String,default:`DocType`},name:{type:String,default:null},isNew:{type:Boolean,default:!0}},setup(i){let c=i;je();let u=xe().toast,f=Je(),oe=g(!1),_=g(!1),y=g({...ut}),b=g(`general`),w=g(!1),E=g(!1),be=g([]),D=g(!1),De=o(()=>{if(!y.value.documentation)return`<p class="text-gray-400 italic">No documentation yet.</p>`;let e=tt.parse(y.value.documentation);return qe.sanitize(e)}),M={FileCode:Le,FileText:Te,Users:s,Package:ne,Receipt:we,Box:Ie,Store:ie,Truck:h,BookOpen:I,Bell:Ee,Mail:re,Lock:ue,File:Ce,Folder:ke,Calendar:Me,Clock:le,DollarSign:pe,Percent:Ge,CheckSquare:se,Link2:ye,Table:a,Paperclip:te,Image:he,Phone:Re,Palette:ve,Code:ae,MapPin:me,Settings:Fe,List:ee,Hash:Pe,Layout:ze,GitBranch:Se},Ae=`FileText.Users.Package.Receipt.Box.Store.Truck.BookOpen.Bell.Mail.Lock.File.Folder.Calendar.Clock.DollarSign.Percent.CheckSquare.Link2.Table.Paperclip.Image.Phone.Palette.Code.MapPin.Settings`.split(`.`),N=o(()=>y.value.module===`System`),R=o(()=>y.value.organisation!==null&&y.value.organisation!==void 0),z=o(()=>N.value&&!R.value&&!c.isNew),He=o(()=>ct.filter(e=>e.value!==`System`||y.value.module===`System`)),H=o(()=>(y.value.fields||[]).filter(e=>![`SECTION_BREAK`,`COLUMN_BREAK`,`TAB_BREAK`,`TABLE`].includes(e.fieldtype))),W=o(()=>{let e=y.value.idPrefix||``,t=y.value.idSuffix||``,n=y.value.idMinLength||5,r=y.value.idGenerationStrategy===`UUID`?`a1b2c3d4`:`1`.padStart(n,`0`);return`${e}${r}${t}`}),et=o(()=>{let e={...y.value};return e.tableName||delete e.tableName,e.parentDocType||delete e.parentDocType,e.idPrefix||delete e.idPrefix,e.idSuffix||delete e.idSuffix,JSON.stringify(e,null,2)});async function nt(){if(c.isNew){let e=f.openTabs.find(e=>e.id===f.activeTabId);e?.data&&(y.value={...ut,...e.data});return}try{let e=await P.get(`/org/doctypes/${encodeURIComponent(c.name)}`,{authorizeRequest:!0,organisationAware:!0}),t=e?.data||e;y.value={...ut,...t,fields:t.fields||[]}}catch{u({message:`Failed to load DocType`,variant:`error`})}finally{oe.value=!1}}async function rt(){try{be.value=((await P.get(`/org/doctypes`,{authorizeRequest:!0,organisationAware:!0}))?.data||[]).filter(e=>!e.is_child).map(e=>e.name)}catch(e){console.warn(`Failed to load DocTypes:`,e)}}async function it(){if(!y.value.name?.trim()){u({message:`DocType name is required`,variant:`error`}),b.value=`general`;return}if(!y.value.module){u({message:`Module is required`,variant:`error`}),b.value=`general`;return}_.value=!0;try{let e={name:y.value.name,module:y.value.module,description:y.value.description,icon:y.value.icon,color:y.value.color,is_child:y.value.isChild,parent_doctype:y.value.parentDocType,is_submittable:y.value.isSubmittable,is_single:y.value.isSingle,track_changes:y.value.trackChanges,has_id:y.value.hasId,id_prefix:y.value.idPrefix,id_suffix:y.value.idSuffix,id_min_length:y.value.idMinLength,id_generation_strategy:y.value.idGenerationStrategy,title_field:y.value.titleField,search_fields:y.value.searchFields,sort_field:y.value.sortField,sort_order:y.value.sortOrder,documentation:y.value.documentation,fields:y.value.fields.map((e,t)=>({...e,idx:t}))};await P.post(`/org/doctypes`,{data:e,authorizeRequest:!0,organisationAware:!0}),c.isNew?(u({message:`DocType "${y.value.name}" created successfully`,variant:`success`}),f.closeTab(`doctype-form-DocType-new`),f.openTab({id:`doctype-${y.value.name.toLowerCase().replace(/\s+/g,`-`)}`,title:y.value.name,icon:y.value.icon||`FileText`,type:`doctype`,doctype:y.value.name,closable:!0})):(u({message:`DocType "${y.value.name}" updated`,variant:`success`}),nt())}catch{u({message:`Failed to save DocType`,variant:`error`})}finally{_.value=!1}}async function at(){let e=JSON.parse(JSON.stringify(y.value.fields)),t=y.value.module===`System`?`CRM`:y.value.module;f.openTab({id:`doctype-form-DocType-new-${Date.now()}`,title:`New DocType (Copy)`,icon:y.value.icon||`FileCode`,type:`doctype-form`,doctype:`DocType`,isNew:!0,closable:!0,data:{...y.value,name:`${y.value.name} Copy`,module:t,fields:e}})}function ot(){w.value=!w.value,w.value&&(E.value=!1)}function $(){E.value=!E.value,E.value&&(w.value=!1)}async function st(){try{await navigator.clipboard.writeText(et.value),u({message:`JSON copied to clipboard`,variant:`success`})}catch{u({message:`Failed to copy`,variant:`error`})}}async function dt(){if(confirm(`Are you sure you want to reset this DocType to its system default? All your customizations will be lost.`))try{await P.delete(`/org/doctypes/${encodeURIComponent(c.name)}`,{authorizeRequest:!0,organisationAware:!0}),u({message:`DocType reset to default`,variant:`success`}),nt()}catch{u({message:`Failed to reset DocType`,variant:`error`})}}return Oe(()=>{nt(),rt()}),(a,o)=>(F(),T(`div`,Rt,[C(`header`,zt,[C(`div`,Bt,[C(`div`,{class:`w-10 h-10 rounded-xl flex items-center justify-center`,style:ce({backgroundColor:y.value.color||`#6366F1`})},[(F(),d(j(M[y.value.icon]||v(Le)),{class:`w-5 h-5 text-white`}))],4),C(`div`,null,[o[26]||=C(`span`,{class:`text-xs text-gray-500 uppercase tracking-wide`},`DocType Builder`,-1),C(`h1`,Vt,x(i.isNew?`New DocType`:y.value.name),1)])]),C(`div`,Ht,[R.value?(F(),d(v(U),{key:0,variant:`outline`,class:`rounded-full`,onClick:dt},{default:k(()=>[L(v(Ne),{class:`w-4 h-4 mr-2`}),o[27]||=p(` Reset to Default `,-1)]),_:1})):S(``,!0),L(v(Ye),null,{default:k(()=>[L(v(Ze),{asChild:``},{default:k(()=>[L(v(U),{variant:`outline`,class:`rounded-full w-9 h-9 p-0`},{default:k(()=>[L(v(_e),{class:`w-4 h-4`})]),_:1})]),_:1}),L(v(Xe),{align:`end`},{default:k(()=>[L(v(V),{onClick:ot},{default:k(()=>[w.value?(F(),d(v(ge),{key:1,class:`w-4 h-4 mr-2`})):(F(),d(v(Ve),{key:0,class:`w-4 h-4 mr-2`})),p(` `+x(w.value?`Hide JSON Preview`:`Show JSON Preview`),1)]),_:1}),L(v(V),{onClick:$},{default:k(()=>[L(v(I),{class:`w-4 h-4 mr-2`}),p(` `+x(E.value?`Hide Documentation`:`Show Documentation`),1)]),_:1}),!i.isNew&&!N.value?(F(),d(v(Qe),{key:0})):S(``,!0),!i.isNew&&!N.value?(F(),d(v(V),{key:1,onClick:at},{default:k(()=>[L(v(fe),{class:`w-4 h-4 mr-2`}),o[28]||=p(` Duplicate DocType `,-1)]),_:1})):S(``,!0)]),_:1})]),_:1}),!z.value||i.isNew?(F(),d(v(U),{key:1,onClick:it,disabled:_.value,class:`rounded-full`},{default:k(()=>[_.value?(F(),d(v(Ke),{key:0,class:`w-4 h-4 animate-spin mr-2`})):S(``,!0),p(` `+x(i.isNew?`Create DocType`:`Save Changes`),1)]),_:1},8,[`disabled`])):S(``,!0)])]),N.value&&!R.value&&!i.isNew?(F(),T(`div`,Ut,[L(v(ue),{class:`w-4 h-4`}),o[29]||=p(` System DocType. This definition is read-only and managed by the platform. `,-1)])):S(``,!0),R.value?(F(),T(`div`,Wt,[L(v(Ue),{class:`w-4 h-4`}),o[30]||=p(` Active Override. You are using a customized version of this DocType. `,-1)])):S(``,!0),C(`div`,Gt,[C(`div`,Kt,[oe.value?(F(),T(`div`,qt,[...o[31]||=[C(`div`,{class:`animate-spin rounded-full h-8 w-8 border-b-2 border-black`},null,-1)]])):(F(),T(`div`,Jt,[L(v(e),{modelValue:b.value,"onUpdate:modelValue":o[24]||=e=>b.value=e,class:`w-full`},{default:k(()=>[C(`div`,Yt,[L(v(n),{class:`rounded-full bg-stone-50/80 flex w-fit shadow-sm border border-slate-200/50 px-0 py-0`},{default:k(()=>[L(v(r),{value:`general`,class:`px-6 py-1.5 rounded-full data-[state=active]:bg-white data-[state=active]:text-slate-900 data-[state=active]:shadow-sm transition-all duration-200`},{default:k(()=>[L(v(Fe),{class:`w-4 h-4 mr-2`}),o[32]||=p(` General `,-1)]),_:1}),L(v(r),{value:`fields`,class:`px-6 py-1.5 rounded-full data-[state=active]:bg-white data-[state=active]:text-slate-900 data-[state=active]:shadow-sm transition-all duration-200`},{default:k(()=>[L(v(ee),{class:`w-4 h-4 mr-2`}),o[33]||=p(` Fields `,-1)]),_:1}),L(v(r),{value:`naming`,class:`px-6 py-1.5 rounded-full data-[state=active]:bg-white data-[state=active]:text-slate-900 data-[state=active]:shadow-sm transition-all duration-200`},{default:k(()=>[L(v(Pe),{class:`w-4 h-4 mr-2`}),o[34]||=p(` ID Config `,-1)]),_:1}),L(v(r),{value:`display`,class:`px-6 py-1.5 rounded-full data-[state=active]:bg-white data-[state=active]:text-slate-900 data-[state=active]:shadow-sm transition-all duration-200`},{default:k(()=>[L(v(ze),{class:`w-4 h-4 mr-2`}),o[35]||=p(` Display `,-1)]),_:1}),L(v(r),{value:`workflow`,class:`px-6 py-1.5 rounded-full data-[state=active]:bg-white data-[state=active]:text-slate-900 data-[state=active]:shadow-sm transition-all duration-200`},{default:k(()=>[L(v(Se),{class:`w-4 h-4 mr-2`}),o[36]||=p(` Workflow `,-1)]),_:1}),L(v(r),{value:`documentation`,class:`px-6 py-1.5 rounded-full data-[state=active]:bg-white data-[state=active]:text-slate-900 data-[state=active]:shadow-sm transition-all duration-200`},{default:k(()=>[L(v(I),{class:`w-4 h-4 mr-2`}),o[37]||=p(` Documentation `,-1)]),_:1})]),_:1})]),L(v(t),{value:`general`,class:`mt-6`},{default:k(()=>[L(v(G),{class:`p-6 bg-white/80`},{default:k(()=>[C(`div`,Xt,[C(`div`,Zt,[L(v(K),{for:`name`},{default:k(()=>[...o[38]||=[p(`DocType Name *`,-1)]]),_:1}),L(v(B),{id:`name`,modelValue:y.value.name,"onUpdate:modelValue":o[0]||=e=>y.value.name=e,placeholder:`e.g., Customer, Invoice`,class:`mt-1.5`,disabled:!i.isNew||z.value},null,8,[`modelValue`,`disabled`]),o[39]||=C(`p`,{class:`text-xs text-gray-500 mt-1`},`Unique identifier. Cannot be changed after creation.`,-1)]),C(`div`,Qt,[L(v(K),{for:`module`},{default:k(()=>[...o[40]||=[p(`Module *`,-1)]]),_:1}),L(v(J),{modelValue:y.value.module,"onUpdate:modelValue":o[1]||=e=>y.value.module=e,disabled:z.value},{default:k(()=>[L(v(X),{class:`mt-1.5 bg-white`},{default:k(()=>[L(v(Q),{placeholder:`Select module`})]),_:1}),L(v(Y),null,{default:k(()=>[(F(!0),T(m,null,A(He.value,e=>(F(),d(v(Z),{key:e.value,value:e.value},{default:k(()=>[p(x(e.label),1)]),_:2},1032,[`value`]))),128))]),_:1})]),_:1},8,[`modelValue`,`disabled`]),y.value.module===`System`&&i.isNew?(F(),T(`p`,$t,` Warning: DocTypes in the "System" module become immutable after creation. `)):S(``,!0)]),C(`div`,en,[L(v(K),{for:`description`},{default:k(()=>[...o[41]||=[p(`Description`,-1)]]),_:1}),L(v($e),{id:`description`,modelValue:y.value.description,"onUpdate:modelValue":o[2]||=e=>y.value.description=e,placeholder:`Brief description of this DocType`,class:`mt-1.5`,rows:`2`,disabled:z.value},null,8,[`modelValue`,`disabled`])]),C(`div`,null,[L(v(K),{for:`icon`},{default:k(()=>[...o[42]||=[p(`Icon`,-1)]]),_:1}),L(v(J),{modelValue:y.value.icon,"onUpdate:modelValue":o[3]||=e=>y.value.icon=e,disabled:z.value},{default:k(()=>[L(v(X),{class:`mt-1.5 bg-white`},{default:k(()=>[L(v(Q),{placeholder:`Select icon`},{default:k(()=>[y.value.icon?(F(),T(`div`,tn,[(F(),d(j(M[y.value.icon]),{class:`w-4 h-4`})),p(` `+x(y.value.icon),1)])):S(``,!0)]),_:1})]),_:1}),L(v(Y),{class:`max-h-60`},{default:k(()=>[(F(),T(m,null,A(Ae,e=>L(v(Z),{key:e,value:e},{default:k(()=>[C(`div`,nn,[(F(),d(j(M[e]),{class:`w-4 h-4`})),p(` `+x(e),1)])]),_:2},1032,[`value`])),64))]),_:1})]),_:1},8,[`modelValue`,`disabled`])]),C(`div`,null,[L(v(K),{for:`color`},{default:k(()=>[...o[43]||=[p(`Color`,-1)]]),_:1}),C(`div`,rn,[Be(C(`input`,{type:`color`,"onUpdate:modelValue":o[4]||=e=>y.value.color=e,class:`w-10 h-10 rounded border cursor-pointer`,disabled:z.value},null,8,an),[[de,y.value.color]]),L(v(B),{modelValue:y.value.color,"onUpdate:modelValue":o[5]||=e=>y.value.color=e,placeholder:`#3B82F6`,class:`flex-1`,disabled:z.value},null,8,[`modelValue`,`disabled`])])]),C(`div`,on,[L(v(K),{class:`text-base font-semibold`},{default:k(()=>[...o[44]||=[p(`Behavior`,-1)]]),_:1}),C(`div`,sn,[C(`div`,cn,[L(v(q),{id:`isChild`,checked:y.value.isChild,"onUpdate:checked":o[6]||=e=>y.value.isChild=e,disabled:z.value},null,8,[`checked`,`disabled`]),L(v(K),{for:`isChild`,class:`text-sm`},{default:k(()=>[...o[45]||=[p(`Child Table`,-1)]]),_:1})]),C(`div`,ln,[L(v(q),{id:`isSingle`,checked:y.value.isSingle,"onUpdate:checked":o[7]||=e=>y.value.isSingle=e,disabled:z.value},null,8,[`checked`,`disabled`]),L(v(K),{for:`isSingle`,class:`text-sm`},{default:k(()=>[...o[46]||=[p(`Single Record`,-1)]]),_:1})]),C(`div`,un,[L(v(q),{id:`trackChanges`,checked:y.value.trackChanges,"onUpdate:checked":o[8]||=e=>y.value.trackChanges=e,disabled:z.value},null,8,[`checked`,`disabled`]),L(v(K),{for:`trackChanges`,class:`text-sm`},{default:k(()=>[...o[47]||=[p(`Track Changes`,-1)]]),_:1})])])]),y.value.isChild?(F(),T(`div`,dn,[L(v(K),{for:`parentDocType`},{default:k(()=>[...o[48]||=[p(`Parent DocType *`,-1)]]),_:1}),L(v(J),{modelValue:y.value.parentDocType,"onUpdate:modelValue":o[9]||=e=>y.value.parentDocType=e,disabled:z.value},{default:k(()=>[L(v(X),{class:`mt-1.5 bg-white`},{default:k(()=>[L(v(Q),{placeholder:`Select parent DocType`})]),_:1}),L(v(Y),null,{default:k(()=>[(F(!0),T(m,null,A(be.value,e=>(F(),d(v(Z),{key:e,value:e},{default:k(()=>[p(x(e),1)]),_:2},1032,[`value`]))),128))]),_:1})]),_:1},8,[`modelValue`,`disabled`])])):S(``,!0)])]),_:1})]),_:1}),L(v(t),{value:`fields`,class:`mt-6`},{default:k(()=>[L(Lt,{modelValue:y.value.fields,"onUpdate:modelValue":o[10]||=e=>y.value.fields=e,availableDocTypes:be.value,disabled:z.value},null,8,[`modelValue`,`availableDocTypes`,`disabled`])]),_:1}),L(v(t),{value:`naming`,class:`mt-6`},{default:k(()=>[L(v(G),{class:`p-6 bg-white/80`},{default:k(()=>[C(`div`,fn,[C(`div`,pn,[L(v(q),{id:`hasId`,checked:y.value.hasId,"onUpdate:checked":o[11]||=e=>y.value.hasId=e,disabled:z.value},null,8,[`checked`,`disabled`]),L(v(K),{for:`hasId`},{default:k(()=>[...o[49]||=[p(`Generate Human-Readable ID`,-1)]]),_:1})]),y.value.hasId?(F(),T(`div`,mn,[C(`div`,null,[L(v(K),{for:`idPrefix`},{default:k(()=>[...o[50]||=[p(`ID Prefix`,-1)]]),_:1}),L(v(B),{id:`idPrefix`,modelValue:y.value.idPrefix,"onUpdate:modelValue":o[12]||=e=>y.value.idPrefix=e,placeholder:`e.g., INV-, CUST-`,class:`mt-1.5`,disabled:z.value},null,8,[`modelValue`,`disabled`])]),C(`div`,null,[L(v(K),{for:`idSuffix`},{default:k(()=>[...o[51]||=[p(`ID Suffix`,-1)]]),_:1}),L(v(B),{id:`idSuffix`,modelValue:y.value.idSuffix,"onUpdate:modelValue":o[13]||=e=>y.value.idSuffix=e,placeholder:`e.g., -2024`,class:`mt-1.5`,disabled:z.value},null,8,[`modelValue`,`disabled`])]),C(`div`,null,[L(v(K),{for:`idMinLength`},{default:k(()=>[...o[52]||=[p(`Padding Length`,-1)]]),_:1}),L(v(B),{id:`idMinLength`,modelValue:y.value.idMinLength,"onUpdate:modelValue":o[14]||=e=>y.value.idMinLength=e,modelModifiers:{number:!0},type:`number`,min:`0`,max:`20`,class:`mt-1.5`,disabled:z.value},null,8,[`modelValue`,`disabled`]),o[53]||=C(`p`,{class:`text-xs text-gray-500 mt-1`},`Zero-pad numbers to this length (e.g., 5 → 00001)`,-1)]),C(`div`,null,[L(v(K),{for:`idGenerationStrategy`},{default:k(()=>[...o[54]||=[p(`Generation Strategy`,-1)]]),_:1}),L(v(J),{modelValue:y.value.idGenerationStrategy,"onUpdate:modelValue":o[15]||=e=>y.value.idGenerationStrategy=e,disabled:z.value},{default:k(()=>[L(v(X),{class:`mt-1.5 bg-white`},{default:k(()=>[L(v(Q))]),_:1}),L(v(Y),null,{default:k(()=>[(F(!0),T(m,null,A(v(lt),e=>(F(),d(v(Z),{key:e.value,value:e.value},{default:k(()=>[p(x(e.label),1)]),_:2},1032,[`value`]))),128))]),_:1})]),_:1},8,[`modelValue`,`disabled`])]),C(`div`,hn,[L(v(K),{class:`text-sm text-gray-600`},{default:k(()=>[...o[55]||=[p(`Preview`,-1)]]),_:1}),C(`p`,gn,x(W.value),1)])])):S(``,!0)])]),_:1})]),_:1}),L(v(t),{value:`display`,class:`mt-6`},{default:k(()=>[L(v(G),{class:`p-6 bg-white/80`},{default:k(()=>[C(`div`,_n,[C(`div`,null,[L(v(K),{for:`titleField`},{default:k(()=>[...o[56]||=[p(`Title Field`,-1)]]),_:1}),L(v(J),{modelValue:y.value.titleField,"onUpdate:modelValue":o[16]||=e=>y.value.titleField=e,disabled:z.value},{default:k(()=>[L(v(X),{class:`mt-1.5 bg-white`},{default:k(()=>[L(v(Q),{placeholder:`Select field for title`})]),_:1}),L(v(Y),null,{default:k(()=>[L(v(Z),{value:`name`},{default:k(()=>[...o[57]||=[p(`name (default)`,-1)]]),_:1}),(F(!0),T(m,null,A(H.value,e=>(F(),d(v(Z),{key:e.fieldname,value:e.fieldname},{default:k(()=>[p(x(e.label)+` (`+x(e.fieldname)+`) `,1)]),_:2},1032,[`value`]))),128))]),_:1})]),_:1},8,[`modelValue`,`disabled`]),o[58]||=C(`p`,{class:`text-xs text-gray-500 mt-1`},`Field displayed as the document title`,-1)]),C(`div`,null,[L(v(K),{for:`searchFields`},{default:k(()=>[...o[59]||=[p(`Search Fields`,-1)]]),_:1}),L(v(B),{id:`searchFields`,modelValue:y.value.searchFields,"onUpdate:modelValue":o[17]||=e=>y.value.searchFields=e,placeholder:`e.g., name,email,phone`,class:`mt-1.5`,disabled:z.value},null,8,[`modelValue`,`disabled`]),o[60]||=C(`p`,{class:`text-xs text-gray-500 mt-1`},`Comma-separated field names for search`,-1)]),C(`div`,null,[L(v(K),{for:`sortField`},{default:k(()=>[...o[61]||=[p(`Default Sort Field`,-1)]]),_:1}),L(v(J),{modelValue:y.value.sortField,"onUpdate:modelValue":o[18]||=e=>y.value.sortField=e,disabled:z.value},{default:k(()=>[L(v(X),{class:`mt-1.5 bg-white`},{default:k(()=>[L(v(Q),{placeholder:`Select sort field`})]),_:1}),L(v(Y),null,{default:k(()=>[L(v(Z),{value:`created_at`},{default:k(()=>[...o[62]||=[p(`Created At`,-1)]]),_:1}),L(v(Z),{value:`updated_at`},{default:k(()=>[...o[63]||=[p(`Updated At`,-1)]]),_:1}),L(v(Z),{value:`name`},{default:k(()=>[...o[64]||=[p(`Name`,-1)]]),_:1}),(F(!0),T(m,null,A(H.value,e=>(F(),d(v(Z),{key:e.fieldname,value:e.fieldname},{default:k(()=>[p(x(e.label)+` (`+x(e.fieldname)+`) `,1)]),_:2},1032,[`value`]))),128))]),_:1})]),_:1},8,[`modelValue`,`disabled`])]),C(`div`,null,[L(v(K),{for:`sortOrder`},{default:k(()=>[...o[65]||=[p(`Sort Order`,-1)]]),_:1}),L(v(J),{modelValue:y.value.sortOrder,"onUpdate:modelValue":o[19]||=e=>y.value.sortOrder=e,disabled:z.value},{default:k(()=>[L(v(X),{class:`mt-1.5 bg-white`},{default:k(()=>[L(v(Q))]),_:1}),L(v(Y),null,{default:k(()=>[L(v(Z),{value:`DESC`},{default:k(()=>[...o[66]||=[p(`Descending (newest first)`,-1)]]),_:1}),L(v(Z),{value:`ASC`},{default:k(()=>[...o[67]||=[p(`Ascending (oldest first)`,-1)]]),_:1})]),_:1})]),_:1},8,[`modelValue`,`disabled`])])])]),_:1})]),_:1}),L(v(t),{value:`workflow`,class:`mt-6`},{default:k(()=>[L(v(G),{class:`p-6 bg-white/80`},{default:k(()=>[C(`div`,vn,[C(`div`,yn,[L(v(q),{id:`isSubmittable`,checked:y.value.isSubmittable,"onUpdate:checked":o[20]||=e=>y.value.isSubmittable=e,disabled:z.value},null,8,[`checked`,`disabled`]),L(v(K),{for:`isSubmittable`,class:`text-base`},{default:k(()=>[...o[68]||=[p(`Enable Submission Workflow`,-1)]]),_:1})]),o[73]||=C(`p`,{class:`text-sm text-gray-600`},` When enabled, documents follow a Draft → Submitted → Cancelled lifecycle. Submitted documents cannot be edited. `,-1),y.value.isSubmittable?(F(),T(`div`,bn,[C(`div`,xn,[o[72]||=C(`h4`,{class:`font-medium text-blue-900`},`Workflow States`,-1),C(`div`,Sn,[o[69]||=C(`span`,{class:`px-2 py-1 bg-gray-200 rounded`},`Draft (0)`,-1),L(v(We),{class:`w-4 h-4 text-gray-400`}),o[70]||=C(`span`,{class:`px-2 py-1 bg-green-200 rounded`},`Submitted (1)`,-1),L(v(We),{class:`w-4 h-4 text-gray-400`}),o[71]||=C(`span`,{class:`px-2 py-1 bg-red-200 rounded`},`Cancelled (2)`,-1)])])])):S(``,!0)])]),_:1})]),_:1}),L(v(t),{value:`documentation`,class:`mt-6`},{default:k(()=>[L(v(G),{class:`p-6 bg-white/80`},{default:k(()=>[C(`div`,Cn,[C(`div`,wn,[C(`button`,{onClick:o[21]||=e=>D.value=!1,class:l([`px-3 py-1.5 text-sm font-medium rounded-full transition-colors`,D.value?`bg-gray-100 text-gray-600 hover:bg-gray-200`:`bg-black text-white`])},` Edit `,2),C(`button`,{onClick:o[22]||=e=>D.value=!0,class:l([`px-3 py-1.5 text-sm font-medium rounded-full transition-colors`,D.value?`bg-black text-white`:`bg-gray-100 text-gray-600 hover:bg-gray-200`])},` Preview `,2)]),D.value?(F(),T(`div`,{key:1,class:`prose prose-sm max-w-none min-h-[400px] p-4 bg-gray-50 rounded-lg border`,innerHTML:De.value},null,8,En)):(F(),T(`div`,Tn,[L(v($e),{modelValue:y.value.documentation,"onUpdate:modelValue":o[23]||=e=>y.value.documentation=e,placeholder:`Write documentation in Markdown...`,class:`font-mono text-sm min-h-[400px]`,disabled:z.value},null,8,[`modelValue`,`disabled`]),o[74]||=C(`p`,{class:`text-xs text-gray-500 mt-2`},` Use Markdown formatting. Tables, code blocks, and links are supported. `,-1)]))])]),_:1})]),_:1})]),_:1},8,[`modelValue`])]))]),w.value?(F(),T(`div`,Dn,[C(`div`,On,[o[75]||=C(`span`,{class:`font-medium`},`JSON Preview`,-1),L(v(U),{variant:`ghost`,size:`sm`,onClick:st,class:`text-gray-300 hover:text-white`},{default:k(()=>[L(v(fe),{class:`w-4 h-4`})]),_:1})]),C(`pre`,kn,[C(`code`,null,x(et.value),1)])])):S(``,!0),E.value?(F(),T(`div`,An,[C(`div`,jn,[C(`div`,Mn,[L(v(I),{class:`w-4 h-4 text-gray-500`}),o[76]||=C(`span`,{class:`font-medium text-gray-900`},`Documentation`,-1)]),L(v(U),{variant:`ghost`,size:`sm`,onClick:o[25]||=e=>E.value=!1,class:`text-gray-400 hover:text-gray-600`},{default:k(()=>[L(v(O),{class:`w-4 h-4`})]),_:1})]),C(`div`,Nn,[y.value.documentation?(F(),T(`div`,{key:0,class:`prose prose-sm max-w-none`,innerHTML:De.value},null,8,Pn)):(F(),T(`div`,Fn,[L(v(I),{class:`w-12 h-12 mx-auto text-gray-300 mb-3`}),o[77]||=C(`p`,{class:`text-gray-500`},`No documentation yet`,-1),o[78]||=C(`p`,{class:`text-sm text-gray-400 mt-1`},`Add documentation in the Documentation tab`,-1)]))])])):S(``,!0)])]))}},Ln=De(In,[[`__scopeId`,`data-v-346760e6`]]);export{Ln as default};