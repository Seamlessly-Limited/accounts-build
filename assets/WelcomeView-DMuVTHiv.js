import"./useFormControl-BoSoz5bk.js";import"./useNonce-Cry77bU8.js";import"./nullish-CfjOSA4G.js";import"./useArrowNavigation-siWGBYoD.js";import"./ConfigProvider-BeNpEDZu.js";import"./useHideOthers-8j3pZZC2.js";import"./useDirection-CkCaHLjJ.js";import"./PopperAnchor-DePKnfPt.js";import"./useId-C9uHTJK1.js";import"./PopperContent-CkzV4Efh.js";import"./useTypeahead-J2lSWUJi.js";import"./DialogPortal-DagulIUC.js";import"./Teleport-CO7T90ZX.js";import"./utils-1j6W-LC4.js";import"./DialogTitle-KNRScshA.js";import"./utils-d0L3vlW4.js";import"./RovingFocusGroup-Dae6_7oN.js";import{a as e,i as t,n,r,t as i}from"./DropdownMenuTrigger-EYKS1OZz.js";import{t as a}from"./DropdownMenuLabel-BoKLynau.js";import"./MenuSeparator-Bi9Os3Cj.js";import{t as o}from"./DropdownMenuSeparator-BHAgwTys.js";import"./Label-BQWlwCJI.js";import"./SelectViewport-C4doWK-Y.js";import{Aa as s,Bi as c,Br as l,Gi as u,Hi as d,Ii as f,It as p,Jn as ee,Li as m,Mn as h,Ni as g,On as te,Pa as _,Qn as ne,Ri as v,Ui as y,Vr as b,Xn as x,Yi as S,Zi as C,aa as w,an as re,ar as T,bi as E,cn as D,ea as O,ga as k,ht as A,i as j,ia as M,ja as N,ji as P,k as F,ln as ie,lr as ae,lt as oe,mt as se,na as I,nn as L,nr as R,o as z,sa as B,sn as V,w as H,wa as U,wr as W,x as G,xn as K,zi as q}from"./index-BW6FH5S4.js";import{n as J}from"./button-Cg1Yo4L-.js";import{a as ce,i as le,n as ue,r as de,t as fe}from"./DialogTitle-CycknT00.js";import{t as pe}from"./DialogFooter-CGb0TQPO.js";import{t as me}from"./badge-DzzxpH5l.js";import{t as he}from"./Label-BrQgTnyx.js";import{a as ge,i as _e,n as ve,r as Y,t as ye}from"./SelectValue-CL8oqzYK.js";var be=u({__name:`DropdownMenu`,props:{defaultOpen:{type:Boolean},open:{type:Boolean},dir:{},modal:{type:Boolean}},emits:[`update:open`],setup(t,{emit:n}){let r=l(t,n);return(t,n)=>(I(),v(s(e),C({"data-slot":`dropdown-menu`},s(r)),{default:k(()=>[w(t.$slots,`default`)]),_:3},16))}}),xe=u({__name:`DropdownMenuContent`,props:{forceMount:{type:Boolean},loop:{type:Boolean},side:{},sideOffset:{default:4},sideFlip:{type:Boolean},align:{},alignOffset:{},alignFlip:{type:Boolean},avoidCollisions:{type:Boolean},collisionBoundary:{},collisionPadding:{},arrowPadding:{},sticky:{},hideWhenDetached:{type:Boolean},positionStrategy:{},updatePositionStrategy:{},disableUpdateOnLayoutShift:{type:Boolean},prioritizePosition:{type:Boolean},reference:{},asChild:{type:Boolean},as:{},class:{}},emits:[`escapeKeyDown`,`pointerDownOutside`,`focusOutside`,`interactOutside`,`closeAutoFocus`],setup(e,{emit:r}){let i=e,a=r,o=E(i,`class`),c=l(o,a);return(e,r)=>(I(),v(s(n),null,{default:k(()=>[y(s(t),C({"data-slot":`dropdown-menu-content`},s(c),{class:s(W)(`bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 max-h-(--reka-dropdown-menu-content-available-height) min-w-[8rem] origin-(--reka-dropdown-menu-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border p-1 shadow-md`,i.class)}),{default:k(()=>[w(e.$slots,`default`)]),_:3},16,[`class`])]),_:3}))}}),Se=u({__name:`DropdownMenuItem`,props:{disabled:{type:Boolean},textValue:{},asChild:{type:Boolean},as:{},class:{},inset:{type:Boolean},variant:{default:`default`}},setup(e){let t=e,n=E(t,`inset`,`variant`,`class`),i=b(n);return(n,a)=>(I(),v(s(r),C({"data-slot":`dropdown-menu-item`,"data-inset":e.inset?``:void 0,"data-variant":e.variant},s(i),{class:s(W)(`focus:bg-white focus:text-accent-foreground data-[variant=destructive]:text-destructive-foreground data-[variant=destructive]:focus:bg-destructive/10 dark:data-[variant=destructive]:focus:bg-destructive/40 data-[variant=destructive]:focus:text-destructive-foreground data-[variant=destructive]:*:[svg]:!text-destructive-foreground [&_svg:not([class*='text-'])]:text-muted-foreground relative flex cursor-default items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 data-[inset]:pl-8 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4`,t.class)}),{default:k(()=>[w(n.$slots,`default`)]),_:3},16,[`data-inset`,`data-variant`,`class`]))}}),Ce=u({__name:`DropdownMenuLabel`,props:{asChild:{type:Boolean},as:{},class:{},inset:{type:Boolean}},setup(e){let t=e,n=E(t,`class`,`inset`),r=b(n);return(n,i)=>(I(),v(s(a),C({"data-slot":`dropdown-menu-label`,"data-inset":e.inset?``:void 0},s(r),{class:s(W)(`px-2 py-1.5 text-sm font-medium data-[inset]:pl-8`,t.class)}),{default:k(()=>[w(n.$slots,`default`)]),_:3},16,[`data-inset`,`class`]))}}),we=u({__name:`DropdownMenuSeparator`,props:{asChild:{type:Boolean},as:{},class:{}},setup(e){let t=e,n=E(t,`class`);return(e,r)=>(I(),v(s(o),C({"data-slot":`dropdown-menu-separator`},s(n),{class:s(W)(`bg-border -mx-1 my-1 h-px`,t.class)}),null,16,[`class`]))}}),Te=u({__name:`DropdownMenuTrigger`,props:{disabled:{type:Boolean},asChild:{type:Boolean},as:{}},setup(e){let t=b(e);return(e,n)=>(I(),v(s(i),C({"data-slot":`dropdown-menu-trigger`},s(t)),{default:k(()=>[w(e.$slots,`default`)]),_:3},16))}}),Ee={async getDocuments(e=0,t=50){return z.get(`/org/documents`,{query:{page:e,size:t},authorizeRequest:!0,organisationAware:!0})},async getDocumentsByCategory(e){return z.get(`/org/documents/category/${e}`,{authorizeRequest:!0,organisationAware:!0})},async searchDocuments(e){return z.get(`/org/documents/search`,{query:{query:e},authorizeRequest:!0,organisationAware:!0})},async getDocumentCounts(){return z.get(`/org/documents/counts`,{authorizeRequest:!0,organisationAware:!0})},async getDocument(e){return z.get(`/org/documents/${e}`,{authorizeRequest:!0,organisationAware:!0})},async uploadDocument(e,t,n={}){let r=new FormData;return r.append(`file`,e),r.append(`category`,t),r.append(`metadata`,JSON.stringify(n)),z.post(`/org/documents/upload`,{data:r,headers:{"Content-Type":`multipart/form-data`},authorizeRequest:!0,organisationAware:!0})},async updateDocument(e,t){return z.put(`/org/documents/${e}`,{data:t,authorizeRequest:!0,organisationAware:!0})},async archiveDocument(e){return z.delete(`/org/documents/${e}`,{authorizeRequest:!0,organisationAware:!0})},async getVersionHistory(e){return z.get(`/org/documents/${e}/versions`,{authorizeRequest:!0,organisationAware:!0})},async restoreVersion(e,t){return z.post(`/org/documents/${e}/versions/${t}/restore`,{data:{},authorizeRequest:!0,organisationAware:!0})}},De={class:`h-full w-full p-8 text-center overflow-auto flex flex-col items-center`},Oe={class:`w-full max-w-lg relative flex flex-col items-center justify-center my-auto`},ke={class:`mb-8`},Ae={class:`h-20 w-20 rounded-2xl bg-gradient-to-br from-sky-900 to-blue-950 flex items-center justify-center shadow-lg`},je={class:`grid grid-cols-2 gap-3 max-w-lg w-full mb-4`},Me={class:N([`h-10 w-10 rounded-full flex items-center justify-center bg-gradient-to-b from-sky-900 to-blue-950`])},Ne={class:`text-sm font-medium`},Pe={class:`max-w-lg w-full mb-8`},Fe={class:N([`h-8 w-8 rounded-lg flex items-center justify-center flex-shrink-0`])},Ie={class:`flex-1 text-sm`},Le=[`onClick`,`title`],Re={key:0,class:`w-full max-w-lg`},ze={class:`space-y-2`},Be={class:`truncate`},Ve={class:`ml-auto text-xs text-slate-400`},He={key:1,class:`mt-8 w-full max-w-lg p-4 bg-slate-50 rounded-xl`},Ue={class:`flex items-center justify-between mb-2`},We={class:`text-sm font-medium text-slate-700`},Ge={class:`text-2xl font-bold text-slate-900`},Ke={class:`text-xs text-slate-500 mt-1`},qe={key:0,class:`py-4`},Je={class:`flex items-center gap-3 p-3 bg-slate-50 rounded-lg`},Ye={class:`flex-1 min-w-0`},Xe={class:`text-sm font-medium truncate`},Ze={class:`text-xs text-slate-500`},X={class:`mt-4`},Qe={key:1,class:`py-8`},Z=`flow_pinned_actions`,Q={__name:`WelcomeView`,props:{account:Object},setup(e){let t=e,n=S(`openTab`),r=S(`openDocSheet`),i=U(null),a=U(!1),o=U({show:!1,file:null,category:`BANK_STATEMENT`}),l=U([]);O(()=>{let e=localStorage.getItem(Z);if(e)try{l.value=JSON.parse(e)}catch{l.value=[`upload`,`reconcile`,`table`,`invoice`]}else l.value=[`upload`,`reconcile`,`table`,`invoice`]});let u=[{id:`upload`,label:`Upload Statement`,icon:F,bgClass:`bg-blue-100`,iconClass:`text-blue-600`},{id:`reconcile`,label:`Start Reconciliation`,icon:L,bgClass:`bg-green-100`,iconClass:`text-green-600`},{id:`table`,label:`Create Table`,icon:D,bgClass:`bg-amber-100`,iconClass:`text-amber-600`},{id:`invoice`,label:`New Invoice`,icon:oe,bgClass:`bg-purple-100`,iconClass:`text-purple-600`},{id:`calculator`,label:`Calculator`,icon:R,bgClass:`bg-teal-100`,iconClass:`text-teal-600`},{id:`search-docs`,label:`Search Documents`,icon:ie,bgClass:`bg-indigo-100`,iconClass:`text-indigo-600`},{id:`contacts`,label:`New Customer`,icon:H,bgClass:`bg-pink-100`,iconClass:`text-pink-600`},{id:`chart`,label:`Create Chart`,icon:x,bgClass:`bg-orange-100`,iconClass:`text-orange-600`},{id:`journal`,label:`Journal Entry`,icon:ae,bgClass:`bg-cyan-100`,iconClass:`text-cyan-600`},{id:`expense`,label:`Record Expense`,icon:te,bgClass:`bg-red-100`,iconClass:`text-red-600`},{id:`browse-files`,label:`Browse Files`,icon:re,bgClass:`bg-slate-100`,iconClass:`text-slate-600`},{id:`reports`,label:`Generate Report`,icon:T,bgClass:`bg-emerald-100`,iconClass:`text-emerald-600`}],b=f(()=>u.filter(e=>l.value.includes(e.id)));function C(e){return l.value.includes(e)}function w(e){let t=l.value.indexOf(e);t>-1?l.value.splice(t,1):l.value.push(e),localStorage.setItem(Z,JSON.stringify(l.value))}let E=U([]);function j(e){switch(e.id){case`upload`:o.value.show=!0,o.value.file=null,o.value.category=`BANK_STATEMENT`;break;case`reconcile`:r?.(`Reconciliation Session`,`new`,e=>{let t=e.name||e.reference;t&&n?.({id:`reconciliation-${t}`,type:`reconciliation`,title:`Reconciliation: ${t}`,data:{reference:t}})});break;case`table`:n?.({id:`new-table-`+Date.now(),type:`spreadsheet`,title:`Untitled Table`,data:null,unsaved:!0});break;case`invoice`:r?.(`Sales Invoice`,`new`,e=>{let t=e.name||e.reference;t&&n?.({id:`doctype-Sales Invoice-${t}`,type:`doctype-form`,title:`Sales Invoice: ${t}`,doctype:`Sales Invoice`,docName:t,isNew:!1,data:null})});break;case`chart`:n?.({id:`new-chart-`+Date.now(),type:`chart`,title:`New Chart`,data:null,unsaved:!0});break;case`journal`:r?.(`Journal Entry`,`new`,e=>{let t=e.name||e.reference;t&&n?.({id:`doctype-Journal Entry-${t}`,type:`doctype-form`,title:`Journal Entry: ${t}`,doctype:`Journal Entry`,docName:t,isNew:!1,data:null})});break;case`expense`:r?.(`Expense`,`new`,e=>{let t=e.name||e.reference;t&&n?.({id:`doctype-Expense-${t}`,type:`doctype-form`,title:`Expense: ${t}`,doctype:`Expense`,docName:t,isNew:!1,data:null})});break;case`calculator`:console.log(`Open calculator`);break;case`search-docs`:n?.({id:`search-docs`,type:`search`,title:`Search Documents`,data:null});break;case`contacts`:r?.(`Customer`,`new`,e=>{let t=e.name||e.reference;t&&n?.({id:`doctype-Customer-${t}`,type:`doctype-form`,title:`Customer: ${t}`,doctype:`Customer`,docName:t,isNew:!1,data:null})});break;case`browse-files`:n?.({id:`file-browser`,type:`browser`,title:`File Browser`,data:null});break;case`reports`:n?.({id:`tax-report-`+Date.now(),type:`tax-report`,title:`Tax Report`,data:null});break;default:console.log(`Action not implemented:`,e.id)}}function z(){i.value?.click()}function W(e){let t=e.target.files?.[0];t&&(o.value.file=t,t.name.toLowerCase().includes(`statement`)?o.value.category=`BANK_STATEMENT`:t.name.toLowerCase().includes(`invoice`)?o.value.category=`INVOICE`:t.name.toLowerCase().includes(`receipt`)&&(o.value.category=`RECEIPT`))}function Q(e){let t=e.dataTransfer?.files?.[0];t&&(o.value.file=t)}function $(){o.value.file=null,i.value&&(i.value.value=``)}async function $e(){if(o.value.file){a.value=!0;try{let e=await Ee.uploadDocument(o.value.file,o.value.category);o.value.show=!1,e&&n?.({id:`doc-${e.reference}`,type:`document`,title:e.name||o.value.file.name,data:e})}catch(e){console.error(`Upload failed:`,e)}finally{a.value=!1}}}function et(e){n?.({id:e.id,type:e.type,title:e.name,data:e})}function tt(e){return{spreadsheet:D,document:V,chart:ne,reconciliation:L}[e.type]||V}function nt(e){if(!e)return``;let t=new Date(e),n=new Date-t,r=Math.floor(n/6e4);return r<60?`${r}m ago`:r<1440?`${Math.floor(r/60)}h ago`:t.toLocaleDateString()}function rt(e){return e==null?`N/A`:new Intl.NumberFormat(`en-NG`,{style:`currency`,currency:t.account?.currency||`NGN`}).format(e)}function it(e){return e?new Date(e).toLocaleDateString(`en-US`,{month:`short`,day:`numeric`,hour:`2-digit`,minute:`2-digit`}):`Never`}function at(e){return e<1024?e+` B`:e<1024*1024?(e/1024).toFixed(1)+` KB`:(e/(1024*1024)).toFixed(1)+` MB`}return(t,n)=>(I(),c(`div`,De,[m(`div`,Oe,[m(`div`,ke,[m(`div`,Ae,[y(s(h),{class:`size-10 text-white`})])]),n[7]||=m(`h1`,{class:`text-2xl font-bold text-slate-800 mb-2`},` Flow Seamlessly`,-1),n[8]||=m(`p`,{class:`text-sm text-slate-500 max-w-md mb-8`},` Your integrated accounting workspace. Upload documents, reconcile accounts, and let AI do the heavy lifting. `,-1),m(`div`,je,[(I(!0),c(g,null,M(b.value,e=>(I(),v(s(J),{key:e.id,variant:`outline`,class:`h-auto p-4 flex flex-col items-center gap-2 hover:bg-slate-50 rounded-[6px] hover:border-blue-200 transition-all`,onClick:t=>j(e)},{default:k(()=>[m(`div`,Me,[(I(),v(B(e.icon),{class:N([`h-5 w-5 text-white font-bold`])}))]),m(`span`,Ne,_(e.label),1)]),_:2},1032,[`onClick`]))),128))]),m(`div`,Pe,[y(s(be),null,{default:k(()=>[y(s(Te),{asChild:``},{default:k(()=>[y(s(J),{variant:`ghost`,class:`w-full text-slate-500 hover:text-slate-700`},{default:k(()=>[y(s(K),{class:`h-4 w-4 mr-2`}),n[4]||=d(` More Actions `,-1),y(s(ee),{class:`h-4 w-4 ml-2`})]),_:1})]),_:1}),y(s(xe),{class:`w-72 bg-stone-50 border-4 border-white rounded-[8px] overflow-y-scroll max-h-[350px] no-scrollbar`,align:`center`},{default:k(()=>[y(s(Ce),null,{default:k(()=>[...n[5]||=[d(`All Actions`,-1)]]),_:1}),y(s(we)),(I(),c(g,null,M(u,e=>m(`div`,{key:e.id},[y(s(Se),{class:`flex items-center gap-3 cursor-pointer hover:bg-white py-1.5 px-2 rounded-full`,onClick:t=>j(e)},{default:k(()=>[m(`div`,Fe,[(I(),v(B(e.icon),{class:N([`h-4 w-4`])}))]),m(`span`,Ie,_(e.label),1),m(`button`,{onClick:P(t=>w(e.id),[`stop`]),class:`p-1 rounded hover:bg-slate-100 transition-colors`,title:C(e.id)?`Unpin from quick actions`:`Pin to quick actions`},[C(e.id)?(I(),v(s(se),{key:0,class:`h-4 w-4 text-blue-500`})):(I(),v(s(A),{key:1,class:`h-4 w-4 text-slate-400`}))],8,Le)]),_:2},1032,[`onClick`])])),64))]),_:1})]),_:1})]),E.value.length>0?(I(),c(`div`,Re,[n[6]||=m(`h3`,{class:`text-xs font-semibold text-slate-500 uppercase tracking-wider mb-3 text-left`},`Recent`,-1),m(`div`,ze,[(I(!0),c(g,null,M(E.value,e=>(I(),v(s(J),{key:e.id,variant:`ghost`,class:`w-full justify-start text-sm h-auto py-2 px-3`,onClick:t=>et(e)},{default:k(()=>[(I(),v(B(tt(e)),{class:`h-4 w-4 mr-3 text-slate-400`})),m(`span`,Be,_(e.name),1),m(`span`,Ve,_(nt(e.openedAt)),1)]),_:2},1032,[`onClick`]))),128))])])):q(``,!0),e.account?(I(),c(`div`,He,[m(`div`,Ue,[m(`span`,We,_(e.account.accountName),1),y(s(me),{variant:`secondary`},{default:k(()=>[d(_(e.account.bankName),1)]),_:1})]),m(`div`,Ge,_(rt(e.account.balance)),1),m(`p`,Ke,` Last synced: `+_(it(e.account.lastSyncedAt)),1)])):q(``,!0)]),m(`input`,{ref_key:`fileInput`,ref:i,type:`file`,class:`hidden`,accept:`.pdf,.csv,.xlsx,.xls,.jpg,.jpeg,.png`,onChange:W},null,544),y(s(ce),{open:o.value.show,"onUpdate:open":n[3]||=e=>o.value.show=e},{default:k(()=>[y(s(le),{class:`sm:max-w-md`},{default:k(()=>[y(s(ue),null,{default:k(()=>[y(s(fe),null,{default:k(()=>[...n[9]||=[d(`Upload Document`,-1)]]),_:1}),y(s(de),null,{default:k(()=>[...n[10]||=[d(` Select a file to upload. Supported formats: PDF, CSV, Excel, Images. `,-1)]]),_:1})]),_:1}),o.value.file?(I(),c(`div`,qe,[m(`div`,Je,[y(s(V),{class:`h-8 w-8 text-blue-500`}),m(`div`,Ye,[m(`p`,Xe,_(o.value.file.name),1),m(`p`,Ze,_(at(o.value.file.size)),1)]),y(s(J),{variant:`ghost`,size:`sm`,class:`h-8 w-8 p-0`,onClick:$},{default:k(()=>[y(s(G),{class:`h-4 w-4`})]),_:1})]),m(`div`,X,[y(s(he),{class:`text-xs`},{default:k(()=>[...n[11]||=[d(`Document Category`,-1)]]),_:1}),y(s(ge),{modelValue:o.value.category,"onUpdate:modelValue":n[0]||=e=>o.value.category=e,class:`mt-1`},{default:k(()=>[y(s(ve),null,{default:k(()=>[y(s(ye),{placeholder:`Select category`})]),_:1}),y(s(_e),null,{default:k(()=>[y(s(Y),{value:`BANK_STATEMENT`},{default:k(()=>[...n[12]||=[d(`Bank Statement`,-1)]]),_:1}),y(s(Y),{value:`INVOICE`},{default:k(()=>[...n[13]||=[d(`Invoice`,-1)]]),_:1}),y(s(Y),{value:`RECEIPT`},{default:k(()=>[...n[14]||=[d(`Receipt`,-1)]]),_:1}),y(s(Y),{value:`REPORT`},{default:k(()=>[...n[15]||=[d(`Report`,-1)]]),_:1}),y(s(Y),{value:`OTHER`},{default:k(()=>[...n[16]||=[d(`Other`,-1)]]),_:1})]),_:1})]),_:1},8,[`modelValue`])])])):(I(),c(`div`,Qe,[m(`div`,{class:`border-2 shadow-md border-slate-200 rounded-lg p-8 text-center cursor-pointer hover:border-blue-300 hover:bg-blue-50/50 transition-colors`,onClick:z,onDragover:n[1]||=P(()=>{},[`prevent`]),onDrop:P(Q,[`prevent`])},[y(s(F),{class:`h-10 w-10 text-slate-400 mx-auto mb-3`}),n[17]||=m(`p`,{class:`text-sm text-slate-600`},`Click to browse or drag & drop`,-1),n[18]||=m(`p`,{class:`text-xs text-slate-400 mt-1`},`PDF, CSV, Excel, Images`,-1)],32)])),y(s(pe),null,{default:k(()=>[y(s(J),{variant:`outline`,onClick:n[2]||=e=>o.value.show=!1},{default:k(()=>[...n[19]||=[d(`Cancel`,-1)]]),_:1}),y(s(J),{onClick:$e,disabled:!o.value.file||a.value},{default:k(()=>[a.value?(I(),v(s(p),{key:0,class:`h-4 w-4 mr-2 animate-spin`})):q(``,!0),d(` `+_(a.value?`Uploading...`:`Upload`),1)]),_:1},8,[`disabled`])]),_:1})]),_:1})]),_:1},8,[`open`])]))}},$=j(Q,[[`__scopeId`,`data-v-de1908d3`]]);export{$ as default};