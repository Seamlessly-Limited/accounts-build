import"./useFormControl-BoSoz5bk.js";import"./useNonce-Cry77bU8.js";import"./nullish-CfjOSA4G.js";import"./CheckboxIndicator-Cu1vLZmL.js";import"./useArrowNavigation-siWGBYoD.js";import"./ConfigProvider-BeNpEDZu.js";import"./useHideOthers-8j3pZZC2.js";import"./PopoverTrigger-DWkr4HdR.js";import"./useDirection-CkCaHLjJ.js";import"./PopperAnchor-DePKnfPt.js";import"./useId-C9uHTJK1.js";import"./useKbd-BvGB3m10.js";import"./PopperContent-CkzV4Efh.js";import"./useTypeahead-J2lSWUJi.js";import"./Teleport-CO7T90ZX.js";import"./utils-1j6W-LC4.js";import"./utils-d0L3vlW4.js";import"./RovingFocusGroup-Dae6_7oN.js";import"./RovingFocusItem-h4PGPL5z.js";import"./VisuallyHiddenInput-Cr3vcfNb.js";import"./DropdownMenuTrigger-EYKS1OZz.js";import"./DropdownMenuLabel-BoKLynau.js";import"./MenuSeparator-Bi9Os3Cj.js";import"./DropdownMenuSeparator-BHAgwTys.js";import"./Label-BQWlwCJI.js";import"./SelectViewport-C4doWK-Y.js";import{a as e,i as t,r as n,t as r}from"./tabs-C51D2d71.js";import{$t as i,Aa as a,An as o,B as s,Bi as c,Ct as ee,Et as l,Ft as te,G as ne,Gn as u,H as d,Hi as f,I as re,Ii as p,It as ie,Jn as m,Kn as h,L as g,Li as _,Lt as ae,Mt as oe,N as se,Na as ce,Ni as v,Nn as le,Nt as ue,Oi as y,Pa as b,Pn as de,Qt as fe,R as x,Ri as S,Rt as C,St as pe,Ui as w,Vt as me,Wt as he,Yt as ge,_a as _e,_n as ve,_t as ye,a as be,b as xe,dr as Se,ea as T,er as Ce,et as we,ft as E,ga as D,gt as Te,hr as Ee,i as O,ia as k,in as De,j as A,ja as j,ji as Oe,kn as ke,lr as M,lt as Ae,mn as je,na as N,nr as P,o as F,on as Me,or as I,ot as Ne,r as Pe,rn as Fe,sa as L,sn as Ie,sr as Le,tr as R,vn as Re,w as ze,wa as z,wn as Be,wt as Ve,x as He,xn as Ue,xt as We,yt as Ge,zi as B}from"./index-BW6FH5S4.js";import{t as Ke}from"./purify.es-C6pmr44S.js";import{t as qe}from"./WorkspaceStore-DkbvTQrR.js";import{t as V}from"./Input-AKTRhZx5.js";import"./button-BIS6kOZQ.js";import{i as Je,n as H,r as Ye,t as Xe}from"./DropdownMenuTrigger-B4m7ovRB.js";import{t as Ze}from"./DropdownMenuLabel-CssOfON6.js";import{t as Qe}from"./DropdownMenuSeparator-B4Xk_Axi.js";import{n as U}from"./button-Cg1Yo4L-.js";import{t as W}from"./Input-uGdyVDA7.js";import{t as $e}from"./Textarea-XBZizbW2.js";import{t as G}from"./Card-DmhOqSpI.js";import{t as K}from"./Label-BrQgTnyx.js";import{t as q}from"./Checkbox-B9zFdhGR.js";import{t as et}from"./DateField-CuEp_QeT.js";import{a as J,i as Y,n as X,r as Z,t as Q}from"./SelectValue-CvGnKkl4.js";import{t as tt}from"./marked.esm-DidRfey3.js";import{a as nt,i as rt,n as it,r as at,t as ot}from"./SelectValue-CL8oqzYK.js";const $={DATA:{label:`Short Text`,icon:`Type`,category:`text`,dbType:`VARCHAR(255)`,description:`Single line text input`},TEXT:{label:`Long Text`,icon:`AlignLeft`,category:`text`,dbType:`TEXT`,description:`Multi-line text area`},SMALL_TEXT:{label:`Small Text`,icon:`Text`,category:`text`,dbType:`VARCHAR(500)`,description:`Short multi-line text`},LONG_TEXT:{label:`Rich Text`,icon:`FileText`,category:`text`,dbType:`TEXT`,description:`Long text with larger UI`},INT:{label:`Integer`,icon:`Hash`,category:`number`,dbType:`BIGINT`,description:`Whole number`},FLOAT:{label:`Decimal`,icon:`Calculator`,category:`number`,dbType:`DOUBLE PRECISION`,description:`Decimal number`},CURRENCY:{label:`Currency`,icon:`DollarSign`,category:`number`,dbType:`DECIMAL(19,4)`,description:`Money with 4 decimal places`},PERCENT:{label:`Percent`,icon:`Percent`,category:`number`,dbType:`DECIMAL(5,2)`,description:`Percentage (0-100)`},DATE:{label:`Date`,icon:`Calendar`,category:`datetime`,dbType:`DATE`,description:`Date picker`},DATETIME:{label:`Date & Time`,icon:`CalendarClock`,category:`datetime`,dbType:`TIMESTAMP`,description:`Date and time picker`},TIME:{label:`Time`,icon:`Clock`,category:`datetime`,dbType:`TIME`,description:`Time picker`},DURATION:{label:`Duration`,icon:`Timer`,category:`datetime`,dbType:`BIGINT`,description:`Duration in seconds`},CHECKBOX:{label:`Checkbox`,icon:`CheckSquare`,category:`choice`,dbType:`BOOLEAN`,description:`Yes/No checkbox`},SELECT:{label:`Select`,icon:`List`,category:`choice`,dbType:`VARCHAR(255)`,description:`Single select dropdown`,requiresOptions:!0},MULTI_SELECT:{label:`Multi Select`,icon:`ListChecks`,category:`choice`,dbType:`JSONB`,description:`Multiple selection`},LINK:{label:`Link`,icon:`Link2`,category:`relationship`,dbType:`VARCHAR(255)`,description:`Link to another DocType`,requiresOptions:!0,optionsLabel:`Target DocType`},TABLE:{label:`Table`,icon:`Table`,category:`relationship`,dbType:null,description:`Child table`,requiresOptions:!0,optionsLabel:`Child DocType`},ATTACH:{label:`Attachment`,icon:`Paperclip`,category:`file`,dbType:`VARCHAR(500)`,description:`File attachment`},ATTACH_IMAGE:{label:`Image`,icon:`Image`,category:`file`,dbType:`VARCHAR(500)`,description:`Image attachment`},SIGNATURE:{label:`Signature`,icon:`PenTool`,category:`file`,dbType:`TEXT`,description:`Signature capture`},PHONE:{label:`Phone`,icon:`Phone`,category:`contact`,dbType:`VARCHAR(50)`,description:`Phone number`},EMAIL:{label:`Email`,icon:`Mail`,category:`contact`,dbType:`VARCHAR(255)`,description:`Email address`},COLOR:{label:`Color`,icon:`Palette`,category:`special`,dbType:`VARCHAR(20)`,description:`Hex color picker`},JSON:{label:`JSON`,icon:`Braces`,category:`special`,dbType:`JSONB`,description:`Arbitrary JSON data`},PASSWORD:{label:`Password`,icon:`Lock`,category:`special`,dbType:`VARCHAR(255)`,description:`Masked password input`},READ_ONLY:{label:`Read Only`,icon:`Eye`,category:`special`,dbType:null,description:`Display only, no storage`},HTML:{label:`HTML`,icon:`Code`,category:`special`,dbType:`TEXT`,description:`Rich HTML content`},GEOLOCATION:{label:`Geolocation`,icon:`MapPin`,category:`special`,dbType:`JSONB`,description:`Lat/Lng coordinates`},SECTION_BREAK:{label:`Section Break`,icon:`Minus`,category:`layout`,dbType:null,description:`Section separator`,isLayout:!0},COLUMN_BREAK:{label:`Column Break`,icon:`Columns`,category:`layout`,dbType:null,description:`Column separator`,isLayout:!0},TAB_BREAK:{label:`Tab Break`,icon:`LayoutGrid`,category:`layout`,dbType:null,description:`Tab separator`,isLayout:!0}},st={text:{label:`Text`,icon:`Type`},number:{label:`Number`,icon:`Hash`},datetime:{label:`Date & Time`,icon:`Calendar`},choice:{label:`Choice`,icon:`List`},relationship:{label:`Relationship`,icon:`Link2`},file:{label:`File`,icon:`Paperclip`},contact:{label:`Contact`,icon:`User`},special:{label:`Special`,icon:`Sparkles`},layout:{label:`Layout`,icon:`LayoutGrid`}},ct=[{value:`Accounting`,label:`Accounting`,icon:`BookOpen`,color:`#10B981`},{value:`Billing`,label:`Billing`,icon:`Receipt`,color:`#84CC16`},{value:`Buying`,label:`Buying`,icon:`ShoppingBag`,color:`#EAB308`},{value:`CRM`,label:`CRM`,icon:`Users`,color:`#F97316`},{value:`Sales`,label:`Sales`,icon:`TrendingUp`,color:`#EF4444`},{value:`Stock`,label:`Stock`,icon:`Package`,color:`#EC4899`},{value:`System`,label:`System`,icon:`Settings`,color:`#000000`}],lt=[{value:`AUTO_INCREMENT`,label:`Auto Increment`,description:`Sequential numbers (e.g., 00001, 00002)`},{value:`UUID`,label:`UUID`,description:`Random unique identifier`}],ut={name:``,module:`CRM`,description:``,documentation:``,icon:`File`,color:`#3B82F6`,isChild:!1,isSubmittable:!1,isSingle:!1,trackChanges:!0,hasId:!0,idPrefix:``,idSuffix:``,idMinLength:5,idGenerationStrategy:`AUTO_INCREMENT`,titleField:`name`,searchFields:``,sortField:`created_at`,sortOrder:`DESC`,fields:[]},dt={fieldname:``,label:``,fieldtype:`DATA`,options:``,reqd:!1,is_unique:!1,default_value:``,hidden:!1,read_only:!1,in_list_view:!1,in_filter:!1,search_index:!1,placeholder:``,description:``};function ft(){let e={};for(let[t,n]of Object.entries($))e[n.category]||(e[n.category]=[]),e[n.category].push({type:t,...n});return e}function pt(e){return e.toLowerCase().replace(/[^a-z0-9\s]/g,``).replace(/\s+/g,`_`).substring(0,63)}var mt={class:`flex items-center justify-between mb-4`},ht={key:0,class:`border-2 shadow-md border-gray-200 rounded-lg p-8 text-center`},gt={key:0,class:`text-sm text-gray-400`},_t={key:1,class:`text-sm text-gray-400`},vt={key:1,class:`space-y-2`},yt=[`onClick`],bt={class:`flex-1 min-w-0`},xt={class:`flex items-center gap-2`},St={class:`font-medium truncate`},Ct={key:0,class:`text-red-500 text-xs`},wt={class:`flex items-center gap-2 text-xs text-gray-500`},Tt={class:`bg-gray-100 px-1 rounded`},Et={class:`px-1.5 py-0.5 bg-gray-100 rounded`},Dt={key:0,class:`p-4 border-t bg-gray-50/50 space-y-4`},Ot={class:`grid grid-cols-2 gap-4`},kt={class:`space-y-1.5`},At={class:`space-y-1.5`},jt={key:0,class:`col-span-2 space-y-1.5`},Mt={key:1,class:`space-y-1.5 flex-1`},Nt={key:2,class:`space-y-1.5`},Pt={class:`col-span-2 pt-4 border-t`},Ft={class:`grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-4`},It={class:`col-span-2 space-y-1.5`},Lt={__name:`FieldBuilder`,props:{modelValue:{type:Array,default:()=>[]},availableDocTypes:{type:Array,default:()=>[]},disabled:{type:Boolean,default:!1}},emits:[`update:modelValue`],setup(e,{emit:t}){let n=e,r=t,d=z(null),ie={Type:A,AlignLeft:x,Text:x,Hash:fe,Calculator:P,DollarSign:Be,Percent:ye,Calendar:Ce,CalendarClock:R,Clock:de,Timer:g,CheckSquare:ne,List:ae,ListChecks:C,Link2:me,Table:s,Paperclip:We,Image:ge,PenTool:Ge,Phone:Te,Mail:ue,Palette:ee,Braces:I,Lock:te,Eye:ve,Code:le,Minus:l,Columns:o,LayoutGrid:he,MapPin:oe},se={text:`bg-blue-500`,number:`bg-green-500`,datetime:`bg-purple-500`,choice:`bg-orange-500`,relationship:`bg-pink-500`,file:`bg-yellow-500`,contact:`bg-cyan-500`,special:`bg-gray-500`,layout:`bg-slate-400`},ce=[{key:`reqd`,label:`Required`},{key:`in_list_view`,label:`Show in List`},{key:`in_filter`,label:`Filterable`},{key:`search_index`,label:`Indexed`},{key:`is_unique`,label:`Unique`},{key:`hidden`,label:`Hidden`},{key:`read_only`,label:`Read Only`}],y=new WeakMap,pe=0,_e=p(()=>ft()),be=ce;function xe(e){return y.has(e)||y.set(e,`f-${++pe}`),y.get(e)}function Se(e){let t=$[e]?.category;return se[t]||`bg-gray-500`}function T(e){return $[e]||null}function we(e){let t={...dt,fieldtype:e,fieldname:``,label:``};r(`update:modelValue`,[...n.modelValue,t]),d.value=n.modelValue.length}function Ee(e){let t=[...n.modelValue];t.splice(e,1),r(`update:modelValue`,t),d.value===e?d.value=null:d.value>e&&d.value--}function O(e,t){let i=e+t;if(i<0||i>=n.modelValue.length)return;let a=[...n.modelValue],[o]=a.splice(e,1);a.splice(i,0,o),r(`update:modelValue`,a),d.value===e?d.value=i:d.value===i&&(d.value=e)}function De(e){d.value=d.value===e?null:e}function ke(e){!e.fieldname&&e.label&&(e.fieldname=pt(e.label))}return(t,n)=>(N(),S(a(G),{class:`p-6 bg-white/80`},{default:D(()=>[_(`div`,mt,[n[4]||=_(`div`,null,[_(`h3`,{class:`font-semibold text-lg`},`Fields`),_(`p`,{class:`text-sm text-gray-500`},`Define the data structure for this DocType`)],-1),e.disabled?B(``,!0):(N(),S(a(Je),{key:0},{default:D(()=>[w(a(Xe),{asChild:``},{default:D(()=>[w(a(U),{class:`rounded-full`},{default:D(()=>[w(a(E),{class:`w-4 h-4 mr-2`}),n[2]||=f(` Add Field `,-1)]),_:1})]),_:1}),w(a(Ye),{class:`w-56 overflow-y-scroll max-h-[400px]`,style:{"scrollbar-width":`none`}},{default:D(()=>[w(a(Ze),null,{default:D(()=>[...n[3]||=[f(`Field Type`,-1)]]),_:1}),w(a(Qe)),(N(!0),c(v,null,k(_e.value,(e,t)=>(N(),c(v,{key:t},[w(a(Ze),{class:`text-xs text-gray-400 uppercase`},{default:D(()=>[f(b(a(st)[t]?.label||t),1)]),_:2},1024),(N(!0),c(v,null,k(e,e=>(N(),S(a(H),{key:e.type,onClick:t=>we(e.type)},{default:D(()=>[(N(),S(L(ie[e.icon]),{class:`w-4 h-4 mr-2`})),f(` `+b(e.label),1)]),_:2},1032,[`onClick`]))),128)),w(a(Qe))],64))),128))]),_:1})]),_:1}))]),e.modelValue.length===0?(N(),c(`div`,ht,[w(a(ae),{class:`w-12 h-12 mx-auto text-gray-300 mb-3`}),n[5]||=_(`p`,{class:`text-gray-500`},`No fields defined yet`,-1),e.disabled?(N(),c(`p`,_t,`This DocType has no fields and is read-only.`)):(N(),c(`p`,gt,`Click "Add Field" to start building your DocType`))])):(N(),c(`div`,vt,[(N(!0),c(v,null,k(e.modelValue,(t,r)=>(N(),c(`div`,{key:xe(t),class:j([`border border-gray-200 rounded-lg bg-white transition-all overflow-hidden`,{"ring-2 ring-blue-500 shadow-md scale-[1.01] z-10":d.value===r}])},[_(`div`,{class:`flex items-center gap-3 p-3 cursor-pointer hover:bg-gray-50`,onClick:e=>De(r)},[_(`div`,{class:`cursor-grab text-gray-400 hover:text-gray-600`,onMousedown:n[0]||=Oe(()=>{},[`stop`])},[w(a(i),{class:`w-4 h-4`})],32),_(`div`,{class:j([`w-8 h-8 rounded flex items-center justify-center transition-colors`,Se(t.fieldtype)])},[(N(),S(L(ie[a($)[t.fieldtype]?.icon||`Type`]),{class:`w-4 h-4 text-white`}))],2),_(`div`,bt,[_(`div`,xt,[_(`span`,St,b(t.label||`Untitled Field`),1),t.reqd?(N(),c(`span`,Ct,`*`)):B(``,!0)]),_(`div`,wt,[_(`code`,Tt,b(t.fieldname||`...`),1),_(`span`,Et,b(a($)[t.fieldtype]?.label||t.fieldtype),1)])]),e.disabled?B(``,!0):(N(),c(`div`,{key:0,class:`flex items-center gap-1`,onClick:n[1]||=Oe(()=>{},[`stop`])},[w(a(U),{variant:`ghost`,size:`sm`,onClick:e=>O(r,-1),disabled:r===0,class:`h-8 w-8 p-0`},{default:D(()=>[w(a(u),{class:`w-4 h-4`})]),_:1},8,[`onClick`,`disabled`]),w(a(U),{variant:`ghost`,size:`sm`,onClick:e=>O(r,1),disabled:r===e.modelValue.length-1,class:`h-8 w-8 p-0`},{default:D(()=>[w(a(m),{class:`w-4 h-4`})]),_:1},8,[`onClick`,`disabled`]),w(a(U),{variant:`ghost`,size:`sm`,class:`text-red-500 hover:text-red-600 hover:bg-red-50 h-8 w-8 p-0`,onClick:e=>Ee(r)},{default:D(()=>[w(a(re),{class:`w-4 h-4`})]),_:1},8,[`onClick`])])),w(a(h),{class:j([`w-4 h-4 text-gray-400 transition-transform`,{"rotate-90":d.value===r}])},null,8,[`class`])],8,yt),d.value===r?(N(),c(`div`,Dt,[_(`div`,Ot,[_(`div`,kt,[w(a(K),null,{default:D(()=>[...n[6]||=[f(`Label *`,-1)]]),_:1}),w(a(W),{modelValue:t.label,"onUpdate:modelValue":e=>t.label=e,placeholder:`Display label`,onInput:e=>ke(t),disabled:e.disabled},null,8,[`modelValue`,`onUpdate:modelValue`,`onInput`,`disabled`])]),_(`div`,At,[w(a(K),null,{default:D(()=>[...n[7]||=[f(`Field Name *`,-1)]]),_:1}),w(a(W),{modelValue:t.fieldname,"onUpdate:modelValue":e=>t.fieldname=e,placeholder:`database_column_name`,class:`font-mono text-sm`},null,8,[`modelValue`,`onUpdate:modelValue`]),n[8]||=_(`p`,{class:`text-xs text-gray-400`},`Lowercase with underscores`,-1)]),T(t.fieldtype)?(N(),c(v,{key:0},[T(t.fieldtype)?.requiresOptions?(N(),c(`div`,jt,[w(a(K),null,{default:D(()=>[f(b(T(t.fieldtype)?.optionsLabel||`Options`)+` *`,1)]),_:2},1024),[`SELECT`,`MULTI_SELECT`].includes(t.fieldtype)?(N(),S(a($e),{key:0,modelValue:t.options,"onUpdate:modelValue":e=>t.options=e,placeholder:`Option 1
Option 2
Option 3`,class:`font-mono text-sm`,rows:`3`},null,8,[`modelValue`,`onUpdate:modelValue`])):(N(),S(a(nt),{key:1,modelValue:t.options,"onUpdate:modelValue":e=>t.options=e,disabled:e.disabled},{default:D(()=>[w(a(it),{class:`bg-white`},{default:D(()=>[w(a(ot),{placeholder:`Select DocType`})]),_:1}),w(a(rt),null,{default:D(()=>[(N(!0),c(v,null,k(e.availableDocTypes,e=>(N(),S(a(at),{key:e,value:e},{default:D(()=>[f(b(e),1)]),_:2},1032,[`value`]))),128))]),_:1})]),_:1},8,[`modelValue`,`onUpdate:modelValue`,`disabled`]))])):B(``,!0),T(t.fieldtype)?.isLayout?B(``,!0):(N(),c(`div`,Mt,[w(a(K),null,{default:D(()=>[...n[9]||=[f(`Default Value`,-1)]]),_:1}),t.fieldtype===`DATE`?(N(),S(et,{key:0,modelValue:t.default_value,"onUpdate:modelValue":e=>t.default_value=e,placeholder:`Pick default date`,disabled:e.disabled},null,8,[`modelValue`,`onUpdate:modelValue`,`disabled`])):(N(),S(a(W),{key:1,modelValue:t.default_value,"onUpdate:modelValue":e=>t.default_value=e,placeholder:`Default value`,disabled:e.disabled},null,8,[`modelValue`,`onUpdate:modelValue`,`disabled`]))])),[`DATA`,`TEXT`,`SMALL_TEXT`,`LONG_TEXT`,`PHONE`,`EMAIL`].includes(t.fieldtype)?(N(),c(`div`,Nt,[w(a(K),null,{default:D(()=>[...n[10]||=[f(`Placeholder`,-1)]]),_:1}),w(a(W),{modelValue:t.placeholder,"onUpdate:modelValue":e=>t.placeholder=e,placeholder:`Placeholder text`,disabled:e.disabled},null,8,[`modelValue`,`onUpdate:modelValue`,`disabled`])])):B(``,!0)],64)):B(``,!0),_(`div`,Pt,[_(`div`,Ft,[(N(!0),c(v,null,k(a(be),n=>(N(),c(`div`,{key:n.key,class:`flex items-center space-x-2`},[w(a(q),{checked:t[n.key],"onUpdate:checked":e=>t[n.key]=e,disabled:e.disabled},null,8,[`checked`,`onUpdate:checked`,`disabled`]),w(a(K),{class:`text-sm font-normal cursor-pointer`},{default:D(()=>[f(b(n.label),1)]),_:2},1024)]))),128))])]),_(`div`,It,[w(a(K),null,{default:D(()=>[...n[11]||=[f(`Help Text`,-1)]]),_:1}),w(a(W),{modelValue:t.description,"onUpdate:modelValue":e=>t.description=e,placeholder:`Help text shown below the field`,disabled:e.disabled},null,8,[`modelValue`,`onUpdate:modelValue`,`disabled`])])])])):B(``,!0)],2))),128))]))]),_:1}))}},Rt={class:`h-full flex flex-col bg-[radial-gradient(ellipse_at_top,_var(--tw-gradient-stops))] to-slate-100/50 from-stone-100/60 from-5%`},zt={class:`flex-none px-6 py-4 bg-white border-b border-gray-200 flex items-center justify-between sticky top-0 z-10`},Bt={class:`flex items-center space-x-4`},Vt={class:`text-xl font-bold text-gray-900 mt-1`},Ht={class:`flex items-center space-x-3`},Ut={key:0,class:`flex-none px-6 py-2 bg-slate-50 border-b border-slate-200 flex items-center justify-center gap-2 text-slate-600 text-sm font-medium`},Wt={key:1,class:`flex-none px-6 py-2 bg-amber-50 border-b border-amber-100 flex items-center justify-center gap-2 text-amber-800 text-sm font-medium`},Gt={class:`flex-1 overflow-hidden flex`},Kt={class:`flex-1 overflow-auto p-6`},qt={key:0,class:`flex justify-center items-center h-64`},Jt={key:1,class:`max-w-4xl mx-auto space-y-6`},Yt={class:`flex justify-center mb-8`},Xt={class:`grid grid-cols-2 gap-6`},Zt={class:`col-span-2 md:col-span-1`},Qt={class:`col-span-2 md:col-span-1`},$t={key:0,class:`text-xs text-amber-600 mt-1`},en={class:`col-span-2`},tn={key:0,class:`flex items-center gap-2`},nn={class:`flex items-center gap-2`},rn={class:`flex items-center gap-2 mt-1.5`},an=[`disabled`],on={class:`col-span-2 pt-4 border-t`},sn={class:`grid grid-cols-2 md:grid-cols-4 gap-4 mt-3`},cn={class:`flex items-center space-x-2`},ln={class:`flex items-center space-x-2`},un={class:`flex items-center space-x-2`},dn={key:0,class:`col-span-2`},fn={class:`space-y-6`},pn={class:`flex items-center space-x-2`},mn={key:0,class:`grid grid-cols-2 gap-6 pt-4 border-t`},hn={class:`col-span-2 p-4 bg-gray-50 rounded-lg`},gn={class:`font-mono text-lg mt-1`},_n={class:`grid grid-cols-2 gap-6`},vn={class:`space-y-6`},yn={class:`flex items-center space-x-2`},bn={key:0,class:`pt-4 border-t space-y-4`},xn={class:`p-4 bg-blue-50 rounded-lg`},Sn={class:`flex items-center gap-2 mt-2 text-sm`},Cn={class:`space-y-4`},wn={class:`flex items-center gap-2`},Tn={key:0},En=[`innerHTML`],Dn={key:0,class:`w-96 border-l bg-gray-900 text-gray-100 overflow-auto`},On={class:`p-4 border-b border-gray-700 flex items-center justify-between`},kn={class:`p-4 text-xs overflow-auto`},An={key:1,class:`w-96 border-l bg-white overflow-auto`},jn={class:`p-4 border-b border-gray-200 flex items-center justify-between`},Mn={class:`flex items-center gap-2`},Nn={class:`p-4`},Pn=[`innerHTML`],Fn={key:1,class:`text-center py-8`},In={__name:`DocTypeEditor`,props:{doctype:{type:String,default:`DocType`},name:{type:String,default:null},isNew:{type:Boolean,default:!0}},setup(i){let o=i;Pe();let l=be().toast,u=qe(),re=z(!1),m=z(!1),h=z({...ut}),g=z(`general`),x=z(!1),C=z(!1),he=z([]),E=z(!1),O=p(()=>{if(!h.value.documentation)return`<p class="text-gray-400 italic">No documentation yet.</p>`;let e=tt.parse(h.value.documentation);return Ke.sanitize(e)}),A={FileCode:je,FileText:Ie,Users:ze,Package:Ve,Receipt:Ae,Box:Le,Store:d,Truck:se,BookOpen:M,Bell:Se,Mail:ue,Lock:te,File:Me,Folder:De,Calendar:Ce,Clock:de,DollarSign:Be,Percent:ye,CheckSquare:ne,Link2:me,Table:s,Paperclip:We,Image:ge,Phone:Te,Palette:ee,Code:le,MapPin:oe,Settings:we,List:ae,Hash:fe,Layout:pe,GitBranch:Fe},Oe=`FileText.Users.Package.Receipt.Box.Store.Truck.BookOpen.Bell.Mail.Lock.File.Folder.Calendar.Clock.DollarSign.Percent.CheckSquare.Link2.Table.Paperclip.Image.Phone.Palette.Code.MapPin.Settings`.split(`.`),P=p(()=>h.value.module===`System`),I=p(()=>h.value.organisation!==null&&h.value.organisation!==void 0),R=p(()=>P.value&&!I.value&&!o.isNew),Ge=p(()=>ct.filter(e=>e.value!==`System`||h.value.module===`System`)),Ze=p(()=>(h.value.fields||[]).filter(e=>![`SECTION_BREAK`,`COLUMN_BREAK`,`TAB_BREAK`,`TABLE`].includes(e.fieldtype))),W=p(()=>{let e=h.value.idPrefix||``,t=h.value.idSuffix||``,n=h.value.idMinLength||5,r=h.value.idGenerationStrategy===`UUID`?`a1b2c3d4`:`1`.padStart(n,`0`);return`${e}${r}${t}`}),et=p(()=>{let e={...h.value};return e.tableName||delete e.tableName,e.parentDocType||delete e.parentDocType,e.idPrefix||delete e.idPrefix,e.idSuffix||delete e.idSuffix,JSON.stringify(e,null,2)});async function nt(){if(o.isNew){let e=u.openTabs.find(e=>e.id===u.activeTabId);e?.data&&(h.value={...ut,...e.data});return}try{let e=await F.get(`/org/doctypes/${encodeURIComponent(o.name)}`,{authorizeRequest:!0,organisationAware:!0}),t=e?.data||e;h.value={...ut,...t,fields:t.fields||[]}}catch(e){l({message:e.message||`Failed to load DocType`,variant:`error`})}finally{re.value=!1}}async function rt(){try{he.value=((await F.get(`/org/doctypes`,{authorizeRequest:!0,organisationAware:!0}))?.data||[]).filter(e=>!e.is_child).map(e=>e.name)}catch(e){console.warn(`Failed to load DocTypes:`,e)}}async function it(){if(!h.value.name?.trim()){l({message:`DocType name is required`,variant:`error`}),g.value=`general`;return}if(!h.value.module){l({message:`Module is required`,variant:`error`}),g.value=`general`;return}m.value=!0;try{let e={name:h.value.name,module:h.value.module,description:h.value.description,icon:h.value.icon,color:h.value.color,is_child:h.value.isChild,parent_doctype:h.value.parentDocType,is_submittable:h.value.isSubmittable,is_single:h.value.isSingle,track_changes:h.value.trackChanges,has_id:h.value.hasId,id_prefix:h.value.idPrefix,id_suffix:h.value.idSuffix,id_min_length:h.value.idMinLength,id_generation_strategy:h.value.idGenerationStrategy,title_field:h.value.titleField,search_fields:h.value.searchFields,sort_field:h.value.sortField,sort_order:h.value.sortOrder,documentation:h.value.documentation,fields:h.value.fields.map((e,t)=>({...e,idx:t}))};await F.post(`/org/doctypes`,{data:e,authorizeRequest:!0,organisationAware:!0}),o.isNew?(l({message:`DocType "${h.value.name}" created successfully`,variant:`success`}),u.closeTab(`doctype-form-DocType-new`),u.openTab({id:`doctype-${h.value.name.toLowerCase().replace(/\s+/g,`-`)}`,title:h.value.name,icon:h.value.icon||`FileText`,type:`doctype`,doctype:h.value.name,closable:!0})):(l({message:`DocType "${h.value.name}" updated`,variant:`success`}),nt())}catch(e){l({message:e.message||`Failed to save DocType`,variant:`error`})}finally{m.value=!1}}async function at(){let e=JSON.parse(JSON.stringify(h.value.fields)),t=h.value.module===`System`?`CRM`:h.value.module;u.openTab({id:`doctype-form-DocType-new-${Date.now()}`,title:`New DocType (Copy)`,icon:h.value.icon||`FileCode`,type:`doctype-form`,doctype:`DocType`,isNew:!0,closable:!0,data:{...h.value,name:`${h.value.name} Copy`,module:t,fields:e}})}function ot(){x.value=!x.value,x.value&&(C.value=!1)}function $(){C.value=!C.value,C.value&&(x.value=!1)}async function st(){try{await navigator.clipboard.writeText(et.value),l({message:`JSON copied to clipboard`,variant:`success`})}catch{l({message:`Failed to copy`,variant:`error`})}}async function dt(){if(confirm(`Are you sure you want to reset this DocType to its system default? All your customizations will be lost.`))try{await F.delete(`/org/doctypes/${encodeURIComponent(o.name)}`,{authorizeRequest:!0,organisationAware:!0}),l({message:`DocType reset to default`,variant:`success`}),nt()}catch(e){l({message:e.message||`Failed to reset DocType`,variant:`error`})}}return T(()=>{nt(),rt()}),(o,s)=>(N(),c(`div`,Rt,[_(`header`,zt,[_(`div`,Bt,[_(`div`,{class:`w-10 h-10 rounded-xl flex items-center justify-center`,style:ce({backgroundColor:h.value.color||`#6366F1`})},[(N(),S(L(A[h.value.icon]||a(je)),{class:`w-5 h-5 text-white`}))],4),_(`div`,null,[s[26]||=_(`span`,{class:`text-xs text-gray-500 uppercase tracking-wide`},`DocType Builder`,-1),_(`h1`,Vt,b(i.isNew?`New DocType`:h.value.name),1)])]),_(`div`,Ht,[I.value?(N(),S(a(U),{key:0,variant:`outline`,class:`rounded-full`,onClick:dt},{default:D(()=>[w(a(Ne),{class:`w-4 h-4 mr-2`}),s[27]||=f(` Reset to Default `,-1)]),_:1})):B(``,!0),w(a(Je),null,{default:D(()=>[w(a(Xe),{asChild:``},{default:D(()=>[w(a(U),{variant:`outline`,class:`rounded-full w-9 h-9 p-0`},{default:D(()=>[w(a(Ue),{class:`w-4 h-4`})]),_:1})]),_:1}),w(a(Ye),{align:`end`},{default:D(()=>[w(a(H),{onClick:ot},{default:D(()=>[x.value?(N(),S(a(Re),{key:1,class:`w-4 h-4 mr-2`})):(N(),S(a(ve),{key:0,class:`w-4 h-4 mr-2`})),f(` `+b(x.value?`Hide JSON Preview`:`Show JSON Preview`),1)]),_:1}),w(a(H),{onClick:$},{default:D(()=>[w(a(M),{class:`w-4 h-4 mr-2`}),f(` `+b(C.value?`Hide Documentation`:`Show Documentation`),1)]),_:1}),!i.isNew&&!P.value?(N(),S(a(Qe),{key:0})):B(``,!0),!i.isNew&&!P.value?(N(),S(a(H),{key:1,onClick:at},{default:D(()=>[w(a(ke),{class:`w-4 h-4 mr-2`}),s[28]||=f(` Duplicate DocType `,-1)]),_:1})):B(``,!0)]),_:1})]),_:1}),!R.value||i.isNew?(N(),S(a(U),{key:1,onClick:it,disabled:m.value,class:`rounded-full`},{default:D(()=>[m.value?(N(),S(a(ie),{key:0,class:`w-4 h-4 animate-spin mr-2`})):B(``,!0),f(` `+b(i.isNew?`Create DocType`:`Save Changes`),1)]),_:1},8,[`disabled`])):B(``,!0)])]),P.value&&!I.value&&!i.isNew?(N(),c(`div`,Ut,[w(a(te),{class:`w-4 h-4`}),s[29]||=f(` System DocType. This definition is read-only and managed by the platform. `,-1)])):B(``,!0),I.value?(N(),c(`div`,Wt,[w(a(xe),{class:`w-4 h-4`}),s[30]||=f(` Active Override. You are using a customized version of this DocType. `,-1)])):B(``,!0),_(`div`,Gt,[_(`div`,Kt,[re.value?(N(),c(`div`,qt,[...s[31]||=[_(`div`,{class:`animate-spin rounded-full h-8 w-8 border-b-2 border-black`},null,-1)]])):(N(),c(`div`,Jt,[w(a(e),{modelValue:g.value,"onUpdate:modelValue":s[24]||=e=>g.value=e,class:`w-full`},{default:D(()=>[_(`div`,Yt,[w(a(n),{class:`rounded-full bg-stone-50/80 flex w-fit shadow-sm border border-slate-200/50 px-0 py-0`},{default:D(()=>[w(a(r),{value:`general`,class:`px-6 py-1.5 rounded-full data-[state=active]:bg-white data-[state=active]:text-slate-900 data-[state=active]:shadow-sm transition-all duration-200`},{default:D(()=>[w(a(we),{class:`w-4 h-4 mr-2`}),s[32]||=f(` General `,-1)]),_:1}),w(a(r),{value:`fields`,class:`px-6 py-1.5 rounded-full data-[state=active]:bg-white data-[state=active]:text-slate-900 data-[state=active]:shadow-sm transition-all duration-200`},{default:D(()=>[w(a(ae),{class:`w-4 h-4 mr-2`}),s[33]||=f(` Fields `,-1)]),_:1}),w(a(r),{value:`naming`,class:`px-6 py-1.5 rounded-full data-[state=active]:bg-white data-[state=active]:text-slate-900 data-[state=active]:shadow-sm transition-all duration-200`},{default:D(()=>[w(a(fe),{class:`w-4 h-4 mr-2`}),s[34]||=f(` ID Config `,-1)]),_:1}),w(a(r),{value:`display`,class:`px-6 py-1.5 rounded-full data-[state=active]:bg-white data-[state=active]:text-slate-900 data-[state=active]:shadow-sm transition-all duration-200`},{default:D(()=>[w(a(pe),{class:`w-4 h-4 mr-2`}),s[35]||=f(` Display `,-1)]),_:1}),w(a(r),{value:`workflow`,class:`px-6 py-1.5 rounded-full data-[state=active]:bg-white data-[state=active]:text-slate-900 data-[state=active]:shadow-sm transition-all duration-200`},{default:D(()=>[w(a(Fe),{class:`w-4 h-4 mr-2`}),s[36]||=f(` Workflow `,-1)]),_:1}),w(a(r),{value:`documentation`,class:`px-6 py-1.5 rounded-full data-[state=active]:bg-white data-[state=active]:text-slate-900 data-[state=active]:shadow-sm transition-all duration-200`},{default:D(()=>[w(a(M),{class:`w-4 h-4 mr-2`}),s[37]||=f(` Documentation `,-1)]),_:1})]),_:1})]),w(a(t),{value:`general`,class:`mt-6`},{default:D(()=>[w(a(G),{class:`p-6 bg-white/80`},{default:D(()=>[_(`div`,Xt,[_(`div`,Zt,[w(a(K),{for:`name`},{default:D(()=>[...s[38]||=[f(`DocType Name *`,-1)]]),_:1}),w(a(V),{id:`name`,modelValue:h.value.name,"onUpdate:modelValue":s[0]||=e=>h.value.name=e,placeholder:`e.g., Customer, Invoice`,class:`mt-1.5`,disabled:!i.isNew||R.value},null,8,[`modelValue`,`disabled`]),s[39]||=_(`p`,{class:`text-xs text-gray-500 mt-1`},`Unique identifier. Cannot be changed after creation.`,-1)]),_(`div`,Qt,[w(a(K),{for:`module`},{default:D(()=>[...s[40]||=[f(`Module *`,-1)]]),_:1}),w(a(J),{modelValue:h.value.module,"onUpdate:modelValue":s[1]||=e=>h.value.module=e,disabled:R.value},{default:D(()=>[w(a(X),{class:`mt-1.5 bg-white`},{default:D(()=>[w(a(Q),{placeholder:`Select module`})]),_:1}),w(a(Y),null,{default:D(()=>[(N(!0),c(v,null,k(Ge.value,e=>(N(),S(a(Z),{key:e.value,value:e.value},{default:D(()=>[f(b(e.label),1)]),_:2},1032,[`value`]))),128))]),_:1})]),_:1},8,[`modelValue`,`disabled`]),h.value.module===`System`&&i.isNew?(N(),c(`p`,$t,` Warning: DocTypes in the "System" module become immutable after creation. `)):B(``,!0)]),_(`div`,en,[w(a(K),{for:`description`},{default:D(()=>[...s[41]||=[f(`Description`,-1)]]),_:1}),w(a($e),{id:`description`,modelValue:h.value.description,"onUpdate:modelValue":s[2]||=e=>h.value.description=e,placeholder:`Brief description of this DocType`,class:`mt-1.5`,rows:`2`,disabled:R.value},null,8,[`modelValue`,`disabled`])]),_(`div`,null,[w(a(K),{for:`icon`},{default:D(()=>[...s[42]||=[f(`Icon`,-1)]]),_:1}),w(a(J),{modelValue:h.value.icon,"onUpdate:modelValue":s[3]||=e=>h.value.icon=e,disabled:R.value},{default:D(()=>[w(a(X),{class:`mt-1.5 bg-white`},{default:D(()=>[w(a(Q),{placeholder:`Select icon`},{default:D(()=>[h.value.icon?(N(),c(`div`,tn,[(N(),S(L(A[h.value.icon]),{class:`w-4 h-4`})),f(` `+b(h.value.icon),1)])):B(``,!0)]),_:1})]),_:1}),w(a(Y),{class:`max-h-60`},{default:D(()=>[(N(),c(v,null,k(Oe,e=>w(a(Z),{key:e,value:e},{default:D(()=>[_(`div`,nn,[(N(),S(L(A[e]),{class:`w-4 h-4`})),f(` `+b(e),1)])]),_:2},1032,[`value`])),64))]),_:1})]),_:1},8,[`modelValue`,`disabled`])]),_(`div`,null,[w(a(K),{for:`color`},{default:D(()=>[...s[43]||=[f(`Color`,-1)]]),_:1}),_(`div`,rn,[_e(_(`input`,{type:`color`,"onUpdate:modelValue":s[4]||=e=>h.value.color=e,class:`w-10 h-10 rounded border cursor-pointer`,disabled:R.value},null,8,an),[[y,h.value.color]]),w(a(V),{modelValue:h.value.color,"onUpdate:modelValue":s[5]||=e=>h.value.color=e,placeholder:`#3B82F6`,class:`flex-1`,disabled:R.value},null,8,[`modelValue`,`disabled`])])]),_(`div`,on,[w(a(K),{class:`text-base font-semibold`},{default:D(()=>[...s[44]||=[f(`Behavior`,-1)]]),_:1}),_(`div`,sn,[_(`div`,cn,[w(a(q),{id:`isChild`,checked:h.value.isChild,"onUpdate:checked":s[6]||=e=>h.value.isChild=e,disabled:R.value},null,8,[`checked`,`disabled`]),w(a(K),{for:`isChild`,class:`text-sm`},{default:D(()=>[...s[45]||=[f(`Child Table`,-1)]]),_:1})]),_(`div`,ln,[w(a(q),{id:`isSingle`,checked:h.value.isSingle,"onUpdate:checked":s[7]||=e=>h.value.isSingle=e,disabled:R.value},null,8,[`checked`,`disabled`]),w(a(K),{for:`isSingle`,class:`text-sm`},{default:D(()=>[...s[46]||=[f(`Single Record`,-1)]]),_:1})]),_(`div`,un,[w(a(q),{id:`trackChanges`,checked:h.value.trackChanges,"onUpdate:checked":s[8]||=e=>h.value.trackChanges=e,disabled:R.value},null,8,[`checked`,`disabled`]),w(a(K),{for:`trackChanges`,class:`text-sm`},{default:D(()=>[...s[47]||=[f(`Track Changes`,-1)]]),_:1})])])]),h.value.isChild?(N(),c(`div`,dn,[w(a(K),{for:`parentDocType`},{default:D(()=>[...s[48]||=[f(`Parent DocType *`,-1)]]),_:1}),w(a(J),{modelValue:h.value.parentDocType,"onUpdate:modelValue":s[9]||=e=>h.value.parentDocType=e,disabled:R.value},{default:D(()=>[w(a(X),{class:`mt-1.5 bg-white`},{default:D(()=>[w(a(Q),{placeholder:`Select parent DocType`})]),_:1}),w(a(Y),null,{default:D(()=>[(N(!0),c(v,null,k(he.value,e=>(N(),S(a(Z),{key:e,value:e},{default:D(()=>[f(b(e),1)]),_:2},1032,[`value`]))),128))]),_:1})]),_:1},8,[`modelValue`,`disabled`])])):B(``,!0)])]),_:1})]),_:1}),w(a(t),{value:`fields`,class:`mt-6`},{default:D(()=>[w(Lt,{modelValue:h.value.fields,"onUpdate:modelValue":s[10]||=e=>h.value.fields=e,availableDocTypes:he.value,disabled:R.value},null,8,[`modelValue`,`availableDocTypes`,`disabled`])]),_:1}),w(a(t),{value:`naming`,class:`mt-6`},{default:D(()=>[w(a(G),{class:`p-6 bg-white/80`},{default:D(()=>[_(`div`,fn,[_(`div`,pn,[w(a(q),{id:`hasId`,checked:h.value.hasId,"onUpdate:checked":s[11]||=e=>h.value.hasId=e,disabled:R.value},null,8,[`checked`,`disabled`]),w(a(K),{for:`hasId`},{default:D(()=>[...s[49]||=[f(`Generate Human-Readable ID`,-1)]]),_:1})]),h.value.hasId?(N(),c(`div`,mn,[_(`div`,null,[w(a(K),{for:`idPrefix`},{default:D(()=>[...s[50]||=[f(`ID Prefix`,-1)]]),_:1}),w(a(V),{id:`idPrefix`,modelValue:h.value.idPrefix,"onUpdate:modelValue":s[12]||=e=>h.value.idPrefix=e,placeholder:`e.g., INV-, CUST-`,class:`mt-1.5`,disabled:R.value},null,8,[`modelValue`,`disabled`])]),_(`div`,null,[w(a(K),{for:`idSuffix`},{default:D(()=>[...s[51]||=[f(`ID Suffix`,-1)]]),_:1}),w(a(V),{id:`idSuffix`,modelValue:h.value.idSuffix,"onUpdate:modelValue":s[13]||=e=>h.value.idSuffix=e,placeholder:`e.g., -2024`,class:`mt-1.5`,disabled:R.value},null,8,[`modelValue`,`disabled`])]),_(`div`,null,[w(a(K),{for:`idMinLength`},{default:D(()=>[...s[52]||=[f(`Padding Length`,-1)]]),_:1}),w(a(V),{id:`idMinLength`,modelValue:h.value.idMinLength,"onUpdate:modelValue":s[14]||=e=>h.value.idMinLength=e,modelModifiers:{number:!0},type:`number`,min:`0`,max:`20`,class:`mt-1.5`,disabled:R.value},null,8,[`modelValue`,`disabled`]),s[53]||=_(`p`,{class:`text-xs text-gray-500 mt-1`},`Zero-pad numbers to this length (e.g., 5 → 00001)`,-1)]),_(`div`,null,[w(a(K),{for:`idGenerationStrategy`},{default:D(()=>[...s[54]||=[f(`Generation Strategy`,-1)]]),_:1}),w(a(J),{modelValue:h.value.idGenerationStrategy,"onUpdate:modelValue":s[15]||=e=>h.value.idGenerationStrategy=e,disabled:R.value},{default:D(()=>[w(a(X),{class:`mt-1.5 bg-white`},{default:D(()=>[w(a(Q))]),_:1}),w(a(Y),null,{default:D(()=>[(N(!0),c(v,null,k(a(lt),e=>(N(),S(a(Z),{key:e.value,value:e.value},{default:D(()=>[f(b(e.label),1)]),_:2},1032,[`value`]))),128))]),_:1})]),_:1},8,[`modelValue`,`disabled`])]),_(`div`,hn,[w(a(K),{class:`text-sm text-gray-600`},{default:D(()=>[...s[55]||=[f(`Preview`,-1)]]),_:1}),_(`p`,gn,b(W.value),1)])])):B(``,!0)])]),_:1})]),_:1}),w(a(t),{value:`display`,class:`mt-6`},{default:D(()=>[w(a(G),{class:`p-6 bg-white/80`},{default:D(()=>[_(`div`,_n,[_(`div`,null,[w(a(K),{for:`titleField`},{default:D(()=>[...s[56]||=[f(`Title Field`,-1)]]),_:1}),w(a(J),{modelValue:h.value.titleField,"onUpdate:modelValue":s[16]||=e=>h.value.titleField=e,disabled:R.value},{default:D(()=>[w(a(X),{class:`mt-1.5 bg-white`},{default:D(()=>[w(a(Q),{placeholder:`Select field for title`})]),_:1}),w(a(Y),null,{default:D(()=>[w(a(Z),{value:`name`},{default:D(()=>[...s[57]||=[f(`name (default)`,-1)]]),_:1}),(N(!0),c(v,null,k(Ze.value,e=>(N(),S(a(Z),{key:e.fieldname,value:e.fieldname},{default:D(()=>[f(b(e.label)+` (`+b(e.fieldname)+`) `,1)]),_:2},1032,[`value`]))),128))]),_:1})]),_:1},8,[`modelValue`,`disabled`]),s[58]||=_(`p`,{class:`text-xs text-gray-500 mt-1`},`Field displayed as the document title`,-1)]),_(`div`,null,[w(a(K),{for:`searchFields`},{default:D(()=>[...s[59]||=[f(`Search Fields`,-1)]]),_:1}),w(a(V),{id:`searchFields`,modelValue:h.value.searchFields,"onUpdate:modelValue":s[17]||=e=>h.value.searchFields=e,placeholder:`e.g., name,email,phone`,class:`mt-1.5`,disabled:R.value},null,8,[`modelValue`,`disabled`]),s[60]||=_(`p`,{class:`text-xs text-gray-500 mt-1`},`Comma-separated field names for search`,-1)]),_(`div`,null,[w(a(K),{for:`sortField`},{default:D(()=>[...s[61]||=[f(`Default Sort Field`,-1)]]),_:1}),w(a(J),{modelValue:h.value.sortField,"onUpdate:modelValue":s[18]||=e=>h.value.sortField=e,disabled:R.value},{default:D(()=>[w(a(X),{class:`mt-1.5 bg-white`},{default:D(()=>[w(a(Q),{placeholder:`Select sort field`})]),_:1}),w(a(Y),null,{default:D(()=>[w(a(Z),{value:`created_at`},{default:D(()=>[...s[62]||=[f(`Created At`,-1)]]),_:1}),w(a(Z),{value:`updated_at`},{default:D(()=>[...s[63]||=[f(`Updated At`,-1)]]),_:1}),w(a(Z),{value:`name`},{default:D(()=>[...s[64]||=[f(`Name`,-1)]]),_:1}),(N(!0),c(v,null,k(Ze.value,e=>(N(),S(a(Z),{key:e.fieldname,value:e.fieldname},{default:D(()=>[f(b(e.label)+` (`+b(e.fieldname)+`) `,1)]),_:2},1032,[`value`]))),128))]),_:1})]),_:1},8,[`modelValue`,`disabled`])]),_(`div`,null,[w(a(K),{for:`sortOrder`},{default:D(()=>[...s[65]||=[f(`Sort Order`,-1)]]),_:1}),w(a(J),{modelValue:h.value.sortOrder,"onUpdate:modelValue":s[19]||=e=>h.value.sortOrder=e,disabled:R.value},{default:D(()=>[w(a(X),{class:`mt-1.5 bg-white`},{default:D(()=>[w(a(Q))]),_:1}),w(a(Y),null,{default:D(()=>[w(a(Z),{value:`DESC`},{default:D(()=>[...s[66]||=[f(`Descending (newest first)`,-1)]]),_:1}),w(a(Z),{value:`ASC`},{default:D(()=>[...s[67]||=[f(`Ascending (oldest first)`,-1)]]),_:1})]),_:1})]),_:1},8,[`modelValue`,`disabled`])])])]),_:1})]),_:1}),w(a(t),{value:`workflow`,class:`mt-6`},{default:D(()=>[w(a(G),{class:`p-6 bg-white/80`},{default:D(()=>[_(`div`,vn,[_(`div`,yn,[w(a(q),{id:`isSubmittable`,checked:h.value.isSubmittable,"onUpdate:checked":s[20]||=e=>h.value.isSubmittable=e,disabled:R.value},null,8,[`checked`,`disabled`]),w(a(K),{for:`isSubmittable`,class:`text-base`},{default:D(()=>[...s[68]||=[f(`Enable Submission Workflow`,-1)]]),_:1})]),s[73]||=_(`p`,{class:`text-sm text-gray-600`},` When enabled, documents follow a Draft → Submitted → Cancelled lifecycle. Submitted documents cannot be edited. `,-1),h.value.isSubmittable?(N(),c(`div`,bn,[_(`div`,xn,[s[72]||=_(`h4`,{class:`font-medium text-blue-900`},`Workflow States`,-1),_(`div`,Sn,[s[69]||=_(`span`,{class:`px-2 py-1 bg-gray-200 rounded`},`Draft (0)`,-1),w(a(Ee),{class:`w-4 h-4 text-gray-400`}),s[70]||=_(`span`,{class:`px-2 py-1 bg-green-200 rounded`},`Submitted (1)`,-1),w(a(Ee),{class:`w-4 h-4 text-gray-400`}),s[71]||=_(`span`,{class:`px-2 py-1 bg-red-200 rounded`},`Cancelled (2)`,-1)])])])):B(``,!0)])]),_:1})]),_:1}),w(a(t),{value:`documentation`,class:`mt-6`},{default:D(()=>[w(a(G),{class:`p-6 bg-white/80`},{default:D(()=>[_(`div`,Cn,[_(`div`,wn,[_(`button`,{onClick:s[21]||=e=>E.value=!1,class:j([`px-3 py-1.5 text-sm font-medium rounded-full transition-colors`,E.value?`bg-gray-100 text-gray-600 hover:bg-gray-200`:`bg-black text-white`])},` Edit `,2),_(`button`,{onClick:s[22]||=e=>E.value=!0,class:j([`px-3 py-1.5 text-sm font-medium rounded-full transition-colors`,E.value?`bg-black text-white`:`bg-gray-100 text-gray-600 hover:bg-gray-200`])},` Preview `,2)]),E.value?(N(),c(`div`,{key:1,class:`prose prose-sm max-w-none min-h-[400px] p-4 bg-gray-50 rounded-lg border`,innerHTML:O.value},null,8,En)):(N(),c(`div`,Tn,[w(a($e),{modelValue:h.value.documentation,"onUpdate:modelValue":s[23]||=e=>h.value.documentation=e,placeholder:`Write documentation in Markdown...`,class:`font-mono text-sm min-h-[400px]`,disabled:R.value},null,8,[`modelValue`,`disabled`]),s[74]||=_(`p`,{class:`text-xs text-gray-500 mt-2`},` Use Markdown formatting. Tables, code blocks, and links are supported. `,-1)]))])]),_:1})]),_:1})]),_:1},8,[`modelValue`])]))]),x.value?(N(),c(`div`,Dn,[_(`div`,On,[s[75]||=_(`span`,{class:`font-medium`},`JSON Preview`,-1),w(a(U),{variant:`ghost`,size:`sm`,onClick:st,class:`text-gray-300 hover:text-white`},{default:D(()=>[w(a(ke),{class:`w-4 h-4`})]),_:1})]),_(`pre`,kn,[_(`code`,null,b(et.value),1)])])):B(``,!0),C.value?(N(),c(`div`,An,[_(`div`,jn,[_(`div`,Mn,[w(a(M),{class:`w-4 h-4 text-gray-500`}),s[76]||=_(`span`,{class:`font-medium text-gray-900`},`Documentation`,-1)]),w(a(U),{variant:`ghost`,size:`sm`,onClick:s[25]||=e=>C.value=!1,class:`text-gray-400 hover:text-gray-600`},{default:D(()=>[w(a(He),{class:`w-4 h-4`})]),_:1})]),_(`div`,Nn,[h.value.documentation?(N(),c(`div`,{key:0,class:`prose prose-sm max-w-none`,innerHTML:O.value},null,8,Pn)):(N(),c(`div`,Fn,[w(a(M),{class:`w-12 h-12 mx-auto text-gray-300 mb-3`}),s[77]||=_(`p`,{class:`text-gray-500`},`No documentation yet`,-1),s[78]||=_(`p`,{class:`text-sm text-gray-400 mt-1`},`Add documentation in the Documentation tab`,-1)]))])])):B(``,!0)])]))}},Ln=O(In,[[`__scopeId`,`data-v-b330f6c3`]]);export{Ln as default};