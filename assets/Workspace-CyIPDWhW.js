const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/WelcomeView-CIR5s4mK.js","assets/index-BHNnQTTo.js","assets/index-CJsvxZRO.css","assets/PopperContent-D0ERvMe6.js","assets/useHideOthers-CleQw0cI.js","assets/ConfigProvider-BY88vHZH.js","assets/useFormControl-CjeW_yF1.js","assets/DialogPortal-CLYD3gNm.js","assets/Teleport-DEa0s0fE.js","assets/utils-CELcxEFJ.js","assets/useId-_W-wRvmL.js","assets/DialogTitle-5CqWEABE.js","assets/DropdownMenuTrigger-Dq-vNpER.js","assets/PopperAnchor-DwwbE5MK.js","assets/RovingFocusGroup-F71S5Xed.js","assets/utils-CbTsZDN1.js","assets/useDirection-ZgC7WO53.js","assets/useArrowNavigation-siWGBYoD.js","assets/useTypeahead-Djp42Xey.js","assets/DropdownMenuLabel-CrCa77ol.js","assets/DropdownMenuSeparator-DpvwA6Ec.js","assets/MenuSeparator-BXT43APX.js","assets/Label-PC3o1Jo3.js","assets/SelectViewport-Ekv9yKFk.js","assets/useNonce-DNy0wtrC.js","assets/nullish-CfjOSA4G.js","assets/badge-B7VAVpVs.js","assets/button-Db_hM3Yh.js","assets/DialogTitle-ByMcQXP9.js","assets/DialogFooter-AzM9hMkl.js","assets/Label-DAlslide.js","assets/SelectValue-CnsvlWUN.js","assets/WelcomeView-CM6Upqzf.css","assets/PointOfSaleView-CuBDvuoo.js","assets/ComboboxItem-BtsvEZMp.js","assets/ListboxItem-C3gY1pGN.js","assets/VisuallyHiddenInput-IXKLJ3Dv.js","assets/useKbd-BvGB3m10.js","assets/ComboboxGroup-DFukxMZX.js","assets/LinkField-DrizSBfH.js","assets/BottomSheet-hG7xnWEC.js","assets/BottomSheet-DoNskbDR.css","assets/badge-B8qxrXJg.js","assets/button-DHTtQedQ.js","assets/Card-CP12Kofe.js","assets/CardContent-DIOduLan.js","assets/CardTitle-DDV552DC.js","assets/Input-DzP8_N3r.js","assets/Label-C3kqb2rR.js","assets/PointOfSaleView-DNSBgt7c.css","assets/DocumentViewer-BgC1yPJW.js","assets/SpreadsheetEditor-BRs6EzJ8.js","assets/Input-B0vU3uIy.js","assets/ChartEditor-Btyx6O3N.js","assets/TextEditor-BBOuM7K6.js","assets/ImageViewer-CGunUxqA.js","assets/ReconciliationView-GdgVTly0.js","assets/ScrollArea-0MpKXKu0.js","assets/TaxReportTab-QGlJwh1D.js","assets/PopoverTrigger-DByAPHCO.js","assets/LiteEditor-CtxSg7DK.js","assets/WorkspaceStore-Mg88f_-M.js","assets/ArchiveView-B_q1RCab.js","assets/DocumentView-CJo-wUbN.js","assets/typeof-CVhf3tVy.js","assets/purify.es-C6pmr44S.js","assets/marked.esm-nzyc4KJ4.js","assets/sheet-C3Jdvhuo.js","assets/SelectGroup-6MMNc9K1.js","assets/DocForm-DWYuxNJ-.js","assets/DynamicIcon-Ed_8jPgr.js","assets/DateField-9loNe9gD.js","assets/DialogContent-BGaCU72q.js","assets/DialogTitle-DBB1pT4d.js","assets/DialogFooter-DJFCMNLh.js","assets/SelectValue-DxNBlF1-.js","assets/Textarea-C0hZLz9G.js","assets/viewRegistry-DR5G3kdv.js","assets/DocForm-DHiu27Dz.css","assets/DropdownMenuTrigger-ZXAnQvGl.js","assets/DropdownMenuSeparator-B2_2ccX9.js","assets/ContextMenu-DOTw90tL.js","assets/ApprovalInbox-9sxiKNpo.js","assets/DocList-TFqsFh-e.js","assets/DocForm-D0ujR-x1.js"])))=>i.map(i=>d[i]);
import"./useFormControl-CjeW_yF1.js";import"./ListboxItem-C3gY1pGN.js";import"./useNonce-DNy0wtrC.js";import"./nullish-CfjOSA4G.js";import"./CheckboxIndicator-C4nBJkgl.js";import"./useArrowNavigation-siWGBYoD.js";import"./ConfigProvider-BY88vHZH.js";import"./useHideOthers-CleQw0cI.js";import"./useDirection-ZgC7WO53.js";import"./PopperAnchor-DwwbE5MK.js";import"./useId-_W-wRvmL.js";import"./useKbd-BvGB3m10.js";import"./PopperContent-D0ERvMe6.js";import"./useTypeahead-Djp42Xey.js";import"./DialogPortal-CLYD3gNm.js";import"./Teleport-DEa0s0fE.js";import"./utils-CELcxEFJ.js";import"./DialogTitle-5CqWEABE.js";import"./AvatarImage-Bd5ouu_K.js";import"./utils-CbTsZDN1.js";import"./RovingFocusGroup-F71S5Xed.js";import"./RovingFocusItem-AkC9zDaz.js";import"./VisuallyHiddenInput-IXKLJ3Dv.js";import"./ComboboxAnchor-CdZRRl_w.js";import"./command-QFypo0he.js";import"./ComboboxItem-BtsvEZMp.js";import"./DropdownMenuTrigger-Dq-vNpER.js";import"./ScrollArea-0MpKXKu0.js";import"./SwitchThumb-CJ3J2im8.js";import{$i as e,$t as t,Bi as n,C as r,Dt as i,Fa as a,Fi as o,Fn as s,Hi as c,Hn as l,J as u,Ji as d,Ki as f,La as ee,Li as p,Ni as te,Oa as m,P as ne,Pa as h,Pi as re,Ra as g,Sn as ie,Ui as _,Vi as v,Wi as y,Xn as ae,Xt as oe,Yn as se,Z as ce,Zn as le,_t as b,aa as x,ar as ue,b as de,ba as S,ca as C,cn as fe,da as w,en as pe,er as me,ft as he,ha as T,hn as ge,ht as _e,i as ve,ia as E,mn as ye,n as be,oa as D,pn as O,qi as k,r as xe,sa as Se,t as A,tr as Ce,tt as we,un as j,ur as Te,xa as Ee}from"./index-BHNnQTTo.js";import"./DialogContent-BGaCU72q.js";import"./DialogTitle-DBB1pT4d.js";import"./DialogFooter-DJFCMNLh.js";import"./button-DHTtQedQ.js";import{t as M}from"./WorkspaceStore-Mg88f_-M.js";import"./Input-DzP8_N3r.js";import"./DropdownMenuTrigger-ZXAnQvGl.js";import{n as N}from"./button-Db_hM3Yh.js";import{t as De}from"./BottomSheet-hG7xnWEC.js";import{a as Oe,i as ke,n as Ae,r as je,t as Me}from"./DialogTitle-ByMcQXP9.js";import{t as P}from"./DialogFooter-AzM9hMkl.js";import{t as Ne}from"./Input-B0vU3uIy.js";import{t as F}from"./viewRegistry-DR5G3kdv.js";import"./BackgroundAnimation-yErgC6Q9.js";import"./FlowVault-C96tJyd-.js";import"./Checkbox-BBhqjjGt.js";import"./BankAccountService-BtbSgNyl.js";import{t as I}from"./AccountAssistant-1r2TlSel.js";import"./Textarea-CILua7Xr.js";import"./badge-B7VAVpVs.js";var Pe={class:`flex flex-col h-full relative`},Fe={class:`flex items-center bg-white border-b border-slate-100 overflow-x-auto no-scrollbar`},Ie=[`onClick`,`onDragstart`,`onDragover`,`onDrop`,`onContextmenu`],Le={class:`text-slate-400`},Re=[`onClick`,`onDragstart`,`onDragover`,`onDrop`,`onContextmenu`],ze={class:`max-w-32 truncate`},Be={key:1,class:`h-2 w-2 rounded-full bg-blue-500`},Ve={class:`flex-1 overflow-hidden`},He={key:14,class:`flex items-center justify-center h-full text-slate-400`},Ue={class:`text-center`},We={class:`py-4`},L={__name:`WorkspacePanel`,props:{account:Object,openTabs:Array,activeTabId:String},emits:[`tab-change`,`tab-close`,`tab-reorder`,`new-tab`,`open-applications`],setup(u,{emit:ae}){let x=M(),{pinTab:T,unpinTab:ve,createGroup:E,addToGroup:be,removeFromGroup:xe,pinGroup:I,unpinGroup:L,renameGroup:R,toggleGroupCollapsed:z,deleteGroup:B}=x;n(()=>x.sortedTabs);let V=n(()=>x.tabGroups),Ge=n(()=>x.groupColorMap),Ke=d(()=>A(()=>import(`./WelcomeView-CIR5s4mK.js`),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32]))),qe=d(()=>A(()=>import(`./PointOfSaleView-CuBDvuoo.js`),__vite__mapDeps([33,1,2,3,4,5,6,34,35,15,36,16,10,37,18,38,22,39,40,41,42,43,44,45,46,47,48,49]))),H=d(()=>A(()=>import(`./DocumentViewer-BgC1yPJW.js`),__vite__mapDeps([50,1,2,27]))),Je=d(()=>A(()=>import(`./SpreadsheetEditor-BRs6EzJ8.js`),__vite__mapDeps([51,1,2,27,52]))),Ye=d(()=>A(()=>import(`./ChartEditor-Btyx6O3N.js`),__vite__mapDeps([53,1,2]))),Xe=d(()=>A(()=>import(`./TextEditor-BBOuM7K6.js`),__vite__mapDeps([54,1,2,27]))),Ze=d(()=>A(()=>import(`./ImageViewer-CGunUxqA.js`),__vite__mapDeps([55,1,2,27]))),Qe=d(()=>A(()=>import(`./ReconciliationView-GdgVTly0.js`),__vite__mapDeps([56,1,2,5,57,24,16,26,27]))),$e=d(()=>A(()=>import(`./TaxReportTab-QGlJwh1D.js`),__vite__mapDeps([58,1,2,3,59,4,5,8,13,16,10,37,27,22,42,43,44,48]))),et=d(()=>A(()=>import(`./LiteEditor-CtxSg7DK.js`),__vite__mapDeps([60,1,2,61]))),tt=d(()=>A(()=>import(`./ArchiveView-B_q1RCab.js`),__vite__mapDeps([62,1,2,61]))),nt=d(()=>A(()=>import(`./DocumentView-CJo-wUbN.js`),__vite__mapDeps([63,1,2,64,3,59,4,5,8,13,16,10,37,27,65,66,6,34,35,15,36,18,38,7,9,11,67,12,14,17,20,21,22,23,24,25,68,69,70,71,43,39,40,41,42,72,73,74,47,48,75,76,77,61,78,79,80]))),rt=d(()=>A(()=>import(`./ContextMenu-DOTw90tL.js`),__vite__mapDeps([81,1,2]))),it=d(()=>A(()=>import(`./ApprovalInbox-9sxiKNpo.js`),__vite__mapDeps([82,1,2,61]))),at=d(()=>A(()=>import(`./DocList-TFqsFh-e.js`),__vite__mapDeps([83,1,2,3,59,4,5,8,13,16,10,37,27,6,7,9,11,12,14,15,17,18,21,23,24,25,71,43,72,73,74,79,47,75,77,61]))),ot=d(()=>A(()=>import(`./DocForm-D0ujR-x1.js`),__vite__mapDeps([84,3,1,2,59,4,5,8,13,16,10,37,27,65,66,6,34,35,15,36,18,38,7,9,11,67,22,23,24,25,68,69,70,71,43,39,40,41,42,72,73,74,47,48,75,76,77,61,78]))),U=u,W=ae,st=e(`openTab`),G=m({show:!1,x:0,y:0,target:null}),K=m({show:!1,tabId:null,tabTitle:``}),q=m({open:!1,doctype:null,name:null,isNew:!1,onSave:null}),J=m({show:!1,mode:`create`,tabId:null,groupId:null,name:``}),Y=m({activeId:null,activeType:null,overId:null,position:null});function ct(e,t=`new`,n=null){q.value={open:!0,doctype:e,name:t,isNew:t===`new`,onSave:n}}function lt(e){if(q.value.open=!1,q.value.onSave)q.value.onSave(e);else if(e&&e.doctype&&e.name){let t=e.doctype;st({id:`doctype-${t}-${e.name}`,type:`doctype-form`,title:`${t}: ${e.name}`,doctype:t,docName:e.name,isNew:!1,data:null})}}Se(`openDocSheet`,ct);let ut=e=>{let t=F(e,`list`);return t?d(t):at},dt=e=>{let t=F(e,`form`);return t?d(t):ot},ft=e=>{let t=F(e,`view`);return t?d(t):nt};function pt(e){return Ge.value.get(e)||`#6366f1`}let X=m({show:!1,x:0,y:0,target:null}),mt=n(()=>{let e=G.value.target;if(!e)return[];let t=[];return e.pinned?t.push({label:`Unpin`,action:`unpin`,icon:b}):t.push({label:`Pin`,action:`pin`,icon:b}),e.groupId?t.push({label:`Remove from Group`,action:`ungroup`}):(t.push({label:`Create New Group...`,action:`create-group`}),V.value.length>0&&(t.push({type:`separator`}),V.value.forEach(e=>{t.push({label:`Add to ${e.name}`,action:`add-to-group:${e.id}`,color:e.color})}))),t.push({type:`separator`}),t.push({label:`Close to the Right`,action:`close-right`}),t.push({label:`Close Others`,action:`close-others`}),t.push({label:`Close All`,action:`close-all`}),e.closable!==!1&&t.push({label:`Close`,action:`close`}),t}),ht=n(()=>{let e=X.value.target;return e?[{label:`Rename Group...`,action:`rename-group`},e.pinned?{label:`Unpin Group`,action:`unpin-group`,icon:b}:{label:`Pin Group`,action:`pin-group`,icon:b},{type:`separator`},{label:`Delete Group`,action:`delete-group`,variant:`destructive`}]:[]}),Z={flow:pe,document:O,spreadsheet:ye,chart:Ce,text:O,image:t,reconciliation:fe,invoice:he,"tax-report":O,doctype:O,"doctype-form":O,"doctype-view":ie,"lite-editor":O,archive:j,Package:i,Box:Te,Users:r,FileText:O,Landmark:oe,Folder:j,Settings:we,BarChart:me,HelpCircle:l,Receipt:he,Edit:O,Archive:j,Eye:ie,Calculator:ue,Cog:s,ShoppingBag:ce,TrendingUp:ne};function gt(e){return e.icon&&Z[e.icon]?Z[e.icon]:Z[e.type]||O}function Q(e){return e.doctype?e.doctype:e.id&&e.id.startsWith(`doctype-`)?e.id.replace(`doctype-`,``).split(`-`).map(e=>e.charAt(0).toUpperCase()+e.slice(1)).join(` `):e.title}function _t(e){e.unsaved?K.value={show:!0,tabId:e.id,tabTitle:e.title}:W(`tab-close`,e.id)}function vt(){W(`tab-close`,K.value.tabId),K.value.show=!1}function yt(){W(`tab-close`,K.value.tabId),K.value.show=!1}function bt(e,t){let n=`doctype-${Q(e).toLowerCase().replace(/\s+/g,`-`)}`;W(`tab-close`,e.id),U.openTabs.find(e=>e.id===n)&&W(`tab-change`,n)}function $(e){let t=U.openTabs.find(t=>t.id===e);t&&(t.unsaved=!0)}function xt(e,t){G.value={show:!0,x:e.clientX,y:e.clientY,target:t}}function St(e,t){X.value={show:!0,x:e.clientX,y:e.clientY,target:t}}function Ct(e){let t=G.value.target;if(G.value.show=!1,t){if(e.startsWith(`add-to-group:`)){let n=e.split(`:`)[1];be(t.id,n);return}switch(e){case`pin`:T(t.id);break;case`unpin`:ve(t.id);break;case`create-group`:J.value={show:!0,mode:`create`,tabId:t.id,groupId:null,name:``};break;case`ungroup`:xe(t.id);break;case`close`:t.closable!==!1&&_t(t);break;case`close-others`:U.openTabs.filter(e=>e.id!==t.id&&e.closable!==!1).forEach(e=>W(`tab-close`,e.id));break;case`close-all`:U.openTabs.filter(e=>e.closable!==!1).forEach(e=>W(`tab-close`,e.id));break;case`close-right`:{let e=U.openTabs.findIndex(e=>e.id===t.id);U.openTabs.slice(e+1).filter(e=>e.closable!==!1).forEach(e=>W(`tab-close`,e.id));break}}}}function wt(e){let t=X.value.target;if(X.value.show=!1,t)switch(e){case`rename-group`:J.value={show:!0,mode:`rename`,tabId:null,groupId:t.groupId,name:t.name};break;case`pin-group`:I(t.groupId);break;case`unpin-group`:L(t.groupId);break;case`delete-group`:B(t.groupId);break}}function Tt(){J.value.name.trim()&&(J.value.mode===`create`?E(J.value.name,[J.value.tabId]):J.value.mode===`rename`&&R(J.value.groupId,J.value.name),J.value.show=!1)}function Et(e,t){Y.value.activeId=t.id,Y.value.activeType=t.type===`group-header`?`group`:`tab`,e.dataTransfer.effectAllowed=`move`,e.dataTransfer.setData(`text/plain`,t.id),setTimeout(()=>{},0)}function Dt(e,t){if(Y.value.activeId===t.id)return;let n=e.currentTarget.getBoundingClientRect(),r=e.clientX-n.left,i=n.width,a=r<i/2?`before`:`inside`;t.type===`group-header`&&(a=r<i/2?`before`:`after`),Y.value.activeType===`group`&&a===`inside`&&(a=`after`),Y.value.overId=t.id,Y.value.position=a}function Ot(e){let t=e.relatedTarget;!t||e.currentTarget.contains(t)}function kt(){Y.value.activeId=null,Y.value.activeType=null,Y.value.overId=null,Y.value.position=null}function At(e,t){e.preventDefault();let n=Y.value.activeId,r=t.id,i=Y.value.position;if(Y.value.activeId=null,Y.value.activeType=null,Y.value.overId=null,Y.value.position=null,!(!n||n===r))if(n.startsWith(`group-header-`)){let e=n.replace(`group-header-`,``);x.moveGroup(e,r,i)}else x.moveTab(n,r,i)}return(e,t)=>(D(),y(`div`,Pe,[v(`div`,Fe,[(D(!0),y(p,null,C(h(x).sortedTabs,n=>(D(),y(p,{key:n.id},[n.type===`group-header`?(D(),y(`div`,{key:0,draggable:`true`,class:a([`flex items-center gap-1 px-2 py-2 border-r cursor-pointer text-sm font-medium text-slate-600 bg-slate-50 hover:bg-slate-100 transition-all z-10 select-none relative`,Y.value.activeId&&Y.value.overId===n.id&&Y.value.position===`before`?`border-l-[3px] border-l-blue-600`:``,Y.value.activeId&&Y.value.overId===n.id&&Y.value.position===`after`?`border-r-[3px] border-r-blue-600`:``,Y.value.activeId===n.id?`opacity-30`:``]),style:ee({borderBottomColor:n.color,borderBottomWidth:`2px`}),onClick:e=>h(z)(n.groupId),onDragstart:e=>Et(e,n),onDragend:kt,onDragover:o(e=>Dt(e,n),[`prevent`]),onDragleave:t[0]||=e=>Ot(e),onDrop:e=>At(e,n),onContextmenu:o(e=>St(e,n),[`prevent`])},[(D(),c(w(n.collapsed?h(se):h(le)),{class:`h-3 w-3 text-slate-400`})),n.pinned?(D(),c(h(b),{key:0,class:`h-3 w-3 text-blue-500 fill-blue-500 -rotate-45`})):_(``,!0),v(`span`,null,g(n.name),1),v(`span`,Le,`(`+g(n.tabCount)+`)`,1)],46,Ie)):(D(),y(`div`,{key:1,draggable:`true`,class:a([`group flex items-center gap-2 px-3 py-2 border-r border-slate-100 cursor-pointer text-sm transition-all min-w-max z-10 select-none relative text-slate-600`,u.activeTabId===n.id?`bg-stone-50 shadow-sm`:`bg-white hover:bg-slate-50`,Y.value.activeId&&Y.value.overId===n.id&&Y.value.position===`before`?`border-l-[3px] border-l-blue-600`:``,Y.value.activeId&&Y.value.overId===n.id&&Y.value.position===`inside`?`bg-blue-50 shadow-[inset_0_-3px_0_0_#2563eb]`:``,Y.value.activeId===n.id?`opacity-30`:``]),style:ee(n.groupId?{borderBottomColor:pt(n.groupId),borderBottomWidth:`2px`}:{}),onClick:t=>e.$emit(`tab-change`,n.id),onDragstart:e=>Et(e,n),onDragend:kt,onDragover:o(e=>Dt(e,n),[`prevent`]),onDragleave:t[1]||=e=>Ot(e),onDrop:e=>At(e,n),onContextmenu:o(e=>xt(e,n),[`prevent`])},[n.pinned&&!n.groupId?(D(),c(h(b),{key:0,class:`h-2.5 w-2.5 text-blue-500 fill-blue-500 -rotate-45`})):_(``,!0),(D(),c(w(gt(n)),{class:`h-3.5 w-3.5`})),v(`span`,ze,g(n.title),1),n.unsaved?(D(),y(`div`,Be)):_(``,!0),n.closable===!1?_(``,!0):(D(),c(h(N),{key:2,variant:`ghost`,size:`sm`,class:`h-5 w-5 p-0 opacity-0 group-hover:opacity-100 hover:bg-slate-200 rounded-sm`,onClick:o(e=>_t(n),[`stop`])},{default:S(()=>[k(h(de),{class:`h-3 w-3`})]),_:1},8,[`onClick`]))],46,Re))],64))),128)),k(h(N),{variant:`ghost`,size:`sm`,class:`h-8 w-8 p-0 ml-1 sticky right-0 bg-white shrink-0`,onClick:t[2]||=t=>e.$emit(`open-applications`)},{default:S(()=>[k(h(_e),{class:`h-4 w-4`})]),_:1})]),v(`div`,Ve,[(D(!0),y(p,null,C(u.openTabs,e=>Ee((D(),y(`div`,{key:e.id,class:`h-full`},[e.type===`flow`?(D(),c(h(Ke),{key:0,account:u.account},null,8,[`account`])):e.type===`doctype`?(D(),c(w(ut(Q(e))),{key:1,doctype:Q(e)},null,8,[`doctype`])):e.type===`doctype-form`?(D(),c(w(dt(Q(e))),{key:2,doctype:Q(e),name:e.docName,isNew:e.isNew,onSaved:t=>bt(e,t)},null,40,[`doctype`,`name`,`isNew`,`onSaved`])):e.type===`doctype-view`?(D(),c(w(ft(Q(e))),{key:3,doctype:Q(e),name:e.docName,initialMode:e.initialMode},null,8,[`doctype`,`name`,`initialMode`])):e.type===`document`?(D(),c(h(H),{key:4,document:e.data},null,8,[`document`])):e.type===`spreadsheet`?(D(),c(h(Je),{key:5,document:e.data,onChange:t=>$(e.id)},null,8,[`document`,`onChange`])):e.type===`chart`?(D(),c(h(Ye),{key:6,document:e.data,onChange:t=>$(e.id)},null,8,[`document`,`onChange`])):e.type===`text`?(D(),c(h(Xe),{key:7,document:e.data,onChange:t=>$(e.id)},null,8,[`document`,`onChange`])):e.type===`image`?(D(),c(h(Ze),{key:8,document:e.data},null,8,[`document`])):e.type===`reconciliation`?(D(),c(h(Qe),{key:9,sessionReference:e.data?.reference,account:u.account},null,8,[`sessionReference`,`account`])):e.type===`tax-report`?(D(),c(h($e),{key:10,account:u.account},null,8,[`account`])):e.type===`lite-editor`?(D(),c(h(et),{key:11,doctype:Q(e),name:e.docName},null,8,[`doctype`,`name`])):e.type===`archive`?(D(),c(h(tt),{key:12,doctype:Q(e),name:e.docName},null,8,[`doctype`,`name`])):e.type===`approvals`?(D(),c(h(it),{key:13})):(D(),y(`div`,He,[v(`div`,Ue,[k(h(ge),{class:`h-12 w-12 mx-auto mb-4 opacity-50`}),v(`p`,null,`Unknown tab type: `+g(e.type),1)])]))],512)),[[te,u.activeTabId===e.id]])),128))]),G.value.show?(D(),c(h(rt),{key:0,x:G.value.x,y:G.value.y,items:mt.value,onClose:t[3]||=e=>G.value.show=!1,onSelect:Ct},null,8,[`x`,`y`,`items`])):_(``,!0),X.value.show?(D(),c(h(rt),{key:1,x:X.value.x,y:X.value.y,items:ht.value,onClose:t[4]||=e=>X.value.show=!1,onSelect:wt},null,8,[`x`,`y`,`items`])):_(``,!0),k(h(Oe),{open:J.value.show,"onUpdate:open":t[7]||=e=>J.value.show=e},{default:S(()=>[k(h(ke),{class:`sm:max-w-md`},{default:S(()=>[k(h(Ae),null,{default:S(()=>[k(h(Me),null,{default:S(()=>[f(g(J.value.mode===`create`?`Create Group`:`Rename Group`),1)]),_:1}),k(h(je),null,{default:S(()=>[f(g(J.value.mode===`create`?`Enter a name for the new tab group.`:`Enter a new name for the group.`),1)]),_:1})]),_:1}),v(`div`,We,[k(h(Ne),{modelValue:J.value.name,"onUpdate:modelValue":t[5]||=e=>J.value.name=e,placeholder:`Group name...`,onKeyup:re(Tt,[`enter`])},null,8,[`modelValue`])]),k(h(P),null,{default:S(()=>[k(h(N),{variant:`ghost`,onClick:t[6]||=e=>J.value.show=!1},{default:S(()=>[...t[11]||=[f(`Cancel`,-1)]]),_:1}),k(h(N),{disabled:!J.value.name.trim(),onClick:Tt},{default:S(()=>[f(g(J.value.mode===`create`?`Create`:`Save`),1)]),_:1},8,[`disabled`])]),_:1})]),_:1})]),_:1},8,[`open`]),k(h(Oe),{open:K.value.show,"onUpdate:open":t[9]||=e=>K.value.show=e},{default:S(()=>[k(h(ke),{class:`sm:max-w-md`},{default:S(()=>[k(h(Ae),null,{default:S(()=>[k(h(Me),null,{default:S(()=>[...t[12]||=[f(`Unsaved Changes`,-1)]]),_:1}),k(h(je),null,{default:S(()=>[f(` "`+g(K.value.tabTitle)+`" has unsaved changes. Do you want to save before closing? `,1)]),_:1})]),_:1}),k(h(P),{class:`flex gap-2 sm:justify-end`},{default:S(()=>[k(h(N),{variant:`outline`,onClick:yt},{default:S(()=>[...t[13]||=[f(` Don't Save `,-1)]]),_:1}),k(h(N),{variant:`ghost`,onClick:t[8]||=e=>K.value.show=!1},{default:S(()=>[...t[14]||=[f(` Cancel `,-1)]]),_:1}),k(h(N),{onClick:vt},{default:S(()=>[...t[15]||=[f(` Save `,-1)]]),_:1})]),_:1})]),_:1})]),_:1},8,[`open`]),k(De,{modelValue:q.value.open,"onUpdate:modelValue":t[10]||=e=>q.value.open=e,"initial-height":100},{default:S(()=>[q.value.open?(D(),y(p,{key:0},[q.value.doctype===`Sale`?(D(),c(h(qe),{key:0,onSaved:lt})):(D(),c(h(ot),{key:1,doctype:q.value.doctype,name:q.value.name,isNew:q.value.isNew,onSaved:lt},null,8,[`doctype`,`name`,`isNew`]))],64)):_(``,!0)]),_:1},8,[`modelValue`])]))}},R=ve(L,[[`__scopeId`,`data-v-121905ac`]]),z={class:`relative border-t-2 border-white flex h-full w-full overflow-hidden`},B={class:`flex-1 flex flex-col bg-stone-50 min-w-0`},V={class:`p-2 border-b border-slate-100 flex items-center justify-between`},Ge={key:0,class:`text-xs font-semibold text-slate-500 uppercase tracking-wider`},Ke={key:1,class:`flex flex-col items-center py-2`},qe={__name:`FlowWorkspace`,props:{account:Object},emits:[`close`,`account-change`,`open-applications`],setup(e,{emit:t}){let r=e,i=M(),o=m(!0),s=m(null),l=n(()=>({tab:i.openTabs.find(e=>e.id===i.activeTabId),account:r.account}));return Se(`openTab`,i.openTab),(t,n)=>(D(),y(`div`,z,[v(`div`,B,[k(R,{ref_key:`workspaceRef`,ref:s,account:e.account,"open-tabs":h(i).openTabs,"active-tab-id":h(i).activeTabId,onTabChange:n[0]||=e=>h(i).setActiveTab(e),onTabClose:n[1]||=e=>h(i).closeTab(e),onTabReorder:n[2]||=e=>h(i).reorderTabs(e),onOpenApplications:n[3]||=e=>t.$emit(`open-applications`)},null,8,[`account`,`open-tabs`,`active-tab-id`])]),v(`div`,{class:a([`hidden border-l border-slate-100 bg-white transition-all duration-300 flex-col`,o.value?`w-12`:`w-96`])},[v(`div`,V,[k(h(N),{variant:`ghost`,size:`sm`,class:`h-6 w-6 p-0`,onClick:n[4]||=e=>o.value=!o.value},{default:S(()=>[o.value?(D(),c(h(ae),{key:0,class:`h-4 w-4`})):(D(),c(h(se),{key:1,class:`h-4 w-4`}))]),_:1}),o.value?_(``,!0):(D(),y(`span`,Ge,` Flow Assistant `))]),o.value?(D(),y(`div`,Ke,[k(h(N),{variant:`ghost`,size:`sm`,class:`h-8 w-8 p-0`,title:`Open Assistant`,onClick:n[5]||=e=>o.value=!1},{default:S(()=>[k(h(u),{class:`h-4 w-4 text-blue-500`})]),_:1})])):(D(),c(I,{key:0,account:e.account,context:l.value,class:`flex-1 overflow-hidden`},null,8,[`account`,`context`]))],2)]))}},H={class:`h-full bg-white`},Je={__name:`Workspace`,setup(t){let r=be(),i=xe(),a=M(),o=e(`openApplications`,()=>{}),s=m(!1);E(()=>{let e=window.location.hash.slice(1);e&&e!==a.activeTabId&&a.openTabs.some(t=>t.id===e)&&a.setActiveTab(e,{skipHistory:!0}),window.addEventListener(`popstate`,c)}),x(()=>{window.removeEventListener(`popstate`,c)});function c(){let e=window.location.hash.slice(1);r.path===`/workspace`&&(s.value=!0,e&&e!==a.activeTabId?a.openTabs.some(t=>t.id===e)&&a.setActiveTab(e,{skipHistory:!0}):e||a.setActiveTab(`flow`,{skipHistory:!0}),setTimeout(()=>{s.value=!1},50))}T(()=>r.hash,(e,t)=>{if(s.value)return;let n=e?.slice(1);n&&n!==a.activeTabId&&a.openTabs.some(e=>e.id===n)&&a.setActiveTab(n,{skipHistory:!0})}),T(()=>a.activeTabId,(e,t)=>{if(s.value)return;let n=window.location.hash.slice(1);e&&e!==n&&i.push({path:`/workspace`,hash:`#${e}`})});let l=n(()=>null);return(e,t)=>(D(),y(`div`,H,[k(qe,{account:l.value,onClose:t[0]||=e=>h(i).push(`/`),onAccountChange:()=>{},onOpenApplications:h(o)},null,8,[`account`,`onOpenApplications`])]))}};export{Je as default};