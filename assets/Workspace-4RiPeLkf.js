const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/WelcomeView-DgCnzkH9.js","assets/index-CHNvwQRL.js","assets/index-DPj_2cLE.css","assets/PopperContent-b6gGwF_E.js","assets/useHideOthers-L15EfXxs.js","assets/ConfigProvider-Ckl6KgMj.js","assets/useFormControl-Dnp3iC5X.js","assets/DialogPortal-Dl-6IrmI.js","assets/Teleport-BJpx-KiC.js","assets/utils-BpsHH13c.js","assets/useId-Da-MS2me.js","assets/DialogTitle-aue_-Krx.js","assets/DropdownMenuTrigger-BH9p6Bti.js","assets/PopperAnchor-Sq61S0mP.js","assets/RovingFocusGroup-BhwVgyO_.js","assets/utils-BFR0tnUV.js","assets/useDirection-B1kSZwKq.js","assets/useArrowNavigation-siWGBYoD.js","assets/useTypeahead---iVCXRs.js","assets/DropdownMenuLabel-KcuU36aY.js","assets/DropdownMenuSeparator-3oAyQvzW.js","assets/MenuSeparator-FLBLb_HD.js","assets/Label-BsQm4x39.js","assets/SelectViewport-BHDGvtQj.js","assets/useNonce-CnEoXn07.js","assets/nullish-CfjOSA4G.js","assets/badge-VpN0zBGl.js","assets/button-DSlecn3R.js","assets/DialogTitle-BK5ecu1H.js","assets/DialogFooter-CuLepmCa.js","assets/Label--GHB7iKy.js","assets/SelectValue-C8x3HZX3.js","assets/WelcomeView-D4vKaSKo.css","assets/DocumentViewer-lP0XmGvL.js","assets/SpreadsheetEditor-2sNYjL1R.js","assets/Input-C1gBbhGk.js","assets/ChartEditor-DJTl1-0B.js","assets/TextEditor-CC8r8hwM.js","assets/ImageViewer-BIhYMwct.js","assets/ReconciliationView-neWaAK6g.js","assets/ScrollArea-DIt3oQvI.js","assets/TaxReportTab-Dcxp0ENk.js","assets/PopoverTrigger-Bg99LXGu.js","assets/useKbd-BvGB3m10.js","assets/badge-BQsIJJpl.js","assets/button-BRhnnMH3.js","assets/Card-BJPZ_LNY.js","assets/Label-q_qRHf8-.js","assets/LiteEditor-B1xNkK68.js","assets/WorkspaceStore-Djee2ZJb.js","assets/ArchiveView-CVXx2KyX.js","assets/DocumentView-DXw8nSb_.js","assets/purify.es-CrZVVHqb.js","assets/ComboboxItem-BqMucZ-W.js","assets/ListboxItem-Bfe5qZhm.js","assets/VisuallyHiddenInput-B3HVdvGc.js","assets/ComboboxGroup-BeaaVWt-.js","assets/sheet-NRY9vGcQ.js","assets/SelectGroup-DgFFtqHX.js","assets/DocForm-COdYPNei.js","assets/DynamicIcon-xdE1DWwJ.js","assets/LinkField-rhGWIhbd.js","assets/BottomSheet-BHwNzRxP.js","assets/BottomSheet-C0veGV1Z.css","assets/Input-i1kcrjFD.js","assets/SelectValue-DyPaSYfc.js","assets/viewRegistry-CEBXSj_v.js","assets/DocForm-CbIFi6iC.css","assets/DialogContent-BczLmPtx.js","assets/DialogTitle-Dz9VmaLr.js","assets/DialogFooter-DcKhuorP.js","assets/DropdownMenuTrigger-DB_AyFT1.js","assets/DropdownMenuSeparator-COnwGw4L.js","assets/Textarea-BWn0Ir5g.js","assets/ContextMenu-DRQOKZgl.js","assets/ApprovalInbox-BOGp0Dse.js","assets/DocList-CUq8GWRG.js","assets/DocForm-Dhi8y-9j.js"])))=>i.map(i=>d[i]);
import"./useFormControl-Dnp3iC5X.js";import"./ListboxItem-Bfe5qZhm.js";import"./useNonce-CnEoXn07.js";import"./ConfigProvider-Ckl6KgMj.js";import"./useHideOthers-L15EfXxs.js";import"./useDirection-B1kSZwKq.js";import"./useId-Da-MS2me.js";import"./useKbd-BvGB3m10.js";import"./useTypeahead---iVCXRs.js";import"./DialogPortal-Dl-6IrmI.js";import"./Teleport-BJpx-KiC.js";import"./utils-BpsHH13c.js";import"./DialogTitle-aue_-Krx.js";import"./AvatarImage-BjURjWLm.js";import"./utils-BFR0tnUV.js";import"./VisuallyHiddenInput-B3HVdvGc.js";import"./command-DyR1LHVy.js";import"./ScrollArea-DIt3oQvI.js";import"./SwitchThumb-cSX5w37U.js";import{$ as e,$i as t,Ea as n,Ei as r,Fi as i,Fn as a,G as o,Gt as s,Hn as c,Jn as ee,Kt as te,Li as l,Mi as u,Ni as d,Oa as ne,Oi as f,Pi as p,Qi as re,Qt as ie,Ri as m,St as ae,Ta as h,Ti as oe,Un as se,Ut as ce,Wi as le,Wn as ue,Xi as g,Yi as _,Zi as v,ct as y,da as b,dt as de,en as x,fa as fe,ft as S,i as pe,in as me,ji as C,ka as w,n as he,na as T,oa as E,on as ge,pn as _e,qn as ve,r as ye,rn as D,rr as be,t as O,w as xe,wi as Se,x as Ce,ya as k,zi as A}from"./index-CHNvwQRL.js";import{t as j}from"./WorkspaceStore-Djee2ZJb.js";import{n as M}from"./button-DSlecn3R.js";import{t as we}from"./BottomSheet-BHwNzRxP.js";import{a as Te,i as Ee,n as De,r as Oe,t as N}from"./DialogTitle-BK5ecu1H.js";import{t as P}from"./DialogFooter-CuLepmCa.js";import{t as ke}from"./Input-C1gBbhGk.js";import{t as F}from"./viewRegistry-CEBXSj_v.js";import{t as I}from"./AccountAssistant-0Bj8o9vx.js";import"./Textarea-cnn7tihP.js";import"./badge-VpN0zBGl.js";var Ae={class:`flex flex-col h-full relative`},je={class:`flex items-center bg-white border-b border-slate-100 overflow-x-auto no-scrollbar`},Me=[`onClick`,`onDragstart`,`onDragover`,`onDrop`,`onContextmenu`],Ne={class:`text-slate-400`},Pe=[`onClick`,`onDragstart`,`onDragover`,`onDrop`,`onContextmenu`],Fe={class:`max-w-32 truncate`},Ie={key:1,class:`h-2 w-2 rounded-full bg-blue-500`},Le={class:`flex-1 overflow-hidden`},Re={key:14,class:`flex items-center justify-center h-full text-slate-400`},ze={class:`text-center`},Be={class:`py-4`},L={__name:`WorkspacePanel`,props:{account:Object,openTabs:Array,activeTabId:String},emits:[`tab-change`,`tab-close`,`tab-reorder`,`new-tab`,`open-applications`],setup(o,{emit:se}){let g=j(),{pinTab:_,unpinTab:pe,createGroup:he,addToGroup:E,removeFromGroup:ye,pinGroup:I,unpinGroup:L,renameGroup:R,toggleGroupCollapsed:z,deleteGroup:B}=g;C(()=>g.sortedTabs);let V=C(()=>g.tabGroups),Ve=C(()=>g.groupColorMap),H=A(()=>O(()=>import(`./WelcomeView-DgCnzkH9.js`),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32]))),He=A(()=>O(()=>import(`./DocumentViewer-lP0XmGvL.js`),__vite__mapDeps([33,1,2,27]))),Ue=A(()=>O(()=>import(`./SpreadsheetEditor-2sNYjL1R.js`),__vite__mapDeps([34,1,2,27,35]))),We=A(()=>O(()=>import(`./ChartEditor-DJTl1-0B.js`),__vite__mapDeps([36,1,2]))),Ge=A(()=>O(()=>import(`./TextEditor-CC8r8hwM.js`),__vite__mapDeps([37,1,2,27]))),Ke=A(()=>O(()=>import(`./ImageViewer-BIhYMwct.js`),__vite__mapDeps([38,1,2,27]))),qe=A(()=>O(()=>import(`./ReconciliationView-neWaAK6g.js`),__vite__mapDeps([39,1,2,5,40,24,16,26,27]))),Je=A(()=>O(()=>import(`./TaxReportTab-Dcxp0ENk.js`),__vite__mapDeps([41,1,2,3,42,4,5,8,13,16,10,43,27,22,44,45,46,47]))),Ye=A(()=>O(()=>import(`./LiteEditor-B1xNkK68.js`),__vite__mapDeps([48,1,2,49]))),Xe=A(()=>O(()=>import(`./ArchiveView-CVXx2KyX.js`),__vite__mapDeps([50,1,2,49]))),Ze=A(()=>O(()=>import(`./DocumentView-DXw8nSb_.js`),__vite__mapDeps([51,1,2,3,4,5,52,6,53,54,15,55,16,10,43,18,56,7,8,9,11,57,12,13,14,17,20,21,22,23,24,25,58,59,60,61,62,63,64,65,66,49,67,45,68,69,70,71,72,47,73]))),Qe=A(()=>O(()=>import(`./ContextMenu-DRQOKZgl.js`),__vite__mapDeps([74,1,2]))),$e=A(()=>O(()=>import(`./ApprovalInbox-BOGp0Dse.js`),__vite__mapDeps([75,1,2,49]))),et=A(()=>O(()=>import(`./DocList-CUq8GWRG.js`),__vite__mapDeps([76,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,21,23,24,25,68,69,70,71,64,65,66,49]))),tt=A(()=>O(()=>import(`./DocForm-Dhi8y-9j.js`),__vite__mapDeps([77,3,1,2,4,5,52,6,53,54,15,55,16,10,43,18,56,7,8,9,11,57,13,23,24,25,58,59,60,61,62,63,64,65,66,49,67]))),U=o,W=se;le(`openTab`);let G=k({show:!1,x:0,y:0,target:null}),K=k({show:!1,tabId:null,tabTitle:``}),q=k({open:!1,doctype:null,name:null,isNew:!1,onSave:null}),J=k({show:!1,mode:`create`,tabId:null,groupId:null,name:``}),Y=k({activeId:null,activeType:null,overId:null,position:null});function nt(e,t=`new`,n=null){q.value={open:!0,doctype:e,name:t,isNew:t===`new`,onSave:n}}function rt(e){q.value.open=!1,q.value.onSave&&q.value.onSave(e)}re(`openDocSheet`,nt);let it=e=>{let t=F(e,`list`);return t?A(t):et},at=e=>{let t=F(e,`form`);return t?A(t):tt},ot=e=>{let t=F(e,`view`);return t?A(t):Ze};function st(e){return Ve.value.get(e)||`#6366f1`}let X=k({show:!1,x:0,y:0,target:null}),ct=C(()=>{let e=G.value.target;if(!e)return[];let t=[];return e.pinned?t.push({label:`Unpin`,action:`unpin`,icon:S}):t.push({label:`Pin`,action:`pin`,icon:S}),e.groupId?t.push({label:`Remove from Group`,action:`ungroup`}):(t.push({label:`Create New Group...`,action:`create-group`}),V.value.length>0&&(t.push({type:`separator`}),V.value.forEach(e=>{t.push({label:`Add to ${e.name}`,action:`add-to-group:${e.id}`,color:e.color})}))),t.push({type:`separator`}),t.push({label:`Close to the Right`,action:`close-right`}),t.push({label:`Close Others`,action:`close-others`}),t.push({label:`Close All`,action:`close-all`}),e.closable!==!1&&t.push({label:`Close`,action:`close`}),t}),lt=C(()=>{let e=X.value.target;return e?[{label:`Rename Group...`,action:`rename-group`},e.pinned?{label:`Unpin Group`,action:`unpin-group`,icon:S}:{label:`Pin Group`,action:`pin-group`,icon:S},{type:`separator`},{label:`Delete Group`,action:`delete-group`,variant:`destructive`}]:[]}),Z={flow:te,document:D,spreadsheet:me,chart:ee,text:D,image:s,reconciliation:ie,invoice:y,"tax-report":D,doctype:D,"doctype-form":D,"doctype-view":_e,"lite-editor":D,archive:x,Package:ae,Box:be,Users:xe,FileText:D,Landmark:ce,Folder:x,Settings:e,BarChart:ve,HelpCircle:a,Receipt:y,Edit:D,Archive:x,Eye:_e};function ut(e){return e.icon&&Z[e.icon]?Z[e.icon]:Z[e.type]||D}function Q(e){return e.doctype?e.doctype:e.id&&e.id.startsWith(`doctype-`)?e.id.replace(`doctype-`,``).split(`-`).map(e=>e.charAt(0).toUpperCase()+e.slice(1)).join(` `):e.title}function dt(e){e.unsaved?K.value={show:!0,tabId:e.id,tabTitle:e.title}:W(`tab-close`,e.id)}function ft(){W(`tab-close`,K.value.tabId),K.value.show=!1}function pt(){W(`tab-close`,K.value.tabId),K.value.show=!1}function mt(e,t){let n=`doctype-${Q(e).toLowerCase().replace(/\s+/g,`-`)}`;W(`tab-close`,e.id),U.openTabs.find(e=>e.id===n)&&W(`tab-change`,n)}function $(e){let t=U.openTabs.find(t=>t.id===e);t&&(t.unsaved=!0)}function ht(e,t){G.value={show:!0,x:e.clientX,y:e.clientY,target:t}}function gt(e,t){X.value={show:!0,x:e.clientX,y:e.clientY,target:t}}function _t(e){let t=G.value.target;if(G.value.show=!1,t){if(e.startsWith(`add-to-group:`)){let n=e.split(`:`)[1];E(t.id,n);return}switch(e){case`pin`:_(t.id);break;case`unpin`:pe(t.id);break;case`create-group`:J.value={show:!0,mode:`create`,tabId:t.id,groupId:null,name:``};break;case`ungroup`:ye(t.id);break;case`close`:t.closable!==!1&&dt(t);break;case`close-others`:U.openTabs.filter(e=>e.id!==t.id&&e.closable!==!1).forEach(e=>W(`tab-close`,e.id));break;case`close-all`:U.openTabs.filter(e=>e.closable!==!1).forEach(e=>W(`tab-close`,e.id));break;case`close-right`:{let e=U.openTabs.findIndex(e=>e.id===t.id);U.openTabs.slice(e+1).filter(e=>e.closable!==!1).forEach(e=>W(`tab-close`,e.id));break}}}}function vt(e){let t=X.value.target;if(X.value.show=!1,t)switch(e){case`rename-group`:J.value={show:!0,mode:`rename`,tabId:null,groupId:t.groupId,name:t.name};break;case`pin-group`:I(t.groupId);break;case`unpin-group`:L(t.groupId);break;case`delete-group`:B(t.groupId);break}}function yt(){J.value.name.trim()&&(J.value.mode===`create`?he(J.value.name,[J.value.tabId]):J.value.mode===`rename`&&R(J.value.groupId,J.value.name),J.value.show=!1)}function bt(e,t){Y.value.activeId=t.id,Y.value.activeType=t.type===`group-header`?`group`:`tab`,e.dataTransfer.effectAllowed=`move`,e.dataTransfer.setData(`text/plain`,t.id),setTimeout(()=>{},0)}function xt(e,t){if(Y.value.activeId===t.id)return;let n=e.currentTarget.getBoundingClientRect(),r=e.clientX-n.left,i=n.width,a=r<i/2?`before`:`inside`;t.type===`group-header`&&(a=r<i/2?`before`:`after`),Y.value.activeType===`group`&&a===`inside`&&(a=`after`),Y.value.overId=t.id,Y.value.position=a}function St(e){let t=e.relatedTarget;!t||e.currentTarget.contains(t)}function Ct(){Y.value.activeId=null,Y.value.activeType=null,Y.value.overId=null,Y.value.position=null}function wt(e,t){e.preventDefault();let n=Y.value.activeId,r=t.id,i=Y.value.position;if(Y.value.activeId=null,Y.value.activeType=null,Y.value.overId=null,Y.value.position=null,!(!n||n===r))if(n.startsWith(`group-header-`)){let e=n.replace(`group-header-`,``);g.moveGroup(e,r,i)}else g.moveTab(n,r,i)}return(e,a)=>(v(),i(`div`,Ae,[u(`div`,je,[(v(!0),i(f,null,t(h(g).sortedTabs,t=>(v(),i(f,{key:t.id},[t.type===`group-header`?(v(),i(`div`,{key:0,draggable:`true`,class:n([`flex items-center gap-1 px-2 py-2 border-r cursor-pointer text-sm font-medium text-slate-600 bg-slate-50 hover:bg-slate-100 transition-all z-10 select-none relative`,Y.value.activeId&&Y.value.overId===t.id&&Y.value.position===`before`?`border-l-[3px] border-l-blue-600`:``,Y.value.activeId&&Y.value.overId===t.id&&Y.value.position===`after`?`border-r-[3px] border-r-blue-600`:``,Y.value.activeId===t.id?`opacity-30`:``]),style:ne({borderBottomColor:t.color,borderBottomWidth:`2px`}),onClick:e=>h(z)(t.groupId),onDragstart:e=>bt(e,t),onDragend:Ct,onDragover:r(e=>xt(e,t),[`prevent`]),onDragleave:a[0]||=e=>St(e),onDrop:e=>wt(e,t),onContextmenu:r(e=>gt(e,t),[`prevent`])},[(v(),d(T(t.collapsed?h(c):h(ue)),{class:`h-3 w-3 text-slate-400`})),t.pinned?(v(),d(h(S),{key:0,class:`h-3 w-3 text-blue-500 fill-blue-500 -rotate-45`})):p(``,!0),u(`span`,null,w(t.name),1),u(`span`,Ne,`(`+w(t.tabCount)+`)`,1)],46,Me)):(v(),i(`div`,{key:1,draggable:`true`,class:n([`group flex items-center gap-2 px-3 py-2 border-r border-slate-100 cursor-pointer text-sm transition-all min-w-max z-10 select-none relative text-slate-600`,o.activeTabId===t.id?`bg-stone-50 shadow-sm`:`bg-white hover:bg-slate-50`,Y.value.activeId&&Y.value.overId===t.id&&Y.value.position===`before`?`border-l-[3px] border-l-blue-600`:``,Y.value.activeId&&Y.value.overId===t.id&&Y.value.position===`inside`?`bg-blue-50 shadow-[inset_0_-3px_0_0_#2563eb]`:``,Y.value.activeId===t.id?`opacity-30`:``]),style:ne(t.groupId?{borderBottomColor:st(t.groupId),borderBottomWidth:`2px`}:{}),onClick:n=>e.$emit(`tab-change`,t.id),onDragstart:e=>bt(e,t),onDragend:Ct,onDragover:r(e=>xt(e,t),[`prevent`]),onDragleave:a[1]||=e=>St(e),onDrop:e=>wt(e,t),onContextmenu:r(e=>ht(e,t),[`prevent`])},[t.pinned&&!t.groupId?(v(),d(h(S),{key:0,class:`h-2.5 w-2.5 text-blue-500 fill-blue-500 -rotate-45`})):p(``,!0),(v(),d(T(ut(t)),{class:`h-3.5 w-3.5`})),u(`span`,Fe,w(t.title),1),t.unsaved?(v(),i(`div`,Ie)):p(``,!0),t.closable===!1?p(``,!0):(v(),d(h(M),{key:2,variant:`ghost`,size:`sm`,class:`h-5 w-5 p-0 opacity-0 group-hover:opacity-100 hover:bg-slate-200 rounded-sm`,onClick:r(e=>dt(t),[`stop`])},{default:b(()=>[m(h(Ce),{class:`h-3 w-3`})]),_:1},8,[`onClick`]))],46,Pe))],64))),128)),m(h(M),{variant:`ghost`,size:`sm`,class:`h-8 w-8 p-0 ml-1 sticky right-0 bg-white shrink-0`,onClick:a[2]||=t=>e.$emit(`open-applications`)},{default:b(()=>[m(h(de),{class:`h-4 w-4`})]),_:1})]),u(`div`,Le,[(v(!0),i(f,null,t(o.openTabs,e=>fe((v(),i(`div`,{key:e.id,class:`h-full`},[e.type===`flow`?(v(),d(h(H),{key:0,account:o.account},null,8,[`account`])):e.type===`doctype`?(v(),d(T(it(Q(e))),{key:1,doctype:Q(e)},null,8,[`doctype`])):e.type===`doctype-form`?(v(),d(T(at(Q(e))),{key:2,doctype:Q(e),name:e.docName,isNew:e.isNew,onSaved:t=>mt(e,t)},null,40,[`doctype`,`name`,`isNew`,`onSaved`])):e.type===`doctype-view`?(v(),d(T(ot(Q(e))),{key:3,doctype:Q(e),name:e.docName,initialMode:e.initialMode},null,8,[`doctype`,`name`,`initialMode`])):e.type===`document`?(v(),d(h(He),{key:4,document:e.data},null,8,[`document`])):e.type===`spreadsheet`?(v(),d(h(Ue),{key:5,document:e.data,onChange:t=>$(e.id)},null,8,[`document`,`onChange`])):e.type===`chart`?(v(),d(h(We),{key:6,document:e.data,onChange:t=>$(e.id)},null,8,[`document`,`onChange`])):e.type===`text`?(v(),d(h(Ge),{key:7,document:e.data,onChange:t=>$(e.id)},null,8,[`document`,`onChange`])):e.type===`image`?(v(),d(h(Ke),{key:8,document:e.data},null,8,[`document`])):e.type===`reconciliation`?(v(),d(h(qe),{key:9,sessionReference:e.data?.reference,account:o.account},null,8,[`sessionReference`,`account`])):e.type===`tax-report`?(v(),d(h(Je),{key:10,account:o.account},null,8,[`account`])):e.type===`lite-editor`?(v(),d(h(Ye),{key:11,doctype:Q(e),name:e.docName},null,8,[`doctype`,`name`])):e.type===`archive`?(v(),d(h(Xe),{key:12,doctype:Q(e),name:e.docName},null,8,[`doctype`,`name`])):e.type===`approvals`?(v(),d(h($e),{key:13})):(v(),i(`div`,Re,[u(`div`,ze,[m(h(ge),{class:`h-12 w-12 mx-auto mb-4 opacity-50`}),u(`p`,null,`Unknown tab type: `+w(e.type),1)])]))],512)),[[Se,o.activeTabId===e.id]])),128))]),G.value.show?(v(),d(h(Qe),{key:0,x:G.value.x,y:G.value.y,items:ct.value,onClose:a[3]||=e=>G.value.show=!1,onSelect:_t},null,8,[`x`,`y`,`items`])):p(``,!0),X.value.show?(v(),d(h(Qe),{key:1,x:X.value.x,y:X.value.y,items:lt.value,onClose:a[4]||=e=>X.value.show=!1,onSelect:vt},null,8,[`x`,`y`,`items`])):p(``,!0),m(h(Te),{open:J.value.show,"onUpdate:open":a[7]||=e=>J.value.show=e},{default:b(()=>[m(h(Ee),{class:`sm:max-w-md`},{default:b(()=>[m(h(De),null,{default:b(()=>[m(h(N),null,{default:b(()=>[l(w(J.value.mode===`create`?`Create Group`:`Rename Group`),1)]),_:1}),m(h(Oe),null,{default:b(()=>[l(w(J.value.mode===`create`?`Enter a name for the new tab group.`:`Enter a new name for the group.`),1)]),_:1})]),_:1}),u(`div`,Be,[m(h(ke),{modelValue:J.value.name,"onUpdate:modelValue":a[5]||=e=>J.value.name=e,placeholder:`Group name...`,onKeyup:oe(yt,[`enter`])},null,8,[`modelValue`])]),m(h(P),null,{default:b(()=>[m(h(M),{variant:`ghost`,onClick:a[6]||=e=>J.value.show=!1},{default:b(()=>[...a[11]||=[l(`Cancel`,-1)]]),_:1}),m(h(M),{disabled:!J.value.name.trim(),onClick:yt},{default:b(()=>[l(w(J.value.mode===`create`?`Create`:`Save`),1)]),_:1},8,[`disabled`])]),_:1})]),_:1})]),_:1},8,[`open`]),m(h(Te),{open:K.value.show,"onUpdate:open":a[9]||=e=>K.value.show=e},{default:b(()=>[m(h(Ee),{class:`sm:max-w-md`},{default:b(()=>[m(h(De),null,{default:b(()=>[m(h(N),null,{default:b(()=>[...a[12]||=[l(`Unsaved Changes`,-1)]]),_:1}),m(h(Oe),null,{default:b(()=>[l(` "`+w(K.value.tabTitle)+`" has unsaved changes. Do you want to save before closing? `,1)]),_:1})]),_:1}),m(h(P),{class:`flex gap-2 sm:justify-end`},{default:b(()=>[m(h(M),{variant:`outline`,onClick:pt},{default:b(()=>[...a[13]||=[l(` Don't Save `,-1)]]),_:1}),m(h(M),{variant:`ghost`,onClick:a[8]||=e=>K.value.show=!1},{default:b(()=>[...a[14]||=[l(` Cancel `,-1)]]),_:1}),m(h(M),{onClick:ft},{default:b(()=>[...a[15]||=[l(` Save `,-1)]]),_:1})]),_:1})]),_:1})]),_:1},8,[`open`]),m(we,{modelValue:q.value.open,"onUpdate:modelValue":a[10]||=e=>q.value.open=e,"initial-height":100},{default:b(()=>[q.value.open?(v(),d(h(tt),{key:0,doctype:q.value.doctype,name:q.value.name,isNew:q.value.isNew,onSaved:rt},null,8,[`doctype`,`name`,`isNew`])):p(``,!0)]),_:1},8,[`modelValue`])]))}},R=pe(L,[[`__scopeId`,`data-v-6fd36473`]]),z={class:`relative border-t-2 border-white flex h-full w-full overflow-hidden`},B={class:`flex-1 flex flex-col bg-stone-50 min-w-0`},V={class:`p-2 border-b border-slate-100 flex items-center justify-between`},Ve={key:0,class:`text-xs font-semibold text-slate-500 uppercase tracking-wider`},H={key:1,class:`flex flex-col items-center py-2`},He={__name:`FlowWorkspace`,props:{account:Object},emits:[`close`,`account-change`,`open-applications`],setup(e,{emit:t}){let r=e,a=j(),s=k(!0),ee=k(null),te=C(()=>({tab:a.openTabs.find(e=>e.id===a.activeTabId),account:r.account}));return re(`openTab`,a.openTab),(t,r)=>(v(),i(`div`,z,[u(`div`,B,[m(R,{ref_key:`workspaceRef`,ref:ee,account:e.account,"open-tabs":h(a).openTabs,"active-tab-id":h(a).activeTabId,onTabChange:r[0]||=e=>h(a).setActiveTab(e),onTabClose:r[1]||=e=>h(a).closeTab(e),onTabReorder:r[2]||=e=>h(a).reorderTabs(e),onOpenApplications:r[3]||=e=>t.$emit(`open-applications`)},null,8,[`account`,`open-tabs`,`active-tab-id`])]),u(`div`,{class:n([`hidden border-l border-slate-100 bg-white transition-all duration-300 flex-col`,s.value?`w-12`:`w-96`])},[u(`div`,V,[m(h(M),{variant:`ghost`,size:`sm`,class:`h-6 w-6 p-0`,onClick:r[4]||=e=>s.value=!s.value},{default:b(()=>[s.value?(v(),d(h(se),{key:0,class:`h-4 w-4`})):(v(),d(h(c),{key:1,class:`h-4 w-4`}))]),_:1}),s.value?p(``,!0):(v(),i(`span`,Ve,` Flow Assistant `))]),s.value?(v(),i(`div`,H,[m(h(M),{variant:`ghost`,size:`sm`,class:`h-8 w-8 p-0`,title:`Open Assistant`,onClick:r[5]||=e=>s.value=!1},{default:b(()=>[m(h(o),{class:`h-4 w-4 text-blue-500`})]),_:1})])):(v(),d(I,{key:0,account:e.account,context:te.value,class:`flex-1 overflow-hidden`},null,8,[`account`,`context`]))],2)]))}},Ue={class:`h-full bg-white`},We={__name:`Workspace`,setup(e){let t=he(),n=ye(),r=j(),a=le(`openApplications`,()=>{}),o=k(!1);_(()=>{let e=window.location.hash.slice(1);e&&e!==r.activeTabId&&r.openTabs.some(t=>t.id===e)&&r.setActiveTab(e,{skipHistory:!0}),window.addEventListener(`popstate`,s)}),g(()=>{window.removeEventListener(`popstate`,s)});function s(){let e=window.location.hash.slice(1);t.path===`/workspace`&&(o.value=!0,e&&e!==r.activeTabId?r.openTabs.some(t=>t.id===e)&&r.setActiveTab(e,{skipHistory:!0}):e||r.setActiveTab(`flow`,{skipHistory:!0}),setTimeout(()=>{o.value=!1},50))}E(()=>t.hash,(e,t)=>{if(o.value)return;let n=e?.slice(1);n&&n!==r.activeTabId&&r.openTabs.some(e=>e.id===n)&&r.setActiveTab(n,{skipHistory:!0})}),E(()=>r.activeTabId,(e,t)=>{if(o.value)return;let r=window.location.hash.slice(1);e&&e!==r&&n.push({path:`/workspace`,hash:`#${e}`})});let c=C(()=>null);return(e,t)=>(v(),i(`div`,Ue,[m(He,{account:c.value,onClose:t[0]||=e=>h(n).push(`/`),onAccountChange:()=>{},onOpenApplications:h(a)},null,8,[`account`,`onOpenApplications`])]))}};export{We as default};