import"./useFormControl-DNz7k4w5.js";import"./useNonce-Zz8BWqvg.js";import"./nullish-CfjOSA4G.js";import"./ConfigProvider-CX3z9H2g.js";import"./useHideOthers-BMVpLdiv.js";import"./useDirection-CVICsvLJ.js";import"./PopperAnchor-BDMp0DVx.js";import"./useId-D49Isxay.js";import"./PopperContent-CYLydaJo.js";import"./useTypeahead-DQhWDs5L.js";import"./Teleport-nEgZhyc-.js";import"./utils-Bv7ngM-A.js";import"./utils-BngY0H0a.js";import"./RovingFocusGroup-BE-sAXeo.js";import"./RovingFocusItem-D4Wm4PW9.js";import"./SelectViewport-VrHoVk6u.js";import{t as e}from"./SelectGroup-mRhUQAYm.js";import{a as t,i as n,n as r,t as i}from"./tabs-DXLCNaQ8.js";import{Ai as a,At as o,Di as s,E as ee,Et as te,Fn as ne,Ft as re,Gi as c,Hn as l,Ni as u,Oi as d,Pi as f,Sa as p,T as ie,Ta as m,Wn as ae,Yi as h,ha as g,i as _,ji as v,ki as y,mr as oe,n as se,na as ce,o as b,qi as x,r as le,sa as S,ur as ue,wa as de,wi as C,xa as w,zn as T}from"./index-DUz5oLRf.js";import{t as fe}from"./OrganisationService-BkMvBsm_.js";import"./button-Cr-p9NtE.js";import{t as E}from"./Card-CW6msO3e.js";import{a as D,i as O,n as k,r as A,t as j}from"./SelectValue-B-w7Avnt.js";import{t as M}from"./BankAccountService-DmpXTXmQ.js";import{t as N}from"./TransactionService-DJU2tSY2.js";var P=`/org/logs`,F={getLogs(e){return b.get(P,{query:e,organisationAware:!0,authorizeRequest:!0})}},I={class:`rounded-sm`},L={class:`container mx-auto py-5 relative`},R={class:`flex justify-center`},z={class:`flex flex-col md:flex-row gap-8 space-y-6`},B={class:`flex-1`},V={class:`flex flex-col gap-8`},pe={class:`block md:hidden mb-6`},me={class:`min-h-[220px] flex items-center justify-center text-slate-500`},he={class:`flex flex-col md:flex-row gap-4 w-full px-0`},ge={class:`grid grid-cols-1 sm:grid-cols-2 gap-4 w-full`},_e={class:`md:min-w-[375px]`},ve={class:`flex items-center justify-between`},ye={class:`text-right`},be={class:`rounded-full size-10 text-xs bg-blue-300 text-white flex items-center justify-center`},xe={class:`space-y-10`},Se={class:`flex-1 cursor-pointer`},Ce={class:`flex items-center justify-between`},we={class:`font-medium text-slate-700`},Te={class:`text-sm text-slate-500`},Ee={class:`pt-1`},De={key:0,class:`rounded-full w-6 h-6 bg-blue-500 text-white flex items-center justify-center`},Oe={key:1,class:`rounded-full w-6 h-6 bg-slate-200 text-slate-500 flex items-center justify-center`},ke={class:`space-y-4`},Ae={key:0,class:`flex items-end gap-1 h-32`},je=[`title`],Me={key:1,class:`h-32 flex items-center justify-center text-slate-400`},Ne={key:0,class:`flex justify-center py-8`},H={key:1,class:`text-center py-8`},Pe={key:2,class:`space-y-3`},Fe={class:`flex items-center gap-3`},Ie={class:`font-medium text-slate-700 line-clamp-1`},Le={class:`text-sm text-slate-500`},Re={class:`space-y-6`},ze={key:0,class:`flex justify-center py-8`},Be={key:1,class:`text-center py-8`},Ve={key:2,class:`relative`},He={class:`space-y-4`},Ue={class:`bg-slate-50 rounded-lg p-4`},We={class:`flex items-start justify-between`},Ge={class:`font-medium text-slate-700`},Ke={class:`text-sm text-slate-500 mt-1`},qe={class:`inline-flex items-center gap-1`},Je={class:`text-xs text-slate-400`},Ye={key:0,class:`mt-2`},Xe={class:`inline-flex items-center px-2 py-0.5 rounded-full text-xs bg-slate-200 text-slate-600`},U=_({__name:`Overview`,setup(_){let b=le();se();let P=g(`overview`),U=g({}),W=g([]),G=g(!1),K=g([]),q=g(!1),J=g([]),Y=g([]),X=g([{key:`team`,title:`Add team members`,description:`Invite collaborators`,done:!1,action:`team`},{key:`connect`,title:`Connect accounts`,description:`Link banking or accounting`,done:!1,action:`connect`},{key:`jurisdiction`,title:`Set jurisdiction`,description:`Confirm tax jurisdiction`,done:!1,action:`jurisdiction`},{key:`reporting`,title:`Generate report`,description:`Confirm reporting preferences`,done:!1,action:`reporting`}]),Ze=s(()=>W.value.slice(0,20));function Qe(e){if(W.value.length===0)return 0;let t=Math.max(...W.value.map(e=>Math.abs(e.amount)));return t===0?0:Math.abs(e)/t*100}function Z(e){return new Intl.NumberFormat(`en-NG`,{style:`currency`,currency:`NGN`,minimumFractionDigits:0,maximumFractionDigits:0}).format(e)}function Q(e){return e?new Date(e).toLocaleDateString(`en-GB`,{day:`numeric`,month:`short`,year:`numeric`}):``}function $e(e){if(!e)return``;let t=new Date(e),n=new Date-t,r=Math.floor(n/6e4),i=Math.floor(n/36e5),a=Math.floor(n/864e5);return r<1?`Just now`:r<60?`${r}m ago`:i<24?`${i}h ago`:a<7?`${a}d ago`:Q(e)}async function et(){G.value=!0;try{let e=await N.getTransactions({size:20,page:0});W.value=e?.content||e||[]}catch(e){console.error(`Failed to load transactions:`,e),W.value=[]}finally{G.value=!1}}async function tt(){q.value=!0;try{let e=await F.getLogs({size:20,page:0});K.value=e?.content||e||[]}catch(e){console.error(`Failed to load logs:`,e),K.value=[]}finally{q.value=!1}}ce(P,e=>{e===`transactions`&&W.value.length===0&&et(),e===`activity`&&K.value.length===0&&tt()}),c(async()=>{let[e,t]=await Promise.all([fe.getMembers().catch(()=>[]),M.getBankAccounts().catch(()=>[])]);J.value=e||[],Y.value=t||[],nt()});function nt(){X.value=X.value.map(e=>{switch(e.key){case`team`:return{...e,done:J.value.length>1};case`connect`:return{...e,done:Y.value.length>0};case`jurisdiction`:return{...e,done:!!U.value?.jurisdiction};case`reporting`:return{...e,done:!!(U.value?.name&&U.value?.industry)};default:return e}})}let rt=s(()=>{let e=X.value.length,t=X.value.filter(e=>e.done).length;return Math.round(t/e*100)});function $(e){switch(e){case`team`:b.push(`/team`);break;case`accounts`:b.push(`/accounts`);break;case`jurisdiction`:b.push(`/jurisdiction`);break;case`settings`:case`edit`:b.push(`/settings/profile`);break;default:b.push(`/`)}}return(s,c)=>(x(),v(`div`,I,[d(`div`,L,[d(`div`,R,[f(w(E),{class:`w-full p-8 shadow-none border-none bg-transparent rounded-2xl min-h-[80vh]`},{default:S(()=>[d(`div`,z,[d(`div`,B,[c[30]||=d(`div`,{class:`flex flex-col sm:flex-row sm:justify-between w-full`},[d(`div`,null,[d(`h1`,{class:`text-2xl font-bold text-slate-800`},`Organisation Overview`),d(`p`,{class:`text-sm text-slate-600`},`Quick actions and charts for your workspace`)])],-1),d(`div`,V,[d(`div`,pe,[f(w(D),{modelValue:P.value,"onUpdate:modelValue":c[0]||=e=>P.value=e},{default:S(()=>[f(w(k),{class:`w-full border rounded-xl py-2 px-3 text-sm`},{default:S(()=>[f(w(j),{placeholder:`Select section`})]),_:1}),f(w(O),null,{default:S(()=>[f(w(e),null,{default:S(()=>[f(w(A),{value:`overview`},{default:S(()=>[...c[6]||=[u(`Overview`,-1)]]),_:1}),f(w(A),{value:`transactions`},{default:S(()=>[...c[7]||=[u(`Transactions`,-1)]]),_:1}),f(w(A),{value:`activity`},{default:S(()=>[...c[8]||=[u(`Activity`,-1)]]),_:1})]),_:1})]),_:1})]),_:1},8,[`modelValue`])]),f(w(t),{modelValue:P.value,"onUpdate:modelValue":c[5]||=e=>P.value=e,"default-value":`overview`,class:`mb-6 grid`},{default:S(()=>[c[28]||=d(`hr`,{class:`h-1 bg-slate-50 mt-10 mb-1 opacity-20`},null,-1),f(w(r),{class:`rounded-full bg-stone-100 text-blue-950 px-0.5 py-0.5 w-fit`},{default:S(()=>[f(w(i),{value:`overview`,class:`px-4 py-1 rounded-full data-[state=active]:bg-stone-50 data-[state=active]:text-blue-950`},{default:S(()=>[...c[9]||=[u(` Start `,-1)]]),_:1}),f(w(i),{value:`transactions`,class:`px-4 py-1 rounded-full data-[state=active]:bg-stone-50 data-[state=active]:text-blue-950`},{default:S(()=>[...c[10]||=[u(` Overview `,-1)]]),_:1}),f(w(i),{value:`activity`,class:`px-4 py-1 rounded-full data-[state=active]:bg-stone-50 data-[state=active]:text-blue-950`},{default:S(()=>[...c[11]||=[u(` Activity `,-1)]]),_:1})]),_:1}),c[29]||=d(`hr`,{class:`h-1 bg-slate-50 mb-10 mt-2 opacity-30`},null,-1),f(w(n),{value:`overview`,class:`mt-0`},{default:S(()=>[d(`div`,me,[d(`div`,he,[d(`div`,ge,[f(w(E),{class:`cursor-pointer hover:border-dashed p-5 flex items-start gap-4`,onClick:c[1]||=e=>$(`team`)},{default:S(()=>[f(w(ee),{class:`size-6 text-blue-500`}),c[12]||=d(`div`,null,[d(`h5`,{class:`font-semibold text-slate-700`},`Add a Team Member `),d(`p`,{class:`text-gray-600 text-sm`},`Invite collaborators to your organisation. `)],-1),f(w(T),{class:`ml-auto text-muted-foreground`})]),_:1}),f(w(E),{class:`cursor-pointer hover:border-dashed p-5 flex items-start gap-4`,onClick:c[2]||=e=>$(`accounts`)},{default:S(()=>[f(w(re),{class:`size-6 text-blue-500`}),c[13]||=d(`div`,null,[d(`h5`,{class:`font-semibold text-slate-700`},`Connect Accounts `),d(`p`,{class:`text-gray-600 text-sm`},`Link banking or accounting integrations. `)],-1),f(w(T),{class:`ml-auto text-muted-foreground`})]),_:1}),f(w(E),{class:`cursor-pointer hover:border-dashed p-5 flex items-start gap-4`,onClick:c[3]||=e=>$(`jurisdiction`)},{default:S(()=>[f(w(te),{class:`size-6 text-violet-500`}),c[14]||=d(`div`,null,[d(`h5`,{class:`font-semibold text-slate-700`},`Tax Jurisdiction `),d(`p`,{class:`text-gray-600 text-sm`},`View or change tax jurisdiction settings. `)],-1),f(w(T),{class:`ml-auto text-muted-foreground`})]),_:1}),f(w(E),{class:`cursor-pointer hover:border-dashed p-5 flex items-start gap-4`,onClick:c[4]||=e=>$(`settings`)},{default:S(()=>[f(w(ae),{class:`size-6 text-slate-700`}),c[15]||=d(`div`,null,[d(`h5`,{class:`font-semibold text-slate-700`},`Reporting`),d(`p`,{class:`text-gray-600 text-sm`},`Open quick reports and charts.`)],-1),f(w(T),{class:`ml-auto text-muted-foreground`})]),_:1})]),d(`aside`,_e,[f(w(E),{class:`p-6 sticky top-24`},{default:S(()=>[d(`div`,ve,[c[16]||=d(`div`,null,[d(`h4`,{class:`text-lg font-semibold text-slate-800`},`Setup Checklist `),d(`p`,{class:`text-sm text-slate-600`},`Complete these steps to finish setup `)],-1),d(`div`,ye,[d(`div`,be,m(rt.value)+`% `,1)])]),c[17]||=d(`hr`,{class:`mb-2`},null,-1),d(`div`,xe,[(x(!0),v(C,null,h(X.value,(e,t)=>(x(),v(`div`,{key:t,class:`flex items-start gap-3`},[d(`div`,Se,[d(`div`,Ce,[d(`div`,null,[d(`div`,we,m(e.title),1),d(`div`,Te,m(e.description),1)])])]),d(`div`,Ee,[e.done?(x(),v(`div`,De,[f(w(l),{class:`size-4`})])):(x(),v(`div`,Oe,m(t+1),1))])]))),128))])]),_:1})])])])]),_:1}),f(w(n),{value:`transactions`,class:`mt-0`},{default:S(()=>[d(`div`,ke,[f(w(E),{class:`p-6`},{default:S(()=>[c[19]||=d(`div`,{class:`flex items-center justify-between mb-4`},[d(`h3`,{class:`text-lg font-semibold text-slate-800`},`Inflow Overview `),d(`span`,{class:`text-sm text-slate-500`},`Last 20 transactions`)],-1),W.value.length>0?(x(),v(`div`,Ae,[(x(!0),v(C,null,h(Ze.value.reverse(),(e,t)=>(x(),v(`div`,{key:t,class:p([`flex-1 rounded-t transition-all hover:opacity-80`,e.type===`CREDIT`?`bg-sky-700 border-b-4 border-blue-700`:`bg-gradient-to-t from-stone-100 to-stone-200 border-b-4 border-blue-200`]),style:de({height:Qe(e.amount)+`%`}),title:`${Z(e.amount)} - ${e.description}`},null,14,je))),128))])):(x(),v(`div`,Me,[...c[18]||=[d(`span`,null,`No transaction data yet`,-1)]])),c[20]||=d(`div`,{class:`flex gap-4 mt-4 text-sm`},[d(`div`,{class:`flex items-center gap-2`},[d(`div`,{class:`w-3 h-3 rounded bg-stone-100 border`}),d(`span`,{class:`text-slate-600`},`Inflow`)]),d(`div`,{class:`flex items-center gap-2`},[d(`div`,{class:`w-3 h-3 rounded bg-blue-600`}),d(`span`,{class:`text-slate-600`},`Settlement`)])],-1)]),_:1}),f(w(E),{class:`p-6`},{default:S(()=>[c[22]||=d(`h3`,{class:`text-lg font-semibold text-slate-800 mb-4`},`Recent Transactions`,-1),G.value?(x(),v(`div`,Ne,[f(w(o),{class:`size-6 animate-spin text-slate-400`})])):W.value.length===0?(x(),v(`div`,H,[...c[21]||=[d(`div`,{class:`text-lg font-medium text-slate-700`},`No transactions yet `,-1),d(`p`,{class:`text-sm text-slate-500 mt-2`},`Connect a bank or import CSV to see transactions`,-1)]])):(x(),v(`div`,Pe,[(x(!0),v(C,null,h(W.value,e=>(x(),v(`div`,{key:e.id,class:`flex items-center justify-between p-3 rounded-lg hover:bg-slate-50 transition-colors`},[d(`div`,Fe,[d(`div`,{class:p([`w-10 h-10 rounded-full flex items-center justify-center`,e.type===`CREDIT`?`bg-blue-100 text-blue-600`:`bg-stone-100 text-stone-500`])},[e.type===`CREDIT`?(x(),y(w(ne),{key:0,class:`size-5`})):(x(),y(w(ue),{key:1,class:`size-5`}))],2),d(`div`,null,[d(`div`,Ie,m(e.description),1),d(`div`,Le,m(Q(e.transactionDate)),1)])]),d(`div`,{class:p([`font-semibold`,e.type===`CREDIT`?`text-blue-600`:`text-stone-600`])},m(Z(e.amount)),3)]))),128))]))]),_:1})])]),_:1}),f(w(n),{value:`activity`,class:`mt-0`},{default:S(()=>[d(`div`,Re,[f(w(E),{class:`p-6`},{default:S(()=>[c[27]||=d(`h3`,{class:`text-lg font-semibold text-slate-800 mb-4`},`Recent Activity `,-1),q.value?(x(),v(`div`,ze,[f(w(o),{class:`size-6 animate-spin text-slate-400`})])):K.value.length===0?(x(),v(`div`,Be,[f(w(oe),{class:`size-12 mx-auto text-slate-300 mb-4`}),c[23]||=d(`div`,{class:`text-lg font-medium text-slate-700`},`No activity yet `,-1),c[24]||=d(`p`,{class:`text-sm text-slate-500 mt-2`},`Activity will appear here as you use the platform`,-1)])):(x(),v(`div`,Ve,[c[26]||=d(`div`,{class:`absolute left-4 top-0 bottom-0 w-0.5 bg-slate-200`},null,-1),d(`div`,He,[(x(!0),v(C,null,h(K.value,e=>(x(),v(`div`,{key:e.id,class:`relative pl-10`},[c[25]||=d(`div`,{class:`absolute left-2.5 w-3 h-3 rounded-full bg-blue-500 border-2 border-white`},null,-1),d(`div`,Ue,[d(`div`,We,[d(`div`,null,[d(`div`,Ge,m(e.description),1),d(`div`,Ke,[d(`span`,qe,[f(w(ie),{class:`size-3`}),u(` `+m(e.actorEmail),1)])])]),d(`span`,Je,m($e(e.createdAt)),1)]),e.resourceType?(x(),v(`div`,Ye,[d(`span`,Xe,m(e.resourceType),1)])):a(``,!0)])]))),128))])]))]),_:1})])]),_:1})]),_:1},8,[`modelValue`])])])])]),_:1})])])]))}},[[`__scopeId`,`data-v-1a90ef98`]]);export{U as default};