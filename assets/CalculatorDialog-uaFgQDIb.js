import{$i as e,Ai as t,Bi as n,Ea as r,Fi as i,Mi as a,Ni as o,Oa as s,Oi as c,Pi as l,Ri as u,Sn as d,Ta as f,Yt as p,Zi as m,da as h,dt as g,gn as _,i as v,ji as y,ka as b,na as x,wt as S,x as C,xn as w,ya as T,yi as E}from"./index-CHNvwQRL.js";var D={class:`w-72 rounded-2xl bg-slate-900 shadow-2xl overflow-hidden border border-neutral-700/50`},O={class:`flex items-center gap-2 text-neutral-400`},k={class:`px-4 py-5 bg-slate-950`},ee={class:`flex items-center justify-between mb-1`},te={class:`text-neutral-500 text-xs h-4`},A={class:`grid grid-cols-4 gap-1 p-2 bg-slate-950`},j=[`onClick`],M={key:1},N=n({__name:`CalculatorDialog`,props:{open:{type:Boolean}},emits:[`update:open`],setup(n,{emit:v}){let N=v,P=T(`0`),F=T(``),I=T(``),L=T(null),R=T(!1),z=T(null),B=T(!1),V=T({x:0,y:0}),H=T({x:0,y:0}),U=T(!1),W=y(()=>{if(P.value===``)return`0`;let e=parseFloat(P.value);if(isNaN(e)||P.value.endsWith(`.`))return P.value;let t=P.value.split(`.`),n=parseInt(t[0]).toLocaleString(`en-US`);return t.length===2?`${n}.${t[1]}`:n}),G=e=>{if(R.value){P.value=e,F.value=e,R.value=!1;return}e===`.`&&P.value.includes(`.`)||(P.value===`0`&&e!==`.`?P.value=e:P.value+=e,F.value=P.value)},K=e=>{F.value!==``&&(I.value!==``&&q(),L.value=e,I.value=F.value,F.value=``,R.value=!0)},q=()=>{let e,t=parseFloat(I.value),n=parseFloat(F.value||P.value);if(!(isNaN(t)||isNaN(n))){switch(L.value){case`+`:e=t+n;break;case`-`:e=t-n;break;case`×`:e=t*n;break;case`÷`:e=n===0?NaN:t/n;break;default:return}isNaN(e)?P.value=`Error`:P.value=String(Math.round(e*1e10)/1e10),F.value=P.value,I.value=``,L.value=null,R.value=!0}},J=()=>{P.value=`0`,F.value=``,I.value=``,L.value=null,R.value=!1},Y=()=>{P.value.length===1||P.value===`Error`?(P.value=`0`,F.value=``):(P.value=P.value.slice(0,-1),F.value=P.value)},X=()=>{P.value===`0`||P.value===`Error`||(P.value.startsWith(`-`)?P.value=P.value.slice(1):P.value=`-`+P.value,F.value=P.value)},Z=()=>{let e=parseFloat(P.value);isNaN(e)||(P.value=String(e/100),F.value=P.value)},ne=e=>{if(!z.value)return;B.value=!0;let t=z.value.getBoundingClientRect();V.value={x:e.clientX-t.left,y:e.clientY-t.top},U.value||=(H.value={x:t.left,y:t.top},!0),document.addEventListener(`mousemove`,Q),document.addEventListener(`mouseup`,$)},Q=e=>{if(!B.value||!z.value)return;let t=z.value.getBoundingClientRect(),n=window.innerWidth,r=window.innerHeight,i=e.clientX-V.value.x,a=e.clientY-V.value.y;i=Math.max(0,Math.min(i,n-t.width)),a=Math.max(0,Math.min(a,r-t.height)),H.value={x:i,y:a}},$=()=>{B.value=!1,document.removeEventListener(`mousemove`,Q),document.removeEventListener(`mouseup`,$)},re=()=>{N(`update:open`,!1),J(),U.value=!1},ie=[{label:`C`,action:J,class:`bg-neutral-200 hover:bg-neutral-300 text-neutral-700`},{label:`±`,action:X,class:`bg-neutral-200 hover:bg-neutral-300 text-neutral-700`},{label:`%`,action:Z,class:`bg-neutral-200 hover:bg-neutral-300 text-neutral-700`},{label:`÷`,action:()=>K(`÷`),class:`bg-slate-500 hover:bg-slate-600 text-white`,icon:w},{label:`7`,action:()=>G(`7`),class:`bg-neutral-700 hover:bg-neutral-600 text-white`},{label:`8`,action:()=>G(`8`),class:`bg-neutral-700 hover:bg-neutral-600 text-white`},{label:`9`,action:()=>G(`9`),class:`bg-neutral-700 hover:bg-neutral-600 text-white`},{label:`×`,action:()=>K(`×`),class:`bg-slate-500 hover:bg-slate-600 text-white`},{label:`4`,action:()=>G(`4`),class:`bg-neutral-700 hover:bg-neutral-600 text-white`},{label:`5`,action:()=>G(`5`),class:`bg-neutral-700 hover:bg-neutral-600 text-white`},{label:`6`,action:()=>G(`6`),class:`bg-neutral-700 hover:bg-neutral-600 text-white`},{label:`-`,action:()=>K(`-`),class:`bg-slate-500 hover:bg-slate-600 text-white`,icon:S},{label:`1`,action:()=>G(`1`),class:`bg-neutral-700 hover:bg-neutral-600 text-white`},{label:`2`,action:()=>G(`2`),class:`bg-neutral-700 hover:bg-neutral-600 text-white`},{label:`3`,action:()=>G(`3`),class:`bg-neutral-700 hover:bg-neutral-600 text-white`},{label:`+`,action:()=>K(`+`),class:`bg-slate-500 hover:bg-slate-600 text-white`,icon:g},{label:`0`,action:()=>G(`0`),class:`bg-neutral-700 hover:bg-neutral-600 text-white col-span-2`},{label:`.`,action:()=>G(`.`),class:`bg-neutral-700 hover:bg-neutral-600 text-white`},{label:`=`,action:q,class:`bg-slate-500 hover:bg-slate-600 text-white`,icon:_}];return(g,_)=>(m(),o(t,{to:`body`},[u(E,{name:`calculator`},{default:h(()=>[n.open?(m(),i(`div`,{key:0,ref_key:`dialogRef`,ref:z,class:r([`fixed z-[100] select-none`,{"cursor-grabbing":B.value}]),style:s(U.value?{left:`${H.value.x}px`,top:`${H.value.y}px`}:{left:`50%`,top:`50%`,transform:`translate(-50%, -50%)`})},[a(`div`,D,[a(`div`,{class:`flex items-center justify-between px-3 py-2 bg-slate-800 cursor-grab active:cursor-grabbing`,onMousedown:ne},[a(`div`,O,[u(f(p),{class:`w-4 h-4 text-yellow-200`}),_[0]||=a(`span`,{class:`text-xs font-medium`},`Calculator`,-1)]),a(`button`,{onClick:re,class:`p-1 rounded-full hover:bg-neutral-700 text-neutral-400 hover:text-white transition-colors`},[u(f(C),{class:`w-4 h-4`})])],32),a(`div`,k,[a(`div`,ee,[a(`span`,te,b(I.value)+` `+b(L.value||``),1),a(`button`,{onClick:Y,class:`p-1 rounded hover:bg-neutral-800 text-neutral-500 hover:text-neutral-300 transition-colors`},[u(f(d),{class:`w-4 h-4`})])]),a(`div`,{class:r([`text-right text-4xl font-light text-white tracking-tight overflow-hidden`,{"text-red-400":P.value===`Error`}])},b(W.value),3)]),a(`div`,A,[(m(),i(c,null,e(ie,(e,t)=>a(`button`,{key:t,onClick:e.action,class:r([`h-14 rounded-xl font-medium text-xl transition-all duration-150 active:scale-95`,e.class])},[e.icon?(m(),o(x(e.icon),{key:0,class:`w-5 h-5 mx-auto`})):(m(),i(`span`,M,b(e.label),1))],10,j)),64))])])],6)):l(``,!0)]),_:1})]))}}),P=v(N,[[`__scopeId`,`data-v-7f0eba23`]]);export{P as default};