import{D as e,T as t,V as n,W as r,b as i,ft as a,gt as o,tt as s,vt as c}from"./index-vegYmq3T.js";import{t as l}from"./Collection-X55jeECX.js";import{l as u}from"./VisuallyHidden-DQsaJJLU.js";import{n as d}from"./dist-7nj00zp2.js";import{u as f}from"./useForwardExpose-CjVMQCNw.js";import{t as p}from"./useDirection-BqIOTVvD.js";import{n as m,r as h,t as g}from"./utils-DFBNLZpG.js";var[_,v]=u(`RovingFocusGroup`),y=e({__name:`RovingFocusGroup`,props:{orientation:{type:String,required:!1,default:void 0},dir:{type:String,required:!1},loop:{type:Boolean,required:!1,default:!1},currentTabStopId:{type:[String,null],required:!1},defaultCurrentTabStopId:{type:String,required:!1},preventScrollOnEntryFocus:{type:Boolean,required:!1,default:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},emits:[`entryFocus`,`update:currentTabStopId`],setup(e,{expose:u,emit:_}){let y=e,b=_,{loop:x,orientation:S,dir:C}=o(y),w=p(C),T=f(y,`currentTabStopId`,b,{defaultValue:y.defaultCurrentTabStopId,passive:y.currentTabStopId===void 0}),E=a(!1),D=a(!1),O=a(0),{getItems:k,CollectionSlot:A}=l({isProvider:!0});function j(e){let t=!D.value;if(e.currentTarget&&e.target===e.currentTarget&&t&&!E.value){let t=new CustomEvent(g,m);if(e.currentTarget.dispatchEvent(t),b(`entryFocus`,t),!t.defaultPrevented){let e=k().map(e=>e.ref).filter(e=>e.dataset.disabled!==``),t=e.find(e=>e.getAttribute(`data-active`)===``),n=e.find(e=>e.getAttribute(`data-highlighted`)===``),r=e.find(e=>e.id===T.value),i=[t,n,r,...e].filter(Boolean);h(i,y.preventScrollOnEntryFocus)}}D.value=!1}function M(){setTimeout(()=>{D.value=!1},1)}return u({getItems:k}),v({loop:x,dir:w,orientation:S,currentTabStopId:T,onItemFocus:e=>{T.value=e},onItemShiftTab:()=>{E.value=!0},onFocusableItemAdd:()=>{O.value++},onFocusableItemRemove:()=>{O.value--}}),(e,a)=>(n(),i(c(A),null,{default:s(()=>[t(c(d),{tabindex:E.value||O.value===0?-1:0,"data-orientation":c(S),as:e.as,"as-child":e.asChild,dir:c(w),style:{outline:`none`},onMousedown:a[0]||=e=>D.value=!0,onMouseup:M,onFocus:j,onBlur:a[1]||=e=>E.value=!1},{default:s(()=>[r(e.$slots,`default`)]),_:3},8,[`tabindex`,`data-orientation`,`as`,`as-child`,`dir`])]),_:3}))}});export{_ as n,y as t};