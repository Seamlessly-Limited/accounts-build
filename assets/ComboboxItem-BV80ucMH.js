import{a as e,c as t,i as n,n as r,o as i,s as a,t as o}from"./ListboxItem-CrspQUEb.js";import{n as s,t as c}from"./useHideOthers-8j3pZZC2.js";import{t as l}from"./useDirection-CkCaHLjJ.js";import{t as u}from"./useId-C9uHTJK1.js";import{n as d,r as f}from"./PopperContent-CkzV4Efh.js";import{Aa as p,Ai as m,Br as h,Fr as g,Gi as _,Hi as v,Hr as y,Ii as b,Ir as x,Ki as S,Ma as C,Oa as w,Pa as T,Pr as E,Qi as D,Ri as O,Rr as k,Ui as A,Vr as j,Yr as M,Zi as N,Zr as P,aa as F,ba as I,bi as L,da as R,di as z,ea as B,ga as V,ji as H,na as U,qi as W,sa as G,ta as K,wa as q,wr as J,zi as Y}from"./index-BW6FH5S4.js";var[X,ee]=z(`ComboboxRoot`),Z=_({__name:`ComboboxRoot`,props:{open:{type:Boolean,required:!1,default:void 0},defaultOpen:{type:Boolean,required:!1},resetSearchTermOnBlur:{type:Boolean,required:!1,default:!0},resetSearchTermOnSelect:{type:Boolean,required:!1,default:!0},openOnFocus:{type:Boolean,required:!1,default:!1},openOnClick:{type:Boolean,required:!1,default:!1},ignoreFilter:{type:Boolean,required:!1},resetModelValueOnClear:{type:Boolean,required:!1,default:!1},modelValue:{type:null,required:!1},defaultValue:{type:null,required:!1},multiple:{type:Boolean,required:!1},dir:{type:String,required:!1},disabled:{type:Boolean,required:!1},highlightOnHover:{type:Boolean,required:!1,default:!0},by:{type:[String,Function],required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1},name:{type:String,required:!1},required:{type:Boolean,required:!1}},emits:[`update:modelValue`,`highlight`,`update:open`],setup(e,{expose:n,emit:r}){let a=e,o=r,{primitiveElement:s,currentElement:c}=g(),{multiple:u,disabled:d,ignoreFilter:m,resetSearchTermOnSelect:h,openOnFocus:_,openOnClick:v,dir:y,resetModelValueOnClear:x,highlightOnHover:C}=w(a),T=l(y),E=M(a,`modelValue`,o,{defaultValue:a.defaultValue??(u.value?[]:void 0),passive:a.modelValue===void 0,deep:!0}),k=M(a,`open`,o,{defaultValue:a.defaultOpen,passive:a.open===void 0});async function j(e){k.value=e,X.value=``,e?(await D(),s.value?.highlightSelected(),R.value=!0):R.value=!1,H.value?.focus(),setTimeout(()=>{!e&&a.resetSearchTermOnBlur&&L.trigger()},1)}let L=P(),R=q(!1),z=q(!1),H=q(),W=q(),G=b(()=>s.value?.highlightedElement??void 0),K=q(new Map),J=q(new Map),{contains:Y}=t({sensitivity:`base`}),X=q(``),Z=b(e=>{if(!X.value||a.ignoreFilter||z.value)return{count:K.value.size,items:e?.items??new Map,groups:e?.groups??new Set(J.value.keys())};let t=0,n=new Map,r=new Set;for(let[e,r]of K.value){let i=Y(r,X.value);n.set(e,i?1:0),i&&t++}for(let[e,t]of J.value)for(let i of t)if(n.get(i)>0){r.add(e);break}return{count:t,items:n,groups:r}}),Q=S();return B(()=>{Q?.exposed&&(Q.exposed.highlightItem=s.value?.highlightItem,Q.exposed.highlightFirstItem=s.value?.highlightFirstItem,Q.exposed.highlightSelected=s.value?.highlightSelected)}),n({filtered:Z,highlightedElement:G,highlightItem:s.value?.highlightItem,highlightFirstItem:s.value?.highlightFirstItem,highlightSelected:s.value?.highlightSelected}),ee({modelValue:E,multiple:u,disabled:d,open:k,onOpenChange:j,contentId:``,isUserInputted:R,isVirtual:z,inputElement:H,highlightedElement:G,onInputElementChange:e=>H.value=e,triggerElement:W,onTriggerElementChange:e=>W.value=e,parentElement:c,resetSearchTermOnSelect:h,onResetSearchTerm:L.on,allItems:K,allGroups:J,filterSearch:X,filterState:Z,ignoreFilter:m,openOnFocus:_,openOnClick:v,resetModelValueOnClear:x}),(e,t)=>(U(),O(p(f),null,{default:V(()=>[A(p(i),N({ref_key:`primitiveElement`,ref:s},e.$attrs,{modelValue:p(E),"onUpdate:modelValue":t[0]||=e=>I(E)?E.value=e:null,style:{pointerEvents:p(k)?`auto`:void 0},as:e.as,"as-child":e.asChild,dir:p(T),multiple:p(u),name:e.name,required:e.required,disabled:p(d),"highlight-on-hover":p(C),by:a.by,onHighlight:t[1]||=e=>o(`highlight`,e)}),{default:V(()=>[F(e.$slots,`default`,{open:p(k),modelValue:p(E)})]),_:3},16,[`modelValue`,`style`,`as`,`as-child`,`dir`,`multiple`,`name`,`required`,`disabled`,`highlight-on-hover`,`by`])]),_:3}))}}),[Q,te]=z(`ComboboxContent`),ne=_({__name:`ComboboxContentImpl`,props:{position:{type:String,required:!1,default:`inline`},bodyLock:{type:Boolean,required:!1},side:{type:null,required:!1},sideOffset:{type:Number,required:!1},sideFlip:{type:Boolean,required:!1},align:{type:null,required:!1},alignOffset:{type:Number,required:!1},alignFlip:{type:Boolean,required:!1},avoidCollisions:{type:Boolean,required:!1},collisionBoundary:{type:null,required:!1},collisionPadding:{type:[Number,Object],required:!1},arrowPadding:{type:Number,required:!1},sticky:{type:String,required:!1},hideWhenDetached:{type:Boolean,required:!1},positionStrategy:{type:String,required:!1},updatePositionStrategy:{type:String,required:!1},disableUpdateOnLayoutShift:{type:Boolean,required:!1},prioritizePosition:{type:Boolean,required:!1},reference:{type:null,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1},disableOutsidePointerEvents:{type:Boolean,required:!1}},emits:[`escapeKeyDown`,`pointerDownOutside`,`focusOutside`,`interactOutside`],setup(t,{emit:n}){let r=t,i=n,{position:a}=w(r),o=X(),{forwardRef:l,currentElement:u}=y();s(r.bodyLock),c(o.parentElement);let f=b(()=>r.position===`popper`?r:{}),m=j(f.value),h={boxSizing:`border-box`,"--reka-combobox-content-transform-origin":`var(--reka-popper-transform-origin)`,"--reka-combobox-content-available-width":`var(--reka-popper-available-width)`,"--reka-combobox-content-available-height":`var(--reka-popper-available-height)`,"--reka-combobox-trigger-width":`var(--reka-popper-anchor-width)`,"--reka-combobox-trigger-height":`var(--reka-popper-anchor-height)`};te({position:a});let g=q(!1);return B(()=>{o.inputElement.value&&(g.value=u.value.contains(o.inputElement.value),g.value&&o.inputElement.value.focus())}),K(()=>{g.value&&o.triggerElement.value?.focus()}),(t,n)=>(U(),O(p(e),{"as-child":``},{default:V(()=>[A(p(E),{"as-child":``,"disable-outside-pointer-events":t.disableOutsidePointerEvents,onDismiss:n[0]||=e=>p(o).onOpenChange(!1),onFocusOutside:n[1]||=e=>{p(o).parentElement.value?.contains(e.target)&&e.preventDefault(),i(`focusOutside`,e)},onInteractOutside:n[2]||=e=>i(`interactOutside`,e),onEscapeKeyDown:n[3]||=e=>i(`escapeKeyDown`,e),onPointerDownOutside:n[4]||=e=>{p(o).parentElement.value?.contains(e.target)&&e.preventDefault(),i(`pointerDownOutside`,e)}},{default:V(()=>[(U(),O(G(p(a)===`popper`?p(d):p(x)),N({...t.$attrs,...p(m)},{id:p(o).contentId,ref:p(l),"data-state":p(o).open.value?`open`:`closed`,style:{display:`flex`,flexDirection:`column`,outline:`none`,...p(a)===`popper`?h:{}}}),{default:V(()=>[F(t.$slots,`default`)]),_:3},16,[`id`,`data-state`,`style`]))]),_:3},8,[`disable-outside-pointer-events`])]),_:3}))}}),re=_({__name:`ComboboxContent`,props:{forceMount:{type:Boolean,required:!1},position:{type:String,required:!1},bodyLock:{type:Boolean,required:!1},side:{type:null,required:!1},sideOffset:{type:Number,required:!1},sideFlip:{type:Boolean,required:!1},align:{type:null,required:!1},alignOffset:{type:Number,required:!1},alignFlip:{type:Boolean,required:!1},avoidCollisions:{type:Boolean,required:!1},collisionBoundary:{type:null,required:!1},collisionPadding:{type:[Number,Object],required:!1},arrowPadding:{type:Number,required:!1},sticky:{type:String,required:!1},hideWhenDetached:{type:Boolean,required:!1},positionStrategy:{type:String,required:!1},updatePositionStrategy:{type:String,required:!1},disableUpdateOnLayoutShift:{type:Boolean,required:!1},prioritizePosition:{type:Boolean,required:!1},reference:{type:null,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1},disableOutsidePointerEvents:{type:Boolean,required:!1}},emits:[`escapeKeyDown`,`pointerDownOutside`,`focusOutside`,`interactOutside`],setup(e,{emit:t}){let n=h(e,t),{forwardRef:r}=y(),i=X();return i.contentId||=u(void 0,`reka-combobox-content`),(e,t)=>(U(),O(p(k),{present:e.forceMount||p(i).open.value},{default:V(()=>[A(ne,N({...p(n),...e.$attrs},{ref:p(r)}),{default:V(()=>[F(e.$slots,`default`)]),_:3},16)]),_:3},8,[`present`]))}}),[$,ie]=z(`ComboboxGroup`),ae=_({__name:`ComboboxGroup`,props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},setup(e){let t=e,n=u(void 0,`reka-combobox-group`),i=X(),a=b(()=>i.ignoreFilter.value?!0:i.filterSearch.value?i.filterState.value.groups.has(n):!0),o=ie({id:n,labelId:``});return B(()=>{i.allGroups.value.has(n)||i.allGroups.value.set(n,new Set)}),K(()=>{i.allGroups.value.delete(n)}),(e,i)=>(U(),O(p(r),N({id:p(n),"aria-labelledby":p(o).labelId},t,{hidden:a.value?void 0:!0}),{default:V(()=>[F(e.$slots,`default`)]),_:3},16,[`id`,`aria-labelledby`,`hidden`]))}}),oe=_({__name:`ComboboxInput`,props:{displayValue:{type:Function,required:!1},modelValue:{type:String,required:!1},autoFocus:{type:Boolean,required:!1},disabled:{type:Boolean,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:`input`}},emits:[`update:modelValue`],setup(e,{emit:t}){let r=e,i=t,o=X(),s=a(),{primitiveElement:c,currentElement:l}=g(),u=M(r,`modelValue`,i,{passive:r.modelValue===void 0});B(()=>{l.value&&o.onInputElementChange(l.value)});function d(e){o.open.value||o.onOpenChange(!0)}function f(e){let t=e.target;o.open.value?o.filterSearch.value=t.value:(o.onOpenChange(!0),D(()=>{t.value&&(o.filterSearch.value=t.value,s.highlightFirstItem())}))}function h(){o.openOnFocus.value&&!o.open.value&&o.onOpenChange(!0)}function _(){o.openOnClick.value&&!o.open.value&&o.onOpenChange(!0)}function v(){let e=o.modelValue.value;r.displayValue?u.value=r.displayValue(e):!o.multiple.value&&e&&!Array.isArray(e)?typeof e==`object`?u.value=``:u.value=e.toString():u.value=``,D(()=>{u.value=u.value})}return o.onResetSearchTerm(()=>{v()}),R(o.modelValue,async()=>{!o.isUserInputted.value&&o.resetSearchTermOnSelect.value&&v()},{immediate:!0,deep:!0}),R(o.filterState,()=>{!o.isVirtual.value&&!o.highlightedElement.value&&s.highlightFirstItem()}),(e,t)=>(U(),O(p(n),{ref_key:`primitiveElement`,ref:c,modelValue:p(u),"onUpdate:modelValue":t[0]||=e=>I(u)?u.value=e:null,as:e.as,"as-child":e.asChild,"auto-focus":e.autoFocus,disabled:e.disabled,"aria-expanded":p(o).open.value,"aria-controls":p(o).contentId,"aria-autocomplete":`list`,role:`combobox`,autocomplete:`off`,onClick:_,onInput:f,onKeydown:m(H(d,[`prevent`]),[`down`,`up`]),onFocus:h},{default:V(()=>[F(e.$slots,`default`)]),_:3},8,[`modelValue`,`as`,`as-child`,`auto-focus`,`disabled`,`aria-expanded`,`aria-controls`,`onKeydown`]))}}),se=_({__name:`ComboboxItem`,props:{textValue:{type:String,required:!1},value:{type:null,required:!0},disabled:{type:Boolean,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},emits:[`select`],setup(e,{emit:t}){let n=e,r=t,i=u(void 0,`reka-combobox-item`),a=X(),s=$(null),{primitiveElement:c,currentElement:l}=g();if(n.value===``)throw Error(`A <ComboboxItem /> must have a value prop that is not an empty string. This is because the Combobox value can be set to an empty string to clear the selection and show the placeholder.`);let d=b(()=>{if(a.isVirtual.value||a.ignoreFilter.value||!a.filterSearch.value)return!0;{let e=a.filterState.value.items.get(i);return e===void 0?!0:e>0}});return B(()=>{a.allItems.value.set(i,n.textValue||l.value.textContent||l.value.innerText);let e=s?.id;e&&(a.allGroups.value.has(e)?a.allGroups.value.get(e)?.add(i):a.allGroups.value.set(e,new Set([i])))}),K(()=>{a.allItems.value.delete(i)}),(e,t)=>d.value?(U(),O(p(o),N({key:0},n,{id:p(i),ref_key:`primitiveElement`,ref:c,disabled:p(a).disabled.value||e.disabled,onSelect:t[0]||=t=>{r(`select`,t),!t.defaultPrevented&&!p(a).multiple.value&&!e.disabled&&!p(a).disabled.value&&(t.preventDefault(),p(a).onOpenChange(!1),p(a).modelValue.value=n.value)}}),{default:V(()=>[F(e.$slots,`default`,{},()=>[v(T(e.value),1)])]),_:3},16,[`id`,`disabled`])):Y(`v-if`,!0)}}),ce=_({__name:`ComboboxTrigger`,props:{disabled:{type:Boolean,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:`button`}},setup(e){let t=e,{forwardRef:n,currentElement:r}=y(),i=X(),a=b(()=>t.disabled||i.disabled.value||!1);return B(()=>{r.value&&i.onTriggerElementChange(r.value)}),(e,r)=>(U(),O(p(x),N(t,{ref:p(n),type:e.as===`button`?`button`:void 0,tabindex:`-1`,"aria-label":`Show popup`,"aria-haspopup":`listbox`,"aria-expanded":p(i).open.value,"aria-controls":p(i).contentId,"data-state":p(i).open.value?`open`:`closed`,disabled:a.value,"data-disabled":a.value?``:void 0,"aria-disabled":a.value??void 0,onClick:r[0]||=e=>p(i).onOpenChange(!p(i).open.value)}),{default:V(()=>[F(e.$slots,`default`)]),_:3},16,[`type`,`aria-expanded`,`aria-controls`,`data-state`,`disabled`,`data-disabled`,`aria-disabled`]))}}),le=_({__name:`Combobox`,props:{open:{type:Boolean},defaultOpen:{type:Boolean},resetSearchTermOnBlur:{type:Boolean},resetSearchTermOnSelect:{type:Boolean},openOnFocus:{type:Boolean},openOnClick:{type:Boolean},ignoreFilter:{type:Boolean},resetModelValueOnClear:{type:Boolean},modelValue:{},defaultValue:{},multiple:{type:Boolean},dir:{},disabled:{type:Boolean},highlightOnHover:{type:Boolean},by:{type:[String,Function]},asChild:{type:Boolean},as:{},name:{},required:{type:Boolean}},emits:[`update:modelValue`,`highlight`,`update:open`],setup(e,{emit:t}){let n=h(e,t);return(e,t)=>(U(),O(p(Z),C(W(p(n))),{default:V(()=>[F(e.$slots,`default`)]),_:3},16))}}),ue=_({__name:`ComboboxInput`,props:{displayValue:{type:Function},modelValue:{},autoFocus:{type:Boolean},disabled:{type:Boolean},asChild:{type:Boolean},as:{},class:{}},emits:[`update:modelValue`],setup(e,{emit:t}){let n=e,r=t,i=L(n,`class`),a=h(i,r);return(e,t)=>(U(),O(p(oe),N(p(a),{class:p(J)(`flex h-9 w-full rounded-full border border-input bg-transparent px-3 py-1 text-sm shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50`,n.class)}),{default:V(()=>[F(e.$slots,`default`)]),_:3},16,[`class`]))}}),de=_({__name:`ComboboxItem`,props:{textValue:{},value:{},disabled:{type:Boolean},asChild:{type:Boolean},as:{},class:{}},emits:[`select`],setup(e,{emit:t}){let n=e,r=t,i=L(n,`class`),a=h(i,r);return(e,t)=>(U(),O(p(se),N(p(a),{class:p(J)(`relative flex cursor-default gap-2 select-none justify-between items-center rounded-sm px-2 py-1.5 text-sm outline-none data-[highlighted]:bg-accent data-[highlighted]:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:size-4 [&_svg]:shrink-0`,n.class)}),{default:V(()=>[F(e.$slots,`default`)]),_:3},16,[`class`]))}});export{ae as a,X as c,ce as i,ue as n,$ as o,le as r,re as s,de as t};