import{o as e}from"./index-Caanq2Pw.js";var t={async create(t){return await e.post(`/organisations`,{data:{...t},authorizeRequest:!0})},async getOrganisation(t){let n=await e.get(`/organisations/${t}`,{authorizeRequest:!0});return n?n.data:null},async update(t,n){let r=await e.patch(`/organisations/${t}`,{data:{...n},authorizeRequest:!0});return r?r.data:null},async getById(e){if(e===`current`){let e=JSON.parse(localStorage.getItem(`organisation`)||`{}`);if(e.reference)try{let t=await this.getOrganisation(e.reference);if(t)return t}catch(e){console.warn(`Stored organisation reference is invalid or inaccessible. Falling back to list.`,e),localStorage.removeItem(`organisation`)}let t=await this.getOrganisations();if(t&&t.data&&t.data.length>0){let e=t.data,n={OWNER:5,ADMIN:4,MANAGER:3,AUDITOR:2,MEMBER:1};e.sort((e,t)=>{let r=n[e.role]||0,i=n[t.role]||0;if(r!==i)return i-r;let a=e.organisation&&e.organisation.createdAt?new Date(e.organisation.createdAt):new Date(0);return(t.organisation&&t.organisation.createdAt?new Date(t.organisation.createdAt):new Date(0))-a});let r=e[0],i=r.organisation?r.organisation.reference:r.organisationReference,a=await this.getOrganisation(i);if(a){let e={...JSON.parse(localStorage.getItem(`organisation`)||`{}`),...a};return localStorage.setItem(`organisation`,JSON.stringify(e)),e}return a}return null}return await this.getOrganisation(e)},async getOrganisations(){return await e.get(`/me/organisations`,{authorizeRequest:!0})},async createMembers(t){return await e.post(`/org/members`,{data:{...t},authorizeRequest:!0,organisationAware:!0})},async getMembers(){return await e.get(`/org/members`,{authorizeRequest:!0,organisationAware:!0})},async getMember(t){return await e.get(`/org/members/${t}`,{authorizeRequest:!0})},async updateMember(t,n){return await e.patch(`/org/members/${t}`,{data:{...n},authorizeRequest:!0,organisationAware:!0})},async deleteMember(t,n=!0){return await e.delete(`/org/members/${t}?silently=${n}`,{params:{silently:n},authorizeRequest:!0,organisationAware:!0})},async getSubscription(){return await e.get(`/org/subscription`,{authorizeRequest:!0,organisationAware:!0})},async subscribe(t){return await e.post(`/org/subscription`,{data:{...t},authorizeRequest:!0,organisationAware:!0})},async setSubscription(t){return await e.put(`/org/subscription`,{data:{...t},authorizeRequest:!0,organisationAware:!0})},async cancelSubscription(){return await e.delete(`/org/subscription`,{authorizeRequest:!0,organisationAware:!0})},async getPayments(){return await e.get(`/org/subscription/payments`,{authorizeRequest:!0,organisationAware:!0})},async downloadReceipt(t){return await e.get(`/org/subscription-payments/${t}/receipt`,{authorizeRequest:!0,organisationAware:!0})},async getSetupChecklist(){return await e.get(`/org/setup-checklist`,{authorizeRequest:!0,organisationAware:!0})},async updateSetupChecklistItem(t,n){return await e.patch(`/org/setup-checklist`,{data:{key:t,done:n},authorizeRequest:!0,organisationAware:!0})},async getOrganisationDetails(t){let n={};t&&(n={Organisation:t});let r=await e.get(`/org/details`,{authorizeRequest:!0,organisationAware:!0,headers:n});return r?r.data:null}};export{t};