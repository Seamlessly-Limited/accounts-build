import{Hi as e,Ki as t,N as n,Oa as r,Pa as i,Qn as a,Ra as o,Tr as s,Ui as c,Vi as l,Wi as u,h as d,o as f,oa as p,qi as m,zt as h}from"./index-CTHZVx0Q.js";import{t as g}from"./WorkspaceStore-gf1m868h.js";var _={class:`h-full flex flex-col`},v={class:`flex-none px-6 py-4 border-b border-gray-100 flex items-center justify-between`},y={class:`flex items-center space-x-4`},b={class:`p-2 rounded-lg bg-amber-50`},x={class:`text-sm text-gray-500`},S={class:`flex-1 overflow-auto p-6 bg-gray-50`},C={class:`max-w-lg mx-auto bg-white rounded-xl border border-gray-200 shadow-sm p-6`},w={key:0,class:`flex justify-center py-12`},T={key:1,class:`text-center py-8`},E={class:`w-16 h-16 mx-auto mb-4 rounded-full bg-green-100 flex items-center justify-center`},D={class:`text-gray-500 mb-6`},O={key:2,class:`space-y-6`},k={class:`text-center`},A={class:`w-16 h-16 mx-auto mb-4 rounded-full bg-amber-100 flex items-center justify-center`},j={class:`bg-gray-50 rounded-lg p-4 space-y-2`},M={class:`flex justify-between text-sm`},N={class:`font-medium text-gray-900`},P={class:`flex justify-between text-sm`},F={class:`font-medium text-gray-900`},I={class:`flex gap-3`},L=[`disabled`],R={__name:`ArchiveView`,props:{doctype:{type:String,required:!0},name:{type:String,required:!0}},setup(R){let z=R,{toast:B}=d(),V=g(),H=r(!1),U=r(!1),W=r(!1);async function G(){U.value=!0;try{await f.patch(`/org/doc/${encodeURIComponent(z.doctype)}/${encodeURIComponent(z.name)}`,{data:{archived:!0},authorizeRequest:!0,organisationAware:!0}),W.value=!0,B({title:`Archived`,description:`${z.name} has been archived.`,variant:`success`}),V.notifyDocSaved(z.doctype,z.name)}catch(e){console.error(`Archive error:`,e),B({title:`Archive Failed`,description:e.message,variant:`destructive`})}finally{U.value=!1}}function K(){V.closeTab(`archive-${z.doctype}-${z.name}`)}return(r,d)=>(p(),u(`div`,_,[l(`header`,v,[l(`div`,y,[l(`div`,b,[m(i(s),{class:`w-6 h-6 text-amber-600`})]),l(`div`,null,[d[0]||=l(`h1`,{class:`text-xl font-bold text-gray-900`},`Archive Document`,-1),l(`p`,x,o(R.doctype)+` â€¢ `+o(R.name),1)])])]),l(`div`,S,[l(`div`,C,[H.value?(p(),u(`div`,w,[...d[1]||=[l(`div`,{class:`animate-spin rounded-full h-8 w-8 border-b-2 border-black`},null,-1)]])):W.value?(p(),u(`div`,T,[l(`div`,E,[m(i(a),{class:`w-8 h-8 text-green-600`})]),d[2]||=l(`h3`,{class:`text-lg font-semibold text-gray-900 mb-2`},`Document Archived`,-1),l(`p`,D,o(R.name)+` has been moved to the archive.`,1),l(`button`,{onClick:K,class:`px-6 py-2 bg-black text-white rounded-full text-sm font-medium hover:bg-gray-900 transition-colors`},` Close `)])):(p(),u(`div`,O,[l(`div`,k,[l(`div`,A,[m(i(n),{class:`w-8 h-8 text-amber-600`})]),d[3]||=l(`h3`,{class:`text-lg font-semibold text-gray-900 mb-2`},`Archive this document?`,-1),d[4]||=l(`p`,{class:`text-gray-500`},`Archiving will hide the document from lists but you can restore it later.`,-1)]),l(`div`,j,[l(`div`,M,[d[5]||=l(`span`,{class:`text-gray-500`},`Document`,-1),l(`span`,N,o(R.name),1)]),l(`div`,P,[d[6]||=l(`span`,{class:`text-gray-500`},`Type`,-1),l(`span`,F,o(R.doctype),1)])]),l(`div`,I,[l(`button`,{onClick:K,class:`flex-1 px-4 py-2 border border-gray-200 rounded-full text-sm font-medium text-gray-600 hover:bg-gray-50 transition-colors`},` Cancel `),l(`button`,{onClick:G,disabled:U.value,class:`flex-1 px-4 py-2 bg-amber-600 text-white rounded-full text-sm font-medium hover:bg-amber-700 disabled:opacity-50 flex items-center justify-center gap-2 transition-colors`},[U.value?(p(),e(i(h),{key:0,class:`w-4 h-4 animate-spin`})):c(``,!0),t(` `+o(U.value?`Archiving...`:`Archive Document`),1)],8,L)])]))])])]))}};export{R as default};