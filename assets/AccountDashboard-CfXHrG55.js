import"./useFormControl-CX6GmaYB.js";import"./ListboxItem-Slf5oRnT.js";import"./useNonce-DVUBjIDW.js";import"./nullish-CfjOSA4G.js";import"./ConfigProvider-Bfe_xD5n.js";import"./useHideOthers-Bcr8f6vD.js";import{a as e,i as t,n,o as r,r as i,s as a,t as o}from"./PopoverTrigger-RinNZxti.js";import"./useDirection-aXfNvefe.js";import"./PopperAnchor-erCS4IxC.js";import"./useId-BvCsSMTc.js";import"./useKbd-BvGB3m10.js";import"./PopperContent-CZ1wdiMA.js";import"./useTypeahead-YiphYzOv.js";import"./DialogPortal-CSfKRGHj.js";import"./Teleport-BfhtEng-.js";import"./utils-CD-h--se.js";import"./DialogTitle-M8G0eeQi.js";import{a as s,o as c,s as l,t as u}from"./sheet-Q4E-ReQs.js";import"./AvatarImage-BRo5Ynqa.js";import"./utils-BNDbqo5S.js";import"./RovingFocusGroup-CBpQnJIU.js";import"./RovingFocusItem-IFGVAdWo.js";import"./VisuallyHiddenInput-Dl8XWVKK.js";import{t as d}from"./ComboboxAnchor-BN3k4qc5.js";import"./command-BN5trE8p.js";import{c as f,i as ee,n as p,r as te,s as ne,t as re}from"./ComboboxItem-BM6muphG.js";import{t as ie}from"./ComboboxGroup-CI6zt40a.js";import"./Label-DcDcP2xg.js";import"./ScrollArea-a7Us635q.js";import"./SelectViewport-DjSqcfiH.js";import"./SwitchThumb-CIc-o8Bp.js";import{a as m,i as h,n as g,t as _}from"./tabs-CKY1aMwc.js";import{Bi as v,Br as y,Fa as b,Fi as x,Gi as S,Hi as C,Ia as w,J as T,Ki as E,Li as D,Oa as O,Or as k,Pa as A,Qn as ae,Ra as j,Ui as M,Vi as N,Wi as P,Yi as F,Zi as I,a as oe,b as se,ba as L,ca as R,ha as ce,ia as le,la as z,n as B,o as V,oa as H,qi as U,r as W,rr as ue,ta as G,wi as de}from"./index-BjUg3jag.js";import{n as fe,t as pe}from"./DialogContent-CySezZcW.js";import{n as me,r as he,t as ge}from"./DialogTitle-e5BqIJZN.js";import{t as _e}from"./DialogFooter-69uI-NrU.js";import{t as K}from"./button-CQNRLSov.js";import{t as q}from"./Input-BV5gc40F.js";import{n as J}from"./button-DNrl_4di.js";import{t as Y}from"./BankAccountService-Ca-_F_jI.js";import{t as ve}from"./AccountAssistant-DBUY_b_J.js";import"./Textarea-CGg-7SP9.js";import"./badge-DcWXCUwR.js";import{t as X}from"./Card-DsDGTDjf.js";import{t as ye}from"./Card-CquZdETK.js";import{t as Z}from"./Label-DIj0FDhm.js";import{a as be,i as xe,n as Se,r as Q,t as Ce}from"./SelectValue-Uy-ghrdu.js";import{t as we}from"./badge-4V1aFc6W.js";import{t as $}from"./TransactionService-BMY68IOU.js";var Te=F({__name:`ComboboxEmpty`,props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},setup(e){let t=e,n=f(),r=v(()=>n.ignoreFilter.value?n.allItems.value.size===0:n.filterState.value.count===0);return(e,n)=>r.value?(H(),C(A(y),w(G({key:0},t)),{default:L(()=>[z(e.$slots,`default`,{},()=>[n[0]||=E(`No options`)])]),_:3},16)):M(`v-if`,!0)}}),Ee=F({__name:`DialogTrigger`,props:{asChild:{type:Boolean},as:{}},setup(e){let t=e;return(e,n)=>(H(),C(A(l),w(I(t)),{default:L(()=>[z(e.$slots,`default`)]),_:3},16))}}),De=F({__name:`ComboboxEmpty`,props:{asChild:{type:Boolean},as:{},class:{}},setup(e){let t=e,n=de(t,`class`);return(e,r)=>(H(),C(A(Te),G(A(n),{class:A(k)(`py-6 px-10 text-center text-sm`,t.class)}),{default:L(()=>[z(e.$slots,`default`)]),_:3},16,[`class`]))}}),Oe={class:`grid grid-cols-1 md:grid-cols-3 gap-6 mb-8`},ke={class:`text-2xl font-bold text-slate-800 mt-2`},Ae={class:`text-lg font-semibold text-slate-800 mt-2`},je={class:`space-y-4`},Me={key:0,class:`text-center py-8`},Ne={key:1,class:`text-center py-8 text-gray-500`},Pe={class:`flex items-center gap-3`},Fe={class:`w-10 h-10 rounded-full bg-gray-100 flex items-center justify-center`},Ie={class:`font-medium text-slate-800`},Le={class:`text-xs text-gray-500`},Re={__name:`OverviewTab`,props:{account:{type:Object,required:!0}},setup(e){let t=e,n=O([]),r=O(!0);le(async()=>{await i()});async function i(){try{r.value=!0,n.value=(await $.getTransactions({bankAccountReference:t.account.reference,page:0,size:5,sort:`transactionDate,desc`})).content||[]}catch(e){console.error(`Failed to load recent transactions`,e)}finally{r.value=!1}}function a(e){return e==null?`N/A`:new Intl.NumberFormat(`en-NG`,{style:`currency`,currency:t.account.currency||`NGN`}).format(e)}function o(e){return e?new Date(e).toLocaleDateString(`en-US`,{year:`numeric`,month:`short`,day:`numeric`}):`Never`}function s(e){return`fa-money-bill-wave`}return(t,i)=>(H(),P(`div`,null,[N(`div`,Oe,[U(A(X),{class:`p-6`},{default:L(()=>[i[0]||=N(`h3`,{class:`text-sm font-medium text-gray-500`},`Current Balance`,-1),N(`p`,ke,j(a(e.account?.balance)),1)]),_:1}),U(A(X),{class:`p-6`},{default:L(()=>[i[1]||=N(`h3`,{class:`text-sm font-medium text-gray-500`},`Last Synced`,-1),N(`p`,Ae,j(o(e.account?.lastSyncedAt)),1)]),_:1}),U(A(X),{class:`p-6`},{default:L(()=>[...i[2]||=[N(`h3`,{class:`text-sm font-medium text-gray-500`},`Pending Review`,-1),N(`p`,{class:`text-2xl font-bold text-amber-600 mt-2`},`0`,-1)]]),_:1})]),U(A(X),{class:`p-6`},{default:L(()=>[i[4]||=N(`h3`,{class:`text-lg font-semibold text-slate-800 mb-4`},`Recent Activity`,-1),N(`div`,je,[r.value?(H(),P(`div`,Me,[...i[3]||=[N(`i`,{class:`fa fa-cog animate-spin text-gray-400`},null,-1)]])):n.value.length===0?(H(),P(`div`,Ne,` No recent activity `)):(H(!0),P(D,{key:2},R(n.value,e=>(H(),P(`div`,{key:e.id,class:`flex justify-between items-center py-3 border-b last:border-0`},[N(`div`,Pe,[N(`div`,Fe,[N(`i`,{class:b([`fa text-gray-500`,s(e)])},null,2)]),N(`div`,null,[N(`p`,Ie,j(e.description),1),N(`p`,Le,j(o(e.transactionDate)),1)])]),N(`span`,{class:b([`font-semibold`,e.amount<0?`text-slate-800`:e.type===`DEBIT`?`text-red-600`:`text-green-600`])},j(a(e.amount)),3)]))),128))])]),_:1})]))}},ze=`/org/categories`,Be={getCategories(){return V.get(ze,{organisationAware:!0,authorizeRequest:!0})},createCategory(e){return V.post(ze,{data:e,organisationAware:!0,authorizeRequest:!0})},updateCategory(e,t){return V.put(`${ze}/${e}`,{data:t,organisationAware:!0,authorizeRequest:!0})},deleteCategory(e){return V.delete(`${ze}/${e}`,{organisationAware:!0,authorizeRequest:!0})}},Ve={class:`space-y-6`},He={class:`grid grid-cols-1 md:grid-cols-2 gap-6`},Ue={class:`p-4 border-b flex flex-col md:flex-row justify-between gap-4`},We={class:`flex gap-2 flex-1`},Ge={class:`relative flex-1 max-w-sm`},Ke={class:`flex gap-2`},qe={class:`overflow-x-auto`},Je={class:`w-full text-sm text-left`},Ye={class:`divide-y`},Xe={key:0},Ze={key:1},Qe={class:`px-6 py-4 whitespace-nowrap text-gray-600`},$e={class:`px-6 py-4 font-medium text-slate-800`},et={class:`px-6 py-4`},tt={class:`flex items-center gap-2 p-2`},nt={class:`border-t mt-2 pt-2 px-2`},rt={key:0,class:`text-gray-400 w-4 h-4 flex items-center justify-center`},it={key:1,class:`text-green-500 w-4 h-4 flex items-center justify-center`},at={class:`px-6 py-4 text-center`},ot={class:`p-4 border-t flex justify-between items-center text-sm text-gray-500`},st={class:`flex gap-2`},ct={class:`grid gap-6 py-4`},lt={class:`grid grid-cols-2 gap-4`},ut={class:`space-y-2`},dt={class:`space-y-2`},ft={class:`grid grid-cols-2 gap-4`},pt={class:`space-y-2`},mt={class:`space-y-2`},ht={class:`grid grid-cols-2 gap-4`},gt={class:`space-y-2`},_t={class:`space-y-2`},vt={class:`space-y-2`},yt={class:`grid gap-4 py-4`},bt={class:`space-y-2`},xt={__name:`TransactionsTab`,props:{account:{type:Object,required:!0}},setup(s){let c=s,l=oe().toast,u=O([]),f=O([]),m=O(!0),h=O(``),g=O(0),_=O(20),y=O(0),S=O(!1),w=O(!1),T=O(``),F=O(!1),I=O(null),z=O(!1),B=O({startDate:null,endDate:null,minAmount:null,maxAmount:null,type:`ALL`,status:`ALL`,categoryIds:[]}),V=new e(`en-US`,{dateStyle:`medium`}),W=v({get:()=>B.value.startDate?r(B.value.startDate):void 0,set:e=>{B.value.startDate=e?e.toString():null}}),G=v({get:()=>B.value.endDate?r(B.value.endDate):void 0,set:e=>{B.value.endDate=e?e.toString():null}}),de=v(()=>[...new Set(B.value.categoryIds)]);function J(e){I.value=e,w.value=!0}le(async()=>{await Promise.all([Y(),ve()])}),ce([g,h],()=>{Y()});async function Y(){try{m.value=!0;let e={bankAccountReference:c.account.reference,page:g.value,size:_.value,sort:`transactionDate,desc`,search:h.value};B.value.startDate&&(e.startDate=B.value.startDate),B.value.endDate&&(e.endDate=B.value.endDate),B.value.minAmount&&(e.minAmount=B.value.minAmount),B.value.maxAmount&&(e.maxAmount=B.value.maxAmount),B.value.type&&B.value.type!==`ALL`&&(e.type=B.value.type),B.value.status&&B.value.status!==`ALL`&&(e.status=B.value.status),B.value.categoryIds&&B.value.categoryIds.length>0&&(e.categoryIds=B.value.categoryIds);let t=await $.getTransactions(e);t&&(u.value=(t.content||[]).map(e=>({...e,selectedCategoryId:e.category?.id||null,saving:!1})),y.value=t.totalElements||0)}catch(e){console.error(`Failed to load transactions`,e)}finally{m.value=!1}}async function ve(){try{f.value=await Be.getCategories()||[]}catch(e){console.error(`Failed to load categories`,e)}}async function X(e){let t=e.category?.reference||null;if(e.selectedCategoryId)try{e.saving=!0;let t=await $.categorizeTransaction(e.reference,e.selectedCategoryId);l({title:`Categorized`,description:`Transaction updated successfully`}),t&&t.category&&(e.category=t.category,e.categoryName=t.category.name,e.selectedCategoryId=t.category.reference)}catch(n){console.error(`Failed to categorize transaction`,n),e.selectedCategoryId=t,l({title:`Error`,description:`Failed to categorize transaction`,variant:`destructive`})}finally{e.saving=!1}}async function Te(){try{S.value=!0;let e=await $.autoCategorizeAll();l({title:`Auto-Categorization Started`,description:e.message||`AI is processing your transactions.`}),setTimeout(Y,3e3)}catch{l({title:`Error`,description:`Failed to start auto-categorization`,variant:`destructive`})}finally{S.value=!1}}async function Ee(){if(T.value)try{F.value=!0;let e=await Be.createCategory({name:T.value});f.value.push(e),I.value&&=(I.value.selectedCategoryId=e.reference,await X(I.value),null),w.value=!1,T.value=``,l({title:`Category Created`,description:`${e.name} added successfully`})}catch{l({title:`Error`,description:`Failed to create category`,variant:`destructive`})}finally{F.value=!1}}function Oe(){Y()}function ke(){g.value=0,z.value=!1,Y()}function Ae(){B.value={startDate:null,endDate:null,minAmount:null,maxAmount:null,type:`ALL`,status:`ALL`,categoryIds:[]},ke()}function je(e){let t=B.value.categoryIds.indexOf(e);t!==-1&&B.value.categoryIds.splice(t,1)}function Me(e){return e==null?`N/A`:new Intl.NumberFormat(`en-NG`,{style:`currency`,currency:c.account.currency||`NGN`}).format(e)}function Ne(e){return e?new Date(e).toLocaleDateString(`en-US`,{year:`numeric`,month:`short`,day:`numeric`}):`N/A`}function Pe(e){return{APPROVED:`default`,PENDING_REVIEW:`warning`,REJECTED:`destructive`}[e]||`secondary`}return(e,r)=>(H(),P(`div`,Ve,[N(`div`,He,[U(A(ye),{class:`p-6 flex items-center justify-between`},{default:L(()=>[r[15]||=N(`div`,null,[N(`h3`,{class:`text-lg font-semibold text-slate-800`},`AI Auto-Categorization`),N(`p`,{class:`text-gray-500 text-sm`},`Automatically assign categories to transactions using AI.`)],-1),U(A(K),{onClick:Te,disabled:S.value},{default:L(()=>[N(`i`,{class:b([`fa mr-2`,S.value?`fa-cog animate-spin`:`fa-magic`])},null,2),E(` `+j(S.value?`Processing...`:`Auto-Categorize All`),1)]),_:1},8,[`disabled`])]),_:1})]),U(A(ye),{class:`p-0 overflow-hidden`},{default:L(()=>[N(`div`,Ue,[N(`div`,We,[N(`div`,Ge,[r[16]||=N(`i`,{class:`fa fa-search absolute left-3 top-1/2 -translate-y-1/2 text-gray-400`},null,-1),U(A(q),{modelValue:h.value,"onUpdate:modelValue":r[0]||=e=>h.value=e,placeholder:`Search transactions...`,class:`pl-9 rounded-full`},null,8,[`modelValue`])]),U(A(K),{variant:`outline`,class:`rounded-full`,onClick:r[1]||=e=>z.value=!0},{default:L(()=>[...r[17]||=[N(`i`,{class:`fa fa-filter mr-2`},null,-1),E(` Filter `,-1)]]),_:1})]),N(`div`,Ke,[U(A(K),{variant:`outline`,class:`rounded-full`,onClick:Oe},{default:L(()=>[N(`i`,{class:b([`fa fa-sync-alt`,{"animate-spin":m.value}])},null,2)]),_:1})])]),N(`div`,qe,[N(`table`,Je,[r[23]||=N(`thead`,{class:`bg-gray-50 text-gray-600 font-medium border-b`},[N(`tr`,null,[N(`th`,{class:`px-6 py-3`},`Date`),N(`th`,{class:`px-6 py-3`},`Description`),N(`th`,{class:`px-6 py-3`},`Category`),N(`th`,{class:`px-6 py-3 text-right`},`Amount`),N(`th`,{class:`px-6 py-3 text-center`},`Status`)])],-1),N(`tbody`,Ye,[m.value&&u.value.length===0?(H(),P(`tr`,Xe,[...r[18]||=[N(`td`,{colspan:`5`,class:`px-6 py-12 text-center text-gray-500`},[N(`i`,{class:`fa fa-cog animate-spin mr-2`}),E(` Loading transactions... `)],-1)]])):u.value.length===0?(H(),P(`tr`,Ze,[...r[19]||=[N(`td`,{colspan:`5`,class:`px-6 py-12 text-center text-gray-500`},` No transactions found `,-1)]])):M(``,!0),(H(!0),P(D,null,R(u.value,e=>(H(),P(`tr`,{key:e.id,class:`hover:bg-gray-50 transition-colors`},[N(`td`,Qe,j(Ne(e.transactionDate)),1),N(`td`,$e,j(e.description),1),N(`td`,et,[N(`div`,tt,[U(A(te),{"model-value":e.selectedCategoryId,"onUpdate:modelValue":t=>{e.selectedCategoryId=t,X(e)},class:`relative w-full max-w-xs`},{default:L(()=>[U(A(ee),{class:`w-full`},{default:L(()=>[U(A(p),{class:`rounded-full w-full shadow-none border-stone-100 bg-stone-50 focus:bg-white mt-1 text-xs`,placeholder:e.categoryName||`Select category...`,"display-value":e=>f.value.find(t=>t.reference===e)?.name||``},null,8,[`placeholder`,`display-value`])]),_:2},1024),U(A(ne),{class:`absolute bg-white z-50 border rounded-sm mt-1 px-2 py-3 max-h-[200px] overflow-y-auto w-full min-w-[200px]`},{default:L(()=>[(H(!0),P(D,null,R(f.value,e=>(H(),C(A(re),{key:e.reference,value:e.reference,class:`px-4 py-2 rounded-full cursor-pointer hover:bg-gray-100 text-xs`},{default:L(()=>[E(j(e.name),1)]),_:2},1032,[`value`]))),128)),N(`div`,nt,[U(A(K),{variant:`ghost`,size:`sm`,class:`w-full justify-start text-blue-600 rounded-full`,onClick:x(t=>J(e),[`stop`])},{default:L(()=>[...r[20]||=[N(`i`,{class:`fa fa-plus mr-2`},null,-1),E(` Create New `,-1)]]),_:1},8,[`onClick`])])]),_:2},1024)]),_:2},1032,[`model-value`,`onUpdate:modelValue`]),e.saving?(H(),P(`div`,rt,[...r[21]||=[N(`i`,{class:`fa fa-cog animate-spin text-xs`},null,-1)]])):e.selectedCategoryId&&e.selectedCategoryId===e.category?.id?(H(),P(`div`,it,[...r[22]||=[N(`i`,{class:`fa fa-check text-xs`},null,-1)]])):M(``,!0)])]),N(`td`,{class:b([`px-6 py-4 text-right font-semibold`,e.amount<0?`text-slate-800`:e.type==`DEBIT`?`text-red-800`:`text-green-700`])},j(Me(e.amount)),3),N(`td`,at,[U(A(we),{variant:Pe(e.status),class:`rounded-full text-xs`},{default:L(()=>[E(j(e.status),1)]),_:2},1032,[`variant`])])]))),128))])])]),N(`div`,ot,[N(`span`,null,`Showing `+j(g.value*_.value+1)+` to `+j(Math.min((g.value+1)*_.value,y.value))+` of `+j(y.value)+` results`,1),N(`div`,st,[U(A(K),{variant:`outline`,size:`sm`,disabled:g.value===0,onClick:r[2]||=e=>g.value--},{default:L(()=>[...r[24]||=[E(` Previous `,-1)]]),_:1},8,[`disabled`]),U(A(K),{variant:`outline`,size:`sm`,disabled:(g.value+1)*_.value>=y.value,onClick:r[3]||=e=>g.value++},{default:L(()=>[...r[25]||=[E(` Next `,-1)]]),_:1},8,[`disabled`])])])]),_:1}),U(A(fe),{open:z.value,"onUpdate:open":r[11]||=e=>z.value=e},{default:L(()=>[U(A(pe),{class:`sm:max-w-[500px]`},{default:L(()=>[U(A(me),null,{default:L(()=>[U(A(ge),null,{default:L(()=>[...r[26]||=[E(`Filter Transactions`,-1)]]),_:1}),U(A(he),null,{default:L(()=>[...r[27]||=[E(`Refine your transaction list.`,-1)]]),_:1})]),_:1}),N(`div`,ct,[N(`div`,lt,[N(`div`,ut,[U(A(Z),null,{default:L(()=>[...r[28]||=[E(`Start Date`,-1)]]),_:1}),U(A(i),null,{default:L(()=>[U(A(o),{"as-child":``},{default:L(()=>[U(A(K),{variant:`outline`,class:b(A(k)(`w-full justify-start text-left font-normal rounded-full`,!W.value&&`text-muted-foreground`))},{default:L(()=>[U(A(ue),{class:`mr-2 h-4 w-4`}),E(` `+j(W.value?A(V).format(W.value.toDate(A(a)())):`Pick a date`),1)]),_:1},8,[`class`])]),_:1}),U(A(n),{class:`w-auto p-0`},{default:L(()=>[U(A(t),{modelValue:W.value,"onUpdate:modelValue":r[4]||=e=>W.value=e,"initial-focus":``},null,8,[`modelValue`])]),_:1})]),_:1})]),N(`div`,dt,[U(A(Z),null,{default:L(()=>[...r[29]||=[E(`End Date`,-1)]]),_:1}),U(A(i),null,{default:L(()=>[U(A(o),{"as-child":``},{default:L(()=>[U(A(K),{variant:`outline`,class:b(A(k)(`w-full justify-start text-left font-normal rounded-full`,!G.value&&`text-muted-foreground`))},{default:L(()=>[U(A(ue),{class:`mr-2 h-4 w-4`}),E(` `+j(G.value?A(V).format(G.value.toDate(A(a)())):`Pick a date`),1)]),_:1},8,[`class`])]),_:1}),U(A(n),{class:`w-auto p-0`},{default:L(()=>[U(A(t),{modelValue:G.value,"onUpdate:modelValue":r[5]||=e=>G.value=e,"initial-focus":``},null,8,[`modelValue`])]),_:1})]),_:1})])]),N(`div`,ft,[N(`div`,pt,[U(A(Z),null,{default:L(()=>[...r[30]||=[E(`Min Amount`,-1)]]),_:1}),U(A(q),{type:`number`,modelValue:B.value.minAmount,"onUpdate:modelValue":r[6]||=e=>B.value.minAmount=e,placeholder:`0.00`,class:`rounded-full`},null,8,[`modelValue`])]),N(`div`,mt,[U(A(Z),null,{default:L(()=>[...r[31]||=[E(`Max Amount`,-1)]]),_:1}),U(A(q),{type:`number`,modelValue:B.value.maxAmount,"onUpdate:modelValue":r[7]||=e=>B.value.maxAmount=e,placeholder:`∞`,class:`rounded-full`},null,8,[`modelValue`])])]),N(`div`,ht,[N(`div`,gt,[U(A(Z),null,{default:L(()=>[...r[32]||=[E(`Type`,-1)]]),_:1}),U(A(be),{modelValue:B.value.type,"onUpdate:modelValue":r[8]||=e=>B.value.type=e},{default:L(()=>[U(A(Se),{class:`rounded-full`},{default:L(()=>[U(A(Ce),{placeholder:`All`})]),_:1}),U(A(xe),null,{default:L(()=>[U(A(Q),{value:`ALL`},{default:L(()=>[...r[33]||=[E(`All`,-1)]]),_:1}),U(A(Q),{value:`DEBIT`},{default:L(()=>[...r[34]||=[E(`Debit`,-1)]]),_:1}),U(A(Q),{value:`CREDIT`},{default:L(()=>[...r[35]||=[E(`Credit`,-1)]]),_:1})]),_:1})]),_:1},8,[`modelValue`])]),N(`div`,_t,[U(A(Z),null,{default:L(()=>[...r[36]||=[E(`Status`,-1)]]),_:1}),U(A(be),{modelValue:B.value.status,"onUpdate:modelValue":r[9]||=e=>B.value.status=e},{default:L(()=>[U(A(Se),{class:`rounded-full`},{default:L(()=>[U(A(Ce),{placeholder:`All`})]),_:1}),U(A(xe),null,{default:L(()=>[U(A(Q),{value:`ALL`},{default:L(()=>[...r[37]||=[E(`All`,-1)]]),_:1}),U(A(Q),{value:`APPROVED`},{default:L(()=>[...r[38]||=[E(`Approved`,-1)]]),_:1}),U(A(Q),{value:`PENDING_REVIEW`},{default:L(()=>[...r[39]||=[E(`Pending Review`,-1)]]),_:1}),U(A(Q),{value:`REJECTED`},{default:L(()=>[...r[40]||=[E(`Rejected`,-1)]]),_:1})]),_:1})]),_:1},8,[`modelValue`])])]),N(`div`,vt,[U(A(Z),null,{default:L(()=>[...r[41]||=[E(`Categories`,-1)]]),_:1}),U(A(te),{modelValue:B.value.categoryIds,"onUpdate:modelValue":r[10]||=e=>B.value.categoryIds=e,multiple:``},{default:L(()=>[U(A(d),{class:`flex h-auto min-h-10 w-full flex-wrap items-center justify-start gap-1 rounded-full border bg-transparent px-3 py-2 text-sm shadow-sm ring-offset-background placeholder:text-muted-foreground focus-within:ring-0 focus-within:ring-ring focus-within:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50`},{default:L(()=>[(H(!0),P(D,null,R(de.value,e=>(H(),C(A(we),{key:e,variant:`outline`,class:`rounded-full px-2 py-0.5 text-xs flex items-center bg-white gap-1`},{default:L(()=>[E(j(f.value.find(t=>t.reference===e)?.name)+` `,1),U(A(se),{class:`h-3 w-3 cursor-pointer hover:text-red-500`,onClick:x(t=>je(e),[`stop`])},null,8,[`onClick`])]),_:2},1024))),128)),U(A(p),{class:`flex-1 h-6 min-w-[100px] border-none shadow-none focus-visible:ring-0 p-0 text-sm bg-transparent placeholder:text-muted-foreground`,placeholder:`Select categories...`})]),_:1}),U(A(ne),{class:`z-50 min-w-[200px] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md`},{default:L(()=>[U(A(De),null,{default:L(()=>[...r[42]||=[E(`No category found.`,-1)]]),_:1}),U(A(ie),null,{default:L(()=>[(H(!0),P(D,null,R(f.value,e=>(H(),C(A(re),{key:e.reference,value:e.reference,class:`cursor-pointer select-none rounded-sm px-2 py-1.5 text-sm outline-none data-[highlighted]:bg-accent data-[highlighted]:text-accent-foreground`},{default:L(()=>[E(j(e.name)+` `,1),U(A(ae),{class:b(A(k)(`mr-2 h-4 w-4`,B.value.categoryIds.includes(e.reference)?`opacity-100`:`opacity-0`))},null,8,[`class`])]),_:2},1032,[`value`]))),128))]),_:1})]),_:1})]),_:1},8,[`modelValue`])])]),U(A(_e),{class:`gap-2`},{default:L(()=>[U(A(K),{variant:`ghost`,onClick:Ae,class:`rounded-full`},{default:L(()=>[...r[43]||=[E(`Clear Filters`,-1)]]),_:1}),U(A(K),{onClick:ke,class:`rounded-full`},{default:L(()=>[...r[44]||=[E(`Apply`,-1)]]),_:1})]),_:1})]),_:1})]),_:1},8,[`open`]),U(A(fe),{open:w.value,"onUpdate:open":r[14]||=e=>w.value=e},{default:L(()=>[U(A(pe),{class:`sm:max-w-[425px]`},{default:L(()=>[U(A(me),null,{default:L(()=>[U(A(ge),null,{default:L(()=>[...r[45]||=[E(`Create New Category`,-1)]]),_:1}),U(A(he),null,{default:L(()=>[...r[46]||=[E(`Add a new category for your transactions.`,-1)]]),_:1})]),_:1}),N(`div`,yt,[N(`div`,bt,[U(A(Z),null,{default:L(()=>[...r[47]||=[E(`Name`,-1)]]),_:1}),U(A(q),{modelValue:T.value,"onUpdate:modelValue":r[12]||=e=>T.value=e,placeholder:`e.g., Office Supplies`,class:`rounded-full`},null,8,[`modelValue`])])]),U(A(_e),null,{default:L(()=>[U(A(K),{variant:`outline`,onClick:r[13]||=e=>w.value=!1,class:`rounded-full`},{default:L(()=>[...r[48]||=[E(`Cancel`,-1)]]),_:1}),U(A(K),{onClick:Ee,disabled:F.value,class:`rounded-full`},{default:L(()=>[E(j(F.value?`Creating...`:`Create`),1)]),_:1},8,[`disabled`])]),_:1})]),_:1})]),_:1},8,[`open`])]))}},St={class:`p-6`},Ct={class:`mb-8 text-center`},wt={class:`text-gray-500 text-sm`},Tt={key:0,class:`grid grid-cols-1 md:grid-cols-2 gap-4`},Et={key:1,class:`mt-6 text-center`},Dt={key:2,class:`space-y-6`},Ot={class:`flex justify-between`},kt={key:3,class:`text-center py-12`},At={key:4,class:`space-y-6 text-center`},jt={__name:`UploadWizard`,props:{account:{type:Object,required:!0}},emits:[`upload-complete`,`close`],setup(e,{emit:t}){let n=e,r=t,i=oe().toast,a=O(1),o=O(null),s=O(null);function c(e){o.value=e,e===`file`?a.value=2:i({title:`Coming Soon`,description:`Bank API integration will be available shortly.`,variant:`secondary`})}function l(){s.value.click()}function u(e){let t=e.target.files[0];t&&f(t)}function d(e){let t=e.dataTransfer.files[0];t&&f(t)}async function f(e){a.value=3;try{await $.uploadTransactionFile(n.account.reference,e),a.value=4,i({title:`Upload Complete`,description:`File uploaded successfully.`,variant:`success`})}catch{a.value=2,i({title:`Upload Failed`,description:`Failed to upload file.`,variant:`destructive`})}}function ee(){r(`upload-complete`),setTimeout(()=>{a.value=1,o.value=null},500)}return(t,n)=>(H(),P(`div`,St,[N(`div`,Ct,[n[5]||=N(`h2`,{class:`text-xl font-semibold text-slate-800`},`Sync Transactions`,-1),N(`p`,wt,`Choose how you want to import transactions into `+j(e.account?.accountName||`this account`),1)]),a.value===1?(H(),P(`div`,Tt,[U(A(X),{class:b([`p-6 cursor-pointer hover:border-blue-500 transition-all border-2`,o.value===`file`?`border-blue-500 bg-blue-50`:`border-transparent hover:bg-slate-50`]),onClick:n[0]||=e=>c(`file`)},{default:L(()=>[...n[6]||=[N(`div`,{class:`flex flex-col items-center text-center gap-3`},[N(`div`,{class:`h-12 w-12 rounded-full bg-blue-100 flex items-center justify-center text-blue-600`},[N(`i`,{class:`fa fa-file-upload text-xl`})]),N(`div`,null,[N(`h3`,{class:`font-medium text-slate-800`},`Upload File`),N(`p`,{class:`text-xs text-gray-500 mt-1`},`PDF, CSV, or Excel bank statements`)])],-1)]]),_:1},8,[`class`]),U(A(X),{class:b([`p-6 cursor-pointer hover:border-yellow-500 transition-all border-2`,o.value===`api`?`border-yellow-500 bg-yellow-50`:`border-transparent hover:bg-slate-50`]),onClick:n[1]||=e=>c(`api`)},{default:L(()=>[...n[7]||=[N(`div`,{class:`flex flex-col items-center text-center gap-3`},[N(`div`,{class:`h-12 w-12 rounded-full bg-yellow-100 flex items-center justify-center text-yellow-600`},[N(`i`,{class:`fa fa-university text-xl`})]),N(`div`,null,[N(`h3`,{class:`font-medium text-slate-800`},`Connect Bank API`),N(`p`,{class:`text-xs text-gray-500 mt-1`},`Mono, Flutterwave, Paystack`)])],-1)]]),_:1},8,[`class`])])):M(``,!0),a.value===1?(H(),P(`div`,Et,[U(A(J),{variant:`ghost`,onClick:n[2]||=e=>t.$emit(`close`)},{default:L(()=>[...n[8]||=[E(`Cancel`,-1)]]),_:1})])):M(``,!0),a.value===2&&o.value===`file`?(H(),P(`div`,Dt,[N(`div`,{class:`border-2 shadow-md border-gray-300 rounded-lg p-12 text-center hover:bg-gray-50 transition-colors cursor-pointer`,onDragover:n[3]||=x(()=>{},[`prevent`]),onDrop:x(d,[`prevent`]),onClick:l},[N(`input`,{type:`file`,ref_key:`fileInput`,ref:s,class:`hidden`,onChange:u,accept:`.csv,.xlsx,.xls,.pdf`},null,544),n[9]||=N(`i`,{class:`fa fa-cloud-upload-alt text-5xl text-blue-100 mb-4`},null,-1),n[10]||=N(`h3`,{class:`text-lg font-medium text-slate-700`},`Click or drag file to upload`,-1),n[11]||=N(`p`,{class:`text-sm text-gray-500 mt-2`},`Supported formats: CSV, Excel, PDF`,-1)],32),N(`div`,Ot,[U(A(J),{variant:`ghost`,onClick:n[4]||=e=>a.value=1},{default:L(()=>[...n[12]||=[E(`Back`,-1)]]),_:1})])])):M(``,!0),a.value===3?(H(),P(`div`,kt,[...n[13]||=[S(`<div class="relative w-24 h-24 mx-auto mb-6"><div class="absolute inset-0 border-4 border-gray-100 rounded-full"></div><div class="absolute inset-0 border-4 border-blue-500 rounded-full border-t-transparent animate-spin"></div><i class="fa fa-magic absolute inset-0 flex items-center justify-center text-blue-500 text-2xl"></i></div><h3 class="text-lg font-medium text-slate-800">Processing...</h3><p class="text-gray-500 mt-2">Uploading and analyzing your transaction file.</p>`,3)]])):M(``,!0),a.value===4?(H(),P(`div`,At,[n[15]||=N(`div`,{class:`bg-green-50 text-green-700 p-6 rounded-full w-20 h-20 mx-auto flex items-center justify-center`},[N(`i`,{class:`fa fa-check text-3xl`})],-1),n[16]||=N(`div`,null,[N(`h3`,{class:`text-xl font-semibold text-slate-800`},`Upload Successful!`),N(`p`,{class:`text-gray-500 mt-2`},`Your transactions are being processed in the background.`)],-1),U(A(J),{onClick:ee,class:`w-full md:w-auto min-w-[200px]`},{default:L(()=>[...n[14]||=[E(`View Transactions`,-1)]]),_:1})])):M(``,!0)]))}},Mt={__name:`ReviewQueue`,props:{account:{type:Object,required:!0}},setup(e){return(e,t)=>(H(),C(A(X),{class:`p-0 overflow-hidden`},{default:L(()=>[...t[0]||=[N(`div`,{class:`p-6 border-b`},[N(`h2`,{class:`text-lg font-semibold text-slate-800`},`Review Queue`),N(`p`,{class:`text-gray-500 text-sm`},`Transactions flagged for manual review (low confidence).`)],-1),N(`div`,{class:`text-center py-12 text-gray-500`},[N(`i`,{class:`fa fa-check-double text-4xl text-gray-200 mb-4`}),N(`p`,null,`No items in review queue`),N(`p`,{class:`text-xs mt-1`},`Great job! All transactions are processed.`)],-1)]]),_:1}))}},Nt={class:`relative w-full min-h-screen overflow-y-scroll rounded-sm py-5`,style:{"scrollbar-width":`none`}},Pt={class:`container mx-auto p-8 relative`},Ft={class:`flex flex-col md:flex-row justify-between items-start md:items-center gap-4 mb-8`},It={class:`flex flex-col`},Lt={class:`text-2xl font-bold text-slate-800 flex items-center gap-2`},Rt={class:`text-gray-600 text-sm`},zt={class:`flex gap-3 w-full md:w-auto`},Bt={class:`min-h-[400px]`},Vt={key:0,class:`flex justify-center items-center h-64`},Ht={class:`mb-6 z-0 relative`},Ut={__name:`AccountDashboard`,setup(e){let t=B(),n=W(),r=oe().toast,i=t.params.reference,a=O(null),o=O(!0),l=O(!1),d=O(`overview`),f=O(0),ee=[{id:`overview`,name:`Overview`,icon:`fa-chart-pie`},{id:`transactions`,name:`Transactions`,icon:`fa-list`},{id:`review`,name:`Review Queue`,icon:`fa-tasks`},{id:`settings`,name:`Settings`,icon:`fa-cog`}];le(async()=>{await p()});async function p(){try{if(o.value=!0,a.value=((await Y.getBankAccounts()).data||[]).find(e=>e.reference===i),!a.value)throw Error(`Account not found`)}catch{r({id:`load-error`,title:`Error`,description:`Failed to load account details`,variant:`destructive`}),n.push(`/accounts`)}finally{o.value=!1}}function te(){l.value=!1,d.value=`transactions`,p(),f.value++}function ne(e){return e?`****${e.slice(-4)}`:`N/A`}return(e,t)=>(H(),P(`div`,Nt,[N(`div`,Pt,[N(`div`,Ft,[N(`div`,It,[N(`h1`,Lt,j(a.value?.accountName||`Loading...`),1),N(`p`,Rt,j(a.value?.bankName)+` • `+j(ne(a.value?.accountNumber)),1)]),N(`div`,zt,[U(A(fe),{open:l.value,"onUpdate:open":t[1]||=e=>l.value=e},{default:L(()=>[U(A(Ee),{"as-child":``},{default:L(()=>[U(A(J),{variant:`outline`,class:`rounded-full flex-1 md:flex-none`,disabled:!a.value},{default:L(()=>[...t[3]||=[N(`i`,{class:`fa fa-sync mr-2`},null,-1),E(` Sync `,-1)]]),_:1},8,[`disabled`])]),_:1}),U(A(pe),{class:`max-w-3xl p-0`},{default:L(()=>[U(jt,{account:a.value,onUploadComplete:te,onClose:t[0]||=e=>l.value=!1},null,8,[`account`])]),_:1})]),_:1},8,[`open`]),U(A(c),null,{default:L(()=>[U(A(u),{"as-child":``},{default:L(()=>[U(A(J),{class:`rounded-full flex-1 md:flex-none shadow-md hover:shadow-blue-400`},{default:L(()=>[U(A(T),{class:`mr-2 h-4 w-4 text-blue-200`}),t[4]||=E(` Flow `,-1)]),_:1})]),_:1}),U(A(s),{class:`w-[400px] sm:w-[540px] p-0 border-l shadow-2xl`},{default:L(()=>[U(ve,{account:a.value},null,8,[`account`])]),_:1})]),_:1})])]),N(`div`,Bt,[o.value?(H(),P(`div`,Vt,[...t[5]||=[N(`i`,{class:`fa fa-cog animate-spin text-3xl text-gray-400`},null,-1)]])):(H(),C(A(m),{key:1,modelValue:d.value,"onUpdate:modelValue":t[2]||=e=>d.value=e,class:`w-full`},{default:L(()=>[N(`div`,Ht,[t[6]||=N(`hr`,{class:`h-1 bg-slate-50 mb-1 mt-10 opacity-20`},null,-1),U(A(g),{class:`rounded-full bg-stone-100 text-blue-950 px-0.5 py-0.5 w-fit`},{default:L(()=>[(H(),P(D,null,R(ee,e=>U(A(_),{key:e.id,value:e.id,class:`px-4 py-1 rounded-full data-[state=active]:bg-stone-50 data-[state=active]:text-blue-950 transition-all`},{default:L(()=>[N(`i`,{class:b([`fa mr-2`,e.icon])},null,2),E(` `+j(e.name),1)]),_:2},1032,[`value`])),64))]),_:1}),t[7]||=N(`hr`,{class:`h-1 bg-slate-50 mt-2 mb-10 opacity-30`},null,-1)]),U(A(h),{value:`overview`,class:``},{default:L(()=>[U(Re,{account:a.value},null,8,[`account`])]),_:1}),U(A(h),{value:`transactions`,class:``},{default:L(()=>[(H(),C(xt,{account:a.value,key:f.value},null,8,[`account`]))]),_:1}),U(A(h),{value:`review`,class:``},{default:L(()=>[U(Mt,{account:a.value},null,8,[`account`])]),_:1}),U(A(h),{value:`settings`,class:``},{default:L(()=>[...t[8]||=[N(`div`,{class:`p-8 text-center text-gray-500 bg-slate-50 rounded-lg border shadow-md`},[N(`i`,{class:`fa fa-cog text-4xl mb-4 text-gray-300`}),N(`p`,null,`Settings coming soon`)],-1)]]),_:1})]),_:1},8,[`modelValue`]))])])]))}};export{Ut as default};