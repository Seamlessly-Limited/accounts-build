import{A as e,D as t,M as n,V as r,X as i,Y as a,dt as o,st as s,v as c}from"./index-4ZmatjLT.js";import{n as l}from"./VisuallyHidden-BMoChTfG.js";import{r as u}from"./dist-1hay9DAo.js";var d=`data-reka-collection-item`;function f(f={}){let{key:p=``,isProvider:m=!1}=f,h=`${p}CollectionProvider`,g;if(m){let e=o(new Map);g={collectionRef:o(),itemMap:e},r(h,g)}else g=n(h);let _=(e=!1)=>{let t=g.collectionRef.value;if(!t)return[];let n=Array.from(t.querySelectorAll(`[${d}]`)),r=Array.from(g.itemMap.value.values()).sort((e,t)=>n.indexOf(e.ref)-n.indexOf(t.ref));return e?r:r.filter(e=>e.ref.dataset.disabled!==``)},v=t({name:`CollectionSlot`,setup(t,{slots:n}){let{primitiveElement:r,currentElement:i}=l();return a(i,()=>{g.collectionRef.value=i.value}),()=>e(u,{ref:r},n)}}),y=t({name:`CollectionItem`,inheritAttrs:!1,props:{value:{validator:()=>!0}},setup(t,{slots:n,attrs:r}){let{primitiveElement:a,currentElement:o}=l();return i(e=>{if(o.value){let n=s(o.value);g.itemMap.value.set(n,{ref:o.value,value:t.value}),e(()=>g.itemMap.value.delete(n))}}),()=>e(u,{...r,[d]:``,ref:a},n)}}),b=c(()=>Array.from(g.itemMap.value.values())),x=c(()=>g.itemMap.value.size);return{getItems:_,reactiveItems:b,itemMapSize:x,CollectionSlot:v,CollectionItem:y}}export{f as t};