import"./useFormControl-BWOmmYiS.js";import"./useNonce-VOgClyGr.js";import"./nullish-CfjOSA4G.js";import"./CheckboxIndicator-Blzh6aVh.js";import"./ConfigProvider-BwNXqMge.js";import"./useHideOthers-C416Re6d.js";import"./useDirection-DYJPYRsI.js";import"./PopperAnchor-BHV4Kv-d.js";import"./useId-BEfc-0Pq.js";import"./PopperContent-DYn2KUeQ.js";import"./useTypeahead-b61J-STi.js";import"./DialogPortal-913ieDuk.js";import"./Teleport-DrGXNRYb.js";import"./utils-BEsFB3CI.js";import"./DialogTitle-BUR1zqy5.js";import"./utils-DlRpuNf9.js";import"./RovingFocusGroup-DqYe3043.js";import"./RovingFocusItem-DGQRTR_g.js";import"./VisuallyHiddenInput-DK27W3yR.js";import"./Label-BycvDR_g.js";import"./SelectViewport-BKt93lbc.js";import{a as e,i as t,n,t as r}from"./tabs-BK26r2nl.js";import{At as ee,Bi as te,F as i,Fa as a,Hi as o,Ki as s,Li as c,N as ne,Oa as l,Pa as u,Pi as re,Q as ie,Ra as d,Ui as f,Vi as p,Wi as m,Zt as ae,a as oe,ba as h,ca as g,dt as se,ia as ce,mt as le,na as ue,nt as de,o as _,oa as v,qi as y,sr as fe,zt as b}from"./index-CTHZVx0Q.js";import{n as pe,t as x}from"./DialogContent-DBDLd1Cs.js";import{n as S,r as C,t as w}from"./DialogTitle-DU64UNVg.js";import{t as T}from"./DialogFooter-CdocHGcF.js";import{t as E}from"./button-DTHLpYkO.js";import{t as D}from"./Input-lhwdatZg.js";import{t as me}from"./Card-jzahid1F.js";import{t as O}from"./Label-MW7QlMSj.js";import{a as k,i as A,n as j,r as M,t as N}from"./SelectValue-DoC6zE2e.js";import{t as he}from"./Checkbox-CZRPDl7O.js";import{t as ge}from"./ComplianceService-D0KtZ3gW.js";var _e={class:`container mx-auto py-5 relative`},ve={class:`flex justify-center`},ye={class:`w-full p-8 space-y-6 shadow-none border-none bg-transparent rounded-2xl min-h-[80vh]`},be={class:`flex flex-col sm:flex-row sm:justify-between w-full`},xe={class:`flex gap-2 mt-4`},Se={class:`grid grid-cols-1 lg:grid-cols-3 gap-6`},Ce={class:`lg:col-span-2`},we={class:`flex items-center gap-2 mb-4`},Te={class:`flex gap-2`},Ee={class:`lg:col-span-1`},De={class:`space-y-4`},Oe={class:`space-y-2`},ke={class:`space-y-2`},Ae={class:`space-y-2`},je={class:`pt-2`},Me={class:`p-4 bg-blue-50/50 rounded-xl border border-blue-100 mt-4`},Ne={class:`flex gap-3`},Pe={key:0,class:`flex justify-center py-8`},Fe={key:1,class:`text-center py-8`},Ie={key:2,class:`space-y-2`},Le={class:`flex items-center gap-3`},Re={class:`font-medium text-sm text-slate-700`},ze={class:`text-xs text-slate-500`},Be={key:0,class:`flex justify-center py-8`},Ve={key:1,class:`text-center py-8`},He={key:2,class:`space-y-2`},Ue={class:`flex items-center gap-3`},We={class:`font-medium text-sm text-slate-700`},Ge={class:`text-xs text-slate-500`},Ke={class:`space-y-4`},qe={class:`text-xs font-bold text-slate-400 uppercase mb-2`},Je={class:`space-y-2`},Ye=[`onClick`],Xe={class:`font-medium text-sm text-slate-700`},Ze={class:`text-[10px] text-slate-500 line-clamp-1`},Qe={class:`space-y-4 py-4`},$e={class:`space-y-2`},et={class:`space-y-2`},tt={class:`space-y-2`},nt={class:`space-y-2`},rt={class:`space-y-4 py-4`},it={class:`space-y-2`},at={class:`space-y-2`},ot={class:`space-y-2`},st={key:0,class:`text-xs text-amber-600`},ct={class:`space-y-2`},lt={class:`space-y-2`},ut={class:`bg-amber-50 border border-amber-200 border-solid rounded-md p-4`},dt={class:`flex items-start gap-3`},ft={class:`text-sm text-amber-800`},pt={class:`font-medium`},mt={__name:`TaxJurisdiction`,setup(mt){let P=oe().toast,ht=l(`kyc`),F=l([]),I=l([]),L=l(!1),R=l(!1),z=l(!1),B=l(!1),V=l(!1),H=l({nationalTaxId:``,stateTaxId:``,businessRegId:``,notes:``}),gt=l([]),_t=l(null),U=l(!1),W=l(!1),G=l(!1),K=l(null),q=l(!1),J=l({authority_name:``,authority_code:``,jurisdiction_level:`Federal`,country:`Nigeria`,is_active:!0}),Y=l({policy_name:``,policy_code:``,tax_authority:``,rate:null,applies_to:`All`,is_active:!0}),X=l(``),Z=l(null),Q=l([{isBot:!0,text:`Welcome! I'm here to help you set up your tax jurisdiction. The first phase is KYC (Know Your Customer) registration.`},{isBot:!0,text:`Please ensure your National Tax Identifier (TIN) and Business Registration number are correctly entered in the KYC tab.`},{isBot:!0,text:`Once registration is complete, we can move on to adding Tax Authorities and configuring your VAT/WHT policies.`}]),vt=te(()=>{let e={};return gt.value.forEach(t=>{let n=t.policyLevel||`federal`;e[n]||(e[n]=[]),e[n].push(t)}),e});async function yt(){try{let e=await ge.getRegistration();e&&Object.assign(H.value,e)}catch(e){console.error(`Failed to load registration:`,e)}}async function bt(){try{gt.value=await ge.getFrameworks()}catch(e){console.error(`Failed to load frameworks:`,e)}}async function xt(){V.value=!0;try{await ge.updateRegistration(H.value),P({message:`Compliance credentials updated successfully`,variant:`success`}),Q.value.push({isBot:!0,text:`Great! Your registration details are saved. Now let's look at your Tax Authorities. Would you like to add FIRS now?`}),ht.value=`authorities`,$()}catch{P({title:`Failed to save`,message:``,variant:`error`})}finally{V.value=!1}}function St(e){_t.value=e,Q.value.push({isBot:!0,text:`Viewing framework: ${e.name}. ${e.longDescription}`}),$()}async function Ct(){L.value=!0;try{F.value=(await _.get(`/org/doc/TaxAuthority`,{authorizeRequest:!0,organisationAware:!0}))?.data?.content||[]}catch(e){console.error(`Failed to load authorities:`,e),F.value=[]}finally{L.value=!1}}async function wt(){R.value=!0;try{I.value=(await _.get(`/org/doc/TaxPolicy`,{authorizeRequest:!0,organisationAware:!0}))?.data?.content||[]}catch(e){console.error(`Failed to load policies:`,e),I.value=[]}finally{R.value=!1}}async function Tt(){z.value=!0;try{let e=await _.post(`/org/doc/TaxAuthority`,{data:J.value,authorizeRequest:!0,organisationAware:!0});e?.data?.name?F.value.push(e.data):await Ct(),U.value=!1,Pt(),P({message:`Tax authority added successfully`,variant:`success`})}catch{P({title:`Failed to add authority`,message:``,variant:`error`})}finally{z.value=!1}}async function Et(){B.value=!0;try{let e=await _.post(`/org/doc/TaxPolicy`,{data:Y.value,authorizeRequest:!0,organisationAware:!0});e?.data?.name?I.value.push(e.data):await wt(),W.value=!1,Ft(),P({message:`Tax policy added successfully`,variant:`success`})}catch{P({title:`Failed to add policy`,message:``,variant:`error`})}finally{B.value=!1}}async function Dt(e){try{await _.patch(`/org/doc/TaxAuthority/${encodeURIComponent(e.name)}`,{data:{is_active:!e.is_active},authorizeRequest:!0,organisationAware:!0}),e.is_active=!e.is_active}catch{P({title:`Failed to update authority`,message:``,variant:`error`})}}async function Ot(e){try{await _.patch(`/org/doc/TaxPolicy/${encodeURIComponent(e.name)}`,{data:{is_active:!e.is_active},authorizeRequest:!0,organisationAware:!0}),e.is_active=!e.is_active}catch{P({title:`Failed to update policy`,message:``,variant:`error`})}}function kt(e){let t=I.value.filter(t=>t.tax_authority===e.name);if(t.length>0){let e=t.map(e=>e.policy_name).join(`, `);P({title:`Cannot delete authority`,message:`This authority has ${t.length} linked policies: ${e}. Delete the policies first.`,variant:`error`,duration:5e3});return}K.value={type:`authority`,item:e},G.value=!0}function At(e){K.value={type:`policy`,item:e},G.value=!0}function jt(){G.value=!1,K.value=null}async function Mt(){if(!K.value)return;q.value=!0;let{type:e,item:t}=K.value;try{e===`authority`?(await _.delete(`/org/doc/TaxAuthority/${encodeURIComponent(t.name)}`,{authorizeRequest:!0,organisationAware:!0}),F.value=F.value.filter(e=>e.name!==t.name),P({message:`Authority deleted`,variant:`success`})):(await _.delete(`/org/doc/TaxPolicy/${encodeURIComponent(t.name)}`,{authorizeRequest:!0,organisationAware:!0}),I.value=I.value.filter(e=>e.name!==t.name),P({message:`Policy deleted`,variant:`success`})),G.value=!1,K.value=null}catch{P({title:`Failed to delete`,message:``,variant:`error`})}finally{q.value=!1}}function Nt(){if(!X.value.trim())return;let e=X.value;Q.value.push({isBot:!1,text:e}),X.value=``,$(),setTimeout(()=>{let t=`I can help you with that! `,n=e.toLowerCase();n.includes(`vat`)?t+=`VAT (Value Added Tax) in Nigeria is currently 7.5%. It applies to most goods and services. Would you like me to add it as a policy?`:n.includes(`wht`)?t+=`Withholding Tax (WHT) in Nigeria varies by transaction type: 5% for services, 10% for contracts. Shall I explain more?`:t+=`For Nigerian businesses, the key tax authorities are FIRS (Federal) and your state IRS. Would you like specific guidance?`,Q.value.push({isBot:!0,text:t}),$()},500)}function $(){ue(()=>{Z.value&&(Z.value.scrollTop=Z.value.scrollHeight)})}function Pt(){J.value={authority_name:``,authority_code:``,jurisdiction_level:`Federal`,country:`Nigeria`,is_active:!0}}function Ft(){Y.value={policy_name:``,policy_code:``,tax_authority:``,rate:null,applies_to:`All`,is_active:!0}}return ce(async()=>{await Promise.all([yt(),bt(),Ct(),wt()])}),(te,l)=>(v(),m(`div`,_e,[p(`div`,ve,[p(`div`,ye,[p(`div`,be,[l[25]||=p(`div`,null,[p(`h1`,{class:`text-2xl font-bold text-slate-800`},`Tax Jurisdiction`),p(`p`,{class:`text-sm text-slate-600`},`Configure your tax authorities and policies`)],-1),p(`div`,xe,[y(u(E),{class:`flex gap-2 rounded-full`,onClick:l[0]||=e=>U.value=!0},{default:h(()=>[y(u(fe),{class:`h-4 w-4`}),l[24]||=s(` Add Authority `,-1)]),_:1})])]),p(`div`,Se,[p(`div`,Ce,[y(u(me),{class:`p-6 h-full min-h-[500px] flex flex-col`},{default:h(()=>[p(`div`,we,[y(u(ee),{class:`h-5 w-5 text-blue-500`}),l[26]||=p(`h3`,{class:`font-semibold text-slate-700`},`Tax Setup Assistant`,-1)]),p(`div`,{ref_key:`chatContainer`,ref:Z,class:`flex-1 overflow-y-auto space-y-4 mb-4`},[(v(!0),m(c,null,g(Q.value,(e,t)=>(v(),m(`div`,{key:t,class:a(e.isBot?`flex items-start gap-3`:`flex items-start gap-3 flex-row-reverse`)},[p(`div`,{class:a([`rounded-full w-8 h-8 flex items-center justify-center text-sm font-medium`,e.isBot?`bg-blue-100 text-blue-600`:`bg-slate-100 text-slate-600`])},d(e.isBot?`ðŸ¤–`:`ðŸ‘¤`),3),p(`div`,{class:a([`max-w-[80%] rounded-lg p-3 text-sm`,e.isBot?`bg-slate-50 text-slate-700`:`bg-blue-50 text-blue-800`])},d(e.text),3)],2))),128))],512),p(`div`,Te,[y(u(D),{modelValue:X.value,"onUpdate:modelValue":l[1]||=e=>X.value=e,placeholder:`Ask about tax setup...`,class:`flex-1 rounded-full`,onKeyup:re(Nt,[`enter`])},null,8,[`modelValue`]),y(u(E),{class:`rounded-full`,onClick:Nt},{default:h(()=>[y(u(de),{class:`h-4 w-4`})]),_:1})])]),_:1})]),p(`div`,Ee,[y(u(me),{class:`p-6 sticky top-24`},{default:h(()=>[y(u(e),{modelValue:ht.value,"onUpdate:modelValue":l[9]||=e=>ht.value=e,"default-value":`kyc`,class:`mb-4`},{default:h(()=>[y(u(n),{class:`rounded-full bg-stone-100 text-blue-950 px-0.5 py-0.5 w-full`},{default:h(()=>[y(u(r),{value:`kyc`,class:`flex-1 px-3 py-1 rounded-full text-sm data-[state=active]:bg-stone-50 data-[state=active]:text-blue-950`},{default:h(()=>[...l[27]||=[s(` KYC `,-1)]]),_:1}),y(u(r),{value:`authorities`,class:`flex-1 px-3 py-1 rounded-full text-sm data-[state=active]:bg-stone-50 data-[state=active]:text-blue-950`},{default:h(()=>[...l[28]||=[s(` Authorities `,-1)]]),_:1}),y(u(r),{value:`policies`,class:`flex-1 px-3 py-1 rounded-full text-sm data-[state=active]:bg-stone-50 data-[state=active]:text-blue-950`},{default:h(()=>[...l[29]||=[s(` Policies `,-1)]]),_:1}),y(u(r),{value:`frameworks`,class:`flex-1 px-3 py-1 rounded-full text-sm data-[state=active]:bg-stone-50 data-[state=active]:text-blue-950`},{default:h(()=>[...l[30]||=[s(` Frameworks `,-1)]]),_:1})]),_:1}),y(u(t),{value:`kyc`,class:`mt-4`},{default:h(()=>[p(`div`,De,[p(`div`,Oe,[y(u(O),{for:`nationalTaxId`,class:`text-xs font-semibold text-slate-500 uppercase`},{default:h(()=>[...l[31]||=[s(`National Tax Identifier (TIN)`,-1)]]),_:1}),y(u(D),{id:`nationalTaxId`,modelValue:H.value.nationalTaxId,"onUpdate:modelValue":l[2]||=e=>H.value.nationalTaxId=e,placeholder:`e.g., 12345678-0001`,class:`rounded-xl bg-stone-50/50`},null,8,[`modelValue`])]),p(`div`,ke,[y(u(O),{for:`stateTaxId`,class:`text-xs font-semibold text-slate-500 uppercase`},{default:h(()=>[...l[32]||=[s(`State Tax Identifier`,-1)]]),_:1}),y(u(D),{id:`stateTaxId`,modelValue:H.value.stateTaxId,"onUpdate:modelValue":l[3]||=e=>H.value.stateTaxId=e,placeholder:`Enter state tax ID`,class:`rounded-xl bg-stone-50/50`},null,8,[`modelValue`])]),p(`div`,Ae,[y(u(O),{for:`businessRegId`,class:`text-xs font-semibold text-slate-500 uppercase`},{default:h(()=>[...l[33]||=[s(`Business Registration Number (RC/BN)`,-1)]]),_:1}),y(u(D),{id:`businessRegId`,modelValue:H.value.businessRegId,"onUpdate:modelValue":l[4]||=e=>H.value.businessRegId=e,placeholder:`e.g., RC 1234567`,class:`rounded-xl bg-stone-50/50`},null,8,[`modelValue`])]),p(`div`,je,[y(u(E),{class:`w-full rounded-full`,onClick:xt,disabled:V.value},{default:h(()=>[V.value?(v(),o(u(b),{key:0,class:`h-4 w-4 mr-2 animate-spin`})):(v(),o(u(ie),{key:1,class:`h-4 w-4 mr-2`})),l[34]||=s(` Save Credentials `,-1)]),_:1},8,[`disabled`])]),p(`div`,Me,[p(`div`,Ne,[y(u(ae),{class:`h-5 w-5 text-blue-500 shrink-0`}),l[35]||=p(`p`,{class:`text-xs text-blue-700 leading-relaxed`},` Ensure your registration details match your official documents from CAMA/CAC and FIRS. `,-1)])])])]),_:1}),y(u(t),{value:`authorities`,class:`mt-4`},{default:h(()=>[L.value?(v(),m(`div`,Pe,[y(u(b),{class:`h-6 w-6 animate-spin text-slate-400`})])):F.value.length===0?(v(),m(`div`,Fe,[y(u(fe),{class:`h-12 w-12 text-slate-300 mx-auto mb-2`}),l[37]||=p(`p`,{class:`text-sm text-slate-500`},`No tax authorities added`,-1),y(u(E),{variant:`link`,class:`text-sm mt-2`,onClick:l[5]||=e=>U.value=!0},{default:h(()=>[...l[36]||=[s(` + Add your first authority `,-1)]]),_:1})])):(v(),m(`div`,Ie,[(v(!0),m(c,null,g(F.value,e=>(v(),m(`div`,{key:e.name,class:`flex items-center justify-between p-3 rounded-lg border border-slate-200 hover:border-blue-300 transition-colors`},[p(`div`,Le,[y(u(he),{checked:e.is_active,"onUpdate:checked":t=>Dt(e)},null,8,[`checked`,`onUpdate:checked`]),p(`div`,null,[p(`div`,Re,d(e.authority_name),1),p(`div`,ze,d(e.authority_code)+` â€¢ `+d(e.jurisdiction_level),1)])]),y(u(E),{variant:`ghost`,size:`sm`,onClick:t=>kt(e)},{default:h(()=>[y(u(i),{class:`h-4 w-4 text-slate-400`})]),_:1},8,[`onClick`])]))),128)),y(u(E),{variant:`outline`,class:`w-full mt-4 rounded-full`,onClick:l[6]||=e=>U.value=!0},{default:h(()=>[y(u(le),{class:`h-4 w-4 mr-2`}),l[38]||=s(` Add Authority `,-1)]),_:1})]))]),_:1}),y(u(t),{value:`policies`,class:`mt-4`},{default:h(()=>[R.value?(v(),m(`div`,Be,[y(u(b),{class:`h-6 w-6 animate-spin text-slate-400`})])):I.value.length===0?(v(),m(`div`,Ve,[y(u(se),{class:`h-12 w-12 text-slate-300 mx-auto mb-2`}),l[40]||=p(`p`,{class:`text-sm text-slate-500`},`No tax policies configured`,-1),y(u(E),{variant:`link`,class:`text-sm mt-2`,onClick:l[7]||=e=>W.value=!0},{default:h(()=>[...l[39]||=[s(` + Add a tax policy `,-1)]]),_:1})])):(v(),m(`div`,He,[(v(!0),m(c,null,g(I.value,e=>(v(),m(`div`,{key:e.name,class:`flex items-center justify-between p-3 rounded-lg border border-slate-200 hover:border-green-300 transition-colors`},[p(`div`,Ue,[y(u(he),{checked:e.is_active,"onUpdate:checked":t=>Ot(e)},null,8,[`checked`,`onUpdate:checked`]),p(`div`,null,[p(`div`,We,d(e.policy_name),1),p(`div`,Ge,d(e.policy_code)+` â€¢ `+d(e.rate)+`%`,1)])]),y(u(E),{variant:`ghost`,size:`sm`,onClick:t=>At(e)},{default:h(()=>[y(u(i),{class:`h-4 w-4 text-slate-400`})]),_:1},8,[`onClick`])]))),128)),y(u(E),{variant:`outline`,class:`w-full mt-4 rounded-full`,onClick:l[8]||=e=>W.value=!0},{default:h(()=>[y(u(le),{class:`h-4 w-4 mr-2`}),l[41]||=s(` Add Policy `,-1)]),_:1})]))]),_:1}),y(u(t),{value:`frameworks`,class:`mt-4`},{default:h(()=>[p(`div`,Ke,[(v(!0),m(c,null,g(vt.value,(e,t)=>(v(),m(`div`,{key:t},[p(`h4`,qe,d(t),1),p(`div`,Je,[(v(!0),m(c,null,g(e,e=>(v(),m(`div`,{key:e.id,class:`p-3 rounded-xl border border-slate-200 hover:border-blue-300 cursor-pointer transition-all bg-white`,onClick:t=>St(e)},[p(`div`,Xe,d(e.name),1),p(`div`,Ze,d(e.description),1)],8,Ye))),128))])]))),128))])]),_:1})]),_:1},8,[`modelValue`])]),_:1})])]),y(u(pe),{open:U.value,"onUpdate:open":l[15]||=e=>U.value=e},{default:h(()=>[y(u(x),{class:`sm:max-w-md bg-white`},{default:h(()=>[y(u(S),null,{default:h(()=>[y(u(w),null,{default:h(()=>[...l[42]||=[s(`Add Tax Authority`,-1)]]),_:1}),y(u(C),null,{default:h(()=>[...l[43]||=[s(` Add a tax authority that has jurisdiction over your organisation. `,-1)]]),_:1})]),_:1}),p(`div`,Qe,[p(`div`,$e,[y(u(O),{for:`authority-name`},{default:h(()=>[...l[44]||=[s(`Authority Name`,-1)]]),_:1}),y(u(D),{id:`authority-name`,modelValue:J.value.authority_name,"onUpdate:modelValue":l[10]||=e=>J.value.authority_name=e,placeholder:`e.g., Federal Inland Revenue Service`},null,8,[`modelValue`])]),p(`div`,et,[y(u(O),{for:`authority-code`},{default:h(()=>[...l[45]||=[s(`Code`,-1)]]),_:1}),y(u(D),{id:`authority-code`,modelValue:J.value.authority_code,"onUpdate:modelValue":l[11]||=e=>J.value.authority_code=e,placeholder:`e.g., FIRS`},null,8,[`modelValue`])]),p(`div`,tt,[y(u(O),{for:`jurisdiction-level`},{default:h(()=>[...l[46]||=[s(`Jurisdiction Level`,-1)]]),_:1}),y(u(k),{modelValue:J.value.jurisdiction_level,"onUpdate:modelValue":l[12]||=e=>J.value.jurisdiction_level=e},{default:h(()=>[y(u(j),{class:`w-full rounded-full`},{default:h(()=>[y(u(N),{placeholder:`Select level`})]),_:1}),y(u(A),null,{default:h(()=>[y(u(M),{value:`Federal`},{default:h(()=>[...l[47]||=[s(`Federal`,-1)]]),_:1}),y(u(M),{value:`State`},{default:h(()=>[...l[48]||=[s(`State`,-1)]]),_:1}),y(u(M),{value:`Local`},{default:h(()=>[...l[49]||=[s(`Local`,-1)]]),_:1})]),_:1})]),_:1},8,[`modelValue`])]),p(`div`,nt,[y(u(O),{for:`country`},{default:h(()=>[...l[50]||=[s(`Country`,-1)]]),_:1}),y(u(D),{id:`country`,modelValue:J.value.country,"onUpdate:modelValue":l[13]||=e=>J.value.country=e,placeholder:`e.g., Nigeria`},null,8,[`modelValue`])])]),y(u(T),{class:`gap-2 sm:gap-2`},{default:h(()=>[y(u(E),{class:`rounded-full`,variant:`outline`,onClick:l[14]||=e=>U.value=!1},{default:h(()=>[...l[51]||=[s(` Cancel `,-1)]]),_:1}),y(u(E),{class:`rounded-full`,onClick:Tt,disabled:!J.value.authority_name||!J.value.authority_code||z.value},{default:h(()=>[z.value?(v(),o(u(b),{key:0,class:`h-4 w-4 mr-2 animate-spin`})):f(``,!0),l[52]||=s(` Add Authority `,-1)]),_:1},8,[`disabled`])]),_:1})]),_:1})]),_:1},8,[`open`]),y(u(pe),{open:W.value,"onUpdate:open":l[22]||=e=>W.value=e},{default:h(()=>[y(u(x),{class:`sm:max-w-md bg-white`},{default:h(()=>[y(u(S),null,{default:h(()=>[y(u(w),null,{default:h(()=>[...l[53]||=[s(`Add Tax Policy`,-1)]]),_:1}),y(u(C),null,{default:h(()=>[...l[54]||=[s(` Add a tax policy that applies to your transactions. `,-1)]]),_:1})]),_:1}),p(`div`,rt,[p(`div`,it,[y(u(O),{for:`policy-name`},{default:h(()=>[...l[55]||=[s(`Policy Name`,-1)]]),_:1}),y(u(D),{id:`policy-name`,modelValue:Y.value.policy_name,"onUpdate:modelValue":l[16]||=e=>Y.value.policy_name=e,placeholder:`e.g., Value Added Tax`},null,8,[`modelValue`])]),p(`div`,at,[y(u(O),{for:`policy-code`},{default:h(()=>[...l[56]||=[s(`Code`,-1)]]),_:1}),y(u(D),{id:`policy-code`,modelValue:Y.value.policy_code,"onUpdate:modelValue":l[17]||=e=>Y.value.policy_code=e,placeholder:`e.g., VAT`},null,8,[`modelValue`])]),p(`div`,ot,[y(u(O),{for:`tax-authority`},{default:h(()=>[...l[57]||=[s(`Tax Authority`,-1)]]),_:1}),y(u(k),{modelValue:Y.value.tax_authority,"onUpdate:modelValue":l[18]||=e=>Y.value.tax_authority=e,disabled:F.value.length===0},{default:h(()=>[y(u(j),{class:`w-full rounded-full`},{default:h(()=>[y(u(N),{placeholder:F.value.length===0?`Add an authority first`:`Select authority`},null,8,[`placeholder`])]),_:1}),y(u(A),null,{default:h(()=>[(v(!0),m(c,null,g(F.value,e=>(v(),o(u(M),{key:e.name,value:e.name},{default:h(()=>[s(d(e.authority_name),1)]),_:2},1032,[`value`]))),128))]),_:1})]),_:1},8,[`modelValue`,`disabled`]),F.value.length===0?(v(),m(`p`,st,` You need to add a tax authority before creating policies. `)):f(``,!0)]),p(`div`,ct,[y(u(O),{for:`rate`},{default:h(()=>[...l[58]||=[s(`Rate (%)`,-1)]]),_:1}),y(u(D),{id:`rate`,modelValue:Y.value.rate,"onUpdate:modelValue":l[19]||=e=>Y.value.rate=e,modelModifiers:{number:!0},type:`number`,step:`0.01`,placeholder:`e.g., 7.5`},null,8,[`modelValue`])]),p(`div`,lt,[y(u(O),{for:`applies-to`},{default:h(()=>[...l[59]||=[s(`Applies To`,-1)]]),_:1}),y(u(k),{modelValue:Y.value.applies_to,"onUpdate:modelValue":l[20]||=e=>Y.value.applies_to=e},{default:h(()=>[y(u(j),{class:`w-full rounded-full`},{default:h(()=>[y(u(N),{placeholder:`Select type`})]),_:1}),y(u(A),null,{default:h(()=>[y(u(M),{value:`All`},{default:h(()=>[...l[60]||=[s(`All`,-1)]]),_:1}),y(u(M),{value:`Transactions`},{default:h(()=>[...l[61]||=[s(`Transactions`,-1)]]),_:1}),y(u(M),{value:`Invoices`},{default:h(()=>[...l[62]||=[s(`Invoices`,-1)]]),_:1}),y(u(M),{value:`Contracts`},{default:h(()=>[...l[63]||=[s(`Contracts`,-1)]]),_:1}),y(u(M),{value:`Payments`},{default:h(()=>[...l[64]||=[s(`Payments`,-1)]]),_:1})]),_:1})]),_:1},8,[`modelValue`])])]),y(u(T),{class:`gap-2 sm:gap-2`},{default:h(()=>[y(u(E),{class:`rounded-full`,variant:`outline`,onClick:l[21]||=e=>W.value=!1},{default:h(()=>[...l[65]||=[s(` Cancel `,-1)]]),_:1}),y(u(E),{class:`rounded-full`,onClick:Et,disabled:!Y.value.policy_name||!Y.value.policy_code||!Y.value.tax_authority||!Y.value.rate||Y.value.rate<=0||B.value},{default:h(()=>[B.value?(v(),o(u(b),{key:0,class:`h-4 w-4 mr-2 animate-spin`})):f(``,!0),l[66]||=s(` Add Policy `,-1)]),_:1},8,[`disabled`])]),_:1})]),_:1})]),_:1},8,[`open`]),y(u(pe),{open:G.value,"onUpdate:open":l[23]||=e=>G.value=e},{default:h(()=>[y(u(x),{class:`sm:max-w-md bg-white`},{default:h(()=>[y(u(S),null,{default:h(()=>[y(u(w),null,{default:h(()=>[...l[67]||=[s(`Confirm Deletion`,-1)]]),_:1}),y(u(C),null,{default:h(()=>[...l[68]||=[s(` Are you sure you want to delete this item? `,-1)]]),_:1})]),_:1}),p(`div`,ut,[p(`div`,dt,[y(u(ne),{class:`h-5 w-5 text-amber-600 mt-0.5`}),p(`div`,ft,[p(`p`,pt,d(K.value?.item?.authority_name||K.value?.item?.policy_name),1),l[69]||=p(`p`,{class:`mt-1`},`This action cannot be undone.`,-1)])])]),y(u(T),{class:`gap-2 sm:gap-2`},{default:h(()=>[y(u(E),{class:`rounded-full`,variant:`outline`,onClick:jt,disabled:q.value},{default:h(()=>[...l[70]||=[s(` Cancel `,-1)]]),_:1},8,[`disabled`]),y(u(E),{class:`rounded-full`,variant:`destructive`,onClick:Mt,disabled:q.value},{default:h(()=>[q.value?(v(),o(u(b),{key:0,class:`h-4 w-4 mr-2 animate-spin`})):(v(),o(u(i),{key:1,class:`h-4 w-4 mr-2`})),s(` `+d(q.value?`Deleting...`:`Delete`),1)]),_:1},8,[`disabled`])]),_:1})]),_:1})]),_:1},8,[`open`])])])]))}};export{mt as default};