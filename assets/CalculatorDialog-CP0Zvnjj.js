import{Ai as e,Di as t,Ei as n,Ii as r,Oi as i,Pi as a,Qi as o,Sa as s,St as c,Ta as l,Yi as u,b as d,bn as f,ha as p,hi as m,i as h,ji as g,ki as _,lt as v,mn as y,qi as b,qt as x,sa as S,wa as C,wi as w,xa as T,yn as E}from"./index-DYsAJfvN.js";var D={class:`w-72 rounded-2xl bg-slate-900 shadow-2xl overflow-hidden border border-neutral-700/50`},O={class:`flex items-center gap-2 text-neutral-400`},k={class:`px-4 py-5 bg-slate-950`},A={class:`flex items-center justify-between mb-1`},j={class:`text-neutral-500 text-xs h-4`},ee={class:`grid grid-cols-4 gap-1 p-2 bg-slate-950`},te=[`onClick`],M={key:1},N=r({__name:`CalculatorDialog`,props:{open:{type:Boolean}},emits:[`update:open`],setup(r,{emit:h}){let N=h,P=p(`0`),F=p(``),I=p(``),L=p(null),R=p(!1),z=p(null),B=p(!1),V=p({x:0,y:0}),H=p({x:0,y:0}),U=p(!1),W=t(()=>{if(P.value===``)return`0`;let e=parseFloat(P.value);if(isNaN(e)||P.value.endsWith(`.`))return P.value;let t=P.value.split(`.`),n=parseInt(t[0]).toLocaleString(`en-US`);return t.length===2?`${n}.${t[1]}`:n}),G=e=>{if(R.value){P.value=e,F.value=e,R.value=!1;return}e===`.`&&P.value.includes(`.`)||(P.value===`0`&&e!==`.`?P.value=e:P.value+=e,F.value=P.value)},K=e=>{F.value!==``&&(I.value!==``&&q(),L.value=e,I.value=F.value,F.value=``,R.value=!0)},q=()=>{let e,t=parseFloat(I.value),n=parseFloat(F.value||P.value);if(!(isNaN(t)||isNaN(n))){switch(L.value){case`+`:e=t+n;break;case`-`:e=t-n;break;case`×`:e=t*n;break;case`÷`:e=n===0?NaN:t/n;break;default:return}isNaN(e)?P.value=`Error`:P.value=String(Math.round(e*1e10)/1e10),F.value=P.value,I.value=``,L.value=null,R.value=!0}},J=()=>{P.value=`0`,F.value=``,I.value=``,L.value=null,R.value=!1},Y=()=>{P.value.length===1||P.value===`Error`?(P.value=`0`,F.value=``):(P.value=P.value.slice(0,-1),F.value=P.value)},X=()=>{P.value===`0`||P.value===`Error`||(P.value.startsWith(`-`)?P.value=P.value.slice(1):P.value=`-`+P.value,F.value=P.value)},Z=()=>{let e=parseFloat(P.value);isNaN(e)||(P.value=String(e/100),F.value=P.value)},ne=e=>{if(!z.value)return;B.value=!0;let t=z.value.getBoundingClientRect();V.value={x:e.clientX-t.left,y:e.clientY-t.top},U.value||=(H.value={x:t.left,y:t.top},!0),document.addEventListener(`mousemove`,Q),document.addEventListener(`mouseup`,$)},Q=e=>{if(!B.value||!z.value)return;let t=z.value.getBoundingClientRect(),n=window.innerWidth,r=window.innerHeight,i=e.clientX-V.value.x,a=e.clientY-V.value.y;i=Math.max(0,Math.min(i,n-t.width)),a=Math.max(0,Math.min(a,r-t.height)),H.value={x:i,y:a}},$=()=>{B.value=!1,document.removeEventListener(`mousemove`,Q),document.removeEventListener(`mouseup`,$)},re=()=>{N(`update:open`,!1),J(),U.value=!1},ie=[{label:`C`,action:J,class:`bg-neutral-200 hover:bg-neutral-300 text-neutral-700`},{label:`±`,action:X,class:`bg-neutral-200 hover:bg-neutral-300 text-neutral-700`},{label:`%`,action:Z,class:`bg-neutral-200 hover:bg-neutral-300 text-neutral-700`},{label:`÷`,action:()=>K(`÷`),class:`bg-slate-500 hover:bg-slate-600 text-white`,icon:E},{label:`7`,action:()=>G(`7`),class:`bg-neutral-700 hover:bg-neutral-600 text-white`},{label:`8`,action:()=>G(`8`),class:`bg-neutral-700 hover:bg-neutral-600 text-white`},{label:`9`,action:()=>G(`9`),class:`bg-neutral-700 hover:bg-neutral-600 text-white`},{label:`×`,action:()=>K(`×`),class:`bg-slate-500 hover:bg-slate-600 text-white`},{label:`4`,action:()=>G(`4`),class:`bg-neutral-700 hover:bg-neutral-600 text-white`},{label:`5`,action:()=>G(`5`),class:`bg-neutral-700 hover:bg-neutral-600 text-white`},{label:`6`,action:()=>G(`6`),class:`bg-neutral-700 hover:bg-neutral-600 text-white`},{label:`-`,action:()=>K(`-`),class:`bg-slate-500 hover:bg-slate-600 text-white`,icon:c},{label:`1`,action:()=>G(`1`),class:`bg-neutral-700 hover:bg-neutral-600 text-white`},{label:`2`,action:()=>G(`2`),class:`bg-neutral-700 hover:bg-neutral-600 text-white`},{label:`3`,action:()=>G(`3`),class:`bg-neutral-700 hover:bg-neutral-600 text-white`},{label:`+`,action:()=>K(`+`),class:`bg-slate-500 hover:bg-slate-600 text-white`,icon:v},{label:`0`,action:()=>G(`0`),class:`bg-neutral-700 hover:bg-neutral-600 text-white col-span-2`},{label:`.`,action:()=>G(`.`),class:`bg-neutral-700 hover:bg-neutral-600 text-white`},{label:`=`,action:q,class:`bg-slate-500 hover:bg-slate-600 text-white`,icon:y}];return(t,c)=>(b(),_(n,{to:`body`},[a(m,{name:`calculator`},{default:S(()=>[r.open?(b(),g(`div`,{key:0,ref_key:`dialogRef`,ref:z,class:s([`fixed z-[100] select-none`,{"cursor-grabbing":B.value}]),style:C(U.value?{left:`${H.value.x}px`,top:`${H.value.y}px`}:{left:`50%`,top:`50%`,transform:`translate(-50%, -50%)`})},[i(`div`,D,[i(`div`,{class:`flex items-center justify-between px-3 py-2 bg-slate-800 cursor-grab active:cursor-grabbing`,onMousedown:ne},[i(`div`,O,[a(T(x),{class:`w-4 h-4 text-yellow-200`}),c[0]||=i(`span`,{class:`text-xs font-medium`},`Calculator`,-1)]),i(`button`,{onClick:re,class:`p-1 rounded-full hover:bg-neutral-700 text-neutral-400 hover:text-white transition-colors`},[a(T(d),{class:`w-4 h-4`})])],32),i(`div`,k,[i(`div`,A,[i(`span`,j,l(I.value)+` `+l(L.value||``),1),i(`button`,{onClick:Y,class:`p-1 rounded hover:bg-neutral-800 text-neutral-500 hover:text-neutral-300 transition-colors`},[a(T(f),{class:`w-4 h-4`})])]),i(`div`,{class:s([`text-right text-4xl font-light text-white tracking-tight overflow-hidden`,{"text-red-400":P.value===`Error`}])},l(W.value),3)]),i(`div`,ee,[(b(),g(w,null,u(ie,(e,t)=>i(`button`,{key:t,onClick:e.action,class:s([`h-14 rounded-xl font-medium text-xl transition-all duration-150 active:scale-95`,e.class])},[e.icon?(b(),_(o(e.icon),{key:0,class:`w-5 h-5 mx-auto`})):(b(),g(`span`,M,l(e.label),1))],10,te)),64))])])],6)):e(``,!0)]),_:1})]))}}),P=h(N,[[`__scopeId`,`data-v-7f0eba23`]]);export{P as default};