import{Dt as e,Et as t,St as n,Tt as r,Vt as i,i as a,ln as o,n as s,o as c,r as l,yn as u,zt as d}from"./index-6eTYohyW.js";import{t as f}from"./OrganisationService-CXCy6NQg.js";import{t as p}from"./icon-BYXxshMO.js";var m={class:`min-h-screen flex items-center justify-center relative overflow-hidden`},h={class:`container mx-auto px-4 relative z-10`},g={class:`max-w-lg mx-auto`},_={class:`bg-white shadow-xl rounded-2xl p-10 flex flex-col items-center text-center animate-slide-up`},v={key:0},y={key:1},b={key:2},x={class:`text-gray-600 mb-4`},S={class:`font-semibold text-primary`},C={class:`italic`},w=a({__name:`Invite`,setup(a){let p=c().toast,w=s(),T=l(),E=o(!0),D=o(!1),O=o(``),k=o(``),A=w.params.reference;d(async()=>{try{if(!JSON.parse(localStorage.getItem(`user`)||`{}`).name)return localStorage.setItem(`postAuthenticationPath`,T.currentRoute.value.path),T.push(`/login`);let{data:e}=await f.getMember(A);O.value=e.name,k.value=e.role,E.value=!1}catch{E.value=!1,D.value=!0,setTimeout(()=>{T.push(`/`)},5e3)}});async function j(){try{let{data:e}=await f.updateMember(A,{acceptInvite:!0});e.status==`ACTIVE`&&(localStorage.setItem(`organisation`,JSON.stringify(e)),localStorage.setItem(`organisation.reference`,e.reference),window.location=`/`);return}catch(e){p({duration:5e3,title:`Heads Up!`,message:e.message||`We encountered an error accepting this invitation. Please check your network `,variant:`error`})}}return(a,o)=>(i(),r(`div`,m,[o[6]||=n(`div`,{class:`absolute inset-0 bg-slate-950/10 animate-fade-in`},null,-1),n(`div`,h,[n(`div`,g,[n(`div`,_,[o[5]||=n(`div`,{class:`w-24 h-24 rounded-full bg-white shadow ring-1 ring-slate-200 flex items-center justify-center mb-6`},[n(`img`,{src:`/img/icon.png`,class:`w-16 h-16`,alt:`App Icon`})],-1),E.value?(i(),r(`div`,v,[...o[0]||=[n(`h2`,{class:`text-xl font-semibold mb-2`},`Checking your invitation...`,-1),n(`div`,{class:`flex justify-center pt-10`},[n(`div`,{class:`loader`})],-1)]])):D.value?(i(),r(`div`,y,[...o[1]||=[t(`<h2 class="text-xl font-semibold text-red-600 mb-2" data-v-a2a3b269> Invitation Invalid </h2><p class="text-gray-500" data-v-a2a3b269> This invitation link is no longer valid. Please request a new one from the organisation admin. </p><p class="text-gray-700 mt-3" data-v-a2a3b269> You are being redirected back in. </p><div class="flex justify-center pt-10" data-v-a2a3b269><div class="loader" data-v-a2a3b269></div></div>`,4)]])):(i(),r(`div`,b,[o[4]||=n(`h2`,{class:`text-2xl font-semibold mb-3`},`Youâ€™ve Been Invited`,-1),n(`p`,x,[o[2]||=e(` You have been invited to join `,-1),n(`span`,S,u(O.value),1),e(` as `+u([`MANAGER`,`MEMBER`].includes(k.value)?`a`:`an`)+` `,1),n(`span`,C,u(k.value),1),o[3]||=e(`. `,-1)]),n(`button`,{onClick:j,class:`inline-flex items-center justify-center rounded-full mt-6 px-5 pt-1 pb-1.5 bg-primary text-white font-semibold hover:bg-primary-dark transition`},` Accept Invitation `)]))])])])]))}},[[`__scopeId`,`data-v-a2a3b269`]]);export{w as default};