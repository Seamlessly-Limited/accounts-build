import "./useFormControl-Dnp3iC5X.js"; import "./useNonce-CnEoXn07.js"; import "./nullish-CfjOSA4G.js"; import "./useArrowNavigation-siWGBYoD.js"; import "./ConfigProvider-Ckl6KgMj.js"; import "./useHideOthers-L15EfXxs.js"; import "./useDirection-B1kSZwKq.js"; import "./PopperAnchor-Sq61S0mP.js"; import "./useId-Da-MS2me.js"; import "./PopperContent-b6gGwF_E.js"; import "./useTypeahead---iVCXRs.js"; import "./DialogPortal-Dl-6IrmI.js"; import "./Teleport-BJpx-KiC.js"; import "./utils-BpsHH13c.js"; import "./DialogTitle-aue_-Krx.js"; import "./utils-BFR0tnUV.js"; import "./RovingFocusGroup-BhwVgyO_.js"; import { a as e, i as t, n, r, t as i } from "./DropdownMenuTrigger-BH9p6Bti.js"; import { t as a } from "./DropdownMenuLabel-KcuU36aY.js"; import "./MenuSeparator-FLBLb_HD.js"; import { t as o } from "./DropdownMenuSeparator-3oAyQvzW.js"; import "./Label-BsQm4x39.js"; import "./SelectViewport-BHDGvtQj.js"; import { $i as s, Bi as c, Ea as l, Ei as u, Fi as d, Fr as f, Ir as p, Jn as m, Ki as h, Kn as ee, Li as g, Mi as _, Ni as v, Nt as te, Oi as y, On as ne, Pi as b, Qn as re, Qt as x, Ri as S, Ta as C, Wi as ie, Wn as w, Yi as T, Zi as E, _n as D, an as O, ar as k, ct as ae, da as A, ea as j, ft as oe, hi as M, i as N, in as P, ji as se, k as F, ka as I, na as L, o as R, pt as z, rn as B, tn as V, tr as H, w as U, wn as W, x as G, ya as K, yr as q } from "./index-CHNvwQRL.js"; import { n as J } from "./button-DSlecn3R.js"; import { a as ce, i as le, n as ue, r as de, t as fe } from "./DialogTitle-BK5ecu1H.js"; import { t as pe } from "./DialogFooter-CuLepmCa.js"; import { t as me } from "./badge-VpN0zBGl.js"; import { t as he } from "./Label--GHB7iKy.js"; import { a as ge, i as _e, n as ve, r as Y, t as ye } from "./SelectValue-C8x3HZX3.js"; var be = c({ __name: `DropdownMenu`, props: { defaultOpen: { type: Boolean }, open: { type: Boolean }, dir: {}, modal: { type: Boolean } }, emits: [`update:open`], setup(t, { emit: n }) { let r = f(t, n); return (t, n) => (E(), v(C(e), h({ "data-slot": `dropdown-menu` }, C(r)), { default: A(() => [j(t.$slots, `default`)]), _: 3 }, 16)) } }), xe = c({ __name: `DropdownMenuContent`, props: { forceMount: { type: Boolean }, loop: { type: Boolean }, side: {}, sideOffset: { default: 4 }, sideFlip: { type: Boolean }, align: {}, alignOffset: {}, alignFlip: { type: Boolean }, avoidCollisions: { type: Boolean }, collisionBoundary: {}, collisionPadding: {}, arrowPadding: {}, sticky: {}, hideWhenDetached: { type: Boolean }, positionStrategy: {}, updatePositionStrategy: {}, disableUpdateOnLayoutShift: { type: Boolean }, prioritizePosition: { type: Boolean }, reference: {}, asChild: { type: Boolean }, as: {}, class: {} }, emits: [`escapeKeyDown`, `pointerDownOutside`, `focusOutside`, `interactOutside`, `closeAutoFocus`], setup(e, { emit: r }) { let i = e, a = r, o = M(i, `class`), s = f(o, a); return (e, r) => (E(), v(C(n), null, { default: A(() => [S(C(t), h({ "data-slot": `dropdown-menu-content` }, C(s), { class: C(q)(`bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 max-h-(--reka-dropdown-menu-content-available-height) min-w-[8rem] origin-(--reka-dropdown-menu-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border p-1 shadow-md`, i.class) }), { default: A(() => [j(e.$slots, `default`)]), _: 3 }, 16, [`class`])]), _: 3 })) } }), Se = c({ __name: `DropdownMenuItem`, props: { disabled: { type: Boolean }, textValue: {}, asChild: { type: Boolean }, as: {}, class: {}, inset: { type: Boolean }, variant: { default: `default` } }, setup(e) { let t = e, n = M(t, `inset`, `variant`, `class`), i = p(n); return (n, a) => (E(), v(C(r), h({ "data-slot": `dropdown-menu-item`, "data-inset": e.inset ? `` : void 0, "data-variant": e.variant }, C(i), { class: C(q)(`focus:bg-white focus:text-accent-foreground data-[variant=destructive]:text-destructive-foreground data-[variant=destructive]:focus:bg-destructive/10 dark:data-[variant=destructive]:focus:bg-destructive/40 data-[variant=destructive]:focus:text-destructive-foreground data-[variant=destructive]:*:[svg]:!text-destructive-foreground [&_svg:not([class*='text-'])]:text-muted-foreground relative flex cursor-default items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 data-[inset]:pl-8 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4`, t.class) }), { default: A(() => [j(n.$slots, `default`)]), _: 3 }, 16, [`data-inset`, `data-variant`, `class`])) } }), Ce = c({ __name: `DropdownMenuLabel`, props: { asChild: { type: Boolean }, as: {}, class: {}, inset: { type: Boolean } }, setup(e) { let t = e, n = M(t, `class`, `inset`), r = p(n); return (n, i) => (E(), v(C(a), h({ "data-slot": `dropdown-menu-label`, "data-inset": e.inset ? `` : void 0 }, C(r), { class: C(q)(`px-2 py-1.5 text-sm font-medium data-[inset]:pl-8`, t.class) }), { default: A(() => [j(n.$slots, `default`)]), _: 3 }, 16, [`data-inset`, `class`])) } }), we = c({ __name: `DropdownMenuSeparator`, props: { asChild: { type: Boolean }, as: {}, class: {} }, setup(e) { let t = e, n = M(t, `class`); return (e, r) => (E(), v(C(o), h({ "data-slot": `dropdown-menu-separator` }, C(n), { class: C(q)(`bg-border -mx-1 my-1 h-px`, t.class) }), null, 16, [`class`])) } }), Te = c({ __name: `DropdownMenuTrigger`, props: { disabled: { type: Boolean }, asChild: { type: Boolean }, as: {} }, setup(e) { let t = p(e); return (e, n) => (E(), v(C(i), h({ "data-slot": `dropdown-menu-trigger` }, C(t)), { default: A(() => [j(e.$slots, `default`)]), _: 3 }, 16)) } }), Ee = { async getDocuments(e = 0, t = 50) { return R.get(`/org/documents`, { query: { page: e, size: t }, authorizeRequest: !0, organisationAware: !0 }) }, async getDocumentsByCategory(e) { return R.get(`/org/documents/category/${e}`, { authorizeRequest: !0, organisationAware: !0 }) }, async searchDocuments(e) { return R.get(`/org/documents/search`, { query: { query: e }, authorizeRequest: !0, organisationAware: !0 }) }, async getDocumentCounts() { return R.get(`/org/documents/counts`, { authorizeRequest: !0, organisationAware: !0 }) }, async getDocument(e) { return R.get(`/org/documents/${e}`, { authorizeRequest: !0, organisationAware: !0 }) }, async uploadDocument(e, t, n = {}) { let r = new FormData; return r.append(`file`, e), r.append(`category`, t), r.append(`metadata`, JSON.stringify(n)), R.post(`/org/documents/upload`, { data: r, headers: { "Content-Type": `multipart/form-data` }, authorizeRequest: !0, organisationAware: !0 }) }, async updateDocument(e, t) { return R.put(`/org/documents/${e}`, { data: t, authorizeRequest: !0, organisationAware: !0 }) }, async archiveDocument(e) { return R.delete(`/org/documents/${e}`, { authorizeRequest: !0, organisationAware: !0 }) }, async getVersionHistory(e) { return R.get(`/org/documents/${e}/versions`, { authorizeRequest: !0, organisationAware: !0 }) }, async restoreVersion(e, t) { return R.post(`/org/documents/${e}/versions/${t}/restore`, { data: {}, authorizeRequest: !0, organisationAware: !0 }) } }, De = { class: `flex flex-col items-center justify-center h-full p-8 text-center` }, Oe = { class: `relative mb-8` }, ke = { class: `h-20 w-20 rounded-2xl bg-gradient-to-br from-sky-900 to-blue-950 flex items-center justify-center shadow-lg` }, Ae = { class: `grid grid-cols-2 gap-3 max-w-lg w-full mb-4` }, je = { class: l([`h-10 w-10 rounded-full flex items-center justify-center bg-gradient-to-b from-sky-900 to-blue-950`]) }, Me = { class: `text-sm font-medium` }, Ne = { class: `max-w-lg w-full mb-8` }, Pe = { class: l([`h-8 w-8 rounded-lg flex items-center justify-center flex-shrink-0`]) }, Fe = { class: `flex-1 text-sm` }, Ie = [`onClick`, `title`], Le = { key: 0, class: `w-full max-w-lg` }, Re = { class: `space-y-2` }, ze = { class: `truncate` }, Be = { class: `ml-auto text-xs text-slate-400` }, Ve = { key: 1, class: `mt-8 w-full max-w-lg p-4 bg-slate-50 rounded-xl` }, He = { class: `flex items-center justify-between mb-2` }, Ue = { class: `text-sm font-medium text-slate-700` }, We = { class: `text-2xl font-bold text-slate-900` }, Ge = { class: `text-xs text-slate-500 mt-1` }, Ke = { key: 0, class: `py-4` }, qe = { class: `flex items-center gap-3 p-3 bg-slate-50 rounded-lg` }, Je = { class: `flex-1 min-w-0` }, Ye = { class: `text-sm font-medium truncate` }, Xe = { class: `text-xs text-slate-500` }, Ze = { class: `mt-4` }, X = { key: 1, class: `py-8` }, Z = `flow_pinned_actions`, Q = { __name: `WelcomeView`, props: { account: Object }, setup(e) { let t = e, n = ie(`openTab`), r = K(null), i = K(!1), a = K({ show: !1, file: null, category: `BANK_STATEMENT` }), o = K([]); T(() => { let e = localStorage.getItem(Z); if (e) try { o.value = JSON.parse(e) } catch { o.value = [`upload`, `reconcile`, `table`, `invoice`] } else o.value = [`upload`, `reconcile`, `table`, `invoice`] }); let c = [{ id: `upload`, label: `Upload Statement`, icon: F, bgClass: `bg-blue-100`, iconClass: `text-blue-600` }, { id: `reconcile`, label: `Start Reconciliation`, icon: x, bgClass: `bg-green-100`, iconClass: `text-green-600` }, { id: `table`, label: `Create Table`, icon: P, bgClass: `bg-amber-100`, iconClass: `text-amber-600` }, { id: `invoice`, label: `New Invoice`, icon: ae, bgClass: `bg-purple-100`, iconClass: `text-purple-600` }, { id: `calculator`, label: `Calculator`, icon: re, bgClass: `bg-teal-100`, iconClass: `text-teal-600` }, { id: `search-docs`, label: `Search Documents`, icon: O, bgClass: `bg-indigo-100`, iconClass: `text-indigo-600` }, { id: `contacts`, label: `Manage Contacts`, icon: U, bgClass: `bg-pink-100`, iconClass: `text-pink-600` }, { id: `chart`, label: `Create Chart`, icon: ee, bgClass: `bg-orange-100`, iconClass: `text-orange-600` }, { id: `journal`, label: `Journal Entry`, icon: k, bgClass: `bg-cyan-100`, iconClass: `text-cyan-600` }, { id: `expense`, label: `Record Expense`, icon: W, bgClass: `bg-red-100`, iconClass: `text-red-600` }, { id: `browse-files`, label: `Browse Files`, icon: V, bgClass: `bg-slate-100`, iconClass: `text-slate-600` }, { id: `reports`, label: `Generate Report`, icon: H, bgClass: `bg-emerald-100`, iconClass: `text-emerald-600` }], f = se(() => c.filter(e => o.value.includes(e.id))); function p(e) { return o.value.includes(e) } function h(e) { let t = o.value.indexOf(e); t > -1 ? o.value.splice(t, 1) : o.value.push(e), localStorage.setItem(Z, JSON.stringify(o.value)) } let j = K([]); function M(e) { switch (e.id) { case `upload`: a.value.show = !0, a.value.file = null, a.value.category = `BANK_STATEMENT`; break; case `reconcile`: n?.({ id: `new-recon-` + Date.now(), type: `reconciliation`, title: `New Reconciliation`, data: null }); break; case `table`: n?.({ id: `new-table-` + Date.now(), type: `spreadsheet`, title: `Untitled Table`, data: null, unsaved: !0 }); break; case `invoice`: n?.({ id: `new-invoice-` + Date.now(), type: `invoice`, title: `New Invoice`, data: { invoiceType: `INVOICE` } }); break; case `chart`: n?.({ id: `new-chart-` + Date.now(), type: `chart`, title: `New Chart`, data: null, unsaved: !0 }); break; case `journal`: n?.({ id: `new-journal-` + Date.now(), type: `journal`, title: `Journal Entry`, data: null, unsaved: !0 }); break; case `expense`: n?.({ id: `new-expense-` + Date.now(), type: `expense`, title: `New Expense`, data: null, unsaved: !0 }); break; case `calculator`: console.log(`Open calculator`); break; case `search-docs`: n?.({ id: `search-docs`, type: `search`, title: `Search Documents`, data: null }); break; case `contacts`: n?.({ id: `contacts`, type: `contacts`, title: `Contacts`, data: null }); break; case `browse-files`: n?.({ id: `file-browser`, type: `browser`, title: `File Browser`, data: null }); break; case `reports`: n?.({ id: `tax-report-` + Date.now(), type: `tax-report`, title: `Tax Report`, data: null }); break; default: console.log(`Action not implemented:`, e.id) } } function N() { r.value?.click() } function R(e) { let t = e.target.files?.[0]; t && (a.value.file = t, t.name.toLowerCase().includes(`statement`) ? a.value.category = `BANK_STATEMENT` : t.name.toLowerCase().includes(`invoice`) ? a.value.category = `INVOICE` : t.name.toLowerCase().includes(`receipt`) && (a.value.category = `RECEIPT`)) } function q(e) { let t = e.dataTransfer?.files?.[0]; t && (a.value.file = t) } function Q() { a.value.file = null, r.value && (r.value.value = ``) } async function $() { if (a.value.file) { i.value = !0; try { let e = await Ee.uploadDocument(a.value.file, a.value.category); a.value.show = !1, e && n?.({ id: `doc-${e.reference}`, type: `document`, title: e.name || a.value.file.name, data: e }) } catch (e) { console.error(`Upload failed:`, e) } finally { i.value = !1 } } } function Qe(e) { n?.({ id: e.id, type: e.type, title: e.name, data: e }) } function $e(e) { return { spreadsheet: P, document: B, chart: m, reconciliation: x }[e.type] || B } function et(e) { if (!e) return ``; let t = new Date(e), n = new Date - t, r = Math.floor(n / 6e4); return r < 60 ? `${r}m ago` : r < 1440 ? `${Math.floor(r / 60)}h ago` : t.toLocaleDateString() } function tt(e) { return e == null ? `N/A` : new Intl.NumberFormat(`en-NG`, { style: `currency`, currency: t.account?.currency || `NGN` }).format(e) } function nt(e) { return e ? new Date(e).toLocaleDateString(`en-US`, { month: `short`, day: `numeric`, hour: `2-digit`, minute: `2-digit` }) : `Never` } function rt(e) { return e < 1024 ? e + ` B` : e < 1024 * 1024 ? (e / 1024).toFixed(1) + ` KB` : (e / (1024 * 1024)).toFixed(1) + ` MB` } return (t, n) => (E(), d(`div`, De, [_(`div`, Oe, [_(`div`, ke, [S(C(ne), { class: `size-10 text-white` })])]), n[18] ||= _(`h1`, { class: `text-2xl font-bold text-slate-800 mb-2` }, ` Flow Seamlessly`, -1), n[19] ||= _(`p`, { class: `text-sm text-slate-500 max-w-md mb-8` }, ` Your integrated accounting workspace. Upload documents, reconcile accounts, and let AI do the heavy lifting. `, -1), _(`div`, Ae, [(E(!0), d(y, null, s(f.value, e => (E(), v(C(J), { key: e.id, variant: `outline`, class: `h-auto p-4 flex flex-col items-center gap-2 hover:bg-slate-50 rounded-[6px] hover:border-blue-200 transition-all`, onClick: t => M(e) }, { default: A(() => [_(`div`, je, [(E(), v(L(e.icon), { class: l([`h-5 w-5 text-white font-bold`]) }))]), _(`span`, Me, I(e.label), 1)]), _: 2 }, 1032, [`onClick`]))), 128))]), _(`div`, Ne, [S(C(be), null, { default: A(() => [S(C(Te), { asChild: `` }, { default: A(() => [S(C(J), { variant: `ghost`, class: `w-full text-slate-500 hover:text-slate-700` }, { default: A(() => [S(C(D), { class: `h-4 w-4 mr-2` }), n[4] ||= g(` More Actions `, -1), S(C(w), { class: `h-4 w-4 ml-2` })]), _: 1 })]), _: 1 }), S(C(xe), { class: `w-72 bg-stone-50 border-4 border-white rounded-[8px] overflow-y-scroll max-h-[350px] no-scrollbar`, align: `center` }, { default: A(() => [S(C(Ce), null, { default: A(() => [...n[5] ||= [g(`All Actions`, -1)]]), _: 1 }), S(C(we)), (E(), d(y, null, s(c, e => _(`div`, { key: e.id }, [S(C(Se), { class: `flex items-center gap-3 cursor-pointer hover:bg-white py-1.5 px-2 rounded-full`, onClick: t => M(e) }, { default: A(() => [_(`div`, Pe, [(E(), v(L(e.icon), { class: l([`h-4 w-4`]) }))]), _(`span`, Fe, I(e.label), 1), _(`button`, { onClick: u(t => h(e.id), [`stop`]), class: `p-1 rounded hover:bg-slate-100 transition-colors`, title: p(e.id) ? `Unpin from quick actions` : `Pin to quick actions` }, [p(e.id) ? (E(), v(C(oe), { key: 0, class: `h-4 w-4 text-blue-500` })) : (E(), v(C(z), { key: 1, class: `h-4 w-4 text-slate-400` }))], 8, Ie)]), _: 2 }, 1032, [`onClick`])])), 64))]), _: 1 })]), _: 1 })]), j.value.length > 0 ? (E(), d(`div`, Le, [n[6] ||= _(`h3`, { class: `text-xs font-semibold text-slate-500 uppercase tracking-wider mb-3 text-left` }, `Recent`, -1), _(`div`, Re, [(E(!0), d(y, null, s(j.value, e => (E(), v(C(J), { key: e.id, variant: `ghost`, class: `w-full justify-start text-sm h-auto py-2 px-3`, onClick: t => Qe(e) }, { default: A(() => [(E(), v(L($e(e)), { class: `h-4 w-4 mr-3 text-slate-400` })), _(`span`, ze, I(e.name), 1), _(`span`, Be, I(et(e.openedAt)), 1)]), _: 2 }, 1032, [`onClick`]))), 128))])])) : b(``, !0), e.account ? (E(), d(`div`, Ve, [_(`div`, He, [_(`span`, Ue, I(e.account.accountName), 1), S(C(me), { variant: `secondary` }, { default: A(() => [g(I(e.account.bankName), 1)]), _: 1 })]), _(`div`, We, I(tt(e.account.balance)), 1), _(`p`, Ge, ` Last synced: ` + I(nt(e.account.lastSyncedAt)), 1)])) : b(``, !0), _(`input`, { ref_key: `fileInput`, ref: r, type: `file`, class: `hidden`, accept: `.pdf,.csv,.xlsx,.xls,.jpg,.jpeg,.png`, onChange: R }, null, 544), S(C(ce), { open: a.value.show, "onUpdate:open": n[3] ||= e => a.value.show = e }, { default: A(() => [S(C(le), { class: `sm:max-w-md` }, { default: A(() => [S(C(ue), null, { default: A(() => [S(C(fe), null, { default: A(() => [...n[7] ||= [g(`Upload Document`, -1)]]), _: 1 }), S(C(de), null, { default: A(() => [...n[8] ||= [g(` Select a file to upload. Supported formats: PDF, CSV, Excel, Images. `, -1)]]), _: 1 })]), _: 1 }), a.value.file ? (E(), d(`div`, Ke, [_(`div`, qe, [S(C(B), { class: `h-8 w-8 text-blue-500` }), _(`div`, Je, [_(`p`, Ye, I(a.value.file.name), 1), _(`p`, Xe, I(rt(a.value.file.size)), 1)]), S(C(J), { variant: `ghost`, size: `sm`, class: `h-8 w-8 p-0`, onClick: Q }, { default: A(() => [S(C(G), { class: `h-4 w-4` })]), _: 1 })]), _(`div`, Ze, [S(C(he), { class: `text-xs` }, { default: A(() => [...n[9] ||= [g(`Document Category`, -1)]]), _: 1 }), S(C(ge), { modelValue: a.value.category, "onUpdate:modelValue": n[0] ||= e => a.value.category = e, class: `mt-1` }, { default: A(() => [S(C(ve), null, { default: A(() => [S(C(ye), { placeholder: `Select category` })]), _: 1 }), S(C(_e), null, { default: A(() => [S(C(Y), { value: `BANK_STATEMENT` }, { default: A(() => [...n[10] ||= [g(`Bank Statement`, -1)]]), _: 1 }), S(C(Y), { value: `INVOICE` }, { default: A(() => [...n[11] ||= [g(`Invoice`, -1)]]), _: 1 }), S(C(Y), { value: `RECEIPT` }, { default: A(() => [...n[12] ||= [g(`Receipt`, -1)]]), _: 1 }), S(C(Y), { value: `REPORT` }, { default: A(() => [...n[13] ||= [g(`Report`, -1)]]), _: 1 }), S(C(Y), { value: `OTHER` }, { default: A(() => [...n[14] ||= [g(`Other`, -1)]]), _: 1 })]), _: 1 })]), _: 1 }, 8, [`modelValue`])])])) : (E(), d(`div`, X, [_(`div`, { class: `border-2 shadow-md border-slate-200 rounded-lg p-8 text-center cursor-pointer hover:border-blue-300 hover:bg-blue-50/50 transition-colors`, onClick: N, onDragover: n[1] ||= u(() => { }, [`prevent`]), onDrop: u(q, [`prevent`]) }, [S(C(F), { class: `h-10 w-10 text-slate-400 mx-auto mb-3` }), n[15] ||= _(`p`, { class: `text-sm text-slate-600` }, `Click to browse or drag & drop`, -1), n[16] ||= _(`p`, { class: `text-xs text-slate-400 mt-1` }, `PDF, CSV, Excel, Images`, -1)], 32)])), S(C(pe), null, { default: A(() => [S(C(J), { variant: `outline`, onClick: n[2] ||= e => a.value.show = !1 }, { default: A(() => [...n[17] ||= [g(`Cancel`, -1)]]), _: 1 }), S(C(J), { onClick: $, disabled: !a.value.file || i.value }, { default: A(() => [i.value ? (E(), v(C(te), { key: 0, class: `h-4 w-4 mr-2 animate-spin` })) : b(``, !0), g(` ` + I(i.value ? `Uploading...` : `Upload`), 1)]), _: 1 }, 8, [`disabled`])]), _: 1 })]), _: 1 })]), _: 1 }, 8, [`open`])])) } }, $ = N(Q, [[`__scopeId`, `data-v-86953362`]]); export { $ as default };