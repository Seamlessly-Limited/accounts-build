import"./useFormControl-BoSoz5bk.js";import"./ListboxItem-CrspQUEb.js";import"./useNonce-Cry77bU8.js";import"./nullish-CfjOSA4G.js";import"./ConfigProvider-BeNpEDZu.js";import"./useHideOthers-8j3pZZC2.js";import{a as e,i as t,n,o as r,r as i,s as a,t as o}from"./PopoverTrigger-DWkr4HdR.js";import"./useDirection-CkCaHLjJ.js";import{t as s}from"./PopperAnchor-DePKnfPt.js";import"./useId-C9uHTJK1.js";import"./useKbd-BvGB3m10.js";import"./PopperContent-CkzV4Efh.js";import"./useTypeahead-J2lSWUJi.js";import"./DialogPortal-DagulIUC.js";import"./Teleport-CO7T90ZX.js";import"./utils-1j6W-LC4.js";import"./DialogTitle-KNRScshA.js";import{a as c,o as l,s as u,t as d}from"./sheet-BQZlRCZC.js";import"./AvatarImage-CFhho9Ct.js";import"./utils-d0L3vlW4.js";import"./RovingFocusGroup-Dae6_7oN.js";import"./RovingFocusItem-h4PGPL5z.js";import"./VisuallyHiddenInput-Cr3vcfNb.js";import"./command-CZXVLngu.js";import{c as f,i as ee,n as p,r as te,s as ne,t as re}from"./ComboboxItem-BV80ucMH.js";import{t as ie}from"./ComboboxGroup-BOfthHuH.js";import"./Label-BQWlwCJI.js";import"./ScrollArea-Cveb2SY4.js";import"./SelectViewport-C4doWK-Y.js";import"./SwitchThumb-DakLfx3k.js";import{a as m,i as h,n as g,t as _}from"./tabs-C51D2d71.js";import{Aa as v,Bi as y,Gi as b,Hi as x,Hr as S,Ii as C,Ir as w,K as T,Li as E,Ma as D,Ni as O,Pa as k,Ri as A,Ui as j,Vi as M,Vr as N,Yn as ae,Zi as P,a as oe,aa as F,bi as I,da as se,ea as ce,er as le,ga as L,ia as R,ja as z,ji as B,n as ue,na as V,o as H,qi as U,r as de,wa as W,wr as G,x as fe,zi as K}from"./index-BW6FH5S4.js";import{n as pe,t as me}from"./DialogContent-DzO0B1dQ.js";import{n as he,r as ge,t as _e}from"./DialogTitle-BAO4s_Rj.js";import{t as ve}from"./DialogFooter-BGPl6WoG.js";import{t as q}from"./Input-AKTRhZx5.js";import{t as J}from"./button-BIS6kOZQ.js";import{n as Y}from"./button-Cg1Yo4L-.js";import{t as ye}from"./AccountAssistant-hRV8J8Xh.js";import"./Textarea-XBZizbW2.js";import"./badge-DzzxpH5l.js";import{t as X}from"./Card-DmhOqSpI.js";import{t as be}from"./Card-DL4aOVo_.js";import{t as Z}from"./Label-CWz-ReQU.js";import{a as xe,i as Se,n as Ce,r as Q,t as we}from"./SelectValue-CvGnKkl4.js";import{t as Te}from"./badge-DeOd_cPn.js";import{t as Ee}from"./BankAccountService-CD5xD1o7.js";import{t as $}from"./TransactionService-CXyclp1T.js";var De=b({__name:`ComboboxAnchor`,props:{reference:{type:null,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},setup(e){let{forwardRef:t}=S();return(e,n)=>(V(),A(v(s),{"as-child":``,reference:e.reference},{default:L(()=>[j(v(w),P({ref:v(t),"as-child":e.asChild,as:e.as},e.$attrs),{default:L(()=>[F(e.$slots,`default`)]),_:3},16,[`as-child`,`as`])]),_:3},8,[`reference`]))}}),Oe=b({__name:`ComboboxEmpty`,props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},setup(e){let t=e,n=f(),r=C(()=>n.ignoreFilter.value?n.allItems.value.size===0:n.filterState.value.count===0);return(e,n)=>r.value?(V(),A(v(w),D(P({key:0},t)),{default:L(()=>[F(e.$slots,`default`,{},()=>[n[0]||=x(`No options`)])]),_:3},16)):K(`v-if`,!0)}}),ke=b({__name:`DialogTrigger`,props:{asChild:{type:Boolean},as:{}},setup(e){let t=e;return(e,n)=>(V(),A(v(u),D(U(t)),{default:L(()=>[F(e.$slots,`default`)]),_:3},16))}}),Ae=b({__name:`ComboboxAnchor`,props:{reference:{},asChild:{type:Boolean},as:{},class:{}},setup(e){let t=e,n=I(t,`class`),r=N(n);return(e,n)=>(V(),A(v(De),P(v(r),{class:v(G)(`w-full`,t.class)}),{default:L(()=>[F(e.$slots,`default`)]),_:3},16,[`class`]))}}),je=b({__name:`ComboboxEmpty`,props:{asChild:{type:Boolean},as:{},class:{}},setup(e){let t=e,n=I(t,`class`);return(e,r)=>(V(),A(v(Oe),P(v(n),{class:v(G)(`py-6 px-10 text-center text-sm`,t.class)}),{default:L(()=>[F(e.$slots,`default`)]),_:3},16,[`class`]))}}),Me={class:`grid grid-cols-1 md:grid-cols-3 gap-6 mb-8`},Ne={class:`text-2xl font-bold text-slate-800 mt-2`},Pe={class:`text-lg font-semibold text-slate-800 mt-2`},Fe={class:`space-y-4`},Ie={key:0,class:`text-center py-8`},Le={key:1,class:`text-center py-8 text-gray-500`},Re={class:`flex items-center gap-3`},ze={class:`w-10 h-10 rounded-full bg-gray-100 flex items-center justify-center`},Be={class:`font-medium text-slate-800`},Ve={class:`text-xs text-gray-500`},He={__name:`OverviewTab`,props:{account:{type:Object,required:!0}},setup(e){let t=e,n=W([]),r=W(!0);ce(async()=>{await i()});async function i(){try{r.value=!0,n.value=(await $.getTransactions({bankAccountReference:t.account.reference,page:0,size:5,sort:`transactionDate,desc`})).content||[]}catch(e){console.error(`Failed to load recent transactions`,e)}finally{r.value=!1}}function a(e){return e==null?`N/A`:new Intl.NumberFormat(`en-NG`,{style:`currency`,currency:t.account.currency||`NGN`}).format(e)}function o(e){return e?new Date(e).toLocaleDateString(`en-US`,{year:`numeric`,month:`short`,day:`numeric`}):`Never`}function s(e){return`fa-money-bill-wave`}return(t,i)=>(V(),y(`div`,null,[E(`div`,Me,[j(v(X),{class:`p-6`},{default:L(()=>[i[0]||=E(`h3`,{class:`text-sm font-medium text-gray-500`},`Current Balance`,-1),E(`p`,Ne,k(a(e.account?.balance)),1)]),_:1}),j(v(X),{class:`p-6`},{default:L(()=>[i[1]||=E(`h3`,{class:`text-sm font-medium text-gray-500`},`Last Synced`,-1),E(`p`,Pe,k(o(e.account?.lastSyncedAt)),1)]),_:1}),j(v(X),{class:`p-6`},{default:L(()=>[...i[2]||=[E(`h3`,{class:`text-sm font-medium text-gray-500`},`Pending Review`,-1),E(`p`,{class:`text-2xl font-bold text-amber-600 mt-2`},`0`,-1)]]),_:1})]),j(v(X),{class:`p-6`},{default:L(()=>[i[4]||=E(`h3`,{class:`text-lg font-semibold text-slate-800 mb-4`},`Recent Activity`,-1),E(`div`,Fe,[r.value?(V(),y(`div`,Ie,[...i[3]||=[E(`i`,{class:`fa fa-cog animate-spin text-gray-400`},null,-1)]])):n.value.length===0?(V(),y(`div`,Le,` No recent activity `)):(V(!0),y(O,{key:2},R(n.value,e=>(V(),y(`div`,{key:e.id,class:`flex justify-between items-center py-3 border-b last:border-0`},[E(`div`,Re,[E(`div`,ze,[E(`i`,{class:z([`fa text-gray-500`,s(e)])},null,2)]),E(`div`,null,[E(`p`,Be,k(e.description),1),E(`p`,Ve,k(o(e.transactionDate)),1)])]),E(`span`,{class:z([`font-semibold`,e.amount<0?`text-slate-800`:e.type===`DEBIT`?`text-red-600`:`text-green-600`])},k(a(e.amount)),3)]))),128))])]),_:1})]))}},Ue=`/org/categories`,We={getCategories(){return H.get(Ue,{organisationAware:!0,authorizeRequest:!0})},createCategory(e){return H.post(Ue,{data:e,organisationAware:!0,authorizeRequest:!0})},updateCategory(e,t){return H.put(`${Ue}/${e}`,{data:t,organisationAware:!0,authorizeRequest:!0})},deleteCategory(e){return H.delete(`${Ue}/${e}`,{organisationAware:!0,authorizeRequest:!0})}},Ge={class:`space-y-6`},Ke={class:`grid grid-cols-1 md:grid-cols-2 gap-6`},qe={class:`p-4 border-b flex flex-col md:flex-row justify-between gap-4`},Je={class:`flex gap-2 flex-1`},Ye={class:`relative flex-1 max-w-sm`},Xe={class:`flex gap-2`},Ze={class:`overflow-x-auto`},Qe={class:`w-full text-sm text-left`},$e={class:`divide-y`},et={key:0},tt={key:1},nt={class:`px-6 py-4 whitespace-nowrap text-gray-600`},rt={class:`px-6 py-4 font-medium text-slate-800`},it={class:`px-6 py-4`},at={class:`flex items-center gap-2 p-2`},ot={class:`border-t mt-2 pt-2 px-2`},st={key:0,class:`text-gray-400 w-4 h-4 flex items-center justify-center`},ct={key:1,class:`text-green-500 w-4 h-4 flex items-center justify-center`},lt={class:`px-6 py-4 text-center`},ut={class:`p-4 border-t flex justify-between items-center text-sm text-gray-500`},dt={class:`flex gap-2`},ft={class:`grid gap-6 py-4`},pt={class:`grid grid-cols-2 gap-4`},mt={class:`space-y-2`},ht={class:`space-y-2`},gt={class:`grid grid-cols-2 gap-4`},_t={class:`space-y-2`},vt={class:`space-y-2`},yt={class:`grid grid-cols-2 gap-4`},bt={class:`space-y-2`},xt={class:`space-y-2`},St={class:`space-y-2`},Ct={class:`grid gap-4 py-4`},wt={class:`space-y-2`},Tt={__name:`TransactionsTab`,props:{account:{type:Object,required:!0}},setup(s){let c=s,l=oe().toast,u=W([]),d=W([]),f=W(!0),m=W(``),h=W(0),g=W(20),_=W(0),b=W(!1),S=W(!1),w=W(``),T=W(!1),D=W(null),M=W(!1),N=W({startDate:null,endDate:null,minAmount:null,maxAmount:null,type:`ALL`,status:`ALL`,categoryIds:[]}),P=new e(`en-US`,{dateStyle:`medium`}),F=C({get:()=>N.value.startDate?r(N.value.startDate):void 0,set:e=>{N.value.startDate=e?e.toString():null}}),I=C({get:()=>N.value.endDate?r(N.value.endDate):void 0,set:e=>{N.value.endDate=e?e.toString():null}}),ue=C(()=>[...new Set(N.value.categoryIds)]);function H(e){D.value=e,S.value=!0}ce(async()=>{await Promise.all([U(),de()])}),se([h,m],()=>{U()});async function U(){try{f.value=!0;let e={bankAccountReference:c.account.reference,page:h.value,size:g.value,sort:`transactionDate,desc`,search:m.value};N.value.startDate&&(e.startDate=N.value.startDate),N.value.endDate&&(e.endDate=N.value.endDate),N.value.minAmount&&(e.minAmount=N.value.minAmount),N.value.maxAmount&&(e.maxAmount=N.value.maxAmount),N.value.type&&N.value.type!==`ALL`&&(e.type=N.value.type),N.value.status&&N.value.status!==`ALL`&&(e.status=N.value.status),N.value.categoryIds&&N.value.categoryIds.length>0&&(e.categoryIds=N.value.categoryIds);let t=await $.getTransactions(e);t&&(u.value=(t.content||[]).map(e=>({...e,selectedCategoryId:e.category?.id||null,saving:!1})),_.value=t.totalElements||0)}catch(e){console.error(`Failed to load transactions`,e)}finally{f.value=!1}}async function de(){try{d.value=await We.getCategories()||[]}catch(e){console.error(`Failed to load categories`,e)}}async function Y(e){let t=e.category?.reference||null;if(e.selectedCategoryId)try{e.saving=!0;let t=await $.categorizeTransaction(e.reference,e.selectedCategoryId);l({title:`Categorized`,description:`Transaction updated successfully`}),t&&t.category&&(e.category=t.category,e.categoryName=t.category.name,e.selectedCategoryId=t.category.reference)}catch(n){console.error(`Failed to categorize transaction`,n),e.selectedCategoryId=t,l({title:`Error`,description:`Failed to categorize transaction`,variant:`destructive`})}finally{e.saving=!1}}async function ye(){try{b.value=!0;let e=await $.autoCategorizeAll();l({title:`Auto-Categorization Started`,description:e.message||`AI is processing your transactions.`}),setTimeout(U,3e3)}catch{l({title:`Error`,description:`Failed to start auto-categorization`,variant:`destructive`})}finally{b.value=!1}}async function X(){if(w.value)try{T.value=!0;let e=await We.createCategory({name:w.value});d.value.push(e),D.value&&=(D.value.selectedCategoryId=e.reference,await Y(D.value),null),S.value=!1,w.value=``,l({title:`Category Created`,description:`${e.name} added successfully`})}catch{l({title:`Error`,description:`Failed to create category`,variant:`destructive`})}finally{T.value=!1}}function Ee(){U()}function De(){h.value=0,M.value=!1,U()}function Oe(){N.value={startDate:null,endDate:null,minAmount:null,maxAmount:null,type:`ALL`,status:`ALL`,categoryIds:[]},De()}function ke(e){let t=N.value.categoryIds.indexOf(e);t!==-1&&N.value.categoryIds.splice(t,1)}function Me(e){return e==null?`N/A`:new Intl.NumberFormat(`en-NG`,{style:`currency`,currency:c.account.currency||`NGN`}).format(e)}function Ne(e){return e?new Date(e).toLocaleDateString(`en-US`,{year:`numeric`,month:`short`,day:`numeric`}):`N/A`}function Pe(e){return{APPROVED:`default`,PENDING_REVIEW:`warning`,REJECTED:`destructive`}[e]||`secondary`}return(e,r)=>(V(),y(`div`,Ge,[E(`div`,Ke,[j(v(be),{class:`p-6 flex items-center justify-between`},{default:L(()=>[r[15]||=E(`div`,null,[E(`h3`,{class:`text-lg font-semibold text-slate-800`},`AI Auto-Categorization`),E(`p`,{class:`text-gray-500 text-sm`},`Automatically assign categories to transactions using AI.`)],-1),j(v(J),{onClick:ye,disabled:b.value},{default:L(()=>[E(`i`,{class:z([`fa mr-2`,b.value?`fa-cog animate-spin`:`fa-magic`])},null,2),x(` `+k(b.value?`Processing...`:`Auto-Categorize All`),1)]),_:1},8,[`disabled`])]),_:1})]),j(v(be),{class:`p-0 overflow-hidden`},{default:L(()=>[E(`div`,qe,[E(`div`,Je,[E(`div`,Ye,[r[16]||=E(`i`,{class:`fa fa-search absolute left-3 top-1/2 -translate-y-1/2 text-gray-400`},null,-1),j(v(q),{modelValue:m.value,"onUpdate:modelValue":r[0]||=e=>m.value=e,placeholder:`Search transactions...`,class:`pl-9 rounded-full`},null,8,[`modelValue`])]),j(v(J),{variant:`outline`,class:`rounded-full`,onClick:r[1]||=e=>M.value=!0},{default:L(()=>[...r[17]||=[E(`i`,{class:`fa fa-filter mr-2`},null,-1),x(` Filter `,-1)]]),_:1})]),E(`div`,Xe,[j(v(J),{variant:`outline`,class:`rounded-full`,onClick:Ee},{default:L(()=>[E(`i`,{class:z([`fa fa-sync-alt`,{"animate-spin":f.value}])},null,2)]),_:1})])]),E(`div`,Ze,[E(`table`,Qe,[r[23]||=E(`thead`,{class:`bg-gray-50 text-gray-600 font-medium border-b`},[E(`tr`,null,[E(`th`,{class:`px-6 py-3`},`Date`),E(`th`,{class:`px-6 py-3`},`Description`),E(`th`,{class:`px-6 py-3`},`Category`),E(`th`,{class:`px-6 py-3 text-right`},`Amount`),E(`th`,{class:`px-6 py-3 text-center`},`Status`)])],-1),E(`tbody`,$e,[f.value&&u.value.length===0?(V(),y(`tr`,et,[...r[18]||=[E(`td`,{colspan:`5`,class:`px-6 py-12 text-center text-gray-500`},[E(`i`,{class:`fa fa-cog animate-spin mr-2`}),x(` Loading transactions... `)],-1)]])):u.value.length===0?(V(),y(`tr`,tt,[...r[19]||=[E(`td`,{colspan:`5`,class:`px-6 py-12 text-center text-gray-500`},` No transactions found `,-1)]])):K(``,!0),(V(!0),y(O,null,R(u.value,e=>(V(),y(`tr`,{key:e.id,class:`hover:bg-gray-50 transition-colors`},[E(`td`,nt,k(Ne(e.transactionDate)),1),E(`td`,rt,k(e.description),1),E(`td`,it,[E(`div`,at,[j(v(te),{"model-value":e.selectedCategoryId,"onUpdate:modelValue":t=>{e.selectedCategoryId=t,Y(e)},class:`relative w-full max-w-xs`},{default:L(()=>[j(v(ee),{class:`w-full`},{default:L(()=>[j(v(p),{class:`rounded-full w-full shadow-none border-stone-100 bg-stone-50 focus:bg-white mt-1 text-xs`,placeholder:e.categoryName||`Select category...`,"display-value":e=>d.value.find(t=>t.reference===e)?.name||``},null,8,[`placeholder`,`display-value`])]),_:2},1024),j(v(ne),{class:`absolute bg-white z-50 border rounded-sm mt-1 px-2 py-3 max-h-[200px] overflow-y-auto w-full min-w-[200px]`},{default:L(()=>[(V(!0),y(O,null,R(d.value,e=>(V(),A(v(re),{key:e.reference,value:e.reference,class:`px-4 py-2 rounded-full cursor-pointer hover:bg-gray-100 text-xs`},{default:L(()=>[x(k(e.name),1)]),_:2},1032,[`value`]))),128)),E(`div`,ot,[j(v(J),{variant:`ghost`,size:`sm`,class:`w-full justify-start text-blue-600 rounded-full`,onClick:B(t=>H(e),[`stop`])},{default:L(()=>[...r[20]||=[E(`i`,{class:`fa fa-plus mr-2`},null,-1),x(` Create New `,-1)]]),_:1},8,[`onClick`])])]),_:2},1024)]),_:2},1032,[`model-value`,`onUpdate:modelValue`]),e.saving?(V(),y(`div`,st,[...r[21]||=[E(`i`,{class:`fa fa-cog animate-spin text-xs`},null,-1)]])):e.selectedCategoryId&&e.selectedCategoryId===e.category?.id?(V(),y(`div`,ct,[...r[22]||=[E(`i`,{class:`fa fa-check text-xs`},null,-1)]])):K(``,!0)])]),E(`td`,{class:z([`px-6 py-4 text-right font-semibold`,e.amount<0?`text-slate-800`:e.type==`DEBIT`?`text-red-800`:`text-green-700`])},k(Me(e.amount)),3),E(`td`,lt,[j(v(Te),{variant:Pe(e.status),class:`rounded-full text-xs`},{default:L(()=>[x(k(e.status),1)]),_:2},1032,[`variant`])])]))),128))])])]),E(`div`,ut,[E(`span`,null,`Showing `+k(h.value*g.value+1)+` to `+k(Math.min((h.value+1)*g.value,_.value))+` of `+k(_.value)+` results`,1),E(`div`,dt,[j(v(J),{variant:`outline`,size:`sm`,disabled:h.value===0,onClick:r[2]||=e=>h.value--},{default:L(()=>[...r[24]||=[x(` Previous `,-1)]]),_:1},8,[`disabled`]),j(v(J),{variant:`outline`,size:`sm`,disabled:(h.value+1)*g.value>=_.value,onClick:r[3]||=e=>h.value++},{default:L(()=>[...r[25]||=[x(` Next `,-1)]]),_:1},8,[`disabled`])])])]),_:1}),j(v(pe),{open:M.value,"onUpdate:open":r[11]||=e=>M.value=e},{default:L(()=>[j(v(me),{class:`sm:max-w-[500px]`},{default:L(()=>[j(v(he),null,{default:L(()=>[j(v(_e),null,{default:L(()=>[...r[26]||=[x(`Filter Transactions`,-1)]]),_:1}),j(v(ge),null,{default:L(()=>[...r[27]||=[x(`Refine your transaction list.`,-1)]]),_:1})]),_:1}),E(`div`,ft,[E(`div`,pt,[E(`div`,mt,[j(v(Z),null,{default:L(()=>[...r[28]||=[x(`Start Date`,-1)]]),_:1}),j(v(i),null,{default:L(()=>[j(v(o),{"as-child":``},{default:L(()=>[j(v(J),{variant:`outline`,class:z(v(G)(`w-full justify-start text-left font-normal rounded-full`,!F.value&&`text-muted-foreground`))},{default:L(()=>[j(v(le),{class:`mr-2 h-4 w-4`}),x(` `+k(F.value?v(P).format(F.value.toDate(v(a)())):`Pick a date`),1)]),_:1},8,[`class`])]),_:1}),j(v(n),{class:`w-auto p-0`},{default:L(()=>[j(v(t),{modelValue:F.value,"onUpdate:modelValue":r[4]||=e=>F.value=e,"initial-focus":``},null,8,[`modelValue`])]),_:1})]),_:1})]),E(`div`,ht,[j(v(Z),null,{default:L(()=>[...r[29]||=[x(`End Date`,-1)]]),_:1}),j(v(i),null,{default:L(()=>[j(v(o),{"as-child":``},{default:L(()=>[j(v(J),{variant:`outline`,class:z(v(G)(`w-full justify-start text-left font-normal rounded-full`,!I.value&&`text-muted-foreground`))},{default:L(()=>[j(v(le),{class:`mr-2 h-4 w-4`}),x(` `+k(I.value?v(P).format(I.value.toDate(v(a)())):`Pick a date`),1)]),_:1},8,[`class`])]),_:1}),j(v(n),{class:`w-auto p-0`},{default:L(()=>[j(v(t),{modelValue:I.value,"onUpdate:modelValue":r[5]||=e=>I.value=e,"initial-focus":``},null,8,[`modelValue`])]),_:1})]),_:1})])]),E(`div`,gt,[E(`div`,_t,[j(v(Z),null,{default:L(()=>[...r[30]||=[x(`Min Amount`,-1)]]),_:1}),j(v(q),{type:`number`,modelValue:N.value.minAmount,"onUpdate:modelValue":r[6]||=e=>N.value.minAmount=e,placeholder:`0.00`,class:`rounded-full`},null,8,[`modelValue`])]),E(`div`,vt,[j(v(Z),null,{default:L(()=>[...r[31]||=[x(`Max Amount`,-1)]]),_:1}),j(v(q),{type:`number`,modelValue:N.value.maxAmount,"onUpdate:modelValue":r[7]||=e=>N.value.maxAmount=e,placeholder:`∞`,class:`rounded-full`},null,8,[`modelValue`])])]),E(`div`,yt,[E(`div`,bt,[j(v(Z),null,{default:L(()=>[...r[32]||=[x(`Type`,-1)]]),_:1}),j(v(xe),{modelValue:N.value.type,"onUpdate:modelValue":r[8]||=e=>N.value.type=e},{default:L(()=>[j(v(Ce),{class:`rounded-full`},{default:L(()=>[j(v(we),{placeholder:`All`})]),_:1}),j(v(Se),null,{default:L(()=>[j(v(Q),{value:`ALL`},{default:L(()=>[...r[33]||=[x(`All`,-1)]]),_:1}),j(v(Q),{value:`DEBIT`},{default:L(()=>[...r[34]||=[x(`Debit`,-1)]]),_:1}),j(v(Q),{value:`CREDIT`},{default:L(()=>[...r[35]||=[x(`Credit`,-1)]]),_:1})]),_:1})]),_:1},8,[`modelValue`])]),E(`div`,xt,[j(v(Z),null,{default:L(()=>[...r[36]||=[x(`Status`,-1)]]),_:1}),j(v(xe),{modelValue:N.value.status,"onUpdate:modelValue":r[9]||=e=>N.value.status=e},{default:L(()=>[j(v(Ce),{class:`rounded-full`},{default:L(()=>[j(v(we),{placeholder:`All`})]),_:1}),j(v(Se),null,{default:L(()=>[j(v(Q),{value:`ALL`},{default:L(()=>[...r[37]||=[x(`All`,-1)]]),_:1}),j(v(Q),{value:`APPROVED`},{default:L(()=>[...r[38]||=[x(`Approved`,-1)]]),_:1}),j(v(Q),{value:`PENDING_REVIEW`},{default:L(()=>[...r[39]||=[x(`Pending Review`,-1)]]),_:1}),j(v(Q),{value:`REJECTED`},{default:L(()=>[...r[40]||=[x(`Rejected`,-1)]]),_:1})]),_:1})]),_:1},8,[`modelValue`])])]),E(`div`,St,[j(v(Z),null,{default:L(()=>[...r[41]||=[x(`Categories`,-1)]]),_:1}),j(v(te),{modelValue:N.value.categoryIds,"onUpdate:modelValue":r[10]||=e=>N.value.categoryIds=e,multiple:``},{default:L(()=>[j(v(Ae),{class:`flex h-auto min-h-10 w-full flex-wrap items-center justify-start gap-1 rounded-full border bg-transparent px-3 py-2 text-sm shadow-sm ring-offset-background placeholder:text-muted-foreground focus-within:ring-0 focus-within:ring-ring focus-within:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50`},{default:L(()=>[(V(!0),y(O,null,R(ue.value,e=>(V(),A(v(Te),{key:e,variant:`outline`,class:`rounded-full px-2 py-0.5 text-xs flex items-center bg-white gap-1`},{default:L(()=>[x(k(d.value.find(t=>t.reference===e)?.name)+` `,1),j(v(fe),{class:`h-3 w-3 cursor-pointer hover:text-red-500`,onClick:B(t=>ke(e),[`stop`])},null,8,[`onClick`])]),_:2},1024))),128)),j(v(p),{class:`flex-1 h-6 min-w-[100px] border-none shadow-none focus-visible:ring-0 p-0 text-sm bg-transparent placeholder:text-muted-foreground`,placeholder:`Select categories...`})]),_:1}),j(v(ne),{class:`z-50 min-w-[200px] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md`},{default:L(()=>[j(v(je),null,{default:L(()=>[...r[42]||=[x(`No category found.`,-1)]]),_:1}),j(v(ie),null,{default:L(()=>[(V(!0),y(O,null,R(d.value,e=>(V(),A(v(re),{key:e.reference,value:e.reference,class:`cursor-pointer select-none rounded-sm px-2 py-1.5 text-sm outline-none data-[highlighted]:bg-accent data-[highlighted]:text-accent-foreground`},{default:L(()=>[x(k(e.name)+` `,1),j(v(ae),{class:z(v(G)(`mr-2 h-4 w-4`,N.value.categoryIds.includes(e.reference)?`opacity-100`:`opacity-0`))},null,8,[`class`])]),_:2},1032,[`value`]))),128))]),_:1})]),_:1})]),_:1},8,[`modelValue`])])]),j(v(ve),{class:`gap-2`},{default:L(()=>[j(v(J),{variant:`ghost`,onClick:Oe,class:`rounded-full`},{default:L(()=>[...r[43]||=[x(`Clear Filters`,-1)]]),_:1}),j(v(J),{onClick:De,class:`rounded-full`},{default:L(()=>[...r[44]||=[x(`Apply`,-1)]]),_:1})]),_:1})]),_:1})]),_:1},8,[`open`]),j(v(pe),{open:S.value,"onUpdate:open":r[14]||=e=>S.value=e},{default:L(()=>[j(v(me),{class:`sm:max-w-[425px]`},{default:L(()=>[j(v(he),null,{default:L(()=>[j(v(_e),null,{default:L(()=>[...r[45]||=[x(`Create New Category`,-1)]]),_:1}),j(v(ge),null,{default:L(()=>[...r[46]||=[x(`Add a new category for your transactions.`,-1)]]),_:1})]),_:1}),E(`div`,Ct,[E(`div`,wt,[j(v(Z),null,{default:L(()=>[...r[47]||=[x(`Name`,-1)]]),_:1}),j(v(q),{modelValue:w.value,"onUpdate:modelValue":r[12]||=e=>w.value=e,placeholder:`e.g., Office Supplies`,class:`rounded-full`},null,8,[`modelValue`])])]),j(v(ve),null,{default:L(()=>[j(v(J),{variant:`outline`,onClick:r[13]||=e=>S.value=!1,class:`rounded-full`},{default:L(()=>[...r[48]||=[x(`Cancel`,-1)]]),_:1}),j(v(J),{onClick:X,disabled:T.value,class:`rounded-full`},{default:L(()=>[x(k(T.value?`Creating...`:`Create`),1)]),_:1},8,[`disabled`])]),_:1})]),_:1})]),_:1},8,[`open`])]))}},Et={class:`p-6`},Dt={class:`mb-8 text-center`},Ot={class:`text-gray-500 text-sm`},kt={key:0,class:`grid grid-cols-1 md:grid-cols-2 gap-4`},At={key:1,class:`mt-6 text-center`},jt={key:2,class:`space-y-6`},Mt={class:`flex justify-between`},Nt={key:3,class:`text-center py-12`},Pt={key:4,class:`space-y-6 text-center`},Ft={__name:`UploadWizard`,props:{account:{type:Object,required:!0}},emits:[`upload-complete`,`close`],setup(e,{emit:t}){let n=e,r=t,i=oe().toast,a=W(1),o=W(null),s=W(null);function c(e){o.value=e,e===`file`?a.value=2:i({title:`Coming Soon`,description:`Bank API integration will be available shortly.`,variant:`secondary`})}function l(){s.value.click()}function u(e){let t=e.target.files[0];t&&f(t)}function d(e){let t=e.dataTransfer.files[0];t&&f(t)}async function f(e){a.value=3;try{await $.uploadTransactionFile(n.account.reference,e),a.value=4,i({title:`Upload Complete`,description:`File uploaded successfully.`,variant:`success`})}catch(e){a.value=2,i({title:`Upload Failed`,description:e.message||`Failed to upload file.`,variant:`destructive`})}}function ee(){r(`upload-complete`),setTimeout(()=>{a.value=1,o.value=null},500)}return(t,n)=>(V(),y(`div`,Et,[E(`div`,Dt,[n[5]||=E(`h2`,{class:`text-xl font-semibold text-slate-800`},`Sync Transactions`,-1),E(`p`,Ot,`Choose how you want to import transactions into `+k(e.account?.accountName||`this account`),1)]),a.value===1?(V(),y(`div`,kt,[j(v(X),{class:z([`p-6 cursor-pointer hover:border-blue-500 transition-all border-2`,o.value===`file`?`border-blue-500 bg-blue-50`:`border-transparent hover:bg-slate-50`]),onClick:n[0]||=e=>c(`file`)},{default:L(()=>[...n[6]||=[E(`div`,{class:`flex flex-col items-center text-center gap-3`},[E(`div`,{class:`h-12 w-12 rounded-full bg-blue-100 flex items-center justify-center text-blue-600`},[E(`i`,{class:`fa fa-file-upload text-xl`})]),E(`div`,null,[E(`h3`,{class:`font-medium text-slate-800`},`Upload File`),E(`p`,{class:`text-xs text-gray-500 mt-1`},`PDF, CSV, or Excel bank statements`)])],-1)]]),_:1},8,[`class`]),j(v(X),{class:z([`p-6 cursor-pointer hover:border-yellow-500 transition-all border-2`,o.value===`api`?`border-yellow-500 bg-yellow-50`:`border-transparent hover:bg-slate-50`]),onClick:n[1]||=e=>c(`api`)},{default:L(()=>[...n[7]||=[E(`div`,{class:`flex flex-col items-center text-center gap-3`},[E(`div`,{class:`h-12 w-12 rounded-full bg-yellow-100 flex items-center justify-center text-yellow-600`},[E(`i`,{class:`fa fa-university text-xl`})]),E(`div`,null,[E(`h3`,{class:`font-medium text-slate-800`},`Connect Bank API`),E(`p`,{class:`text-xs text-gray-500 mt-1`},`Mono, Flutterwave, Paystack`)])],-1)]]),_:1},8,[`class`])])):K(``,!0),a.value===1?(V(),y(`div`,At,[j(v(Y),{variant:`ghost`,onClick:n[2]||=e=>t.$emit(`close`)},{default:L(()=>[...n[8]||=[x(`Cancel`,-1)]]),_:1})])):K(``,!0),a.value===2&&o.value===`file`?(V(),y(`div`,jt,[E(`div`,{class:`border-2 shadow-md border-gray-300 rounded-lg p-12 text-center hover:bg-gray-50 transition-colors cursor-pointer`,onDragover:n[3]||=B(()=>{},[`prevent`]),onDrop:B(d,[`prevent`]),onClick:l},[E(`input`,{type:`file`,ref_key:`fileInput`,ref:s,class:`hidden`,onChange:u,accept:`.csv,.xlsx,.xls,.pdf`},null,544),n[9]||=E(`i`,{class:`fa fa-cloud-upload-alt text-5xl text-blue-100 mb-4`},null,-1),n[10]||=E(`h3`,{class:`text-lg font-medium text-slate-700`},`Click or drag file to upload`,-1),n[11]||=E(`p`,{class:`text-sm text-gray-500 mt-2`},`Supported formats: CSV, Excel, PDF`,-1)],32),E(`div`,Mt,[j(v(Y),{variant:`ghost`,onClick:n[4]||=e=>a.value=1},{default:L(()=>[...n[12]||=[x(`Back`,-1)]]),_:1})])])):K(``,!0),a.value===3?(V(),y(`div`,Nt,[...n[13]||=[M(`<div class="relative w-24 h-24 mx-auto mb-6"><div class="absolute inset-0 border-4 border-gray-100 rounded-full"></div><div class="absolute inset-0 border-4 border-blue-500 rounded-full border-t-transparent animate-spin"></div><i class="fa fa-magic absolute inset-0 flex items-center justify-center text-blue-500 text-2xl"></i></div><h3 class="text-lg font-medium text-slate-800">Processing...</h3><p class="text-gray-500 mt-2">Uploading and analyzing your transaction file.</p>`,3)]])):K(``,!0),a.value===4?(V(),y(`div`,Pt,[n[15]||=E(`div`,{class:`bg-green-50 text-green-700 p-6 rounded-full w-20 h-20 mx-auto flex items-center justify-center`},[E(`i`,{class:`fa fa-check text-3xl`})],-1),n[16]||=E(`div`,null,[E(`h3`,{class:`text-xl font-semibold text-slate-800`},`Upload Successful!`),E(`p`,{class:`text-gray-500 mt-2`},`Your transactions are being processed in the background.`)],-1),j(v(Y),{onClick:ee,class:`w-full md:w-auto min-w-[200px]`},{default:L(()=>[...n[14]||=[x(`View Transactions`,-1)]]),_:1})])):K(``,!0)]))}},It={__name:`ReviewQueue`,props:{account:{type:Object,required:!0}},setup(e){return(e,t)=>(V(),A(v(X),{class:`p-0 overflow-hidden`},{default:L(()=>[...t[0]||=[E(`div`,{class:`p-6 border-b`},[E(`h2`,{class:`text-lg font-semibold text-slate-800`},`Review Queue`),E(`p`,{class:`text-gray-500 text-sm`},`Transactions flagged for manual review (low confidence).`)],-1),E(`div`,{class:`text-center py-12 text-gray-500`},[E(`i`,{class:`fa fa-check-double text-4xl text-gray-200 mb-4`}),E(`p`,null,`No items in review queue`),E(`p`,{class:`text-xs mt-1`},`Great job! All transactions are processed.`)],-1)]]),_:1}))}},Lt={class:`relative w-full min-h-screen overflow-y-scroll rounded-sm py-5`,style:{"scrollbar-width":`none`}},Rt={class:`container mx-auto p-8 relative`},zt={class:`flex flex-col md:flex-row justify-between items-start md:items-center gap-4 mb-8`},Bt={class:`flex flex-col`},Vt={class:`text-2xl font-bold text-slate-800 flex items-center gap-2`},Ht={class:`text-gray-600 text-sm`},Ut={class:`flex gap-3 w-full md:w-auto`},Wt={class:`min-h-[400px]`},Gt={key:0,class:`flex justify-center items-center h-64`},Kt={class:`mb-6 z-0 relative`},qt={__name:`AccountDashboard`,setup(e){let t=ue(),n=de(),r=oe().toast,i=t.params.reference,a=W(null),o=W(!0),s=W(!1),u=W(`overview`),f=W(0),ee=[{id:`overview`,name:`Overview`,icon:`fa-chart-pie`},{id:`transactions`,name:`Transactions`,icon:`fa-list`},{id:`review`,name:`Review Queue`,icon:`fa-tasks`},{id:`settings`,name:`Settings`,icon:`fa-cog`}];ce(async()=>{await p()});async function p(){try{if(o.value=!0,a.value=((await Ee.getBankAccounts()).data||[]).find(e=>e.reference===i),!a.value)throw Error(`Account not found`)}catch{r({id:`load-error`,title:`Error`,description:`Failed to load account details`,variant:`destructive`}),n.push(`/accounts`)}finally{o.value=!1}}function te(){s.value=!1,u.value=`transactions`,p(),f.value++}function ne(e){return e?`****${e.slice(-4)}`:`N/A`}return(e,t)=>(V(),y(`div`,Lt,[E(`div`,Rt,[E(`div`,zt,[E(`div`,Bt,[E(`h1`,Vt,k(a.value?.accountName||`Loading...`),1),E(`p`,Ht,k(a.value?.bankName)+` • `+k(ne(a.value?.accountNumber)),1)]),E(`div`,Ut,[j(v(pe),{open:s.value,"onUpdate:open":t[1]||=e=>s.value=e},{default:L(()=>[j(v(ke),{"as-child":``},{default:L(()=>[j(v(Y),{variant:`outline`,class:`rounded-full flex-1 md:flex-none`,disabled:!a.value},{default:L(()=>[...t[3]||=[E(`i`,{class:`fa fa-sync mr-2`},null,-1),x(` Sync `,-1)]]),_:1},8,[`disabled`])]),_:1}),j(v(me),{class:`max-w-3xl p-0`},{default:L(()=>[j(Ft,{account:a.value,onUploadComplete:te,onClose:t[0]||=e=>s.value=!1},null,8,[`account`])]),_:1})]),_:1},8,[`open`]),j(v(l),null,{default:L(()=>[j(v(d),{"as-child":``},{default:L(()=>[j(v(Y),{class:`rounded-full flex-1 md:flex-none shadow-md hover:shadow-blue-400`},{default:L(()=>[j(v(T),{class:`mr-2 h-4 w-4 text-blue-200`}),t[4]||=x(` Flow `,-1)]),_:1})]),_:1}),j(v(c),{class:`w-[400px] sm:w-[540px] p-0 border-l shadow-2xl`},{default:L(()=>[j(ye,{account:a.value},null,8,[`account`])]),_:1})]),_:1})])]),E(`div`,Wt,[o.value?(V(),y(`div`,Gt,[...t[5]||=[E(`i`,{class:`fa fa-cog animate-spin text-3xl text-gray-400`},null,-1)]])):(V(),A(v(m),{key:1,modelValue:u.value,"onUpdate:modelValue":t[2]||=e=>u.value=e,class:`w-full`},{default:L(()=>[E(`div`,Kt,[t[6]||=E(`hr`,{class:`h-1 bg-slate-50 mb-1 mt-10 opacity-20`},null,-1),j(v(g),{class:`rounded-full bg-stone-100 text-blue-950 px-0.5 py-0.5 w-fit`},{default:L(()=>[(V(),y(O,null,R(ee,e=>j(v(_),{key:e.id,value:e.id,class:`px-4 py-1 rounded-full data-[state=active]:bg-stone-50 data-[state=active]:text-blue-950 transition-all`},{default:L(()=>[E(`i`,{class:z([`fa mr-2`,e.icon])},null,2),x(` `+k(e.name),1)]),_:2},1032,[`value`])),64))]),_:1}),t[7]||=E(`hr`,{class:`h-1 bg-slate-50 mt-2 mb-10 opacity-30`},null,-1)]),j(v(h),{value:`overview`,class:``},{default:L(()=>[j(He,{account:a.value},null,8,[`account`])]),_:1}),j(v(h),{value:`transactions`,class:``},{default:L(()=>[(V(),A(Tt,{account:a.value,key:f.value},null,8,[`account`]))]),_:1}),j(v(h),{value:`review`,class:``},{default:L(()=>[j(It,{account:a.value},null,8,[`account`])]),_:1}),j(v(h),{value:`settings`,class:``},{default:L(()=>[...t[8]||=[E(`div`,{class:`p-8 text-center text-gray-500 bg-slate-50 rounded-lg border shadow-md`},[E(`i`,{class:`fa fa-cog text-4xl mb-4 text-gray-300`}),E(`p`,null,`Settings coming soon`)],-1)]]),_:1})]),_:1},8,[`modelValue`]))])])]))}};export{qt as default};