import"./useFormControl-DvkL6jNJ.js";import"./useNonce-BMN6rGol.js";import"./nullish-CfjOSA4G.js";import"./useArrowNavigation-siWGBYoD.js";import"./ConfigProvider-COTvgjgS.js";import"./useHideOthers-DDpiFsmm.js";import"./useDirection-D13jZBr-.js";import"./PopperAnchor-D24J2rYd.js";import"./useId-Cbz22I98.js";import"./PopperContent-C4v9BcUF.js";import"./useTypeahead-m4pU0-pP.js";import"./DialogPortal-DIyf6CsR.js";import"./Teleport-BgQd8kcT.js";import"./utils-B7nnpTSD.js";import"./DialogTitle-BUgZPGK9.js";import"./utils-DPCF9wwr.js";import"./RovingFocusGroup-C_eVAqgr.js";import{a as e,i as t,n,r,t as i}from"./DropdownMenuTrigger-BeoVkMbF.js";import{t as a}from"./DropdownMenuLabel-C-EqM3Yw.js";import"./MenuSeparator-BnSs3ls2.js";import{t as o}from"./DropdownMenuSeparator-CrFXUrXN.js";import"./Label-Nwra6Wd2.js";import"./SelectViewport-BEIerl6o.js";import{$t as s,Ai as c,At as ee,Bi as l,C as u,D as d,Di as te,Gi as ne,Gn as f,Hi as p,Ii as m,Mr as h,Ni as g,Oi as _,Pi as v,Qi as y,Sa as b,Si as x,Ta as S,Tn as re,Un as ie,Vn as ae,Xi as C,Xt as w,Yi as T,Yn as E,Zn as D,b as O,di as k,dt as A,ha as j,hn as oe,hr as M,i as N,ji as P,jr as F,ki as I,nn as L,o as R,ot as z,qi as B,rn as V,sa as H,tn as U,tr as W,ut as G,wi as K,xa as q,xn as se}from"./index-DYsAJfvN.js";import{n as J}from"./button-CTk8BIqm.js";import{a as ce,i as le,n as ue,r as de,t as fe}from"./DialogTitle-DHCIto2m.js";import{t as pe}from"./DialogFooter-B71g0EPN.js";import{t as me}from"./badge-MmCqtBxz.js";import{t as he}from"./Label-D176n55E.js";import{a as ge,i as _e,n as ve,r as Y,t as ye}from"./SelectValue-02ZP3gOE.js";var be=m({__name:`DropdownMenu`,props:{defaultOpen:{type:Boolean},open:{type:Boolean},dir:{},modal:{type:Boolean}},emits:[`update:open`],setup(t,{emit:n}){let r=F(t,n);return(t,n)=>(B(),I(q(e),p({"data-slot":`dropdown-menu`},q(r)),{default:H(()=>[C(t.$slots,`default`)]),_:3},16))}}),xe=m({__name:`DropdownMenuContent`,props:{forceMount:{type:Boolean},loop:{type:Boolean},side:{},sideOffset:{default:4},sideFlip:{type:Boolean},align:{},alignOffset:{},alignFlip:{type:Boolean},avoidCollisions:{type:Boolean},collisionBoundary:{},collisionPadding:{},arrowPadding:{},sticky:{},hideWhenDetached:{type:Boolean},positionStrategy:{},updatePositionStrategy:{},disableUpdateOnLayoutShift:{type:Boolean},prioritizePosition:{type:Boolean},reference:{},asChild:{type:Boolean},as:{},class:{}},emits:[`escapeKeyDown`,`pointerDownOutside`,`focusOutside`,`interactOutside`,`closeAutoFocus`],setup(e,{emit:r}){let i=e,a=r,o=k(i,`class`),s=F(o,a);return(e,r)=>(B(),I(q(n),null,{default:H(()=>[v(q(t),p({"data-slot":`dropdown-menu-content`},q(s),{class:q(M)(`bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 max-h-(--reka-dropdown-menu-content-available-height) min-w-[8rem] origin-(--reka-dropdown-menu-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border p-1 shadow-md`,i.class)}),{default:H(()=>[C(e.$slots,`default`)]),_:3},16,[`class`])]),_:3}))}}),Se=m({__name:`DropdownMenuItem`,props:{disabled:{type:Boolean},textValue:{},asChild:{type:Boolean},as:{},class:{},inset:{type:Boolean},variant:{default:`default`}},setup(e){let t=e,n=k(t,`inset`,`variant`,`class`),i=h(n);return(n,a)=>(B(),I(q(r),p({"data-slot":`dropdown-menu-item`,"data-inset":e.inset?``:void 0,"data-variant":e.variant},q(i),{class:q(M)(`focus:bg-white focus:text-accent-foreground data-[variant=destructive]:text-destructive-foreground data-[variant=destructive]:focus:bg-destructive/10 dark:data-[variant=destructive]:focus:bg-destructive/40 data-[variant=destructive]:focus:text-destructive-foreground data-[variant=destructive]:*:[svg]:!text-destructive-foreground [&_svg:not([class*='text-'])]:text-muted-foreground relative flex cursor-default items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 data-[inset]:pl-8 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4`,t.class)}),{default:H(()=>[C(n.$slots,`default`)]),_:3},16,[`data-inset`,`data-variant`,`class`]))}}),Ce=m({__name:`DropdownMenuLabel`,props:{asChild:{type:Boolean},as:{},class:{},inset:{type:Boolean}},setup(e){let t=e,n=k(t,`class`,`inset`),r=h(n);return(n,i)=>(B(),I(q(a),p({"data-slot":`dropdown-menu-label`,"data-inset":e.inset?``:void 0},q(r),{class:q(M)(`px-2 py-1.5 text-sm font-medium data-[inset]:pl-8`,t.class)}),{default:H(()=>[C(n.$slots,`default`)]),_:3},16,[`data-inset`,`class`]))}}),we=m({__name:`DropdownMenuSeparator`,props:{asChild:{type:Boolean},as:{},class:{}},setup(e){let t=e,n=k(t,`class`);return(e,r)=>(B(),I(q(o),p({"data-slot":`dropdown-menu-separator`},q(n),{class:q(M)(`bg-border -mx-1 my-1 h-px`,t.class)}),null,16,[`class`]))}}),Te=m({__name:`DropdownMenuTrigger`,props:{disabled:{type:Boolean},asChild:{type:Boolean},as:{}},setup(e){let t=h(e);return(e,n)=>(B(),I(q(i),p({"data-slot":`dropdown-menu-trigger`},q(t)),{default:H(()=>[C(e.$slots,`default`)]),_:3},16))}}),Ee={async getDocuments(e=0,t=50){return R.get(`/org/documents`,{query:{page:e,size:t},authorizeRequest:!0,organisationAware:!0})},async getDocumentsByCategory(e){return R.get(`/org/documents/category/${e}`,{authorizeRequest:!0,organisationAware:!0})},async searchDocuments(e){return R.get(`/org/documents/search`,{query:{query:e},authorizeRequest:!0,organisationAware:!0})},async getDocumentCounts(){return R.get(`/org/documents/counts`,{authorizeRequest:!0,organisationAware:!0})},async getDocument(e){return R.get(`/org/documents/${e}`,{authorizeRequest:!0,organisationAware:!0})},async uploadDocument(e,t,n={}){let r=new FormData;return r.append(`file`,e),r.append(`category`,t),r.append(`metadata`,JSON.stringify(n)),R.post(`/org/documents/upload`,{data:r,headers:{"Content-Type":`multipart/form-data`},authorizeRequest:!0,organisationAware:!0})},async updateDocument(e,t){return R.put(`/org/documents/${e}`,{data:t,authorizeRequest:!0,organisationAware:!0})},async archiveDocument(e){return R.delete(`/org/documents/${e}`,{authorizeRequest:!0,organisationAware:!0})},async getVersionHistory(e){return R.get(`/org/documents/${e}/versions`,{authorizeRequest:!0,organisationAware:!0})},async restoreVersion(e,t){return R.post(`/org/documents/${e}/versions/${t}/restore`,{data:{},authorizeRequest:!0,organisationAware:!0})}},De={class:`flex flex-col items-center justify-center h-full p-8 text-center`},Oe={class:`relative mb-8`},ke={class:`h-20 w-20 rounded-2xl bg-gradient-to-br from-sky-900 to-blue-950 flex items-center justify-center shadow-lg`},Ae={class:`grid grid-cols-2 gap-3 max-w-lg w-full mb-4`},je={class:b([`h-10 w-10 rounded-full flex items-center justify-center bg-gradient-to-b from-sky-900 to-blue-950`])},Me={class:`text-sm font-medium`},Ne={class:`max-w-lg w-full mb-8`},Pe={class:b([`h-8 w-8 rounded-lg flex items-center justify-center flex-shrink-0`])},Fe={class:`flex-1 text-sm`},Ie=[`onClick`,`title`],Le={key:0,class:`w-full max-w-lg`},Re={class:`space-y-2`},ze={class:`truncate`},Be={class:`ml-auto text-xs text-slate-400`},Ve={key:1,class:`mt-8 w-full max-w-lg p-4 bg-slate-50 rounded-xl`},He={class:`flex items-center justify-between mb-2`},Ue={class:`text-sm font-medium text-slate-700`},We={class:`text-2xl font-bold text-slate-900`},Ge={class:`text-xs text-slate-500 mt-1`},Ke={key:0,class:`py-4`},qe={class:`flex items-center gap-3 p-3 bg-slate-50 rounded-lg`},Je={class:`flex-1 min-w-0`},Ye={class:`text-sm font-medium truncate`},Xe={class:`text-xs text-slate-500`},Ze={class:`mt-4`},X={key:1,class:`py-8`},Z=`flow_pinned_actions`,Q={__name:`WelcomeView`,props:{account:Object},setup(e){let t=e,n=l(`openTab`),r=j(null),i=j(!1),a=j({show:!1,file:null,category:`BANK_STATEMENT`}),o=j([]);ne(()=>{let e=localStorage.getItem(Z);if(e)try{o.value=JSON.parse(e)}catch{o.value=[`upload`,`reconcile`,`table`,`invoice`]}else o.value=[`upload`,`reconcile`,`table`,`invoice`]});let p=[{id:`upload`,label:`Upload Statement`,icon:d,bgClass:`bg-blue-100`,iconClass:`text-blue-600`},{id:`reconcile`,label:`Start Reconciliation`,icon:w,bgClass:`bg-green-100`,iconClass:`text-green-600`},{id:`table`,label:`Create Table`,icon:L,bgClass:`bg-amber-100`,iconClass:`text-amber-600`},{id:`invoice`,label:`New Invoice`,icon:z,bgClass:`bg-purple-100`,iconClass:`text-purple-600`},{id:`calculator`,label:`Calculator`,icon:E,bgClass:`bg-teal-100`,iconClass:`text-teal-600`},{id:`search-docs`,label:`Search Documents`,icon:V,bgClass:`bg-indigo-100`,iconClass:`text-indigo-600`},{id:`contacts`,label:`Manage Contacts`,icon:u,bgClass:`bg-pink-100`,iconClass:`text-pink-600`},{id:`chart`,label:`Create Chart`,icon:ie,bgClass:`bg-orange-100`,iconClass:`text-orange-600`},{id:`journal`,label:`Journal Entry`,icon:W,bgClass:`bg-cyan-100`,iconClass:`text-cyan-600`},{id:`expense`,label:`Record Expense`,icon:se,bgClass:`bg-red-100`,iconClass:`text-red-600`},{id:`browse-files`,label:`Browse Files`,icon:s,bgClass:`bg-slate-100`,iconClass:`text-slate-600`},{id:`reports`,label:`Generate Report`,icon:D,bgClass:`bg-emerald-100`,iconClass:`text-emerald-600`}],m=te(()=>p.filter(e=>o.value.includes(e.id)));function h(e){return o.value.includes(e)}function C(e){let t=o.value.indexOf(e);t>-1?o.value.splice(t,1):o.value.push(e),localStorage.setItem(Z,JSON.stringify(o.value))}let k=j([]);function M(e){switch(e.id){case`upload`:a.value.show=!0,a.value.file=null,a.value.category=`BANK_STATEMENT`;break;case`reconcile`:n?.({id:`new-recon-`+Date.now(),type:`reconciliation`,title:`New Reconciliation`,data:null});break;case`table`:n?.({id:`new-table-`+Date.now(),type:`spreadsheet`,title:`Untitled Table`,data:null,unsaved:!0});break;case`invoice`:n?.({id:`new-invoice-`+Date.now(),type:`invoice`,title:`New Invoice`,data:{invoiceType:`INVOICE`}});break;case`chart`:n?.({id:`new-chart-`+Date.now(),type:`chart`,title:`New Chart`,data:null,unsaved:!0});break;case`journal`:n?.({id:`new-journal-`+Date.now(),type:`journal`,title:`Journal Entry`,data:null,unsaved:!0});break;case`expense`:n?.({id:`new-expense-`+Date.now(),type:`expense`,title:`New Expense`,data:null,unsaved:!0});break;case`calculator`:console.log(`Open calculator`);break;case`search-docs`:n?.({id:`search-docs`,type:`search`,title:`Search Documents`,data:null});break;case`contacts`:n?.({id:`contacts`,type:`contacts`,title:`Contacts`,data:null});break;case`browse-files`:n?.({id:`file-browser`,type:`browser`,title:`File Browser`,data:null});break;case`reports`:n?.({id:`tax-report-`+Date.now(),type:`tax-report`,title:`Tax Report`,data:null});break;default:console.log(`Action not implemented:`,e.id)}}function N(){r.value?.click()}function F(e){let t=e.target.files?.[0];t&&(a.value.file=t,t.name.toLowerCase().includes(`statement`)?a.value.category=`BANK_STATEMENT`:t.name.toLowerCase().includes(`invoice`)?a.value.category=`INVOICE`:t.name.toLowerCase().includes(`receipt`)&&(a.value.category=`RECEIPT`))}function R(e){let t=e.dataTransfer?.files?.[0];t&&(a.value.file=t)}function Q(){a.value.file=null,r.value&&(r.value.value=``)}async function $(){if(a.value.file){i.value=!0;try{let e=await Ee.uploadDocument(a.value.file,a.value.category);a.value.show=!1,e&&n?.({id:`doc-${e.reference}`,type:`document`,title:e.name||a.value.file.name,data:e})}catch(e){console.error(`Upload failed:`,e)}finally{i.value=!1}}}function Qe(e){n?.({id:e.id,type:e.type,title:e.name,data:e})}function $e(e){return{spreadsheet:L,document:U,chart:f,reconciliation:w}[e.type]||U}function et(e){if(!e)return``;let t=new Date(e),n=new Date-t,r=Math.floor(n/6e4);return r<60?`${r}m ago`:r<1440?`${Math.floor(r/60)}h ago`:t.toLocaleDateString()}function tt(e){return e==null?`N/A`:new Intl.NumberFormat(`en-NG`,{style:`currency`,currency:t.account?.currency||`NGN`}).format(e)}function nt(e){return e?new Date(e).toLocaleDateString(`en-US`,{month:`short`,day:`numeric`,hour:`2-digit`,minute:`2-digit`}):`Never`}function rt(e){return e<1024?e+` B`:e<1024*1024?(e/1024).toFixed(1)+` KB`:(e/(1024*1024)).toFixed(1)+` MB`}return(t,n)=>(B(),P(`div`,De,[_(`div`,Oe,[_(`div`,ke,[v(q(re),{class:`size-10 text-white`})])]),n[18]||=_(`h1`,{class:`text-2xl font-bold text-slate-800 mb-2`},` Flow Seamlessly`,-1),n[19]||=_(`p`,{class:`text-sm text-slate-500 max-w-md mb-8`},` Your integrated accounting workspace. Upload documents, reconcile accounts, and let AI do the heavy lifting. `,-1),_(`div`,Ae,[(B(!0),P(K,null,T(m.value,e=>(B(),I(q(J),{key:e.id,variant:`outline`,class:`h-auto p-4 flex flex-col items-center gap-2 hover:bg-slate-50 rounded-[6px] hover:border-blue-200 transition-all`,onClick:t=>M(e)},{default:H(()=>[_(`div`,je,[(B(),I(y(e.icon),{class:b([`h-5 w-5 text-white font-bold`])}))]),_(`span`,Me,S(e.label),1)]),_:2},1032,[`onClick`]))),128))]),_(`div`,Ne,[v(q(be),null,{default:H(()=>[v(q(Te),{asChild:``},{default:H(()=>[v(q(J),{variant:`ghost`,class:`w-full text-slate-500 hover:text-slate-700`},{default:H(()=>[v(q(oe),{class:`h-4 w-4 mr-2`}),n[4]||=g(` More Actions `,-1),v(q(ae),{class:`h-4 w-4 ml-2`})]),_:1})]),_:1}),v(q(xe),{class:`w-72 bg-stone-50 border-4 border-white rounded-[8px] overflow-y-scroll max-h-[350px] no-scrollbar`,align:`center`},{default:H(()=>[v(q(Ce),null,{default:H(()=>[...n[5]||=[g(`All Actions`,-1)]]),_:1}),v(q(we)),(B(),P(K,null,T(p,e=>_(`div`,{key:e.id},[v(q(Se),{class:`flex items-center gap-3 cursor-pointer hover:bg-white py-1.5 px-2 rounded-full`,onClick:t=>M(e)},{default:H(()=>[_(`div`,Pe,[(B(),I(y(e.icon),{class:b([`h-4 w-4`])}))]),_(`span`,Fe,S(e.label),1),_(`button`,{onClick:x(t=>C(e.id),[`stop`]),class:`p-1 rounded hover:bg-slate-100 transition-colors`,title:h(e.id)?`Unpin from quick actions`:`Pin to quick actions`},[h(e.id)?(B(),I(q(G),{key:0,class:`h-4 w-4 text-blue-500`})):(B(),I(q(A),{key:1,class:`h-4 w-4 text-slate-400`}))],8,Ie)]),_:2},1032,[`onClick`])])),64))]),_:1})]),_:1})]),k.value.length>0?(B(),P(`div`,Le,[n[6]||=_(`h3`,{class:`text-xs font-semibold text-slate-500 uppercase tracking-wider mb-3 text-left`},`Recent`,-1),_(`div`,Re,[(B(!0),P(K,null,T(k.value,e=>(B(),I(q(J),{key:e.id,variant:`ghost`,class:`w-full justify-start text-sm h-auto py-2 px-3`,onClick:t=>Qe(e)},{default:H(()=>[(B(),I(y($e(e)),{class:`h-4 w-4 mr-3 text-slate-400`})),_(`span`,ze,S(e.name),1),_(`span`,Be,S(et(e.openedAt)),1)]),_:2},1032,[`onClick`]))),128))])])):c(``,!0),e.account?(B(),P(`div`,Ve,[_(`div`,He,[_(`span`,Ue,S(e.account.accountName),1),v(q(me),{variant:`secondary`},{default:H(()=>[g(S(e.account.bankName),1)]),_:1})]),_(`div`,We,S(tt(e.account.balance)),1),_(`p`,Ge,` Last synced: `+S(nt(e.account.lastSyncedAt)),1)])):c(``,!0),_(`input`,{ref_key:`fileInput`,ref:r,type:`file`,class:`hidden`,accept:`.pdf,.csv,.xlsx,.xls,.jpg,.jpeg,.png`,onChange:F},null,544),v(q(ce),{open:a.value.show,"onUpdate:open":n[3]||=e=>a.value.show=e},{default:H(()=>[v(q(le),{class:`sm:max-w-md`},{default:H(()=>[v(q(ue),null,{default:H(()=>[v(q(fe),null,{default:H(()=>[...n[7]||=[g(`Upload Document`,-1)]]),_:1}),v(q(de),null,{default:H(()=>[...n[8]||=[g(` Select a file to upload. Supported formats: PDF, CSV, Excel, Images. `,-1)]]),_:1})]),_:1}),a.value.file?(B(),P(`div`,Ke,[_(`div`,qe,[v(q(U),{class:`h-8 w-8 text-blue-500`}),_(`div`,Je,[_(`p`,Ye,S(a.value.file.name),1),_(`p`,Xe,S(rt(a.value.file.size)),1)]),v(q(J),{variant:`ghost`,size:`sm`,class:`h-8 w-8 p-0`,onClick:Q},{default:H(()=>[v(q(O),{class:`h-4 w-4`})]),_:1})]),_(`div`,Ze,[v(q(he),{class:`text-xs`},{default:H(()=>[...n[9]||=[g(`Document Category`,-1)]]),_:1}),v(q(ge),{modelValue:a.value.category,"onUpdate:modelValue":n[0]||=e=>a.value.category=e,class:`mt-1`},{default:H(()=>[v(q(ve),null,{default:H(()=>[v(q(ye),{placeholder:`Select category`})]),_:1}),v(q(_e),null,{default:H(()=>[v(q(Y),{value:`BANK_STATEMENT`},{default:H(()=>[...n[10]||=[g(`Bank Statement`,-1)]]),_:1}),v(q(Y),{value:`INVOICE`},{default:H(()=>[...n[11]||=[g(`Invoice`,-1)]]),_:1}),v(q(Y),{value:`RECEIPT`},{default:H(()=>[...n[12]||=[g(`Receipt`,-1)]]),_:1}),v(q(Y),{value:`REPORT`},{default:H(()=>[...n[13]||=[g(`Report`,-1)]]),_:1}),v(q(Y),{value:`OTHER`},{default:H(()=>[...n[14]||=[g(`Other`,-1)]]),_:1})]),_:1})]),_:1},8,[`modelValue`])])])):(B(),P(`div`,X,[_(`div`,{class:`border-2 border-dashed border-slate-200 rounded-lg p-8 text-center cursor-pointer hover:border-blue-300 hover:bg-blue-50/50 transition-colors`,onClick:N,onDragover:n[1]||=x(()=>{},[`prevent`]),onDrop:x(R,[`prevent`])},[v(q(d),{class:`h-10 w-10 text-slate-400 mx-auto mb-3`}),n[15]||=_(`p`,{class:`text-sm text-slate-600`},`Click to browse or drag & drop`,-1),n[16]||=_(`p`,{class:`text-xs text-slate-400 mt-1`},`PDF, CSV, Excel, Images`,-1)],32)])),v(q(pe),null,{default:H(()=>[v(q(J),{variant:`outline`,onClick:n[2]||=e=>a.value.show=!1},{default:H(()=>[...n[17]||=[g(`Cancel`,-1)]]),_:1}),v(q(J),{onClick:$,disabled:!a.value.file||i.value},{default:H(()=>[i.value?(B(),I(q(ee),{key:0,class:`h-4 w-4 mr-2 animate-spin`})):c(``,!0),g(` `+S(i.value?`Uploading...`:`Upload`),1)]),_:1},8,[`disabled`])]),_:1})]),_:1})]),_:1},8,[`open`])]))}},$=N(Q,[[`__scopeId`,`data-v-86953362`]]);export{$ as default};