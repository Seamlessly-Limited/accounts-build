import{B as e,D as t,F as n,H as r,S as i,U as a,Y as o,_t as s,b as c,dt as l,et as u,ht as d,m as f,v as p,x as m,y as h}from"./index-4ZmatjLT.js";import{n as g,t as _}from"./nullish-BN9Uk3IV.js";import{l as v,t as y}from"./VisuallyHidden-BMoChTfG.js";import{u as b}from"./useForwardExpose-6sUiVR1u.js";import{t as x}from"./useDirection-aUV61Fbq.js";import{t as S}from"./useFormControl-GZWYQUly.js";import{t as C}from"./Collection-BIkV4l9P.js";import{t as w}from"./PopperRoot-DwqPv9ht.js";var T=[` `,`Enter`,`ArrowUp`,`ArrowDown`],E=[` `,`Enter`],D=10;function O(e,t,n){return e===void 0?!1:Array.isArray(e)?e.some(e=>k(e,t,n)):k(e,t,n)}function k(e,t,n){return e===void 0||t===void 0?!1:typeof e==`string`?e===t:typeof n==`function`?n(e,t):typeof n==`string`?e?.[n]===t?.[n]:g(e,t)}function A(e){return e==null||e===``||Array.isArray(e)&&e.length===0}var j={key:0,value:``},[M,N]=v(`SelectRoot`),P=t({inheritAttrs:!1,__name:`SelectRoot`,props:{open:{type:Boolean,required:!1,default:void 0},defaultOpen:{type:Boolean,required:!1},defaultValue:{type:null,required:!1},modelValue:{type:null,required:!1,default:void 0},by:{type:[String,Function],required:!1},dir:{type:String,required:!1},multiple:{type:Boolean,required:!1},autocomplete:{type:String,required:!1},disabled:{type:Boolean,required:!1},name:{type:String,required:!1},required:{type:Boolean,required:!1}},emits:[`update:modelValue`,`update:open`],setup(t,{emit:o}){let h=t,g=o,{required:v,disabled:y,multiple:T,dir:E}=d(h),D=b(h,`modelValue`,g,{defaultValue:h.defaultValue??(T.value?[]:void 0),passive:h.modelValue===void 0,deep:!0}),A=b(h,`open`,g,{defaultValue:h.defaultOpen,passive:h.open===void 0}),M=l(),P=l(),I=l({x:0,y:0}),L=p(()=>T.value&&Array.isArray(D.value)?D.value?.length===0:_(D.value));C({isProvider:!0});let R=x(E),z=S(M),B=l(new Set),V=p(()=>Array.from(B.value).map(e=>e.value).join(`;`));function H(e){if(T.value){let t=Array.isArray(D.value)?[...D.value]:[],n=t.findIndex(t=>k(t,e,h.by));n===-1?t.push(e):t.splice(n,1),D.value=[...t]}else D.value=e}function U(e){return Array.from(B.value).find(t=>O(e,t.value,h.by))}return N({triggerElement:M,onTriggerChange:e=>{M.value=e},valueElement:P,onValueElementChange:e=>{P.value=e},contentId:``,modelValue:D,onValueChange:H,by:h.by,open:A,multiple:T,required:v,onOpenChange:e=>{A.value=e},dir:R,triggerPointerDownPosRef:I,disabled:y,isEmptyModelValue:L,optionsSet:B,onOptionAdd:e=>{let t=U(e.value);t&&B.value.delete(t),B.value.add(e)},onOptionRemove:e=>{let t=U(e.value);t&&B.value.delete(t)}}),(t,o)=>(e(),c(s(w),null,{default:u(()=>[a(t.$slots,`default`,{modelValue:s(D),open:s(A)}),s(z)?(e(),c(F,{key:V.value,"aria-hidden":`true`,tabindex:`-1`,multiple:s(T),required:s(v),name:t.name,autocomplete:t.autocomplete,disabled:s(y),value:s(D)},{default:u(()=>[s(_)(s(D))?(e(),i(`option`,j)):m(`v-if`,!0),(e(!0),i(f,null,r(Array.from(B.value),t=>(e(),i(`option`,n({key:t.value??``},{ref_for:!0},t),null,16))),128))]),_:1},8,[`multiple`,`required`,`name`,`autocomplete`,`disabled`,`value`])):m(`v-if`,!0)]),_:3}))}}),F=t({__name:`BubbleSelect`,props:{autocomplete:{type:String,required:!1},autofocus:{type:Boolean,required:!1},disabled:{type:Boolean,required:!1},form:{type:String,required:!1},multiple:{type:Boolean,required:!1},name:{type:String,required:!1},required:{type:Boolean,required:!1},size:{type:Number,required:!1},value:{type:null,required:!1}},setup(t){let r=t,i=l(),d=M();o(()=>r.value,(e,t)=>{let n=window.HTMLSelectElement.prototype,r=Object.getOwnPropertyDescriptor(n,`value`).set;if(e!==t&&r&&i.value){let t=new Event(`change`,{bubbles:!0});r.call(i.value,e),i.value.dispatchEvent(t)}});function f(e){d.onValueChange(e.target.value)}return(t,o)=>(e(),c(s(y),{"as-child":``},{default:u(()=>[h(`select`,n({ref_key:`selectElement`,ref:i},r,{onInput:f}),[a(t.$slots,`default`)],16)]),_:3}))}});export{T as a,O as c,D as i,M as n,E as o,N as r,A as s,P as t};