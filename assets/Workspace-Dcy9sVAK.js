const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/WelcomeView-DMuVTHiv.js","assets/index-BW6FH5S4.js","assets/index-CL8FC1LI.css","assets/PopperContent-CkzV4Efh.js","assets/useHideOthers-8j3pZZC2.js","assets/ConfigProvider-BeNpEDZu.js","assets/useFormControl-BoSoz5bk.js","assets/DialogPortal-DagulIUC.js","assets/Teleport-CO7T90ZX.js","assets/utils-1j6W-LC4.js","assets/useId-C9uHTJK1.js","assets/DialogTitle-KNRScshA.js","assets/DropdownMenuTrigger-EYKS1OZz.js","assets/PopperAnchor-DePKnfPt.js","assets/RovingFocusGroup-Dae6_7oN.js","assets/utils-d0L3vlW4.js","assets/useDirection-CkCaHLjJ.js","assets/useArrowNavigation-siWGBYoD.js","assets/useTypeahead-J2lSWUJi.js","assets/DropdownMenuLabel-BoKLynau.js","assets/DropdownMenuSeparator-BHAgwTys.js","assets/MenuSeparator-Bi9Os3Cj.js","assets/Label-BQWlwCJI.js","assets/SelectViewport-C4doWK-Y.js","assets/useNonce-Cry77bU8.js","assets/nullish-CfjOSA4G.js","assets/badge-DzzxpH5l.js","assets/button-Cg1Yo4L-.js","assets/DialogTitle-CycknT00.js","assets/DialogFooter-CGb0TQPO.js","assets/Label-BrQgTnyx.js","assets/SelectValue-CL8oqzYK.js","assets/WelcomeView-caYHnC88.css","assets/DocumentViewer-C_xyZEng.js","assets/SpreadsheetEditor-B2dgqeAC.js","assets/Input-uGdyVDA7.js","assets/ChartEditor-C75Tnx4P.js","assets/TextEditor-BzuQiwhM.js","assets/ImageViewer-BRXwuXqo.js","assets/ReconciliationView-Cw0Dw6gs.js","assets/ScrollArea-Cveb2SY4.js","assets/TaxReportTab-CDF-Sxy-.js","assets/PopoverTrigger-DWkr4HdR.js","assets/useKbd-BvGB3m10.js","assets/badge-DeOd_cPn.js","assets/button-BIS6kOZQ.js","assets/Card-DL4aOVo_.js","assets/Label-CWz-ReQU.js","assets/LiteEditor-fCd1Bq1N.js","assets/WorkspaceStore-DkbvTQrR.js","assets/ArchiveView-DXgKhgnQ.js","assets/DocumentView-Crp-Fx_e.js","assets/PDFExportService-kLn7dH0W.js","assets/typeof-CVhf3tVy.js","assets/purify.es-C6pmr44S.js","assets/marked.esm-DidRfey3.js","assets/ComboboxItem-BV80ucMH.js","assets/ListboxItem-CrspQUEb.js","assets/VisuallyHiddenInput-Cr3vcfNb.js","assets/ComboboxGroup-BOfthHuH.js","assets/sheet-BQZlRCZC.js","assets/SelectGroup-D40CeBwS.js","assets/DocForm-Cw9ikweC.js","assets/DynamicIcon-D5-EdDm3.js","assets/DateField-CuEp_QeT.js","assets/LinkField-C2IIEkLF.js","assets/BottomSheet-Ckf0geOJ.js","assets/BottomSheet-C0veGV1Z.css","assets/DialogContent-DzO0B1dQ.js","assets/DialogTitle-BAO4s_Rj.js","assets/DialogFooter-BGPl6WoG.js","assets/Input-AKTRhZx5.js","assets/SelectValue-CvGnKkl4.js","assets/Textarea-DDsE0ukV.js","assets/viewRegistry-B23Q0QQW.js","assets/DocForm-D0nXgC-s.css","assets/DropdownMenuTrigger-B4m7ovRB.js","assets/DropdownMenuSeparator-B4Xk_Axi.js","assets/ContextMenu-DiFpIe-k.js","assets/ApprovalInbox-1PeeigEw.js","assets/DocList-DiAugnK6.js","assets/DocForm-Cty21ley.js"])))=>i.map(i=>d[i]);
import"./useFormControl-BoSoz5bk.js";import"./ListboxItem-CrspQUEb.js";import"./useNonce-Cry77bU8.js";import"./ConfigProvider-BeNpEDZu.js";import"./useHideOthers-8j3pZZC2.js";import"./useDirection-CkCaHLjJ.js";import"./useId-C9uHTJK1.js";import"./useKbd-BvGB3m10.js";import"./useTypeahead-J2lSWUJi.js";import"./DialogPortal-DagulIUC.js";import"./Teleport-CO7T90ZX.js";import"./utils-1j6W-LC4.js";import"./DialogTitle-KNRScshA.js";import"./AvatarImage-CFhho9Ct.js";import"./utils-d0L3vlW4.js";import"./VisuallyHiddenInput-Cr3vcfNb.js";import"./command-CZXVLngu.js";import"./ScrollArea-Cveb2SY4.js";import"./SwitchThumb-DakLfx3k.js";import{Aa as e,Ai as t,Bi as n,F as r,Hi as i,Ii as a,Jn as o,K as s,Kn as c,Kt as l,Li as u,Na as d,Ni as f,Pa as p,Qn as ee,Ri as m,Ui as h,Wi as g,X as te,Xt as ne,Yi as re,Yt as ie,Zn as ae,_a as oe,_n as se,cn as ce,da as _,ea as v,et as le,ft as ue,ga as y,i as b,ia as de,in as x,ja as S,ji as C,jn as fe,ki as pe,lt as me,mt as w,n as he,na as T,nn as ge,nr as _e,qn as ve,r as ye,ra as be,sa as E,sn as D,sr as xe,t as O,ta as k,un as Se,w as Ce,wa as A,wt as we,x as Te,zi as j,zn as Ee}from"./index-BW6FH5S4.js";import{t as M}from"./WorkspaceStore-DkbvTQrR.js";import{n as N}from"./button-Cg1Yo4L-.js";import{t as De}from"./BottomSheet-Ckf0geOJ.js";import{a as P,i as F,n as I,r as L,t as R}from"./DialogTitle-CycknT00.js";import{t as z}from"./DialogFooter-CGb0TQPO.js";import{t as Oe}from"./Input-uGdyVDA7.js";import{t as B}from"./viewRegistry-B23Q0QQW.js";import{t as ke}from"./AccountAssistant-hRV8J8Xh.js";import"./Textarea-XBZizbW2.js";import"./badge-DzzxpH5l.js";var Ae={class:`flex flex-col h-full relative`},je={class:`flex items-center bg-white border-b border-slate-100 overflow-x-auto no-scrollbar`},Me=[`onClick`,`onDragstart`,`onDragover`,`onDrop`,`onContextmenu`],Ne={class:`text-slate-400`},Pe=[`onClick`,`onDragstart`,`onDragover`,`onDrop`,`onContextmenu`],Fe={class:`max-w-32 truncate`},Ie={key:1,class:`h-2 w-2 rounded-full bg-blue-500`},Le={class:`flex-1 overflow-hidden`},Re={key:14,class:`flex items-center justify-center h-full text-slate-400`},ze={class:`text-center`},Be={class:`py-4`},Ve={__name:`WorkspacePanel`,props:{account:Object,openTabs:Array,activeTabId:String},emits:[`tab-change`,`tab-close`,`tab-reorder`,`new-tab`,`open-applications`],setup(s,{emit:_}){let v=M(),{pinTab:b,unpinTab:he,createGroup:ve,addToGroup:ye,removeFromGroup:k,pinGroup:ke,unpinGroup:Ve,renameGroup:He,toggleGroupCollapsed:Ue,deleteGroup:We}=v;a(()=>v.sortedTabs);let V=a(()=>v.tabGroups),Ge=a(()=>v.groupColorMap),Ke=g(()=>O(()=>import(`./WelcomeView-DMuVTHiv.js`),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32]))),qe=g(()=>O(()=>import(`./DocumentViewer-C_xyZEng.js`),__vite__mapDeps([33,1,2,27]))),Je=g(()=>O(()=>import(`./SpreadsheetEditor-B2dgqeAC.js`),__vite__mapDeps([34,1,2,27,35]))),Ye=g(()=>O(()=>import(`./ChartEditor-C75Tnx4P.js`),__vite__mapDeps([36,1,2]))),Xe=g(()=>O(()=>import(`./TextEditor-BzuQiwhM.js`),__vite__mapDeps([37,1,2,27]))),Ze=g(()=>O(()=>import(`./ImageViewer-BRXwuXqo.js`),__vite__mapDeps([38,1,2,27]))),Qe=g(()=>O(()=>import(`./ReconciliationView-Cw0Dw6gs.js`),__vite__mapDeps([39,1,2,5,40,24,16,26,27]))),$e=g(()=>O(()=>import(`./TaxReportTab-CDF-Sxy-.js`),__vite__mapDeps([41,1,2,3,42,4,5,8,13,16,10,43,27,22,44,45,46,47]))),et=g(()=>O(()=>import(`./LiteEditor-fCd1Bq1N.js`),__vite__mapDeps([48,1,2,49]))),tt=g(()=>O(()=>import(`./ArchiveView-DXgKhgnQ.js`),__vite__mapDeps([50,1,2,49]))),nt=g(()=>O(()=>import(`./DocumentView-Crp-Fx_e.js`),__vite__mapDeps([51,1,2,52,53,3,42,4,5,8,13,16,10,43,27,54,55,6,56,57,15,58,18,59,7,9,11,60,12,14,17,20,21,22,23,24,25,61,62,63,64,45,65,66,67,44,68,69,70,71,47,72,73,74,49,75,76,77]))),rt=g(()=>O(()=>import(`./ContextMenu-DiFpIe-k.js`),__vite__mapDeps([78,1,2]))),it=g(()=>O(()=>import(`./ApprovalInbox-1PeeigEw.js`),__vite__mapDeps([79,1,2,49]))),at=g(()=>O(()=>import(`./DocList-DiAugnK6.js`),__vite__mapDeps([80,1,2,3,42,4,5,8,13,16,10,43,27,6,7,9,11,12,14,15,17,18,21,23,24,25,64,45,68,69,70,76,71,72,74,49]))),ot=g(()=>O(()=>import(`./DocForm-Cty21ley.js`),__vite__mapDeps([81,3,1,2,42,4,5,8,13,16,10,43,27,54,55,6,56,57,15,58,18,59,7,9,11,60,22,23,24,25,61,62,63,64,45,65,66,67,44,68,69,70,71,47,72,73,74,49,75]))),H=s,U=_,st=re(`openTab`),W=A({show:!1,x:0,y:0,target:null}),G=A({show:!1,tabId:null,tabTitle:``}),K=A({open:!1,doctype:null,name:null,isNew:!1,onSave:null}),q=A({show:!1,mode:`create`,tabId:null,groupId:null,name:``}),J=A({activeId:null,activeType:null,overId:null,position:null});function ct(e,t=`new`,n=null){K.value={open:!0,doctype:e,name:t,isNew:t===`new`,onSave:n}}function lt(e){if(K.value.open=!1,K.value.onSave)K.value.onSave(e);else if(e&&e.doctype&&e.name){let t=e.doctype;st({id:`doctype-${t}-${e.name}`,type:`doctype-form`,title:`${t}: ${e.name}`,doctype:t,docName:e.name,isNew:!1,data:null})}}be(`openDocSheet`,ct);let ut=e=>{let t=B(e,`list`);return t?g(t):at},dt=e=>{let t=B(e,`form`);return t?g(t):ot},ft=e=>{let t=B(e,`view`);return t?g(t):nt};function pt(e){return Ge.value.get(e)||`#6366f1`}let Y=A({show:!1,x:0,y:0,target:null}),mt=a(()=>{let e=W.value.target;if(!e)return[];let t=[];return e.pinned?t.push({label:`Unpin`,action:`unpin`,icon:w}):t.push({label:`Pin`,action:`pin`,icon:w}),e.groupId?t.push({label:`Remove from Group`,action:`ungroup`}):(t.push({label:`Create New Group...`,action:`create-group`}),V.value.length>0&&(t.push({type:`separator`}),V.value.forEach(e=>{t.push({label:`Add to ${e.name}`,action:`add-to-group:${e.id}`,color:e.color})}))),t.push({type:`separator`}),t.push({label:`Close to the Right`,action:`close-right`}),t.push({label:`Close Others`,action:`close-others`}),t.push({label:`Close All`,action:`close-all`}),e.closable!==!1&&t.push({label:`Close`,action:`close`}),t}),ht=a(()=>{let e=Y.value.target;return e?[{label:`Rename Group...`,action:`rename-group`},e.pinned?{label:`Unpin Group`,action:`unpin-group`,icon:w}:{label:`Pin Group`,action:`pin-group`,icon:w},{type:`separator`},{label:`Delete Group`,action:`delete-group`,variant:`destructive`}]:[]}),X={flow:ne,document:D,spreadsheet:ce,chart:ee,text:D,image:ie,reconciliation:ge,invoice:me,"tax-report":D,doctype:D,"doctype-form":D,"doctype-view":se,"lite-editor":D,archive:x,Package:we,Box:xe,Users:Ce,FileText:D,Landmark:l,Folder:x,Settings:le,BarChart:ae,HelpCircle:Ee,Receipt:me,Edit:D,Archive:x,Eye:se,Calculator:_e,Cog:fe,ShoppingBag:te,TrendingUp:r};function gt(e){return e.icon&&X[e.icon]?X[e.icon]:X[e.type]||D}function Z(e){return e.doctype?e.doctype:e.id&&e.id.startsWith(`doctype-`)?e.id.replace(`doctype-`,``).split(`-`).map(e=>e.charAt(0).toUpperCase()+e.slice(1)).join(` `):e.title}function _t(e){e.unsaved?G.value={show:!0,tabId:e.id,tabTitle:e.title}:U(`tab-close`,e.id)}function vt(){U(`tab-close`,G.value.tabId),G.value.show=!1}function yt(){U(`tab-close`,G.value.tabId),G.value.show=!1}function bt(e,t){let n=`doctype-${Z(e).toLowerCase().replace(/\s+/g,`-`)}`;U(`tab-close`,e.id),H.openTabs.find(e=>e.id===n)&&U(`tab-change`,n)}function Q(e){let t=H.openTabs.find(t=>t.id===e);t&&(t.unsaved=!0)}function xt(e,t){W.value={show:!0,x:e.clientX,y:e.clientY,target:t}}function St(e,t){Y.value={show:!0,x:e.clientX,y:e.clientY,target:t}}function Ct(e){let t=W.value.target;if(W.value.show=!1,t){if(e.startsWith(`add-to-group:`)){let n=e.split(`:`)[1];ye(t.id,n);return}switch(e){case`pin`:b(t.id);break;case`unpin`:he(t.id);break;case`create-group`:q.value={show:!0,mode:`create`,tabId:t.id,groupId:null,name:``};break;case`ungroup`:k(t.id);break;case`close`:t.closable!==!1&&_t(t);break;case`close-others`:H.openTabs.filter(e=>e.id!==t.id&&e.closable!==!1).forEach(e=>U(`tab-close`,e.id));break;case`close-all`:H.openTabs.filter(e=>e.closable!==!1).forEach(e=>U(`tab-close`,e.id));break;case`close-right`:{let e=H.openTabs.findIndex(e=>e.id===t.id);H.openTabs.slice(e+1).filter(e=>e.closable!==!1).forEach(e=>U(`tab-close`,e.id));break}}}}function wt(e){let t=Y.value.target;if(Y.value.show=!1,t)switch(e){case`rename-group`:q.value={show:!0,mode:`rename`,tabId:null,groupId:t.groupId,name:t.name};break;case`pin-group`:ke(t.groupId);break;case`unpin-group`:Ve(t.groupId);break;case`delete-group`:We(t.groupId);break}}function Tt(){q.value.name.trim()&&(q.value.mode===`create`?ve(q.value.name,[q.value.tabId]):q.value.mode===`rename`&&He(q.value.groupId,q.value.name),q.value.show=!1)}function $(e,t){J.value.activeId=t.id,J.value.activeType=t.type===`group-header`?`group`:`tab`,e.dataTransfer.effectAllowed=`move`,e.dataTransfer.setData(`text/plain`,t.id),setTimeout(()=>{},0)}function Et(e,t){if(J.value.activeId===t.id)return;let n=e.currentTarget.getBoundingClientRect(),r=e.clientX-n.left,i=n.width,a=r<i/2?`before`:`inside`;t.type===`group-header`&&(a=r<i/2?`before`:`after`),J.value.activeType===`group`&&a===`inside`&&(a=`after`),J.value.overId=t.id,J.value.position=a}function Dt(e){let t=e.relatedTarget;!t||e.currentTarget.contains(t)}function Ot(){J.value.activeId=null,J.value.activeType=null,J.value.overId=null,J.value.position=null}function kt(e,t){e.preventDefault();let n=J.value.activeId,r=t.id,i=J.value.position;if(J.value.activeId=null,J.value.activeType=null,J.value.overId=null,J.value.position=null,!(!n||n===r))if(n.startsWith(`group-header-`)){let e=n.replace(`group-header-`,``);v.moveGroup(e,r,i)}else v.moveTab(n,r,i)}return(r,a)=>(T(),n(`div`,Ae,[u(`div`,je,[(T(!0),n(f,null,de(e(v).sortedTabs,t=>(T(),n(f,{key:t.id},[t.type===`group-header`?(T(),n(`div`,{key:0,draggable:`true`,class:S([`flex items-center gap-1 px-2 py-2 border-r cursor-pointer text-sm font-medium text-slate-600 bg-slate-50 hover:bg-slate-100 transition-all z-10 select-none relative`,J.value.activeId&&J.value.overId===t.id&&J.value.position===`before`?`border-l-[3px] border-l-blue-600`:``,J.value.activeId&&J.value.overId===t.id&&J.value.position===`after`?`border-r-[3px] border-r-blue-600`:``,J.value.activeId===t.id?`opacity-30`:``]),style:d({borderBottomColor:t.color,borderBottomWidth:`2px`}),onClick:n=>e(Ue)(t.groupId),onDragstart:e=>$(e,t),onDragend:Ot,onDragover:C(e=>Et(e,t),[`prevent`]),onDragleave:a[0]||=e=>Dt(e),onDrop:e=>kt(e,t),onContextmenu:C(e=>St(e,t),[`prevent`])},[(T(),m(E(t.collapsed?e(c):e(o)),{class:`h-3 w-3 text-slate-400`})),t.pinned?(T(),m(e(w),{key:0,class:`h-3 w-3 text-blue-500 fill-blue-500 -rotate-45`})):j(``,!0),u(`span`,null,p(t.name),1),u(`span`,Ne,`(`+p(t.tabCount)+`)`,1)],46,Me)):(T(),n(`div`,{key:1,draggable:`true`,class:S([`group flex items-center gap-2 px-3 py-2 border-r border-slate-100 cursor-pointer text-sm transition-all min-w-max z-10 select-none relative text-slate-600`,s.activeTabId===t.id?`bg-stone-50 shadow-sm`:`bg-white hover:bg-slate-50`,J.value.activeId&&J.value.overId===t.id&&J.value.position===`before`?`border-l-[3px] border-l-blue-600`:``,J.value.activeId&&J.value.overId===t.id&&J.value.position===`inside`?`bg-blue-50 shadow-[inset_0_-3px_0_0_#2563eb]`:``,J.value.activeId===t.id?`opacity-30`:``]),style:d(t.groupId?{borderBottomColor:pt(t.groupId),borderBottomWidth:`2px`}:{}),onClick:e=>r.$emit(`tab-change`,t.id),onDragstart:e=>$(e,t),onDragend:Ot,onDragover:C(e=>Et(e,t),[`prevent`]),onDragleave:a[1]||=e=>Dt(e),onDrop:e=>kt(e,t),onContextmenu:C(e=>xt(e,t),[`prevent`])},[t.pinned&&!t.groupId?(T(),m(e(w),{key:0,class:`h-2.5 w-2.5 text-blue-500 fill-blue-500 -rotate-45`})):j(``,!0),(T(),m(E(gt(t)),{class:`h-3.5 w-3.5`})),u(`span`,Fe,p(t.title),1),t.unsaved?(T(),n(`div`,Ie)):j(``,!0),t.closable===!1?j(``,!0):(T(),m(e(N),{key:2,variant:`ghost`,size:`sm`,class:`h-5 w-5 p-0 opacity-0 group-hover:opacity-100 hover:bg-slate-200 rounded-sm`,onClick:C(e=>_t(t),[`stop`])},{default:y(()=>[h(e(Te),{class:`h-3 w-3`})]),_:1},8,[`onClick`]))],46,Pe))],64))),128)),h(e(N),{variant:`ghost`,size:`sm`,class:`h-8 w-8 p-0 ml-1 sticky right-0 bg-white shrink-0`,onClick:a[2]||=e=>r.$emit(`open-applications`)},{default:y(()=>[h(e(ue),{class:`h-4 w-4`})]),_:1})]),u(`div`,Le,[(T(!0),n(f,null,de(s.openTabs,t=>oe((T(),n(`div`,{key:t.id,class:`h-full`},[t.type===`flow`?(T(),m(e(Ke),{key:0,account:s.account},null,8,[`account`])):t.type===`doctype`?(T(),m(E(ut(Z(t))),{key:1,doctype:Z(t)},null,8,[`doctype`])):t.type===`doctype-form`?(T(),m(E(dt(Z(t))),{key:2,doctype:Z(t),name:t.docName,isNew:t.isNew,onSaved:e=>bt(t,e)},null,40,[`doctype`,`name`,`isNew`,`onSaved`])):t.type===`doctype-view`?(T(),m(E(ft(Z(t))),{key:3,doctype:Z(t),name:t.docName,initialMode:t.initialMode},null,8,[`doctype`,`name`,`initialMode`])):t.type===`document`?(T(),m(e(qe),{key:4,document:t.data},null,8,[`document`])):t.type===`spreadsheet`?(T(),m(e(Je),{key:5,document:t.data,onChange:e=>Q(t.id)},null,8,[`document`,`onChange`])):t.type===`chart`?(T(),m(e(Ye),{key:6,document:t.data,onChange:e=>Q(t.id)},null,8,[`document`,`onChange`])):t.type===`text`?(T(),m(e(Xe),{key:7,document:t.data,onChange:e=>Q(t.id)},null,8,[`document`,`onChange`])):t.type===`image`?(T(),m(e(Ze),{key:8,document:t.data},null,8,[`document`])):t.type===`reconciliation`?(T(),m(e(Qe),{key:9,sessionReference:t.data?.reference,account:s.account},null,8,[`sessionReference`,`account`])):t.type===`tax-report`?(T(),m(e($e),{key:10,account:s.account},null,8,[`account`])):t.type===`lite-editor`?(T(),m(e(et),{key:11,doctype:Z(t),name:t.docName},null,8,[`doctype`,`name`])):t.type===`archive`?(T(),m(e(tt),{key:12,doctype:Z(t),name:t.docName},null,8,[`doctype`,`name`])):t.type===`approvals`?(T(),m(e(it),{key:13})):(T(),n(`div`,Re,[u(`div`,ze,[h(e(Se),{class:`h-12 w-12 mx-auto mb-4 opacity-50`}),u(`p`,null,`Unknown tab type: `+p(t.type),1)])]))],512)),[[pe,s.activeTabId===t.id]])),128))]),W.value.show?(T(),m(e(rt),{key:0,x:W.value.x,y:W.value.y,items:mt.value,onClose:a[3]||=e=>W.value.show=!1,onSelect:Ct},null,8,[`x`,`y`,`items`])):j(``,!0),Y.value.show?(T(),m(e(rt),{key:1,x:Y.value.x,y:Y.value.y,items:ht.value,onClose:a[4]||=e=>Y.value.show=!1,onSelect:wt},null,8,[`x`,`y`,`items`])):j(``,!0),h(e(P),{open:q.value.show,"onUpdate:open":a[7]||=e=>q.value.show=e},{default:y(()=>[h(e(F),{class:`sm:max-w-md`},{default:y(()=>[h(e(I),null,{default:y(()=>[h(e(R),null,{default:y(()=>[i(p(q.value.mode===`create`?`Create Group`:`Rename Group`),1)]),_:1}),h(e(L),null,{default:y(()=>[i(p(q.value.mode===`create`?`Enter a name for the new tab group.`:`Enter a new name for the group.`),1)]),_:1})]),_:1}),u(`div`,Be,[h(e(Oe),{modelValue:q.value.name,"onUpdate:modelValue":a[5]||=e=>q.value.name=e,placeholder:`Group name...`,onKeyup:t(Tt,[`enter`])},null,8,[`modelValue`])]),h(e(z),null,{default:y(()=>[h(e(N),{variant:`ghost`,onClick:a[6]||=e=>q.value.show=!1},{default:y(()=>[...a[11]||=[i(`Cancel`,-1)]]),_:1}),h(e(N),{disabled:!q.value.name.trim(),onClick:Tt},{default:y(()=>[i(p(q.value.mode===`create`?`Create`:`Save`),1)]),_:1},8,[`disabled`])]),_:1})]),_:1})]),_:1},8,[`open`]),h(e(P),{open:G.value.show,"onUpdate:open":a[9]||=e=>G.value.show=e},{default:y(()=>[h(e(F),{class:`sm:max-w-md`},{default:y(()=>[h(e(I),null,{default:y(()=>[h(e(R),null,{default:y(()=>[...a[12]||=[i(`Unsaved Changes`,-1)]]),_:1}),h(e(L),null,{default:y(()=>[i(` "`+p(G.value.tabTitle)+`" has unsaved changes. Do you want to save before closing? `,1)]),_:1})]),_:1}),h(e(z),{class:`flex gap-2 sm:justify-end`},{default:y(()=>[h(e(N),{variant:`outline`,onClick:yt},{default:y(()=>[...a[13]||=[i(` Don't Save `,-1)]]),_:1}),h(e(N),{variant:`ghost`,onClick:a[8]||=e=>G.value.show=!1},{default:y(()=>[...a[14]||=[i(` Cancel `,-1)]]),_:1}),h(e(N),{onClick:vt},{default:y(()=>[...a[15]||=[i(` Save `,-1)]]),_:1})]),_:1})]),_:1})]),_:1},8,[`open`]),h(De,{modelValue:K.value.open,"onUpdate:modelValue":a[10]||=e=>K.value.open=e,"initial-height":100},{default:y(()=>[K.value.open?(T(),m(e(ot),{key:0,doctype:K.value.doctype,name:K.value.name,isNew:K.value.isNew,onSaved:lt},null,8,[`doctype`,`name`,`isNew`])):j(``,!0)]),_:1},8,[`modelValue`])]))}},He=b(Ve,[[`__scopeId`,`data-v-d577de8c`]]),Ue={class:`relative border-t-2 border-white flex h-full w-full overflow-hidden`},We={class:`flex-1 flex flex-col bg-stone-50 min-w-0`},V={class:`p-2 border-b border-slate-100 flex items-center justify-between`},Ge={key:0,class:`text-xs font-semibold text-slate-500 uppercase tracking-wider`},Ke={key:1,class:`flex flex-col items-center py-2`},qe={__name:`FlowWorkspace`,props:{account:Object},emits:[`close`,`account-change`,`open-applications`],setup(t,{emit:r}){let i=t,o=M(),l=A(!0),d=A(null),f=a(()=>({tab:o.openTabs.find(e=>e.id===o.activeTabId),account:i.account}));return be(`openTab`,o.openTab),(r,i)=>(T(),n(`div`,Ue,[u(`div`,We,[h(He,{ref_key:`workspaceRef`,ref:d,account:t.account,"open-tabs":e(o).openTabs,"active-tab-id":e(o).activeTabId,onTabChange:i[0]||=t=>e(o).setActiveTab(t),onTabClose:i[1]||=t=>e(o).closeTab(t),onTabReorder:i[2]||=t=>e(o).reorderTabs(t),onOpenApplications:i[3]||=e=>r.$emit(`open-applications`)},null,8,[`account`,`open-tabs`,`active-tab-id`])]),u(`div`,{class:S([`hidden border-l border-slate-100 bg-white transition-all duration-300 flex-col`,l.value?`w-12`:`w-96`])},[u(`div`,V,[h(e(N),{variant:`ghost`,size:`sm`,class:`h-6 w-6 p-0`,onClick:i[4]||=e=>l.value=!l.value},{default:y(()=>[l.value?(T(),m(e(ve),{key:0,class:`h-4 w-4`})):(T(),m(e(c),{key:1,class:`h-4 w-4`}))]),_:1}),l.value?j(``,!0):(T(),n(`span`,Ge,` Flow Assistant `))]),l.value?(T(),n(`div`,Ke,[h(e(N),{variant:`ghost`,size:`sm`,class:`h-8 w-8 p-0`,title:`Open Assistant`,onClick:i[5]||=e=>l.value=!1},{default:y(()=>[h(e(s),{class:`h-4 w-4 text-blue-500`})]),_:1})])):(T(),m(ke,{key:0,account:t.account,context:f.value,class:`flex-1 overflow-hidden`},null,8,[`account`,`context`]))],2)]))}},Je={class:`h-full bg-white`},Ye={__name:`Workspace`,setup(t){let r=he(),i=ye(),o=M(),s=re(`openApplications`,()=>{}),c=A(!1);v(()=>{let e=window.location.hash.slice(1);e&&e!==o.activeTabId&&o.openTabs.some(t=>t.id===e)&&o.setActiveTab(e,{skipHistory:!0}),window.addEventListener(`popstate`,l)}),k(()=>{window.removeEventListener(`popstate`,l)});function l(){let e=window.location.hash.slice(1);r.path===`/workspace`&&(c.value=!0,e&&e!==o.activeTabId?o.openTabs.some(t=>t.id===e)&&o.setActiveTab(e,{skipHistory:!0}):e||o.setActiveTab(`flow`,{skipHistory:!0}),setTimeout(()=>{c.value=!1},50))}_(()=>r.hash,(e,t)=>{if(c.value)return;let n=e?.slice(1);n&&n!==o.activeTabId&&o.openTabs.some(e=>e.id===n)&&o.setActiveTab(n,{skipHistory:!0})}),_(()=>o.activeTabId,(e,t)=>{if(c.value)return;let n=window.location.hash.slice(1);e&&e!==n&&i.push({path:`/workspace`,hash:`#${e}`})});let u=a(()=>null);return(t,r)=>(T(),n(`div`,Je,[h(qe,{account:u.value,onClose:r[0]||=t=>e(i).push(`/`),onAccountChange:()=>{},onOpenApplications:e(s)},null,8,[`account`,`onOpenApplications`])]))}};export{Ye as default};