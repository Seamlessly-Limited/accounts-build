import"./useFormControl-BWOmmYiS.js";import"./useNonce-VOgClyGr.js";import"./nullish-CfjOSA4G.js";import"./useArrowNavigation-siWGBYoD.js";import"./ConfigProvider-BwNXqMge.js";import"./useHideOthers-C416Re6d.js";import"./useDirection-DYJPYRsI.js";import"./PopperAnchor-BHV4Kv-d.js";import"./useId-BEfc-0Pq.js";import"./PopperContent-DYn2KUeQ.js";import"./useTypeahead-b61J-STi.js";import"./DialogPortal-913ieDuk.js";import"./Teleport-DrGXNRYb.js";import"./utils-BEsFB3CI.js";import"./DialogTitle-BUR1zqy5.js";import"./utils-DlRpuNf9.js";import"./RovingFocusGroup-DqYe3043.js";import{a as e,i as t,n,r,t as i}from"./DropdownMenuTrigger-BcawehIV.js";import{t as a}from"./DropdownMenuLabel-bHLoSNvO.js";import"./MenuSeparator-CdyJpxbp.js";import{t as o}from"./DropdownMenuSeparator-BpqBZXgG.js";import"./Label-BycvDR_g.js";import"./SelectViewport-BKt93lbc.js";import{$i as s,Bi as c,Fa as l,Fi as u,Gr as d,Hi as f,Ki as p,Li as m,O as ee,Oa as h,Or as g,Pa as _,Ra as v,Tn as y,Ui as b,Vi as x,Wi as S,Wr as C,X as w,Yi as T,Zn as te,_t as E,b as D,ba as O,ca as k,cr as A,da as j,dr as M,dt as ne,fn as N,gt as re,i as P,ia as ie,in as ae,la as F,o as I,oa as L,pn as R,qi as z,sn as B,ta as V,tr as H,wi as U,zt as W}from"./index-CTHZVx0Q.js";import{n as G}from"./button-BXx_oIr0.js";import{a as K,i as q,n as J,r as oe,t as se}from"./DialogTitle-DuD1oAOg.js";import{t as ce}from"./DialogFooter-Cd7ibZAl.js";import{t as le}from"./badge-7N10jYOC.js";import{t as ue}from"./Label-DSO81TnJ.js";import{a as de,i as fe,n as pe,r as Y,t as me}from"./SelectValue-D9lo6-Gu.js";var he=T({__name:`DropdownMenu`,props:{defaultOpen:{type:Boolean},open:{type:Boolean},dir:{},modal:{type:Boolean}},emits:[`update:open`],setup(t,{emit:n}){let r=C(t,n);return(t,n)=>(L(),f(_(e),V({"data-slot":`dropdown-menu`},_(r)),{default:O(()=>[F(t.$slots,`default`)]),_:3},16))}}),ge=T({__name:`DropdownMenuContent`,props:{forceMount:{type:Boolean},loop:{type:Boolean},side:{},sideOffset:{default:4},sideFlip:{type:Boolean},align:{},alignOffset:{},alignFlip:{type:Boolean},avoidCollisions:{type:Boolean},collisionBoundary:{},collisionPadding:{},arrowPadding:{},sticky:{},hideWhenDetached:{type:Boolean},positionStrategy:{},updatePositionStrategy:{},disableUpdateOnLayoutShift:{type:Boolean},prioritizePosition:{type:Boolean},reference:{},asChild:{type:Boolean},as:{},class:{}},emits:[`escapeKeyDown`,`pointerDownOutside`,`focusOutside`,`interactOutside`,`closeAutoFocus`],setup(e,{emit:r}){let i=e,a=r,o=U(i,`class`),s=C(o,a);return(e,r)=>(L(),f(_(n),null,{default:O(()=>[z(_(t),V({"data-slot":`dropdown-menu-content`},_(s),{class:_(g)(`bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 max-h-(--reka-dropdown-menu-content-available-height) min-w-[8rem] origin-(--reka-dropdown-menu-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border p-1 shadow-md`,i.class)}),{default:O(()=>[F(e.$slots,`default`)]),_:3},16,[`class`])]),_:3}))}}),_e=T({__name:`DropdownMenuItem`,props:{disabled:{type:Boolean},textValue:{},asChild:{type:Boolean},as:{},class:{},inset:{type:Boolean},variant:{default:`default`}},setup(e){let t=e,n=U(t,`inset`,`variant`,`class`),i=d(n);return(n,a)=>(L(),f(_(r),V({"data-slot":`dropdown-menu-item`,"data-inset":e.inset?``:void 0,"data-variant":e.variant},_(i),{class:_(g)(`focus:bg-white focus:text-accent-foreground data-[variant=destructive]:text-destructive-foreground data-[variant=destructive]:focus:bg-destructive/10 dark:data-[variant=destructive]:focus:bg-destructive/40 data-[variant=destructive]:focus:text-destructive-foreground data-[variant=destructive]:*:[svg]:!text-destructive-foreground [&_svg:not([class*='text-'])]:text-muted-foreground relative flex cursor-default items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 data-[inset]:pl-8 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4`,t.class)}),{default:O(()=>[F(n.$slots,`default`)]),_:3},16,[`data-inset`,`data-variant`,`class`]))}}),ve=T({__name:`DropdownMenuLabel`,props:{asChild:{type:Boolean},as:{},class:{},inset:{type:Boolean}},setup(e){let t=e,n=U(t,`class`,`inset`),r=d(n);return(n,i)=>(L(),f(_(a),V({"data-slot":`dropdown-menu-label`,"data-inset":e.inset?``:void 0},_(r),{class:_(g)(`px-2 py-1.5 text-sm font-medium data-[inset]:pl-8`,t.class)}),{default:O(()=>[F(n.$slots,`default`)]),_:3},16,[`data-inset`,`class`]))}}),ye=T({__name:`DropdownMenuSeparator`,props:{asChild:{type:Boolean},as:{},class:{}},setup(e){let t=e,n=U(t,`class`);return(e,r)=>(L(),f(_(o),V({"data-slot":`dropdown-menu-separator`},_(n),{class:_(g)(`bg-border -mx-1 my-1 h-px`,t.class)}),null,16,[`class`]))}}),be=T({__name:`DropdownMenuTrigger`,props:{disabled:{type:Boolean},asChild:{type:Boolean},as:{}},setup(e){let t=d(e);return(e,n)=>(L(),f(_(i),V({"data-slot":`dropdown-menu-trigger`},_(t)),{default:O(()=>[F(e.$slots,`default`)]),_:3},16))}}),xe={async getDocuments(e=0,t=50){return I.get(`/org/documents`,{query:{page:e,size:t},authorizeRequest:!0,organisationAware:!0})},async getDocumentsByCategory(e){return I.get(`/org/documents/category/${e}`,{authorizeRequest:!0,organisationAware:!0})},async searchDocuments(e){return I.get(`/org/documents/search`,{query:{query:e},authorizeRequest:!0,organisationAware:!0})},async getDocumentCounts(){return I.get(`/org/documents/counts`,{authorizeRequest:!0,organisationAware:!0})},async getDocument(e){return I.get(`/org/documents/${e}`,{authorizeRequest:!0,organisationAware:!0})},async uploadDocument(e,t,n={}){let r=new FormData;return r.append(`file`,e),r.append(`category`,t),r.append(`metadata`,JSON.stringify(n)),I.post(`/org/documents/upload`,{data:r,headers:{"Content-Type":`multipart/form-data`},authorizeRequest:!0,organisationAware:!0})},async updateDocument(e,t){return I.put(`/org/documents/${e}`,{data:t,authorizeRequest:!0,organisationAware:!0})},async archiveDocument(e){return I.delete(`/org/documents/${e}`,{authorizeRequest:!0,organisationAware:!0})},async getVersionHistory(e){return I.get(`/org/documents/${e}/versions`,{authorizeRequest:!0,organisationAware:!0})},async restoreVersion(e,t){return I.post(`/org/documents/${e}/versions/${t}/restore`,{data:{},authorizeRequest:!0,organisationAware:!0})}},Se={class:`h-full w-full p-8 text-center overflow-auto flex flex-col items-center`},Ce={class:`w-full max-w-lg relative flex flex-col items-center justify-center my-auto`},we={class:`mb-8`},Te={class:`grid grid-cols-2 gap-3 max-w-lg w-full mb-4`},Ee={class:l([`h-10 w-10 rounded-full flex items-center justify-center bg-slate-950 opacity-85 hover:opacity-100`])},De={class:`text-sm font-medium`},Oe={class:`max-w-lg w-full mb-8`},ke={class:l([`h-8 w-8 rounded-lg flex items-center justify-center flex-shrink-0`])},Ae={class:`flex-1 text-sm`},je=[`onClick`,`title`],Me={key:0,class:`w-full max-w-lg`},Ne={class:`space-y-2`},Pe={class:`truncate`},Fe={class:`ml-auto text-xs text-slate-400`},Ie={key:1,class:`mt-8 w-full max-w-lg p-4 bg-slate-50 rounded-xl`},Le={class:`flex items-center justify-between mb-2`},Re={class:`text-sm font-medium text-slate-700`},ze={class:`text-2xl font-bold text-slate-900`},Be={class:`text-xs text-slate-500 mt-1`},Ve={key:0,class:`py-4`},He={class:`flex items-center gap-3 p-3 bg-slate-50 rounded-lg`},Ue={class:`flex-1 min-w-0`},We={class:`text-sm font-medium truncate`},X={class:`text-xs text-slate-500`},Ge={class:`mt-4`},Ke={key:1,class:`py-8`},Z=`flow_pinned_actions`,Q={__name:`WelcomeView`,props:{account:Object},setup(e){let t=e,n=s(`openTab`),r=s(`openDocSheet`),i=s(`openApplications`);function a(){i?.()}let o=h(null),d=h(!1),g=h({show:!1,file:null,category:`BANK_STATEMENT`}),C=h([]);ie(()=>{let e=localStorage.getItem(Z);if(e)try{C.value=JSON.parse(e)}catch{C.value=[`invoice`,`sale`]}else C.value=[`invoice`,`sale`]});let T=[{id:`invoice`,label:`New Invoice`,icon:ne,bgClass:`bg-blue-100`,iconClass:`text-blue-600`},{id:`sale`,label:`New Walk-in Sale`,icon:w,bgClass:`bg-pink-100`,iconClass:`text-pink-600`},{id:`product`,label:`New Product`,icon:M,bgClass:`bg-pink-100`,iconClass:`text-pink-600`},{id:`reports`,label:`Generate Report`,icon:A,bgClass:`bg-emerald-100`,iconClass:`text-emerald-600`}],P=c(()=>T.filter(e=>C.value.includes(e.id)));function F(e){return C.value.includes(e)}function I(e){let t=C.value.indexOf(e);t>-1?C.value.splice(t,1):C.value.push(e),localStorage.setItem(Z,JSON.stringify(C.value))}let V=h([]);function U(e){switch(e.id){case`upload`:g.value.show=!0,g.value.file=null,g.value.category=`BANK_STATEMENT`;break;case`reconcile`:r?.(`Reconciliation Session`,`new`,e=>{let t=e.name||e.reference;t&&n?.({id:`reconciliation-${t}`,type:`reconciliation`,title:`Reconciliation: ${t}`,data:{reference:t}})});break;case`table`:n?.({id:`new-table-`+Date.now(),type:`spreadsheet`,title:`Untitled Table`,data:null,unsaved:!0});break;case`invoice`:r?.(`Sales Invoice`,`new`,e=>{let t=e.name||e.reference;t&&n?.({id:`doctype-Sales Invoice-${t}`,type:`doctype-form`,title:`Sales Invoice: ${t}`,doctype:`Sales Invoice`,docName:t,isNew:!1,data:null})});break;case`chart`:n?.({id:`new-chart-`+Date.now(),type:`chart`,title:`New Chart`,data:null,unsaved:!0});break;case`journal`:r?.(`Journal Entry`,`new`,e=>{let t=e.name||e.reference;t&&n?.({id:`doctype-Journal Entry-${t}`,type:`doctype-form`,title:`Journal Entry: ${t}`,doctype:`Journal Entry`,docName:t,isNew:!1,data:null})});break;case`expense`:r?.(`Expense`,`new`,e=>{let t=e.name||e.reference;t&&n?.({id:`doctype-Expense-${t}`,type:`doctype-form`,title:`Expense: ${t}`,doctype:`Expense`,docName:t,isNew:!1,data:null})});break;case`calculator`:console.log(`Open calculator`);break;case`search-docs`:n?.({id:`search-docs`,type:`search`,title:`Search Documents`,data:null});break;case`sale`:r?.(`Sale`,`new`,e=>{let t=e.name||e.reference;t&&n?.({id:`doctype-Sale-${t}`,type:`doctype-form`,title:`Sale: ${t}`,doctype:`Sale`,docName:t,isNew:!1,data:null})});break;case`product`:r?.(`Product`,`new`,e=>{let t=e.name||e.reference;t&&n?.({id:`doctype-Product-${t}`,type:`doctype-form`,title:`Product: ${t}`,doctype:`Product`,docName:t,isNew:!0,data:null})});break;case`browse-files`:n?.({id:`file-browser`,type:`browser`,title:`File Browser`,data:null});break;case`reports`:n?.({id:`tax-report-`+Date.now(),type:`tax-report`,title:`Tax Report`,data:null});break;default:console.log(`Action not implemented:`,e.id)}}function Q(){o.value?.click()}function $(e){let t=e.target.files?.[0];t&&(g.value.file=t,t.name.toLowerCase().includes(`statement`)?g.value.category=`BANK_STATEMENT`:t.name.toLowerCase().includes(`invoice`)?g.value.category=`INVOICE`:t.name.toLowerCase().includes(`receipt`)&&(g.value.category=`RECEIPT`))}function qe(e){let t=e.dataTransfer?.files?.[0];t&&(g.value.file=t)}function Je(){g.value.file=null,o.value&&(o.value.value=``)}async function Ye(){if(g.value.file){d.value=!0;try{let e=await xe.uploadDocument(g.value.file,g.value.category);g.value.show=!1,e&&n?.({id:`doc-${e.reference}`,type:`document`,title:e.name||g.value.file.name,data:e})}catch(e){console.error(`Upload failed:`,e)}finally{d.value=!1}}}function Xe(e){n?.({id:e.id,type:e.type,title:e.name,data:e})}function Ze(e){return{spreadsheet:R,document:N,chart:H,reconciliation:B}[e.type]||N}function Qe(e){if(!e)return``;let t=new Date(e),n=new Date-t,r=Math.floor(n/6e4);return r<60?`${r}m ago`:r<1440?`${Math.floor(r/60)}h ago`:t.toLocaleDateString()}function $e(e){return e==null?`N/A`:new Intl.NumberFormat(`en-NG`,{style:`currency`,currency:t.account?.currency||`NGN`}).format(e)}function et(e){return e?new Date(e).toLocaleDateString(`en-US`,{month:`short`,day:`numeric`,hour:`2-digit`,minute:`2-digit`}):`Never`}function tt(e){return e<1024?e+` B`:e<1024*1024?(e/1024).toFixed(1)+` KB`:(e/(1024*1024)).toFixed(1)+` MB`}return(t,n)=>(L(),S(`div`,Se,[x(`div`,Ce,[x(`div`,we,[x(`div`,{onClick:n[0]||=e=>a(),class:`h-20 w-20 cursor-pointer rounded-2xl bg-gradient-to-br from-slate-950 to-neutral-950 flex items-center justify-center shadow-lg opacity-95`},[z(_(ae),{class:`size-10 text-white`})])]),x(`h1`,{class:`text-2xl font-bold text-slate-800 mb-2 cursor-pointer`,onClick:n[1]||=e=>a()},` Flow Seamlessly`),n[9]||=x(`p`,{class:`text-sm text-slate-500 max-w-md mb-8`},` Your integrated accounting workspace. Upload documents, reconcile accounts, and let AI do the heavy lifting. `,-1),x(`div`,Te,[(L(!0),S(m,null,k(P.value,e=>(L(),f(_(G),{key:e.id,variant:`outline`,class:`h-auto p-4 flex flex-col items-center gap-2 hover:bg-slate-50 rounded-[6px] hover:border-blue-200 transition-all`,onClick:t=>U(e)},{default:O(()=>[x(`div`,Ee,[(L(),f(j(e.icon),{class:l([`h-5 w-5 text-white font-bold`])}))]),x(`span`,De,v(e.label),1)]),_:2},1032,[`onClick`]))),128))]),x(`div`,Oe,[z(_(he),null,{default:O(()=>[z(_(be),{asChild:``},{default:O(()=>[z(_(G),{variant:`ghost`,class:`w-full text-slate-500 hover:text-slate-700`},{default:O(()=>[z(_(y),{class:`h-4 w-4 mr-2`}),n[6]||=p(` Quick Actions `,-1),z(_(te),{class:`h-4 w-4 ml-2`})]),_:1})]),_:1}),z(_(ge),{class:`w-72 bg-stone-50 border-4 border-white rounded-[8px] overflow-y-scroll max-h-[350px] no-scrollbar`,align:`center`},{default:O(()=>[z(_(ve),null,{default:O(()=>[...n[7]||=[p(`All Actions`,-1)]]),_:1}),z(_(ye)),(L(),S(m,null,k(T,e=>x(`div`,{key:e.id},[z(_(_e),{class:`flex items-center gap-3 cursor-pointer hover:bg-white py-1.5 px-2 rounded-full`,onClick:t=>U(e)},{default:O(()=>[x(`div`,ke,[(L(),f(j(e.icon),{class:l([`h-4 w-4`])}))]),x(`span`,Ae,v(e.label),1),x(`button`,{onClick:u(t=>I(e.id),[`stop`]),class:`p-1 rounded hover:bg-slate-100 transition-colors`,title:F(e.id)?`Unpin from quick actions`:`Pin to quick actions`},[F(e.id)?(L(),f(_(re),{key:0,class:`h-4 w-4 text-blue-500`})):(L(),f(_(E),{key:1,class:`h-4 w-4 text-slate-400`}))],8,je)]),_:2},1032,[`onClick`])])),64))]),_:1})]),_:1})]),V.value.length>0?(L(),S(`div`,Me,[n[8]||=x(`h3`,{class:`text-xs font-semibold text-slate-500 uppercase tracking-wider mb-3 text-left`},`Recent`,-1),x(`div`,Ne,[(L(!0),S(m,null,k(V.value,e=>(L(),f(_(G),{key:e.id,variant:`ghost`,class:`w-full justify-start text-sm h-auto py-2 px-3`,onClick:t=>Xe(e)},{default:O(()=>[(L(),f(j(Ze(e)),{class:`h-4 w-4 mr-3 text-slate-400`})),x(`span`,Pe,v(e.name),1),x(`span`,Fe,v(Qe(e.openedAt)),1)]),_:2},1032,[`onClick`]))),128))])])):b(``,!0),e.account?(L(),S(`div`,Ie,[x(`div`,Le,[x(`span`,Re,v(e.account.accountName),1),z(_(le),{variant:`secondary`},{default:O(()=>[p(v(e.account.bankName),1)]),_:1})]),x(`div`,ze,v($e(e.account.balance)),1),x(`p`,Be,` Last synced: `+v(et(e.account.lastSyncedAt)),1)])):b(``,!0)]),x(`input`,{ref_key:`fileInput`,ref:o,type:`file`,class:`hidden`,accept:`.pdf,.csv,.xlsx,.xls,.jpg,.jpeg,.png`,onChange:$},null,544),z(_(K),{open:g.value.show,"onUpdate:open":n[5]||=e=>g.value.show=e},{default:O(()=>[z(_(q),{class:`sm:max-w-md`},{default:O(()=>[z(_(J),null,{default:O(()=>[z(_(se),null,{default:O(()=>[...n[10]||=[p(`Upload Document`,-1)]]),_:1}),z(_(oe),null,{default:O(()=>[...n[11]||=[p(` Select a file to upload. Supported formats: PDF, CSV, Excel, Images. `,-1)]]),_:1})]),_:1}),g.value.file?(L(),S(`div`,Ve,[x(`div`,He,[z(_(N),{class:`h-8 w-8 text-blue-500`}),x(`div`,Ue,[x(`p`,We,v(g.value.file.name),1),x(`p`,X,v(tt(g.value.file.size)),1)]),z(_(G),{variant:`ghost`,size:`sm`,class:`h-8 w-8 p-0`,onClick:Je},{default:O(()=>[z(_(D),{class:`h-4 w-4`})]),_:1})]),x(`div`,Ge,[z(_(ue),{class:`text-xs`},{default:O(()=>[...n[12]||=[p(`Document Category`,-1)]]),_:1}),z(_(de),{modelValue:g.value.category,"onUpdate:modelValue":n[2]||=e=>g.value.category=e,class:`mt-1`},{default:O(()=>[z(_(pe),null,{default:O(()=>[z(_(me),{placeholder:`Select category`})]),_:1}),z(_(fe),null,{default:O(()=>[z(_(Y),{value:`BANK_STATEMENT`},{default:O(()=>[...n[13]||=[p(`Bank Statement`,-1)]]),_:1}),z(_(Y),{value:`INVOICE`},{default:O(()=>[...n[14]||=[p(`Invoice`,-1)]]),_:1}),z(_(Y),{value:`RECEIPT`},{default:O(()=>[...n[15]||=[p(`Receipt`,-1)]]),_:1}),z(_(Y),{value:`REPORT`},{default:O(()=>[...n[16]||=[p(`Report`,-1)]]),_:1}),z(_(Y),{value:`OTHER`},{default:O(()=>[...n[17]||=[p(`Other`,-1)]]),_:1})]),_:1})]),_:1},8,[`modelValue`])])])):(L(),S(`div`,Ke,[x(`div`,{class:`border-2 shadow-md border-slate-200 rounded-lg p-8 text-center cursor-pointer hover:border-blue-300 hover:bg-blue-50/50 transition-colors`,onClick:Q,onDragover:n[3]||=u(()=>{},[`prevent`]),onDrop:u(qe,[`prevent`])},[z(_(ee),{class:`h-10 w-10 text-slate-400 mx-auto mb-3`}),n[18]||=x(`p`,{class:`text-sm text-slate-600`},`Click to browse or drag & drop`,-1),n[19]||=x(`p`,{class:`text-xs text-slate-400 mt-1`},`PDF, CSV, Excel, Images`,-1)],32)])),z(_(ce),null,{default:O(()=>[z(_(G),{variant:`outline`,onClick:n[4]||=e=>g.value.show=!1},{default:O(()=>[...n[20]||=[p(`Cancel`,-1)]]),_:1}),z(_(G),{onClick:Ye,disabled:!g.value.file||d.value},{default:O(()=>[d.value?(L(),f(_(W),{key:0,class:`h-4 w-4 mr-2 animate-spin`})):b(``,!0),p(` `+v(d.value?`Uploading...`:`Upload`),1)]),_:1},8,[`disabled`])]),_:1})]),_:1})]),_:1},8,[`open`])]))}},$=P(Q,[[`__scopeId`,`data-v-78e260f5`]]);export{$ as default};