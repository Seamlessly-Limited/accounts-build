import"./utils-D0P48fSI.js";import"./ListboxItem-tQcA7-x_.js";import"./useNonce-CH1qV__9.js";import"./nullish-CfjOSA4G.js";import"./ConfigProvider-XiUduj9F.js";import"./useHideOthers-CxE1lvmV.js";import{A as e,E as t,M as n,_ as r,a as i,g as a,i as o,j as s,k as c,n as l,r as u,t as d,v as f,y as p}from"./AccountAssistant-BGXXiRh2.js";import"./useDirection-DfJQtSIT.js";import{h as m}from"./chevron-up-DRtU5Xt9.js";import{t as h}from"./useId-NOzKS8cd.js";import"./PopperContent-Hmi-1dxb.js";import"./DialogTitle-Bmj62r2-.js";import"./Teleport-r2kxWe0I.js";import"./AvatarImage-4O_2YYzG.js";import"./RovingFocusGroup-CWQj4uDm.js";import"./RovingFocusItem-C4VLrMOn.js";import"./VisuallyHiddenInput-BqN-V-XI.js";import{a as g,c as _,i as ee,n as te,o as v,r as ne,s as re,t as ie}from"./ComboboxItem-DGeSOx0J.js";import"./Label-CzpRcmGL.js";import"./paperclip-BvojkzSa.js";import"./SwitchThumb-Cru1ecDK.js";import{a as ae,i as oe,l as y,n as se,o as b,r as x,s as S,t as ce,u as C}from"./SelectValue-Bn6qqc_E.js";import{t as le}from"./check-LjLkxBRc.js";import"./user-CD4yWplz.js";import"./credit-card-4cJeR5kR.js";import"./feather-dL37C56U.js";import"./loader-circle-Z0AQTysD.js";import{At as w,Bt as T,Cn as E,Ct as D,Dt as O,Et as k,Gt as A,It as j,Jt as M,Mt as N,N as P,Nt as F,O as I,Ot as L,P as ue,Pt as R,Ut as de,a as z,an as B,bn as V,en as fe,ft as H,g as U,i as pe,jt as me,kt as W,m as he,n as ge,pn as G,qt as K,t as _e,xn as ve,xt as q,yn as J}from"./index-NPUXaZ2c.js";import{t as ye}from"./Input-R7P9vGKt.js";import{t as Y}from"./button-ClT8XOp-.js";import{a as be,i as xe,n as Se,o as Ce,r as we,t as Te}from"./DialogTitle-CaySTs9J.js";import{n as X}from"./button-CWY_tBUh.js";import"./badge-BNZAY_6y.js";import{t as Ee}from"./Card-CGfcdqlZ.js";import{t as De}from"./badge-3-UecyJS.js";import{t as Z}from"./Label-BXGkeRHd.js";import{t as Q}from"./Card-CkOm-d7D.js";import{t as Oe}from"./BankAccountService-Dc6RuTOj.js";import{t as $}from"./TransactionService-BR4FSpsE.js";var ke=R({__name:`ComboboxAnchor`,props:{reference:{type:null,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},setup(e){let{forwardRef:t}=ue();return(e,n)=>(A(),L(J(m),{"as-child":``,reference:e.reference},{default:B(()=>[F(J(I),T({ref:J(t),"as-child":e.asChild,as:e.as},e.$attrs),{default:B(()=>[M(e.$slots,`default`)]),_:3},16,[`as-child`,`as`])]),_:3},8,[`reference`]))}}),Ae=R({__name:`ComboboxEmpty`,props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},setup(e){let t=e,n=_(),r=k(()=>n.ignoreFilter.value?n.allItems.value.size===0:n.filterState.value.count===0);return(e,n)=>r.value?(A(),L(J(I),ve(T({key:0},t)),{default:B(()=>[M(e.$slots,`default`,{},()=>[n[0]||=N(`No options`)])]),_:3},16)):W(`v-if`,!0)}}),je=R({__name:`ComboboxLabel`,props:{for:{type:String,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:`div`}},setup(e){let t=e;ue();let n=v({id:``,labelId:``});return n.labelId||=h(void 0,`reka-combobox-group-label`),(e,r)=>(A(),L(J(I),T(t,{id:J(n).labelId}),{default:B(()=>[M(e.$slots,`default`)]),_:3},16,[`id`]))}}),Me=R({__name:`DialogTrigger`,props:{asChild:{type:Boolean},as:{}},setup(e){let t=e;return(e,n)=>(A(),L(J(c),ve(j(t)),{default:B(()=>[M(e.$slots,`default`)]),_:3},16))}}),Ne={class:`grid grid-cols-1 md:grid-cols-3 gap-6 mb-8`},Pe={class:`text-2xl font-bold text-slate-800 mt-2`},Fe={class:`text-lg font-semibold text-slate-800 mt-2`},Ie={class:`space-y-4`},Le={key:0,class:`text-center py-8`},Re={key:1,class:`text-center py-8 text-gray-500`},ze={class:`flex items-center gap-3`},Be={class:`w-10 h-10 rounded-full bg-gray-100 flex items-center justify-center`},Ve={class:`font-medium text-slate-800`},He={class:`text-xs text-gray-500`},Ue={__name:`OverviewTab`,props:{account:{type:Object,required:!0}},setup(e){let t=e,n=G([]),r=G(!0);de(async()=>{await i()});async function i(){try{r.value=!0,n.value=(await $.getTransactions({bankAccountReference:t.account.reference,page:0,size:5,sort:`transactionDate,desc`})).content||[]}catch(e){console.error(`Failed to load recent transactions`,e)}finally{r.value=!1}}function a(e){return e==null?`N/A`:new Intl.NumberFormat(`en-NG`,{style:`currency`,currency:t.account.currency||`NGN`}).format(e)}function o(e){return e?new Date(e).toLocaleDateString(`en-US`,{year:`numeric`,month:`short`,day:`numeric`}):`Never`}function s(e){return`fa-money-bill-wave`}return(t,i)=>(A(),w(`div`,null,[O(`div`,Ne,[F(J(Q),{class:`p-6`},{default:B(()=>[i[0]||=O(`h3`,{class:`text-sm font-medium text-gray-500`},`Current Balance`,-1),O(`p`,Pe,E(a(e.account?.balance)),1)]),_:1}),F(J(Q),{class:`p-6`},{default:B(()=>[i[1]||=O(`h3`,{class:`text-sm font-medium text-gray-500`},`Last Synced`,-1),O(`p`,Fe,E(o(e.account?.lastSyncedAt)),1)]),_:1}),F(J(Q),{class:`p-6`},{default:B(()=>[...i[2]||=[O(`h3`,{class:`text-sm font-medium text-gray-500`},`Pending Review`,-1),O(`p`,{class:`text-2xl font-bold text-amber-600 mt-2`},`0`,-1)]]),_:1})]),F(J(Q),{class:`p-6`},{default:B(()=>[i[4]||=O(`h3`,{class:`text-lg font-semibold text-slate-800 mb-4`},`Recent Activity`,-1),O(`div`,Ie,[r.value?(A(),w(`div`,Le,[...i[3]||=[O(`i`,{class:`fa fa-cog animate-spin text-gray-400`},null,-1)]])):n.value.length===0?(A(),w(`div`,Re,` No recent activity `)):(A(!0),w(D,{key:2},K(n.value,e=>(A(),w(`div`,{key:e.id,class:`flex justify-between items-center py-3 border-b last:border-0`},[O(`div`,ze,[O(`div`,Be,[O(`i`,{class:V([`fa text-gray-500`,s(e)])},null,2)]),O(`div`,null,[O(`p`,Ve,E(e.description),1),O(`p`,He,E(o(e.transactionDate)),1)])]),O(`span`,{class:V([`font-semibold`,e.amount<0?`text-slate-800`:e.type===`DEBIT`?`text-red-600`:`text-green-600`])},E(a(e.amount)),3)]))),128))])]),_:1})]))}},We=R({__name:`ComboboxAnchor`,props:{reference:{},asChild:{type:Boolean},as:{},class:{}},setup(e){let t=e,n=H(t,`class`),r=P(n);return(e,n)=>(A(),L(J(ke),T(J(r),{class:J(U)(`w-full`,t.class)}),{default:B(()=>[M(e.$slots,`default`)]),_:3},16,[`class`]))}}),Ge=R({__name:`ComboboxEmpty`,props:{asChild:{type:Boolean},as:{},class:{}},setup(e){let t=e,n=H(t,`class`);return(e,r)=>(A(),L(J(Ae),T(J(n),{class:J(U)(`py-6 px-10 text-center text-sm`,t.class)}),{default:B(()=>[M(e.$slots,`default`)]),_:3},16,[`class`]))}}),Ke=R({__name:`ComboboxGroup`,props:{asChild:{type:Boolean},as:{},class:{},heading:{}},setup(e){let t=e,n=H(t,`class`);return(r,i)=>(A(),L(J(g),T(J(n),{class:J(U)(`overflow-hidden p-1 text-foreground [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:py-1.5 [&_[cmdk-group-heading]]:text-xs [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group-heading]]:text-muted-foreground`,t.class)}),{default:B(()=>[e.heading?(A(),L(J(je),{key:0,class:`px-2 py-1.5 text-xs font-medium text-muted-foreground`},{default:B(()=>[N(E(e.heading),1)]),_:1})):W(``,!0),M(r.$slots,`default`)]),_:3},16,[`class`]))}}),qe=`/org/categories`,Je={getCategories(){return z.get(qe,{organisationAware:!0,authorizeRequest:!0})},createCategory(e){return z.post(qe,{data:e,organisationAware:!0,authorizeRequest:!0})},updateCategory(e,t){return z.put(`${qe}/${e}`,{data:t,organisationAware:!0,authorizeRequest:!0})},deleteCategory(e){return z.delete(`${qe}/${e}`,{organisationAware:!0,authorizeRequest:!0})}},Ye={class:`space-y-6`},Xe={class:`grid grid-cols-1 md:grid-cols-2 gap-6`},Ze={class:`p-4 border-b flex flex-col md:flex-row justify-between gap-4`},Qe={class:`flex gap-2 flex-1`},$e={class:`relative flex-1 max-w-sm`},et={class:`flex gap-2`},tt={class:`overflow-x-auto`},nt={class:`w-full text-sm text-left`},rt={class:`divide-y`},it={key:0},at={key:1},ot={class:`px-6 py-4 whitespace-nowrap text-gray-600`},st={class:`px-6 py-4 font-medium text-slate-800`},ct={class:`px-6 py-4`},lt={class:`flex items-center gap-2 p-2`},ut={class:`border-t mt-2 pt-2 px-2`},dt={key:0,class:`text-gray-400 w-4 h-4 flex items-center justify-center`},ft={key:1,class:`text-green-500 w-4 h-4 flex items-center justify-center`},pt={class:`px-6 py-4 text-center`},mt={class:`p-4 border-t flex justify-between items-center text-sm text-gray-500`},ht={class:`flex gap-2`},gt={class:`grid gap-6 py-4`},_t={class:`grid grid-cols-2 gap-4`},vt={class:`space-y-2`},yt={class:`space-y-2`},bt={class:`grid grid-cols-2 gap-4`},xt={class:`space-y-2`},St={class:`space-y-2`},Ct={class:`grid grid-cols-2 gap-4`},wt={class:`space-y-2`},Tt={class:`space-y-2`},Et={class:`space-y-2`},Dt={class:`grid gap-4 py-4`},Ot={class:`space-y-2`},kt={__name:`TransactionsTab`,props:{account:{type:Object,required:!0}},setup(r){let a=r,c=pe().toast,d=G([]),f=G([]),p=G(!0),m=G(``),h=G(0),g=G(20),_=G(0),v=G(!1),y=G(!1),b=G(``),S=G(!1),C=G(null),T=G(!1),j=G({startDate:null,endDate:null,minAmount:null,maxAmount:null,type:`ALL`,status:`ALL`,categoryIds:[]}),M=new e(`en-US`,{dateStyle:`medium`}),P=k({get:()=>j.value.startDate?s(j.value.startDate):void 0,set:e=>{j.value.startDate=e?e.toString():null}}),I=k({get:()=>j.value.endDate?s(j.value.endDate):void 0,set:e=>{j.value.endDate=e?e.toString():null}}),ue=k(()=>[...new Set(j.value.categoryIds)]);function R(e){C.value=e,y.value=!0}de(async()=>{await Promise.all([z(),H()])}),fe([h,m],()=>{z()});async function z(){try{p.value=!0;let e={bankAccountReference:a.account.reference,page:h.value,size:g.value,sort:`transactionDate,desc`,search:m.value};j.value.startDate&&(e.startDate=j.value.startDate),j.value.endDate&&(e.endDate=j.value.endDate),j.value.minAmount&&(e.minAmount=j.value.minAmount),j.value.maxAmount&&(e.maxAmount=j.value.maxAmount),j.value.type&&j.value.type!==`ALL`&&(e.type=j.value.type),j.value.status&&j.value.status!==`ALL`&&(e.status=j.value.status),j.value.categoryIds&&j.value.categoryIds.length>0&&(e.categoryIds=j.value.categoryIds);let t=await $.getTransactions(e);t&&(d.value=(t.content||[]).map(e=>({...e,selectedCategoryId:e.category?.id||null,saving:!1})),_.value=t.totalElements||0)}catch(e){console.error(`Failed to load transactions`,e)}finally{p.value=!1}}async function H(){try{f.value=await Je.getCategories()||[]}catch(e){console.error(`Failed to load categories`,e)}}async function me(e){let t=e.category?.reference||null;if(e.selectedCategoryId)try{e.saving=!0;let t=await $.categorizeTransaction(e.reference,e.selectedCategoryId);c({title:`Categorized`,description:`Transaction updated successfully`}),t&&t.category&&(e.category=t.category,e.categoryName=t.category.name,e.selectedCategoryId=t.category.reference)}catch(n){console.error(`Failed to categorize transaction`,n),e.selectedCategoryId=t,c({title:`Error`,description:`Failed to categorize transaction`,variant:`destructive`})}finally{e.saving=!1}}async function ge(){try{v.value=!0;let e=await $.autoCategorizeAll();c({title:`Auto-Categorization Started`,description:e.message||`AI is processing your transactions.`}),setTimeout(z,3e3)}catch{c({title:`Error`,description:`Failed to start auto-categorization`,variant:`destructive`})}finally{v.value=!1}}async function _e(){if(b.value)try{S.value=!0;let e=await Je.createCategory({name:b.value});f.value.push(e),C.value&&=(C.value.selectedCategoryId=e.reference,await me(C.value),null),y.value=!1,b.value=``,c({title:`Category Created`,description:`${e.name} added successfully`})}catch{c({title:`Error`,description:`Failed to create category`,variant:`destructive`})}finally{S.value=!1}}function ve(){z()}function X(){h.value=0,T.value=!1,z()}function Q(){j.value={startDate:null,endDate:null,minAmount:null,maxAmount:null,type:`ALL`,status:`ALL`,categoryIds:[]},X()}function Oe(e){let t=j.value.categoryIds.indexOf(e);t!==-1&&j.value.categoryIds.splice(t,1)}function ke(e){return e==null?`N/A`:new Intl.NumberFormat(`en-NG`,{style:`currency`,currency:a.account.currency||`NGN`}).format(e)}function Ae(e){return e?new Date(e).toLocaleDateString(`en-US`,{year:`numeric`,month:`short`,day:`numeric`}):`N/A`}function je(e){return{APPROVED:`default`,PENDING_REVIEW:`warning`,REJECTED:`destructive`}[e]||`secondary`}return(e,r)=>(A(),w(`div`,Ye,[O(`div`,Xe,[F(J(Ee),{class:`p-6 flex items-center justify-between`},{default:B(()=>[r[15]||=O(`div`,null,[O(`h3`,{class:`text-lg font-semibold text-slate-800`},`AI Auto-Categorization`),O(`p`,{class:`text-gray-500 text-sm`},`Automatically assign categories to transactions using AI.`)],-1),F(J(Y),{onClick:ge,disabled:v.value},{default:B(()=>[O(`i`,{class:V([`fa mr-2`,v.value?`fa-cog animate-spin`:`fa-magic`])},null,2),N(` `+E(v.value?`Processing...`:`Auto-Categorize All`),1)]),_:1},8,[`disabled`])]),_:1})]),F(J(Ee),{class:`p-0 overflow-hidden`},{default:B(()=>[O(`div`,Ze,[O(`div`,Qe,[O(`div`,$e,[r[16]||=O(`i`,{class:`fa fa-search absolute left-3 top-1/2 -translate-y-1/2 text-gray-400`},null,-1),F(J(ye),{modelValue:m.value,"onUpdate:modelValue":r[0]||=e=>m.value=e,placeholder:`Search transactions...`,class:`pl-9 rounded-full`},null,8,[`modelValue`])]),F(J(Y),{variant:`outline`,class:`rounded-full`,onClick:r[1]||=e=>T.value=!0},{default:B(()=>[...r[17]||=[O(`i`,{class:`fa fa-filter mr-2`},null,-1),N(` Filter `,-1)]]),_:1})]),O(`div`,et,[F(J(Y),{variant:`outline`,class:`rounded-full`,onClick:ve},{default:B(()=>[O(`i`,{class:V([`fa fa-sync-alt`,{"animate-spin":p.value}])},null,2)]),_:1})])]),O(`div`,tt,[O(`table`,nt,[r[23]||=O(`thead`,{class:`bg-gray-50 text-gray-600 font-medium border-b`},[O(`tr`,null,[O(`th`,{class:`px-6 py-3`},`Date`),O(`th`,{class:`px-6 py-3`},`Description`),O(`th`,{class:`px-6 py-3`},`Category`),O(`th`,{class:`px-6 py-3 text-right`},`Amount`),O(`th`,{class:`px-6 py-3 text-center`},`Status`)])],-1),O(`tbody`,rt,[p.value&&d.value.length===0?(A(),w(`tr`,it,[...r[18]||=[O(`td`,{colspan:`5`,class:`px-6 py-12 text-center text-gray-500`},[O(`i`,{class:`fa fa-cog animate-spin mr-2`}),N(` Loading transactions... `)],-1)]])):d.value.length===0?(A(),w(`tr`,at,[...r[19]||=[O(`td`,{colspan:`5`,class:`px-6 py-12 text-center text-gray-500`},` No transactions found `,-1)]])):W(``,!0),(A(!0),w(D,null,K(d.value,e=>(A(),w(`tr`,{key:e.id,class:`hover:bg-gray-50 transition-colors`},[O(`td`,ot,E(Ae(e.transactionDate)),1),O(`td`,st,E(e.description),1),O(`td`,ct,[O(`div`,lt,[F(J(ne),{"model-value":e.selectedCategoryId,"onUpdate:modelValue":t=>{e.selectedCategoryId=t,me(e)},class:`relative w-full max-w-xs`},{default:B(()=>[F(J(ee),{class:`w-full`},{default:B(()=>[F(J(te),{class:`rounded-full w-full shadow-none border-stone-100 bg-stone-50 focus:bg-white mt-1 text-xs`,placeholder:e.categoryName||`Select category...`,"display-value":e=>f.value.find(t=>t.reference===e)?.name||``},null,8,[`placeholder`,`display-value`])]),_:2},1024),F(J(re),{class:`absolute bg-white z-50 border rounded-sm mt-1 px-2 py-3 max-h-[200px] overflow-y-auto w-full min-w-[200px]`},{default:B(()=>[(A(!0),w(D,null,K(f.value,e=>(A(),L(J(ie),{key:e.reference,value:e.reference,class:`px-4 py-2 rounded-full cursor-pointer hover:bg-gray-100 text-xs`},{default:B(()=>[N(E(e.name),1)]),_:2},1032,[`value`]))),128)),O(`div`,ut,[F(J(Y),{variant:`ghost`,size:`sm`,class:`w-full justify-start text-blue-600 rounded-full`,onClick:q(t=>R(e),[`stop`])},{default:B(()=>[...r[20]||=[O(`i`,{class:`fa fa-plus mr-2`},null,-1),N(` Create New `,-1)]]),_:1},8,[`onClick`])])]),_:2},1024)]),_:2},1032,[`model-value`,`onUpdate:modelValue`]),e.saving?(A(),w(`div`,dt,[...r[21]||=[O(`i`,{class:`fa fa-cog animate-spin text-xs`},null,-1)]])):e.selectedCategoryId&&e.selectedCategoryId===e.category?.id?(A(),w(`div`,ft,[...r[22]||=[O(`i`,{class:`fa fa-check text-xs`},null,-1)]])):W(``,!0)])]),O(`td`,{class:V([`px-6 py-4 text-right font-semibold`,e.amount<0?`text-slate-800`:e.type==`DEBIT`?`text-red-800`:`text-green-700`])},E(ke(e.amount)),3),O(`td`,pt,[F(J(De),{variant:je(e.status),class:`rounded-full text-xs`},{default:B(()=>[N(E(e.status),1)]),_:2},1032,[`variant`])])]))),128))])])]),O(`div`,mt,[O(`span`,null,`Showing `+E(h.value*g.value+1)+` to `+E(Math.min((h.value+1)*g.value,_.value))+` of `+E(_.value)+` results`,1),O(`div`,ht,[F(J(Y),{variant:`outline`,size:`sm`,disabled:h.value===0,onClick:r[2]||=e=>h.value--},{default:B(()=>[...r[24]||=[N(` Previous `,-1)]]),_:1},8,[`disabled`]),F(J(Y),{variant:`outline`,size:`sm`,disabled:(h.value+1)*g.value>=_.value,onClick:r[3]||=e=>h.value++},{default:B(()=>[...r[25]||=[N(` Next `,-1)]]),_:1},8,[`disabled`])])])]),_:1}),F(J(Ce),{open:T.value,"onUpdate:open":r[11]||=e=>T.value=e},{default:B(()=>[F(J(be),{class:`sm:max-w-[500px]`},{default:B(()=>[F(J(Se),null,{default:B(()=>[F(J(Te),null,{default:B(()=>[...r[26]||=[N(`Filter Transactions`,-1)]]),_:1}),F(J(xe),null,{default:B(()=>[...r[27]||=[N(`Refine your transaction list.`,-1)]]),_:1})]),_:1}),O(`div`,gt,[O(`div`,_t,[O(`div`,vt,[F(J(Z),null,{default:B(()=>[...r[28]||=[N(`Start Date`,-1)]]),_:1}),F(J(o),null,{default:B(()=>[F(J(l),{"as-child":``},{default:B(()=>[F(J(Y),{variant:`outline`,class:V(J(U)(`w-full justify-start text-left font-normal rounded-full`,!P.value&&`text-muted-foreground`))},{default:B(()=>[F(J(t),{class:`mr-2 h-4 w-4`}),N(` `+E(P.value?J(M).format(P.value.toDate(J(n)())):`Pick a date`),1)]),_:1},8,[`class`])]),_:1}),F(J(u),{class:`w-auto p-0`},{default:B(()=>[F(J(i),{modelValue:P.value,"onUpdate:modelValue":r[4]||=e=>P.value=e,"initial-focus":``},null,8,[`modelValue`])]),_:1})]),_:1})]),O(`div`,yt,[F(J(Z),null,{default:B(()=>[...r[29]||=[N(`End Date`,-1)]]),_:1}),F(J(o),null,{default:B(()=>[F(J(l),{"as-child":``},{default:B(()=>[F(J(Y),{variant:`outline`,class:V(J(U)(`w-full justify-start text-left font-normal rounded-full`,!I.value&&`text-muted-foreground`))},{default:B(()=>[F(J(t),{class:`mr-2 h-4 w-4`}),N(` `+E(I.value?J(M).format(I.value.toDate(J(n)())):`Pick a date`),1)]),_:1},8,[`class`])]),_:1}),F(J(u),{class:`w-auto p-0`},{default:B(()=>[F(J(i),{modelValue:I.value,"onUpdate:modelValue":r[5]||=e=>I.value=e,"initial-focus":``},null,8,[`modelValue`])]),_:1})]),_:1})])]),O(`div`,bt,[O(`div`,xt,[F(J(Z),null,{default:B(()=>[...r[30]||=[N(`Min Amount`,-1)]]),_:1}),F(J(ye),{type:`number`,modelValue:j.value.minAmount,"onUpdate:modelValue":r[6]||=e=>j.value.minAmount=e,placeholder:`0.00`,class:`rounded-full`},null,8,[`modelValue`])]),O(`div`,St,[F(J(Z),null,{default:B(()=>[...r[31]||=[N(`Max Amount`,-1)]]),_:1}),F(J(ye),{type:`number`,modelValue:j.value.maxAmount,"onUpdate:modelValue":r[7]||=e=>j.value.maxAmount=e,placeholder:`∞`,class:`rounded-full`},null,8,[`modelValue`])])]),O(`div`,Ct,[O(`div`,wt,[F(J(Z),null,{default:B(()=>[...r[32]||=[N(`Type`,-1)]]),_:1}),F(J(ae),{modelValue:j.value.type,"onUpdate:modelValue":r[8]||=e=>j.value.type=e},{default:B(()=>[F(J(se),{class:`rounded-full`},{default:B(()=>[F(J(ce),{placeholder:`All`})]),_:1}),F(J(oe),null,{default:B(()=>[F(J(x),{value:`ALL`},{default:B(()=>[...r[33]||=[N(`All`,-1)]]),_:1}),F(J(x),{value:`DEBIT`},{default:B(()=>[...r[34]||=[N(`Debit`,-1)]]),_:1}),F(J(x),{value:`CREDIT`},{default:B(()=>[...r[35]||=[N(`Credit`,-1)]]),_:1})]),_:1})]),_:1},8,[`modelValue`])]),O(`div`,Tt,[F(J(Z),null,{default:B(()=>[...r[36]||=[N(`Status`,-1)]]),_:1}),F(J(ae),{modelValue:j.value.status,"onUpdate:modelValue":r[9]||=e=>j.value.status=e},{default:B(()=>[F(J(se),{class:`rounded-full`},{default:B(()=>[F(J(ce),{placeholder:`All`})]),_:1}),F(J(oe),null,{default:B(()=>[F(J(x),{value:`ALL`},{default:B(()=>[...r[37]||=[N(`All`,-1)]]),_:1}),F(J(x),{value:`APPROVED`},{default:B(()=>[...r[38]||=[N(`Approved`,-1)]]),_:1}),F(J(x),{value:`PENDING_REVIEW`},{default:B(()=>[...r[39]||=[N(`Pending Review`,-1)]]),_:1}),F(J(x),{value:`REJECTED`},{default:B(()=>[...r[40]||=[N(`Rejected`,-1)]]),_:1})]),_:1})]),_:1},8,[`modelValue`])])]),O(`div`,Et,[F(J(Z),null,{default:B(()=>[...r[41]||=[N(`Categories`,-1)]]),_:1}),F(J(ne),{modelValue:j.value.categoryIds,"onUpdate:modelValue":r[10]||=e=>j.value.categoryIds=e,multiple:``},{default:B(()=>[F(J(We),{class:`flex h-auto min-h-10 w-full flex-wrap items-center justify-start gap-1 rounded-full border bg-transparent px-3 py-2 text-sm shadow-sm ring-offset-background placeholder:text-muted-foreground focus-within:ring-0 focus-within:ring-ring focus-within:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50`},{default:B(()=>[(A(!0),w(D,null,K(ue.value,e=>(A(),L(J(De),{key:e,variant:`outline`,class:`rounded-full px-2 py-0.5 text-xs flex items-center bg-white gap-1`},{default:B(()=>[N(E(f.value.find(t=>t.reference===e)?.name)+` `,1),F(J(he),{class:`h-3 w-3 cursor-pointer hover:text-red-500`,onClick:q(t=>Oe(e),[`stop`])},null,8,[`onClick`])]),_:2},1024))),128)),F(J(te),{class:`flex-1 h-6 min-w-[100px] border-none shadow-none focus-visible:ring-0 p-0 text-sm bg-transparent placeholder:text-muted-foreground`,placeholder:`Select categories...`})]),_:1}),F(J(re),{class:`z-50 min-w-[200px] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md`},{default:B(()=>[F(J(Ge),null,{default:B(()=>[...r[42]||=[N(`No category found.`,-1)]]),_:1}),F(J(Ke),null,{default:B(()=>[(A(!0),w(D,null,K(f.value,e=>(A(),L(J(ie),{key:e.reference,value:e.reference,class:`cursor-pointer select-none rounded-sm px-2 py-1.5 text-sm outline-none data-[highlighted]:bg-accent data-[highlighted]:text-accent-foreground`},{default:B(()=>[N(E(e.name)+` `,1),F(J(le),{class:V(J(U)(`mr-2 h-4 w-4`,j.value.categoryIds.includes(e.reference)?`opacity-100`:`opacity-0`))},null,8,[`class`])]),_:2},1032,[`value`]))),128))]),_:1})]),_:1})]),_:1},8,[`modelValue`])])]),F(J(we),{class:`gap-2`},{default:B(()=>[F(J(Y),{variant:`ghost`,onClick:Q,class:`rounded-full`},{default:B(()=>[...r[43]||=[N(`Clear Filters`,-1)]]),_:1}),F(J(Y),{onClick:X,class:`rounded-full`},{default:B(()=>[...r[44]||=[N(`Apply`,-1)]]),_:1})]),_:1})]),_:1})]),_:1},8,[`open`]),F(J(Ce),{open:y.value,"onUpdate:open":r[14]||=e=>y.value=e},{default:B(()=>[F(J(be),{class:`sm:max-w-[425px]`},{default:B(()=>[F(J(Se),null,{default:B(()=>[F(J(Te),null,{default:B(()=>[...r[45]||=[N(`Create New Category`,-1)]]),_:1}),F(J(xe),null,{default:B(()=>[...r[46]||=[N(`Add a new category for your transactions.`,-1)]]),_:1})]),_:1}),O(`div`,Dt,[O(`div`,Ot,[F(J(Z),null,{default:B(()=>[...r[47]||=[N(`Name`,-1)]]),_:1}),F(J(ye),{modelValue:b.value,"onUpdate:modelValue":r[12]||=e=>b.value=e,placeholder:`e.g., Office Supplies`,class:`rounded-full`},null,8,[`modelValue`])])]),F(J(we),null,{default:B(()=>[F(J(Y),{variant:`outline`,onClick:r[13]||=e=>y.value=!1,class:`rounded-full`},{default:B(()=>[...r[48]||=[N(`Cancel`,-1)]]),_:1}),F(J(Y),{onClick:_e,disabled:S.value,class:`rounded-full`},{default:B(()=>[N(E(S.value?`Creating...`:`Create`),1)]),_:1},8,[`disabled`])]),_:1})]),_:1})]),_:1},8,[`open`])]))}},At={class:`p-6`},jt={class:`mb-8 text-center`},Mt={class:`text-gray-500 text-sm`},Nt={key:0,class:`grid grid-cols-1 md:grid-cols-2 gap-4`},Pt={key:1,class:`mt-6 text-center`},Ft={key:2,class:`space-y-6`},It={class:`flex justify-between`},Lt={key:3,class:`text-center py-12`},Rt={key:4,class:`space-y-6 text-center`},zt={__name:`UploadWizard`,props:{account:{type:Object,required:!0}},emits:[`upload-complete`,`close`],setup(e,{emit:t}){let n=e,r=t,i=pe().toast,a=G(1),o=G(null),s=G(null);function c(e){o.value=e,e===`file`?a.value=2:i({title:`Coming Soon`,description:`Bank API integration will be available shortly.`,variant:`secondary`})}function l(){s.value.click()}function u(e){let t=e.target.files[0];t&&f(t)}function d(e){let t=e.dataTransfer.files[0];t&&f(t)}async function f(e){a.value=3;try{await $.uploadTransactionFile(n.account.reference,e),a.value=4,i({title:`Upload Complete`,description:`File uploaded successfully.`,variant:`success`})}catch(e){a.value=2,i({title:`Upload Failed`,description:e.message||`Failed to upload file.`,variant:`destructive`})}}function p(){r(`upload-complete`),setTimeout(()=>{a.value=1,o.value=null},500)}return(t,n)=>(A(),w(`div`,At,[O(`div`,jt,[n[5]||=O(`h2`,{class:`text-xl font-semibold text-slate-800`},`Sync Transactions`,-1),O(`p`,Mt,`Choose how you want to import transactions into `+E(e.account?.accountName||`this account`),1)]),a.value===1?(A(),w(`div`,Nt,[F(J(Q),{class:V([`p-6 cursor-pointer hover:border-blue-500 transition-all border-2`,o.value===`file`?`border-blue-500 bg-blue-50`:`border-transparent hover:bg-slate-50`]),onClick:n[0]||=e=>c(`file`)},{default:B(()=>[...n[6]||=[O(`div`,{class:`flex flex-col items-center text-center gap-3`},[O(`div`,{class:`h-12 w-12 rounded-full bg-blue-100 flex items-center justify-center text-blue-600`},[O(`i`,{class:`fa fa-file-upload text-xl`})]),O(`div`,null,[O(`h3`,{class:`font-medium text-slate-800`},`Upload File`),O(`p`,{class:`text-xs text-gray-500 mt-1`},`PDF, CSV, or Excel bank statements`)])],-1)]]),_:1},8,[`class`]),F(J(Q),{class:V([`p-6 cursor-pointer hover:border-yellow-500 transition-all border-2`,o.value===`api`?`border-yellow-500 bg-yellow-50`:`border-transparent hover:bg-slate-50`]),onClick:n[1]||=e=>c(`api`)},{default:B(()=>[...n[7]||=[O(`div`,{class:`flex flex-col items-center text-center gap-3`},[O(`div`,{class:`h-12 w-12 rounded-full bg-yellow-100 flex items-center justify-center text-yellow-600`},[O(`i`,{class:`fa fa-university text-xl`})]),O(`div`,null,[O(`h3`,{class:`font-medium text-slate-800`},`Connect Bank API`),O(`p`,{class:`text-xs text-gray-500 mt-1`},`Mono, Flutterwave, Paystack`)])],-1)]]),_:1},8,[`class`])])):W(``,!0),a.value===1?(A(),w(`div`,Pt,[F(J(X),{variant:`ghost`,onClick:n[2]||=e=>t.$emit(`close`)},{default:B(()=>[...n[8]||=[N(`Cancel`,-1)]]),_:1})])):W(``,!0),a.value===2&&o.value===`file`?(A(),w(`div`,Ft,[O(`div`,{class:`border-2 border-dashed border-gray-300 rounded-lg p-12 text-center hover:bg-gray-50 transition-colors cursor-pointer`,onDragover:n[3]||=q(()=>{},[`prevent`]),onDrop:q(d,[`prevent`]),onClick:l},[O(`input`,{type:`file`,ref_key:`fileInput`,ref:s,class:`hidden`,onChange:u,accept:`.csv,.xlsx,.xls,.pdf`},null,544),n[9]||=O(`i`,{class:`fa fa-cloud-upload-alt text-5xl text-blue-100 mb-4`},null,-1),n[10]||=O(`h3`,{class:`text-lg font-medium text-slate-700`},`Click or drag file to upload`,-1),n[11]||=O(`p`,{class:`text-sm text-gray-500 mt-2`},`Supported formats: CSV, Excel, PDF`,-1)],32),O(`div`,It,[F(J(X),{variant:`ghost`,onClick:n[4]||=e=>a.value=1},{default:B(()=>[...n[12]||=[N(`Back`,-1)]]),_:1})])])):W(``,!0),a.value===3?(A(),w(`div`,Lt,[...n[13]||=[me(`<div class="relative w-24 h-24 mx-auto mb-6"><div class="absolute inset-0 border-4 border-gray-100 rounded-full"></div><div class="absolute inset-0 border-4 border-blue-500 rounded-full border-t-transparent animate-spin"></div><i class="fa fa-magic absolute inset-0 flex items-center justify-center text-blue-500 text-2xl"></i></div><h3 class="text-lg font-medium text-slate-800">Processing...</h3><p class="text-gray-500 mt-2">Uploading and analyzing your transaction file.</p>`,3)]])):W(``,!0),a.value===4?(A(),w(`div`,Rt,[n[15]||=O(`div`,{class:`bg-green-50 text-green-700 p-6 rounded-full w-20 h-20 mx-auto flex items-center justify-center`},[O(`i`,{class:`fa fa-check text-3xl`})],-1),n[16]||=O(`div`,null,[O(`h3`,{class:`text-xl font-semibold text-slate-800`},`Upload Successful!`),O(`p`,{class:`text-gray-500 mt-2`},`Your transactions are being processed in the background.`)],-1),F(J(X),{onClick:p,class:`w-full md:w-auto min-w-[200px]`},{default:B(()=>[...n[14]||=[N(`View Transactions`,-1)]]),_:1})])):W(``,!0)]))}},Bt={__name:`ReviewQueue`,props:{account:{type:Object,required:!0}},setup(e){return(e,t)=>(A(),L(J(Q),{class:`p-0 overflow-hidden`},{default:B(()=>[...t[0]||=[O(`div`,{class:`p-6 border-b`},[O(`h2`,{class:`text-lg font-semibold text-slate-800`},`Review Queue`),O(`p`,{class:`text-gray-500 text-sm`},`Transactions flagged for manual review (low confidence).`)],-1),O(`div`,{class:`text-center py-12 text-gray-500`},[O(`i`,{class:`fa fa-check-double text-4xl text-gray-200 mb-4`}),O(`p`,null,`No items in review queue`),O(`p`,{class:`text-xs mt-1`},`Great job! All transactions are processed.`)],-1)]]),_:1}))}},Vt={class:`relative w-full min-h-screen overflow-y-scroll rounded-sm py-5`,style:{"scrollbar-width":`none`}},Ht={class:`container mx-auto p-8 relative`},Ut={class:`flex flex-col md:flex-row justify-between items-start md:items-center gap-4 mb-8`},Wt={class:`flex flex-col`},Gt={class:`text-2xl font-bold text-slate-800 flex items-center gap-2`},Kt={class:`text-gray-600 text-sm`},qt={class:`flex gap-3 w-full md:w-auto`},Jt={class:`min-h-[400px]`},Yt={key:0,class:`flex justify-center items-center h-64`},Xt={class:`mb-6 z-0 relative`},Zt={__name:`AccountDashboard`,setup(e){let t=_e(),n=ge(),i=pe().toast,o=t.params.reference,s=G(null),c=G(!0),l=G(!1),u=G(`overview`),m=G(0),h=[{id:`overview`,name:`Overview`,icon:`fa-chart-pie`},{id:`transactions`,name:`Transactions`,icon:`fa-list`},{id:`review`,name:`Review Queue`,icon:`fa-tasks`},{id:`settings`,name:`Settings`,icon:`fa-cog`}];de(async()=>{await g()});async function g(){try{if(c.value=!0,s.value=((await Oe.getBankAccounts()).data||[]).find(e=>e.reference===o),!s.value)throw Error(`Account not found`)}catch{i({id:`load-error`,title:`Error`,description:`Failed to load account details`,variant:`destructive`}),n.push(`/accounts`)}finally{c.value=!1}}function _(){l.value=!1,u.value=`transactions`,g(),m.value++}function ee(e){return e?`****${e.slice(-4)}`:`N/A`}return(e,t)=>(A(),w(`div`,Vt,[O(`div`,Ht,[O(`div`,Ut,[O(`div`,Wt,[O(`h1`,Gt,E(s.value?.accountName||`Loading...`),1),O(`p`,Kt,E(s.value?.bankName)+` • `+E(ee(s.value?.accountNumber)),1)]),O(`div`,qt,[F(J(Ce),{open:l.value,"onUpdate:open":t[1]||=e=>l.value=e},{default:B(()=>[F(J(Me),{"as-child":``},{default:B(()=>[F(J(X),{variant:`outline`,class:`rounded-full flex-1 md:flex-none`,disabled:!s.value},{default:B(()=>[...t[3]||=[O(`i`,{class:`fa fa-sync mr-2`},null,-1),N(` Sync `,-1)]]),_:1},8,[`disabled`])]),_:1}),F(J(be),{class:`max-w-3xl p-0`},{default:B(()=>[F(zt,{account:s.value,onUploadComplete:_,onClose:t[0]||=e=>l.value=!1},null,8,[`account`])]),_:1})]),_:1},8,[`open`]),F(J(f),null,{default:B(()=>[F(J(a),{"as-child":``},{default:B(()=>[F(J(X),{class:`rounded-full flex-1 md:flex-none shadow-md hover:shadow-blue-400`},{default:B(()=>[F(J(p),{class:`mr-2 h-4 w-4 text-blue-200`}),t[4]||=N(` Flow `,-1)]),_:1})]),_:1}),F(J(r),{class:`w-[400px] sm:w-[540px] p-0 border-l shadow-2xl`},{default:B(()=>[F(d,{account:s.value},null,8,[`account`])]),_:1})]),_:1})])]),O(`div`,Jt,[c.value?(A(),w(`div`,Yt,[...t[5]||=[O(`i`,{class:`fa fa-cog animate-spin text-3xl text-gray-400`},null,-1)]])):(A(),L(J(C),{key:1,modelValue:u.value,"onUpdate:modelValue":t[2]||=e=>u.value=e,class:`w-full`},{default:B(()=>[O(`div`,Xt,[t[6]||=O(`hr`,{class:`h-1 bg-slate-50 mb-1 mt-10 opacity-20`},null,-1),F(J(S),{class:`rounded-full bg-stone-100 text-blue-950 px-0.5 py-0.5 w-fit`},{default:B(()=>[(A(),w(D,null,K(h,e=>F(J(b),{key:e.id,value:e.id,class:`px-4 py-1 rounded-full data-[state=active]:bg-stone-50 data-[state=active]:text-blue-950 transition-all`},{default:B(()=>[O(`i`,{class:V([`fa mr-2`,e.icon])},null,2),N(` `+E(e.name),1)]),_:2},1032,[`value`])),64))]),_:1}),t[7]||=O(`hr`,{class:`h-1 bg-slate-50 mt-2 mb-10 opacity-30`},null,-1)]),F(J(y),{value:`overview`,class:``},{default:B(()=>[F(Ue,{account:s.value},null,8,[`account`])]),_:1}),F(J(y),{value:`transactions`,class:``},{default:B(()=>[(A(),L(kt,{account:s.value,key:m.value},null,8,[`account`]))]),_:1}),F(J(y),{value:`review`,class:``},{default:B(()=>[F(Bt,{account:s.value},null,8,[`account`])]),_:1}),F(J(y),{value:`settings`,class:``},{default:B(()=>[...t[8]||=[O(`div`,{class:`p-8 text-center text-gray-500 bg-slate-50 rounded-lg border border-dashed`},[O(`i`,{class:`fa fa-cog text-4xl mb-4 text-gray-300`}),O(`p`,null,`Settings coming soon`)],-1)]]),_:1})]),_:1},8,[`modelValue`]))])])]))}};export{Zt as default};