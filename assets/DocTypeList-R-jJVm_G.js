import"./useFormControl-DNz7k4w5.js";import"./useNonce-Zz8BWqvg.js";import"./nullish-CfjOSA4G.js";import"./ConfigProvider-CX3z9H2g.js";import"./useHideOthers-BMVpLdiv.js";import"./useDirection-CVICsvLJ.js";import"./PopperAnchor-BDMp0DVx.js";import"./useId-D49Isxay.js";import"./PopperContent-CYLydaJo.js";import"./useTypeahead-DQhWDs5L.js";import"./Teleport-nEgZhyc-.js";import"./utils-Bv7ngM-A.js";import"./SelectViewport-VrHoVk6u.js";import{$ as e,$n as t,Ai as n,At as ee,C as r,Di as i,Dt as te,Gi as a,Ni as o,Oi as s,Pi as c,Qi as l,Qt as u,Ta as d,Yi as f,Z as ne,bt as p,cn as m,en as h,ha as g,j as _,ji as v,ki as y,kt as b,lt as re,o as ie,ot as ae,qi as x,qn as oe,rr as se,sa as S,tn as C,tr as w,wa as T,wi as E,xa as D,z as O,zn as k}from"./index-DUz5oLRf.js";import{t as A}from"./WorkspaceStore-DloGvRxv.js";import{n as j}from"./button-Cr-p9NtE.js";import{t as M}from"./Input-xYmHuRgS.js";import{a as N,i as P,n as F,r as I,t as L}from"./SelectValue-D4XDsd7U.js";var R={class:`h-full flex flex-col bg-gray-50`},z={class:`flex-none px-6 py-4 bg-white border-b border-gray-200 flex items-center justify-between`},B={class:`flex items-center space-x-3`},V={class:`w-10 h-10 rounded-xl bg-slate-600 flex items-center justify-center`},H={class:`text-sm text-gray-500`},U={class:`flex-none px-6 py-3 bg-white border-b border-gray-100 flex items-center gap-4`},W={class:`relative flex-1 max-w-md`},G={class:`flex-1 overflow-auto`},ce={key:0,class:`flex justify-center items-center h-64`},le={key:1,class:`flex flex-col items-center justify-center h-64 text-gray-500`},ue={key:2,class:`divide-y divide-gray-100`},de=[`onClick`],fe={class:`flex-1 min-w-0`},pe={class:`flex items-center gap-2`},me={class:`font-medium text-gray-900`},he={key:0,class:`px-1.5 py-0.5 text-xs bg-gray-100 text-gray-600 rounded`},ge={key:1,class:`px-1.5 py-0.5 text-xs bg-blue-100 text-blue-600 rounded`},_e={key:0,class:`text-sm text-gray-500 truncate`},ve={class:`flex-shrink-0 flex items-center gap-2`},ye={class:`px-2 py-1 text-xs font-medium bg-gray-100 text-gray-700 rounded-full flex items-center gap-1`},be={class:`flex-shrink-0 text-right w-20`},xe={class:`text-sm text-gray-500`},Se={__name:`DocTypeList`,props:{doctype:{type:String,default:`DocType`}},setup(Se){let K=A(),q=g(!0),J=g([]),Y=g(``),X=g(``),Ce={FileCode:m,FileText:C,Users:r,Package:p,Receipt:ae,Box:t,Store:O,Truck:_,BookOpen:w,Bell:se,Mail:te,Lock:b,File:h,Folder:u,Calendar:oe,Settings:ne},we=i(()=>{let e=new Set(J.value.map(e=>e.module).filter(Boolean));return Array.from(e).sort()}),Z=i(()=>{let e=J.value;if(Y.value){let t=Y.value.toLowerCase();e=e.filter(e=>e.name.toLowerCase().includes(t)||e.description?.toLowerCase().includes(t))}return X.value&&X.value!==`__all__`&&(e=e.filter(e=>e.module===X.value)),e});async function Q(){q.value=!0;try{J.value=(await ie.get(`/org/doctypes`,{authorizeRequest:!0,organisationAware:!0}))?.data||[]}catch(e){console.error(`Failed to load DocTypes:`,e)}finally{q.value=!1}}function Te(e){console.log(`Opening DocType:`,e.name),K.openTab({id:`doctype-form-DocType-${e.name}`,title:e.name,icon:e.icon||`FileCode`,type:`doctype-form`,doctype:`DocType`,docName:e.name,isNew:!1,closable:!0})}function $(){console.log(`Creating new DocType`),K.openTab({id:`doctype-form-DocType-new`,title:`New DocType`,icon:`FileCode`,type:`doctype-form`,doctype:`DocType`,isNew:!0,closable:!0})}return a(()=>{Q()}),(t,r)=>(x(),v(`div`,R,[s(`header`,z,[s(`div`,B,[s(`div`,V,[c(D(m),{class:`w-5 h-5 text-white`})]),s(`div`,null,[r[2]||=s(`h1`,{class:`text-xl font-bold text-gray-900`},`DocType`,-1),s(`p`,H,d(J.value.length)+` DocTypes`,1)])]),c(D(j),{onClick:$,class:`rounded-full`},{default:S(()=>[c(D(re),{class:`w-4 h-4 mr-2`}),r[3]||=o(` New `,-1)]),_:1})]),s(`div`,U,[s(`div`,W,[c(D(e),{class:`absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400`}),c(D(M),{modelValue:Y.value,"onUpdate:modelValue":r[0]||=e=>Y.value=e,placeholder:`Search DocTypes...`,class:`pl-10`},null,8,[`modelValue`])]),c(D(N),{modelValue:X.value,"onUpdate:modelValue":r[1]||=e=>X.value=e},{default:S(()=>[c(D(F),{class:`w-40 bg-white`},{default:S(()=>[c(D(L),{placeholder:`All Modules`})]),_:1}),c(D(P),null,{default:S(()=>[c(D(I),{value:`__all__`},{default:S(()=>[...r[4]||=[o(`All Modules`,-1)]]),_:1}),(x(!0),v(E,null,f(we.value,e=>(x(),y(D(I),{key:e,value:e},{default:S(()=>[o(d(e),1)]),_:2},1032,[`value`]))),128))]),_:1})]),_:1},8,[`modelValue`])]),s(`div`,G,[q.value?(x(),v(`div`,ce,[c(D(ee),{class:`w-8 h-8 animate-spin text-gray-400`})])):Z.value.length===0?(x(),v(`div`,le,[c(D(m),{class:`w-12 h-12 mb-3 text-gray-300`}),r[6]||=s(`p`,null,`No DocTypes found`,-1),c(D(j),{onClick:$,variant:`link`,class:`mt-2`},{default:S(()=>[...r[5]||=[o(` Create your first DocType `,-1)]]),_:1})])):(x(),v(`div`,ue,[(x(!0),v(E,null,f(Z.value,e=>(x(),v(`div`,{key:e.name,class:`px-6 py-4 bg-white hover:bg-gray-50 cursor-pointer transition-colors flex items-center gap-4`,onClick:t=>Te(e)},[s(`div`,{class:`w-10 h-10 rounded-lg flex items-center justify-center flex-shrink-0`,style:T({backgroundColor:e.color||`#6366F1`})},[(x(),y(l(Ce[e.icon]||D(C)),{class:`w-5 h-5 text-white`}))],4),s(`div`,fe,[s(`div`,pe,[s(`span`,me,d(e.name),1),e.is_child?(x(),v(`span`,he,` Child `)):n(``,!0),e.is_submittable?(x(),v(`span`,ge,` Submittable `)):n(``,!0)]),e.description?(x(),v(`p`,_e,d(e.description),1)):n(``,!0)]),s(`div`,ve,[s(`span`,ye,[e.module===`System`?(x(),y(D(b),{key:0,class:`w-3 h-3`})):n(``,!0),o(` `+d(e.module),1)])]),s(`div`,be,[s(`span`,xe,d(e.fields?.length||0)+` fields`,1)]),c(D(k),{class:`w-5 h-5 text-gray-300 flex-shrink-0`})],8,de))),128))]))])]))}};export{Se as default};