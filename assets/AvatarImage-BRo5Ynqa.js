import{Bi as e,Br as t,Hi as n,Kr as r,Ma as i,Ni as a,Oa as o,Pa as s,Ui as c,Yi as l,aa as u,ba as d,ga as f,ha as p,hi as m,ia as h,ii as g,la as _,oa as v,xa as y}from"./index-BjUg3jag.js";var[b,x]=m(`AvatarRoot`),S=l({__name:`AvatarRoot`,props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:`span`}},setup(e){return r(),x({imageLoadingStatus:o(`idle`)}),(e,r)=>(v(),n(s(t),{"as-child":e.asChild,as:e.as},{default:d(()=>[_(e.$slots,`default`)]),_:3},8,[`as-child`,`as`]))}}),C=l({__name:`AvatarFallback`,props:{delayMs:{type:Number,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:`span`}},setup(e){let i=e,a=b();r();let l=o(i.delayMs===void 0);return f(e=>{if(i.delayMs&&g){let t=window.setTimeout(()=>{l.value=!0},i.delayMs);e(()=>{window.clearTimeout(t)})}}),(e,r)=>l.value&&s(a).imageLoadingStatus.value!==`loaded`?(v(),n(s(t),{key:0,"as-child":e.asChild,as:e.as},{default:d(()=>[_(e.$slots,`default`)]),_:3},8,[`as-child`,`as`])):c(`v-if`,!0)}});function w(e,t){return e?t?(e.src!==t&&(e.src=t),e.complete&&e.naturalWidth>0?`loaded`:`loading`):`error`:`idle`}function T(t,{referrerPolicy:n,crossOrigin:r}={}){let i=o(!1),a=o(null),s=e(()=>i.value?(!a.value&&g&&(a.value=new window.Image),a.value):null),c=o(w(s.value,t.value)),l=e=>()=>{i.value&&(c.value=e)};return h(()=>{i.value=!0,f(e=>{let i=s.value;if(!i)return;c.value=w(i,t.value);let a=l(`loaded`),o=l(`error`);i.addEventListener(`load`,a),i.addEventListener(`error`,o),n?.value&&(i.referrerPolicy=n.value),typeof r?.value==`string`&&(i.crossOrigin=r.value),e(()=>{i.removeEventListener(`load`,a),i.removeEventListener(`error`,o)})})}),u(()=>{i.value=!1}),c}var E=l({__name:`AvatarImage`,props:{src:{type:String,required:!0},referrerPolicy:{type:null,required:!1},crossOrigin:{type:null,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:`img`}},emits:[`loadingStatusChange`],setup(e,{emit:o}){let c=e,l=o,{src:u,referrerPolicy:f,crossOrigin:m}=i(c);r();let h=b(),g=T(u,{referrerPolicy:f,crossOrigin:m});return p(g,e=>{l(`loadingStatusChange`,e),e!==`idle`&&(h.imageLoadingStatus.value=e)},{immediate:!0}),(e,r)=>y((v(),n(s(t),{role:`img`,"as-child":e.asChild,as:e.as,src:s(u),"referrer-policy":s(f)},{default:d(()=>[_(e.$slots,`default`)]),_:3},8,[`as-child`,`as`,`src`,`referrer-policy`])),[[a,s(g)===`loaded`]])}});export{C as n,S as r,E as t};