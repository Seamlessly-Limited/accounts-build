import{t as e}from"./ohash.D__AXeF1-CGofPpTT.js";import{t}from"./nullish-CfjOSA4G.js";import{t as n}from"./useDirection-Dtvms_V0.js";import{t as r}from"./useFormControl-B-jGsZvD.js";import{t as i}from"./PopperRoot-DIJytYJp.js";import{At as a,Ct as o,H as s,It as c,St as l,Tt as u,Ut as d,Vt as f,Wt as p,Xt as m,hn as h,ln as g,pn as _,rt as v,tn as y,v as b,vt as x,wt as S,xt as C,y as w}from"./index-6eTYohyW.js";var T=[` `,`Enter`,`ArrowUp`,`ArrowDown`],E=[` `,`Enter`],D=10;function O(e,t,n){return e===void 0?!1:Array.isArray(e)?e.some(e=>k(e,t,n)):k(e,t,n)}function k(t,n,r){return t===void 0||n===void 0?!1:typeof t==`string`?t===n:typeof r==`function`?r(t,n):typeof r==`string`?t?.[r]===n?.[r]:e(t,n)}function A(e){return e==null||e===``||Array.isArray(e)&&e.length===0}var j={key:0,value:``},[M,N]=v(`SelectRoot`),P=a({inheritAttrs:!1,__name:`SelectRoot`,props:{open:{type:Boolean,required:!1,default:void 0},defaultOpen:{type:Boolean,required:!1},defaultValue:{type:null,required:!1},modelValue:{type:null,required:!1,default:void 0},by:{type:[String,Function],required:!1},dir:{type:String,required:!1},multiple:{type:Boolean,required:!1},autocomplete:{type:String,required:!1},disabled:{type:Boolean,required:!1},name:{type:String,required:!1},required:{type:Boolean,required:!1}},emits:[`update:modelValue`,`update:open`],setup(e,{emit:a}){let l=e,m=a,{required:v,disabled:b,multiple:T,dir:E}=_(l),D=s(l,`modelValue`,m,{defaultValue:l.defaultValue??(T.value?[]:void 0),passive:l.modelValue===void 0,deep:!0}),A=s(l,`open`,m,{defaultValue:l.defaultOpen,passive:l.open===void 0}),M=g(),P=g(),I=g({x:0,y:0}),L=C(()=>T.value&&Array.isArray(D.value)?D.value?.length===0:t(D.value));w({isProvider:!0});let R=n(E),z=r(M),B=g(new Set),V=C(()=>Array.from(B.value).map(e=>e.value).join(`;`));function H(e){if(T.value){let t=Array.isArray(D.value)?[...D.value]:[],n=t.findIndex(t=>k(t,e,l.by));n===-1?t.push(e):t.splice(n,1),D.value=[...t]}else D.value=e}function U(e){return Array.from(B.value).find(t=>O(e,t.value,l.by))}return N({triggerElement:M,onTriggerChange:e=>{M.value=e},valueElement:P,onValueElementChange:e=>{P.value=e},contentId:``,modelValue:D,onValueChange:H,by:l.by,open:A,multiple:T,required:v,onOpenChange:e=>{A.value=e},dir:R,triggerPointerDownPosRef:I,disabled:b,isEmptyModelValue:L,optionsSet:B,onOptionAdd:e=>{let t=U(e.value);t&&B.value.delete(t),B.value.add(e)},onOptionRemove:e=>{let t=U(e.value);t&&B.value.delete(t)}}),(e,n)=>(f(),o(h(i),null,{default:y(()=>[p(e.$slots,`default`,{modelValue:h(D),open:h(A)}),h(z)?(f(),o(F,{key:V.value,"aria-hidden":`true`,tabindex:`-1`,multiple:h(T),required:h(v),name:e.name,autocomplete:e.autocomplete,disabled:h(b),value:h(D)},{default:y(()=>[h(t)(h(D))?(f(),u(`option`,j)):S(`v-if`,!0),(f(!0),u(x,null,d(Array.from(B.value),e=>(f(),u(`option`,c({key:e.value??``},{ref_for:!0},e),null,16))),128))]),_:1},8,[`multiple`,`required`,`name`,`autocomplete`,`disabled`,`value`])):S(`v-if`,!0)]),_:3}))}}),F=a({__name:`BubbleSelect`,props:{autocomplete:{type:String,required:!1},autofocus:{type:Boolean,required:!1},disabled:{type:Boolean,required:!1},form:{type:String,required:!1},multiple:{type:Boolean,required:!1},name:{type:String,required:!1},required:{type:Boolean,required:!1},size:{type:Number,required:!1},value:{type:null,required:!1}},setup(e){let t=e,n=g(),r=M();m(()=>t.value,(e,t)=>{let r=window.HTMLSelectElement.prototype,i=Object.getOwnPropertyDescriptor(r,`value`).set;if(e!==t&&i&&n.value){let t=new Event(`change`,{bubbles:!0});i.call(n.value,e),n.value.dispatchEvent(t)}});function i(e){r.onValueChange(e.target.value)}return(e,r)=>(f(),o(h(b),{"as-child":``},{default:y(()=>[l(`select`,c({ref_key:`selectElement`,ref:n},t,{onInput:i}),[p(e.$slots,`default`)],16)]),_:3}))}});export{T as a,O as c,D as i,M as n,E as o,N as r,A as s,P as t};