import"./useFormControl-I5e8ntVi.js";import"./useNonce--_RD7e6O.js";import"./nullish-CfjOSA4G.js";import"./CheckboxIndicator-DsLECtgN.js";import"./ConfigProvider-Cf3TFtJ9.js";import"./useHideOthers-DOFiNZks.js";import"./useDirection-CUs44sCO.js";import"./PopperAnchor-DaI7jKFA.js";import"./useId-DsZNdByk.js";import"./PopperContent-Bfs6wgZt.js";import"./useTypeahead-c2JOyg4Z.js";import"./DialogPortal-CcJn8zns.js";import"./Teleport-CsMvEVY_.js";import"./utils-3tEteioG.js";import"./DialogTitle-DpqPGwZt.js";import"./utils-BVHQiFXk.js";import"./RovingFocusGroup-gX5cpgO4.js";import"./RovingFocusItem-jWiVSdNF.js";import"./VisuallyHiddenInput-H9N0RMFB.js";import"./Label-B9QWuJ3E.js";import"./SelectViewport-DrxmBooI.js";import{a as e,i as t,n,t as r}from"./tabs-aVhZqZcb.js";import{Bi as ee,Bt as i,F as a,Fa as o,Hi as s,Ki as c,Li as l,N as te,Oa as u,Pa as d,Pi as ne,Q as re,Qt as ie,Ra as f,Ui as ae,Vi as p,Wi as m,a as oe,ba as h,ca as g,ft as se,ht as ce,ia as le,jt as ue,na as de,o as _,oa as v,qi as y,rt as fe,sr as pe}from"./index-HKVTK5TI.js";import{n as b,t as x}from"./DialogContent-Cjoaz2Fr.js";import{n as me,r as S,t as C}from"./DialogTitle-BwthNUJE.js";import{t as w}from"./DialogFooter-Cxs7R0UA.js";import{t as T}from"./button-DuGet5pa.js";import{t as E}from"./Input-BwfiGKb1.js";import{t as he}from"./Checkbox-DUhM55RC.js";import{t as ge}from"./Card-Bi4zMNws.js";import{t as D}from"./Label-DYU2ZsWM.js";import{a as _e,i as O,n as k,r as A,t as j}from"./SelectValue-DDiy6CKz.js";var M={async fetchUserComplianceData(e){return await _.get(`me/compliances/${e}`,{authorizeRequest:!0})},async saveComplianceData(e,t,n){return await _.patch(`me/compliances/${e}/${n}`,{authorizeRequest:!0,data:{complianceData:t}})},async getFrameworks(){return[{id:1,name:`CAMA 2020`,description:`Companies and Allied Matters Act`,policyLevel:`federal`,longDescription:`The Companies and Allied Matters Act (CAMA) 2020 is the principal legislation governing the formation and management of companies in Nigeria.`},{id:2,name:`Finance Act 2023`,description:`Annual Finance Act amendments`,policyLevel:`federal`,longDescription:`The Finance Act 2023 introduces changes to various tax laws to support the implementation of the federal budget.`},{id:3,name:`Lagos State Revenue Law`,description:`State internal revenue regulations`,policyLevel:`state`,longDescription:`Governs the collection of taxes and revenues in Lagos State.`}]},async getRegistration(e=`current`){return(await _.get(`organisations/${e}/compliance/registration`,{authorizeRequest:!0})).data||{}},async updateRegistration(e,t=`current`){return(await _.put(`organisations/${t}/compliance/registration`,{authorizeRequest:!0,data:e})).data}},ve={class:`container mx-auto py-5 relative`},ye={class:`flex justify-center`},be={class:`w-full p-8 space-y-6 shadow-none border-none bg-transparent rounded-2xl min-h-[80vh]`},xe={class:`flex flex-col sm:flex-row sm:justify-between w-full`},Se={class:`flex gap-2 mt-4`},Ce={class:`grid grid-cols-1 lg:grid-cols-3 gap-6`},we={class:`lg:col-span-2`},Te={class:`flex items-center gap-2 mb-4`},Ee={class:`flex gap-2`},De={class:`lg:col-span-1`},Oe={class:`space-y-4`},ke={class:`space-y-2`},Ae={class:`space-y-2`},je={class:`space-y-2`},Me={class:`pt-2`},Ne={class:`p-4 bg-blue-50/50 rounded-xl border border-blue-100 mt-4`},Pe={class:`flex gap-3`},Fe={key:0,class:`flex justify-center py-8`},Ie={key:1,class:`text-center py-8`},Le={key:2,class:`space-y-2`},Re={class:`flex items-center gap-3`},ze={class:`font-medium text-sm text-slate-700`},Be={class:`text-xs text-slate-500`},Ve={key:0,class:`flex justify-center py-8`},He={key:1,class:`text-center py-8`},Ue={key:2,class:`space-y-2`},We={class:`flex items-center gap-3`},Ge={class:`font-medium text-sm text-slate-700`},Ke={class:`text-xs text-slate-500`},qe={class:`space-y-4`},Je={class:`text-xs font-bold text-slate-400 uppercase mb-2`},Ye={class:`space-y-2`},Xe=[`onClick`],Ze={class:`font-medium text-sm text-slate-700`},Qe={class:`text-[10px] text-slate-500 line-clamp-1`},$e={class:`space-y-4 py-4`},et={class:`space-y-2`},tt={class:`space-y-2`},nt={class:`space-y-2`},rt={class:`space-y-2`},it={class:`space-y-4 py-4`},at={class:`space-y-2`},ot={class:`space-y-2`},st={class:`space-y-2`},ct={key:0,class:`text-xs text-amber-600`},lt={class:`space-y-2`},ut={class:`space-y-2`},dt={class:`bg-amber-50 border border-amber-200 border-solid rounded-md p-4`},ft={class:`flex items-start gap-3`},pt={class:`text-sm text-amber-800`},mt={class:`font-medium`},ht={__name:`TaxJurisdiction`,setup(ht){let N=oe().toast,P=u(`kyc`),F=u([]),I=u([]),L=u(!1),R=u(!1),z=u(!1),B=u(!1),V=u(!1),H=u({nationalTaxId:``,stateTaxId:``,businessRegId:``,notes:``}),gt=u([]),_t=u(null),U=u(!1),W=u(!1),G=u(!1),K=u(null),q=u(!1),J=u({authority_name:``,authority_code:``,jurisdiction_level:`Federal`,country:`Nigeria`,is_active:!0}),Y=u({policy_name:``,policy_code:``,tax_authority:``,rate:null,applies_to:`All`,is_active:!0}),X=u(``),Z=u(null),Q=u([{isBot:!0,text:`Welcome! I'm here to help you set up your tax jurisdiction. The first phase is KYC (Know Your Customer) registration.`},{isBot:!0,text:`Please ensure your National Tax Identifier (TIN) and Business Registration number are correctly entered in the KYC tab.`},{isBot:!0,text:`Once registration is complete, we can move on to adding Tax Authorities and configuring your VAT/WHT policies.`}]),vt=ee(()=>{let e={};return gt.value.forEach(t=>{let n=t.policyLevel||`federal`;e[n]||(e[n]=[]),e[n].push(t)}),e});async function yt(){try{let e=await M.getRegistration();e&&Object.assign(H.value,e)}catch(e){console.error(`Failed to load registration:`,e)}}async function bt(){try{gt.value=await M.getFrameworks()}catch(e){console.error(`Failed to load frameworks:`,e)}}async function xt(){V.value=!0;try{await M.updateRegistration(H.value),N({message:`Compliance credentials updated successfully`,variant:`success`}),Q.value.push({isBot:!0,text:`Great! Your registration details are saved. Now let's look at your Tax Authorities. Would you like to add FIRS now?`}),P.value=`authorities`,$()}catch{N({title:`Failed to save`,message:``,variant:`error`})}finally{V.value=!1}}function St(e){_t.value=e,Q.value.push({isBot:!0,text:`Viewing framework: ${e.name}. ${e.longDescription}`}),$()}async function Ct(){L.value=!0;try{F.value=(await _.get(`/org/doc/TaxAuthority`,{authorizeRequest:!0,organisationAware:!0}))?.data?.content||[]}catch(e){console.error(`Failed to load authorities:`,e),F.value=[]}finally{L.value=!1}}async function wt(){R.value=!0;try{I.value=(await _.get(`/org/doc/TaxPolicy`,{authorizeRequest:!0,organisationAware:!0}))?.data?.content||[]}catch(e){console.error(`Failed to load policies:`,e),I.value=[]}finally{R.value=!1}}async function Tt(){z.value=!0;try{let e=await _.post(`/org/doc/TaxAuthority`,{data:J.value,authorizeRequest:!0,organisationAware:!0});e?.data?.name?F.value.push(e.data):await Ct(),U.value=!1,Pt(),N({message:`Tax authority added successfully`,variant:`success`})}catch{N({title:`Failed to add authority`,message:``,variant:`error`})}finally{z.value=!1}}async function Et(){B.value=!0;try{let e=await _.post(`/org/doc/TaxPolicy`,{data:Y.value,authorizeRequest:!0,organisationAware:!0});e?.data?.name?I.value.push(e.data):await wt(),W.value=!1,Ft(),N({message:`Tax policy added successfully`,variant:`success`})}catch{N({title:`Failed to add policy`,message:``,variant:`error`})}finally{B.value=!1}}async function Dt(e){try{await _.patch(`/org/doc/TaxAuthority/${encodeURIComponent(e.name)}`,{data:{is_active:!e.is_active},authorizeRequest:!0,organisationAware:!0}),e.is_active=!e.is_active}catch{N({title:`Failed to update authority`,message:``,variant:`error`})}}async function Ot(e){try{await _.patch(`/org/doc/TaxPolicy/${encodeURIComponent(e.name)}`,{data:{is_active:!e.is_active},authorizeRequest:!0,organisationAware:!0}),e.is_active=!e.is_active}catch{N({title:`Failed to update policy`,message:``,variant:`error`})}}function kt(e){let t=I.value.filter(t=>t.tax_authority===e.name);if(t.length>0){let e=t.map(e=>e.policy_name).join(`, `);N({title:`Cannot delete authority`,message:`This authority has ${t.length} linked policies: ${e}. Delete the policies first.`,variant:`error`,duration:5e3});return}K.value={type:`authority`,item:e},G.value=!0}function At(e){K.value={type:`policy`,item:e},G.value=!0}function jt(){G.value=!1,K.value=null}async function Mt(){if(!K.value)return;q.value=!0;let{type:e,item:t}=K.value;try{e===`authority`?(await _.delete(`/org/doc/TaxAuthority/${encodeURIComponent(t.name)}`,{authorizeRequest:!0,organisationAware:!0}),F.value=F.value.filter(e=>e.name!==t.name),N({message:`Authority deleted`,variant:`success`})):(await _.delete(`/org/doc/TaxPolicy/${encodeURIComponent(t.name)}`,{authorizeRequest:!0,organisationAware:!0}),I.value=I.value.filter(e=>e.name!==t.name),N({message:`Policy deleted`,variant:`success`})),G.value=!1,K.value=null}catch{N({title:`Failed to delete`,message:``,variant:`error`})}finally{q.value=!1}}function Nt(){if(!X.value.trim())return;let e=X.value;Q.value.push({isBot:!1,text:e}),X.value=``,$(),setTimeout(()=>{let t=`I can help you with that! `,n=e.toLowerCase();n.includes(`vat`)?t+=`VAT (Value Added Tax) in Nigeria is currently 7.5%. It applies to most goods and services. Would you like me to add it as a policy?`:n.includes(`wht`)?t+=`Withholding Tax (WHT) in Nigeria varies by transaction type: 5% for services, 10% for contracts. Shall I explain more?`:t+=`For Nigerian businesses, the key tax authorities are FIRS (Federal) and your state IRS. Would you like specific guidance?`,Q.value.push({isBot:!0,text:t}),$()},500)}function $(){de(()=>{Z.value&&(Z.value.scrollTop=Z.value.scrollHeight)})}function Pt(){J.value={authority_name:``,authority_code:``,jurisdiction_level:`Federal`,country:`Nigeria`,is_active:!0}}function Ft(){Y.value={policy_name:``,policy_code:``,tax_authority:``,rate:null,applies_to:`All`,is_active:!0}}return le(async()=>{await Promise.all([yt(),bt(),Ct(),wt()])}),(ee,u)=>(v(),m(`div`,ve,[p(`div`,ye,[p(`div`,be,[p(`div`,xe,[u[25]||=p(`div`,null,[p(`h1`,{class:`text-2xl font-bold text-slate-800`},`Tax Jurisdiction`),p(`p`,{class:`text-sm text-slate-600`},`Configure your tax authorities and policies`)],-1),p(`div`,Se,[y(d(T),{class:`flex gap-2 rounded-full`,onClick:u[0]||=e=>U.value=!0},{default:h(()=>[y(d(pe),{class:`h-4 w-4`}),u[24]||=c(` Add Authority `,-1)]),_:1})])]),p(`div`,Ce,[p(`div`,we,[y(d(ge),{class:`p-6 h-full min-h-[500px] flex flex-col`},{default:h(()=>[p(`div`,Te,[y(d(ue),{class:`h-5 w-5 text-blue-500`}),u[26]||=p(`h3`,{class:`font-semibold text-slate-700`},`Tax Setup Assistant`,-1)]),p(`div`,{ref_key:`chatContainer`,ref:Z,class:`flex-1 overflow-y-auto space-y-4 mb-4`},[(v(!0),m(l,null,g(Q.value,(e,t)=>(v(),m(`div`,{key:t,class:o(e.isBot?`flex items-start gap-3`:`flex items-start gap-3 flex-row-reverse`)},[p(`div`,{class:o([`rounded-full w-8 h-8 flex items-center justify-center text-sm font-medium`,e.isBot?`bg-blue-100 text-blue-600`:`bg-slate-100 text-slate-600`])},f(e.isBot?`ðŸ¤–`:`ðŸ‘¤`),3),p(`div`,{class:o([`max-w-[80%] rounded-lg p-3 text-sm`,e.isBot?`bg-slate-50 text-slate-700`:`bg-blue-50 text-blue-800`])},f(e.text),3)],2))),128))],512),p(`div`,Ee,[y(d(E),{modelValue:X.value,"onUpdate:modelValue":u[1]||=e=>X.value=e,placeholder:`Ask about tax setup...`,class:`flex-1 rounded-full`,onKeyup:ne(Nt,[`enter`])},null,8,[`modelValue`]),y(d(T),{class:`rounded-full`,onClick:Nt},{default:h(()=>[y(d(fe),{class:`h-4 w-4`})]),_:1})])]),_:1})]),p(`div`,De,[y(d(ge),{class:`p-6 sticky top-24`},{default:h(()=>[y(d(e),{modelValue:P.value,"onUpdate:modelValue":u[9]||=e=>P.value=e,"default-value":`kyc`,class:`mb-4`},{default:h(()=>[y(d(n),{class:`rounded-full bg-stone-100 text-blue-950 px-0.5 py-0.5 w-full`},{default:h(()=>[y(d(r),{value:`kyc`,class:`flex-1 px-3 py-1 rounded-full text-sm data-[state=active]:bg-stone-50 data-[state=active]:text-blue-950`},{default:h(()=>[...u[27]||=[c(` KYC `,-1)]]),_:1}),y(d(r),{value:`authorities`,class:`flex-1 px-3 py-1 rounded-full text-sm data-[state=active]:bg-stone-50 data-[state=active]:text-blue-950`},{default:h(()=>[...u[28]||=[c(` Authorities `,-1)]]),_:1}),y(d(r),{value:`policies`,class:`flex-1 px-3 py-1 rounded-full text-sm data-[state=active]:bg-stone-50 data-[state=active]:text-blue-950`},{default:h(()=>[...u[29]||=[c(` Policies `,-1)]]),_:1}),y(d(r),{value:`frameworks`,class:`flex-1 px-3 py-1 rounded-full text-sm data-[state=active]:bg-stone-50 data-[state=active]:text-blue-950`},{default:h(()=>[...u[30]||=[c(` Frameworks `,-1)]]),_:1})]),_:1}),y(d(t),{value:`kyc`,class:`mt-4`},{default:h(()=>[p(`div`,Oe,[p(`div`,ke,[y(d(D),{for:`nationalTaxId`,class:`text-xs font-semibold text-slate-500 uppercase`},{default:h(()=>[...u[31]||=[c(`National Tax Identifier (TIN)`,-1)]]),_:1}),y(d(E),{id:`nationalTaxId`,modelValue:H.value.nationalTaxId,"onUpdate:modelValue":u[2]||=e=>H.value.nationalTaxId=e,placeholder:`e.g., 12345678-0001`,class:`rounded-xl bg-stone-50/50`},null,8,[`modelValue`])]),p(`div`,Ae,[y(d(D),{for:`stateTaxId`,class:`text-xs font-semibold text-slate-500 uppercase`},{default:h(()=>[...u[32]||=[c(`State Tax Identifier`,-1)]]),_:1}),y(d(E),{id:`stateTaxId`,modelValue:H.value.stateTaxId,"onUpdate:modelValue":u[3]||=e=>H.value.stateTaxId=e,placeholder:`Enter state tax ID`,class:`rounded-xl bg-stone-50/50`},null,8,[`modelValue`])]),p(`div`,je,[y(d(D),{for:`businessRegId`,class:`text-xs font-semibold text-slate-500 uppercase`},{default:h(()=>[...u[33]||=[c(`Business Registration Number (RC/BN)`,-1)]]),_:1}),y(d(E),{id:`businessRegId`,modelValue:H.value.businessRegId,"onUpdate:modelValue":u[4]||=e=>H.value.businessRegId=e,placeholder:`e.g., RC 1234567`,class:`rounded-xl bg-stone-50/50`},null,8,[`modelValue`])]),p(`div`,Me,[y(d(T),{class:`w-full rounded-full`,onClick:xt,disabled:V.value},{default:h(()=>[V.value?(v(),s(d(i),{key:0,class:`h-4 w-4 mr-2 animate-spin`})):(v(),s(d(re),{key:1,class:`h-4 w-4 mr-2`})),u[34]||=c(` Save Credentials `,-1)]),_:1},8,[`disabled`])]),p(`div`,Ne,[p(`div`,Pe,[y(d(ie),{class:`h-5 w-5 text-blue-500 shrink-0`}),u[35]||=p(`p`,{class:`text-xs text-blue-700 leading-relaxed`},` Ensure your registration details match your official documents from CAMA/CAC and FIRS. `,-1)])])])]),_:1}),y(d(t),{value:`authorities`,class:`mt-4`},{default:h(()=>[L.value?(v(),m(`div`,Fe,[y(d(i),{class:`h-6 w-6 animate-spin text-slate-400`})])):F.value.length===0?(v(),m(`div`,Ie,[y(d(pe),{class:`h-12 w-12 text-slate-300 mx-auto mb-2`}),u[37]||=p(`p`,{class:`text-sm text-slate-500`},`No tax authorities added`,-1),y(d(T),{variant:`link`,class:`text-sm mt-2`,onClick:u[5]||=e=>U.value=!0},{default:h(()=>[...u[36]||=[c(` + Add your first authority `,-1)]]),_:1})])):(v(),m(`div`,Le,[(v(!0),m(l,null,g(F.value,e=>(v(),m(`div`,{key:e.name,class:`flex items-center justify-between p-3 rounded-lg border border-slate-200 hover:border-blue-300 transition-colors`},[p(`div`,Re,[y(d(he),{checked:e.is_active,"onUpdate:checked":t=>Dt(e)},null,8,[`checked`,`onUpdate:checked`]),p(`div`,null,[p(`div`,ze,f(e.authority_name),1),p(`div`,Be,f(e.authority_code)+` â€¢ `+f(e.jurisdiction_level),1)])]),y(d(T),{variant:`ghost`,size:`sm`,onClick:t=>kt(e)},{default:h(()=>[y(d(a),{class:`h-4 w-4 text-slate-400`})]),_:1},8,[`onClick`])]))),128)),y(d(T),{variant:`outline`,class:`w-full mt-4 rounded-full`,onClick:u[6]||=e=>U.value=!0},{default:h(()=>[y(d(ce),{class:`h-4 w-4 mr-2`}),u[38]||=c(` Add Authority `,-1)]),_:1})]))]),_:1}),y(d(t),{value:`policies`,class:`mt-4`},{default:h(()=>[R.value?(v(),m(`div`,Ve,[y(d(i),{class:`h-6 w-6 animate-spin text-slate-400`})])):I.value.length===0?(v(),m(`div`,He,[y(d(se),{class:`h-12 w-12 text-slate-300 mx-auto mb-2`}),u[40]||=p(`p`,{class:`text-sm text-slate-500`},`No tax policies configured`,-1),y(d(T),{variant:`link`,class:`text-sm mt-2`,onClick:u[7]||=e=>W.value=!0},{default:h(()=>[...u[39]||=[c(` + Add a tax policy `,-1)]]),_:1})])):(v(),m(`div`,Ue,[(v(!0),m(l,null,g(I.value,e=>(v(),m(`div`,{key:e.name,class:`flex items-center justify-between p-3 rounded-lg border border-slate-200 hover:border-green-300 transition-colors`},[p(`div`,We,[y(d(he),{checked:e.is_active,"onUpdate:checked":t=>Ot(e)},null,8,[`checked`,`onUpdate:checked`]),p(`div`,null,[p(`div`,Ge,f(e.policy_name),1),p(`div`,Ke,f(e.policy_code)+` â€¢ `+f(e.rate)+`%`,1)])]),y(d(T),{variant:`ghost`,size:`sm`,onClick:t=>At(e)},{default:h(()=>[y(d(a),{class:`h-4 w-4 text-slate-400`})]),_:1},8,[`onClick`])]))),128)),y(d(T),{variant:`outline`,class:`w-full mt-4 rounded-full`,onClick:u[8]||=e=>W.value=!0},{default:h(()=>[y(d(ce),{class:`h-4 w-4 mr-2`}),u[41]||=c(` Add Policy `,-1)]),_:1})]))]),_:1}),y(d(t),{value:`frameworks`,class:`mt-4`},{default:h(()=>[p(`div`,qe,[(v(!0),m(l,null,g(vt.value,(e,t)=>(v(),m(`div`,{key:t},[p(`h4`,Je,f(t),1),p(`div`,Ye,[(v(!0),m(l,null,g(e,e=>(v(),m(`div`,{key:e.id,class:`p-3 rounded-xl border border-slate-200 hover:border-blue-300 cursor-pointer transition-all bg-white`,onClick:t=>St(e)},[p(`div`,Ze,f(e.name),1),p(`div`,Qe,f(e.description),1)],8,Xe))),128))])]))),128))])]),_:1})]),_:1},8,[`modelValue`])]),_:1})])]),y(d(b),{open:U.value,"onUpdate:open":u[15]||=e=>U.value=e},{default:h(()=>[y(d(x),{class:`sm:max-w-md bg-white`},{default:h(()=>[y(d(me),null,{default:h(()=>[y(d(C),null,{default:h(()=>[...u[42]||=[c(`Add Tax Authority`,-1)]]),_:1}),y(d(S),null,{default:h(()=>[...u[43]||=[c(` Add a tax authority that has jurisdiction over your organisation. `,-1)]]),_:1})]),_:1}),p(`div`,$e,[p(`div`,et,[y(d(D),{for:`authority-name`},{default:h(()=>[...u[44]||=[c(`Authority Name`,-1)]]),_:1}),y(d(E),{id:`authority-name`,modelValue:J.value.authority_name,"onUpdate:modelValue":u[10]||=e=>J.value.authority_name=e,placeholder:`e.g., Federal Inland Revenue Service`},null,8,[`modelValue`])]),p(`div`,tt,[y(d(D),{for:`authority-code`},{default:h(()=>[...u[45]||=[c(`Code`,-1)]]),_:1}),y(d(E),{id:`authority-code`,modelValue:J.value.authority_code,"onUpdate:modelValue":u[11]||=e=>J.value.authority_code=e,placeholder:`e.g., FIRS`},null,8,[`modelValue`])]),p(`div`,nt,[y(d(D),{for:`jurisdiction-level`},{default:h(()=>[...u[46]||=[c(`Jurisdiction Level`,-1)]]),_:1}),y(d(_e),{modelValue:J.value.jurisdiction_level,"onUpdate:modelValue":u[12]||=e=>J.value.jurisdiction_level=e},{default:h(()=>[y(d(k),{class:`w-full rounded-full`},{default:h(()=>[y(d(j),{placeholder:`Select level`})]),_:1}),y(d(O),null,{default:h(()=>[y(d(A),{value:`Federal`},{default:h(()=>[...u[47]||=[c(`Federal`,-1)]]),_:1}),y(d(A),{value:`State`},{default:h(()=>[...u[48]||=[c(`State`,-1)]]),_:1}),y(d(A),{value:`Local`},{default:h(()=>[...u[49]||=[c(`Local`,-1)]]),_:1})]),_:1})]),_:1},8,[`modelValue`])]),p(`div`,rt,[y(d(D),{for:`country`},{default:h(()=>[...u[50]||=[c(`Country`,-1)]]),_:1}),y(d(E),{id:`country`,modelValue:J.value.country,"onUpdate:modelValue":u[13]||=e=>J.value.country=e,placeholder:`e.g., Nigeria`},null,8,[`modelValue`])])]),y(d(w),{class:`gap-2 sm:gap-2`},{default:h(()=>[y(d(T),{class:`rounded-full`,variant:`outline`,onClick:u[14]||=e=>U.value=!1},{default:h(()=>[...u[51]||=[c(` Cancel `,-1)]]),_:1}),y(d(T),{class:`rounded-full`,onClick:Tt,disabled:!J.value.authority_name||!J.value.authority_code||z.value},{default:h(()=>[z.value?(v(),s(d(i),{key:0,class:`h-4 w-4 mr-2 animate-spin`})):ae(``,!0),u[52]||=c(` Add Authority `,-1)]),_:1},8,[`disabled`])]),_:1})]),_:1})]),_:1},8,[`open`]),y(d(b),{open:W.value,"onUpdate:open":u[22]||=e=>W.value=e},{default:h(()=>[y(d(x),{class:`sm:max-w-md bg-white`},{default:h(()=>[y(d(me),null,{default:h(()=>[y(d(C),null,{default:h(()=>[...u[53]||=[c(`Add Tax Policy`,-1)]]),_:1}),y(d(S),null,{default:h(()=>[...u[54]||=[c(` Add a tax policy that applies to your transactions. `,-1)]]),_:1})]),_:1}),p(`div`,it,[p(`div`,at,[y(d(D),{for:`policy-name`},{default:h(()=>[...u[55]||=[c(`Policy Name`,-1)]]),_:1}),y(d(E),{id:`policy-name`,modelValue:Y.value.policy_name,"onUpdate:modelValue":u[16]||=e=>Y.value.policy_name=e,placeholder:`e.g., Value Added Tax`},null,8,[`modelValue`])]),p(`div`,ot,[y(d(D),{for:`policy-code`},{default:h(()=>[...u[56]||=[c(`Code`,-1)]]),_:1}),y(d(E),{id:`policy-code`,modelValue:Y.value.policy_code,"onUpdate:modelValue":u[17]||=e=>Y.value.policy_code=e,placeholder:`e.g., VAT`},null,8,[`modelValue`])]),p(`div`,st,[y(d(D),{for:`tax-authority`},{default:h(()=>[...u[57]||=[c(`Tax Authority`,-1)]]),_:1}),y(d(_e),{modelValue:Y.value.tax_authority,"onUpdate:modelValue":u[18]||=e=>Y.value.tax_authority=e,disabled:F.value.length===0},{default:h(()=>[y(d(k),{class:`w-full rounded-full`},{default:h(()=>[y(d(j),{placeholder:F.value.length===0?`Add an authority first`:`Select authority`},null,8,[`placeholder`])]),_:1}),y(d(O),null,{default:h(()=>[(v(!0),m(l,null,g(F.value,e=>(v(),s(d(A),{key:e.name,value:e.name},{default:h(()=>[c(f(e.authority_name),1)]),_:2},1032,[`value`]))),128))]),_:1})]),_:1},8,[`modelValue`,`disabled`]),F.value.length===0?(v(),m(`p`,ct,` You need to add a tax authority before creating policies. `)):ae(``,!0)]),p(`div`,lt,[y(d(D),{for:`rate`},{default:h(()=>[...u[58]||=[c(`Rate (%)`,-1)]]),_:1}),y(d(E),{id:`rate`,modelValue:Y.value.rate,"onUpdate:modelValue":u[19]||=e=>Y.value.rate=e,modelModifiers:{number:!0},type:`number`,step:`0.01`,placeholder:`e.g., 7.5`},null,8,[`modelValue`])]),p(`div`,ut,[y(d(D),{for:`applies-to`},{default:h(()=>[...u[59]||=[c(`Applies To`,-1)]]),_:1}),y(d(_e),{modelValue:Y.value.applies_to,"onUpdate:modelValue":u[20]||=e=>Y.value.applies_to=e},{default:h(()=>[y(d(k),{class:`w-full rounded-full`},{default:h(()=>[y(d(j),{placeholder:`Select type`})]),_:1}),y(d(O),null,{default:h(()=>[y(d(A),{value:`All`},{default:h(()=>[...u[60]||=[c(`All`,-1)]]),_:1}),y(d(A),{value:`Transactions`},{default:h(()=>[...u[61]||=[c(`Transactions`,-1)]]),_:1}),y(d(A),{value:`Invoices`},{default:h(()=>[...u[62]||=[c(`Invoices`,-1)]]),_:1}),y(d(A),{value:`Contracts`},{default:h(()=>[...u[63]||=[c(`Contracts`,-1)]]),_:1}),y(d(A),{value:`Payments`},{default:h(()=>[...u[64]||=[c(`Payments`,-1)]]),_:1})]),_:1})]),_:1},8,[`modelValue`])])]),y(d(w),{class:`gap-2 sm:gap-2`},{default:h(()=>[y(d(T),{class:`rounded-full`,variant:`outline`,onClick:u[21]||=e=>W.value=!1},{default:h(()=>[...u[65]||=[c(` Cancel `,-1)]]),_:1}),y(d(T),{class:`rounded-full`,onClick:Et,disabled:!Y.value.policy_name||!Y.value.policy_code||!Y.value.tax_authority||!Y.value.rate||Y.value.rate<=0||B.value},{default:h(()=>[B.value?(v(),s(d(i),{key:0,class:`h-4 w-4 mr-2 animate-spin`})):ae(``,!0),u[66]||=c(` Add Policy `,-1)]),_:1},8,[`disabled`])]),_:1})]),_:1})]),_:1},8,[`open`]),y(d(b),{open:G.value,"onUpdate:open":u[23]||=e=>G.value=e},{default:h(()=>[y(d(x),{class:`sm:max-w-md bg-white`},{default:h(()=>[y(d(me),null,{default:h(()=>[y(d(C),null,{default:h(()=>[...u[67]||=[c(`Confirm Deletion`,-1)]]),_:1}),y(d(S),null,{default:h(()=>[...u[68]||=[c(` Are you sure you want to delete this item? `,-1)]]),_:1})]),_:1}),p(`div`,dt,[p(`div`,ft,[y(d(te),{class:`h-5 w-5 text-amber-600 mt-0.5`}),p(`div`,pt,[p(`p`,mt,f(K.value?.item?.authority_name||K.value?.item?.policy_name),1),u[69]||=p(`p`,{class:`mt-1`},`This action cannot be undone.`,-1)])])]),y(d(w),{class:`gap-2 sm:gap-2`},{default:h(()=>[y(d(T),{class:`rounded-full`,variant:`outline`,onClick:jt,disabled:q.value},{default:h(()=>[...u[70]||=[c(` Cancel `,-1)]]),_:1},8,[`disabled`]),y(d(T),{class:`rounded-full`,variant:`destructive`,onClick:Mt,disabled:q.value},{default:h(()=>[q.value?(v(),s(d(i),{key:0,class:`h-4 w-4 mr-2 animate-spin`})):(v(),s(d(a),{key:1,class:`h-4 w-4 mr-2`})),c(` `+f(q.value?`Deleting...`:`Delete`),1)]),_:1},8,[`disabled`])]),_:1})]),_:1})]),_:1},8,[`open`])])])]))}};export{ht as default};