import{Ki as e,Oa as t,Pa as n,Vi as r,Wi as i,a,ba as o,ia as s,oa as c,qi as l,r as u,s as d,zt as f}from"./index-CTHZVx0Q.js";import{t as p}from"./icon-DOyG2O4c.js";import{t as m}from"./Card-jzahid1F.js";import{t as h}from"./CardContent-Dw2bst3s.js";import{n as g,t as _}from"./CardTitle-BBeLMeIr.js";import{t as v}from"./BackgroundAnimation-B6s-b0kX.js";var y={class:`min-h-screen w-full`},b={class:`container mx-auto px-4 py-10`},x={class:`flex justify-center items-center`},S={class:`text-center py-8`},C={class:`flex items-center justify-center space-x-2`},w={__name:`Google`,setup(p){let w=u(),T=t(!1);s(()=>{E()});async function E(){try{T.value=!0;let e=window.location.hash.substring(1),t=new URLSearchParams(e).get(`id_token`);if(!t)throw Error(`No ID token received from Google`);let n=null;try{let e=await fetch(`https://ipapi.co/json/`);if(e.ok){let t=await e.json();n=`${t.city}, ${t.region}, ${t.country}`}}catch{}let r={provider:`google`,accessToken:t,location:n};await d.createSession(r),w.push(`/`)}catch{a().toast({message:`Google sign-in failed`,variant:`error`,duration:5e3}),w.push(`/login`)}T.value=!1}return(t,a)=>(c(),i(`div`,y,[l(v),r(`div`,b,[r(`div`,x,[l(n(m),{class:`w-full max-w-md shadow-none border border-slate-50 backdrop-blur-sm bg-slate-100/0`},{default:o(()=>[l(n(g),{class:`text-center space-y-4`},{default:o(()=>[a[1]||=r(`div`,{class:`flex justify-center`},[r(`a`,{href:`/`,class:`inline-flex items-center justify-center w-50 h-50 rounded-full bg-background`},[r(`img`,{src:`/img/icon.png`,alt:`Logo`,class:`w-36 h-36`})])],-1),l(n(_),{class:`text-2xl font-bold`},{default:o(()=>[...a[0]||=[e(`Welcome Back`,-1)]]),_:1})]),_:1}),l(n(h),{class:`space-y-6`},{default:o(()=>[r(`div`,S,[r(`div`,C,[l(n(f),{class:`h-5 w-5 animate-spin`}),a[2]||=r(`span`,{class:`text-lg`},`Signing you in with Google...`,-1)])])]),_:1})]),_:1})])])]))}};export{w as default};