import"./useFormControl-BWOmmYiS.js";import"./useNonce-VOgClyGr.js";import"./nullish-CfjOSA4G.js";import"./CheckboxIndicator-Blzh6aVh.js";import"./useArrowNavigation-siWGBYoD.js";import"./ConfigProvider-BwNXqMge.js";import"./useHideOthers-C416Re6d.js";import"./useDirection-DYJPYRsI.js";import"./PopperAnchor-BHV4Kv-d.js";import"./useId-BEfc-0Pq.js";import"./PopperContent-DYn2KUeQ.js";import"./useTypeahead-b61J-STi.js";import"./DialogPortal-913ieDuk.js";import"./Teleport-DrGXNRYb.js";import"./utils-BEsFB3CI.js";import"./DialogTitle-BUR1zqy5.js";import"./AvatarImage-Ci7hdmDS.js";import"./utils-DlRpuNf9.js";import"./RovingFocusGroup-DqYe3043.js";import"./RovingFocusItem-DGQRTR_g.js";import"./VisuallyHiddenInput-DK27W3yR.js";import"./Label-BycvDR_g.js";import"./SelectViewport-BKt93lbc.js";import{t as e}from"./SelectGroup-d6DuvcVX.js";import{a as t,i as n,n as r,r as i,t as a}from"./tabs-BK26r2nl.js";import"./Team-9UiVSKfb.js";import{Bi as o,Bn as s,Fa as c,Fi as l,Ft as u,Hi as d,Ki as f,Li as p,Mi as m,Mn as h,Oa as g,Pa as _,Pi as v,Pt as y,Qn as b,Ra as x,Ui as S,Vi as C,Wi as w,a as T,an as E,ba as D,ca as O,dt as ee,fn as k,ft as te,i as A,ia as j,m as M,n as N,oa as P,qi as F,r as ne,sr as re,vt as ie,xa as ae,zt as oe}from"./index-CTHZVx0Q.js";import{n as I,t as L}from"./DialogContent-DBDLd1Cs.js";import{n as R,r as z,t as B}from"./DialogTitle-DU64UNVg.js";import{t as se}from"./DialogFooter-CdocHGcF.js";import{t as V}from"./button-DTHLpYkO.js";import{t as H}from"./Input-lhwdatZg.js";import"./avatar-CHEcFRWS.js";import{t as U}from"./OrganisationService-CcVH0X3p.js";import{t as ce}from"./Card-jzahid1F.js";import{t as W}from"./Card-DRBf6cFw.js";import{t as G}from"./CardContent-Cm3fNMH4.js";import{t as le}from"./CardDescription-BLJwmUmT.js";import{n as ue,t as de}from"./CardTitle-zXKFwFOD.js";import{t as K}from"./Label-MW7QlMSj.js";import"./form-CoNRyMXx.js";import{a as q,i as J,n as Y,r as X,t as Z}from"./SelectValue-DoC6zE2e.js";import{t as Q}from"./badge-DhOUhkIE.js";import"./Checkbox-CZRPDl7O.js";import{t as $}from"./ComplianceService-D0KtZ3gW.js";var fe={class:`w-full pb-10`},pe={key:0,class:`flex flex-col items-center justify-center h-64 space-y-4`},me={key:1,class:`max-w-4xl mx-auto`},he={class:`grid grid-cols-1 md:grid-cols-1 gap-8`},ge={class:`space-y-4`},_e={class:`flex items-center space-x-2 border-b pb-2 mb-4 border-slate-100`},ve={class:`grid grid-cols-1 md:grid-cols-2 gap-6`},ye={class:`md:col-span-2`},be={class:`space-y-4`},xe={class:`flex items-center space-x-2 border-b pb-2 mb-4 border-slate-100`},Se={class:`grid grid-cols-1 md:grid-cols-2 gap-6`},Ce={class:`md:col-span-2`},we={class:`space-y-4`},Te={class:`flex items-center space-x-2 border-b pb-2 mb-4 border-slate-100`},Ee={class:`grid grid-cols-1 md:grid-cols-2 gap-6`},De={class:`relative mt-2`},Oe={class:`relative mt-2`},ke={class:`md:col-span-2`},Ae={class:`flex items-center`},je={class:`md:col-span-2`},Me={class:`relative mt-2`},Ne={class:`flex justify-end pt-6 border-t border-slate-50`},Pe={key:1},Fe={key:2},Ie=A({__name:`Profile`,setup(e){let t=g({reference:null,name:``,legalName:``,classification:``,taxId:``,legalIDNumber:``,email:``,phone:``,fullAddress:``,country:``,state:``,website:``,industry:``}),n=g(!0),r=g(!1),i=g(!1),a=g([]),s=g([]),c=g(`Agriculture.Food and Beverage.Mining.Social Service / Non Profit.Manufacturing.Energy.Water.Construction.Sports.Wholesale and Retail Trade.Transportation.Beauty & Wellness.Information and Communication.Finance and Insurance.Real Estate.Professional and Consultancy Services.Science Research and Technical Services.Tourism and Hospitality.Administrative and Support Service.Public Administration and Defence.Fashion and Textile.Education.Human Health.Animal Health.Arts, Entertainment and Recreation.Other Activities`.split(`.`)),l=g([`Private Company Limited by Shares`,`Public Company Limited by Shares`,`Company Limited by Guarantee`,`Unlimited Company`,`Limited Liability Partnership`,`Limited Partnership`,`Business Name`,`Incorporated Trustee`,`Branch of Foreign Company`,`Cooperative Society`,`Financial Institution (Bank / Fintech / Insurance)`,`Foundation / Trust`,`Joint Venture (JV)`,`Microfinance Institution (MFI)`,`Non-Governmental Organisation (NGO)`,`Professional Firm`,`Public-Private Partnership (PPP)`]),m=o(()=>t.value.name&&t.value.name.length>2&&t.value.industry);j(async()=>{let e=JSON.parse(localStorage.getItem(`organisation`)||`null`);e&&(t.value={...t.value,...e},n.value=!1,e.country&&b(e.country));try{await v(),await h()}catch(e){console.warn(`Background data refresh failed`,e)}finally{n.value=!1}});async function h(){try{let e=await U.getOrganisationDetails();e&&(t.value={reference:e.reference,name:e.name||``,legalName:e.legalName||``,classification:e.classification||``,industry:e.industry||``,taxId:e.taxId||``,legalIDNumber:e.legalIDNumber||``,email:e.email||``,phone:e.phone||``,fullAddress:e.fullAddress||``,country:e.country||``,state:e.state||``,website:e.website||``},e.country&&await b(e.country))}catch(e){console.error(e),M({title:`Error`,description:`Failed to load organisation profile. Please refresh.`,variant:`destructive`})}}async function v(){let e=window.configurations?.countries||[];Array.isArray(e)&&(a.value=e.map(e=>({label:e.name||e,value:e.code||e.name||e})))}async function b(e){if(!e){s.value=[];return}if(!i.value){i.value=!0;try{s.value=((await(await fetch(`https://countriesnow.space/api/v0.1/countries/states`,{method:`POST`,headers:{"Content-Type":`application/json`},body:JSON.stringify({country:e})})).json()).data?.states||[]).map(e=>({label:e.name,value:e.name}))||[]}catch(e){console.warn(`Failed to fetch states`,e)}finally{i.value=!1}}}async function T(){r.value=!0;try{let e={name:t.value.name,legalName:t.value.legalName,classification:t.value.classification,industry:t.value.industry,taxId:t.value.taxId,legalIDNumber:t.value.legalIDNumber,email:t.value.email,phone:t.value.phone,fullAddress:t.value.fullAddress,country:t.value.country,state:t.value.state,website:t.value.website},n=await U.update(t.value.reference,e);if(n){t.value={...t.value,...n};let e=JSON.parse(localStorage.getItem(`organisation`)||`{}`);localStorage.setItem(`organisation`,JSON.stringify({...e,...n}))}M({title:`Saved`,description:`Your organisation profile has been updated.`})}catch(e){console.error(e),M({title:`Failed to save`,description:`An unexpected error occurred. Please try again.`,variant:`destructive`})}finally{r.value=!1}}return(e,o)=>(P(),w(`div`,fe,[n.value?(P(),w(`div`,pe,[...o[12]||=[C(`div`,{class:`animate-spin rounded-full h-8 w-8 border-b-2 border-primary`},null,-1),C(`p`,{class:`text-muted-foreground text-sm`},`Loading profile...`,-1)]])):(P(),w(`div`,me,[C(`div`,he,[C(`section`,ge,[C(`div`,_e,[F(_(re),{class:`w-5 h-5 text-primary/80`}),o[13]||=C(`h3`,{class:`font-medium text-lg text-slate-800`},`Corporate Identity`,-1)]),C(`div`,ve,[C(`div`,ye,[F(_(K),{for:`name`},{default:D(()=>[...o[14]||=[f(`Organisation Name (Trading Name) `,-1),C(`span`,{class:`text-red-500`},`*`,-1)]]),_:1}),F(_(H),{id:`name`,modelValue:t.value.name,"onUpdate:modelValue":o[0]||=e=>t.value.name=e,placeholder:`e.g. Acme Corp`,class:`mt-2`},null,8,[`modelValue`])]),C(`div`,null,[F(_(K),{for:`classification`},{default:D(()=>[...o[15]||=[f(`Business Type`,-1)]]),_:1}),F(_(q),{modelValue:t.value.classification,"onUpdate:modelValue":o[1]||=e=>t.value.classification=e},{default:D(()=>[F(_(Y),{id:`classification`,class:`mt-2 w-full`},{default:D(()=>[F(_(Z),{placeholder:`Select type`})]),_:1}),F(_(J),null,{default:D(()=>[(P(!0),w(p,null,O(l.value,e=>(P(),d(_(X),{key:e,value:e},{default:D(()=>[f(x(e),1)]),_:2},1032,[`value`]))),128))]),_:1})]),_:1},8,[`modelValue`])]),C(`div`,null,[F(_(K),{for:`industry`},{default:D(()=>[...o[16]||=[f(`Industry `,-1),C(`span`,{class:`text-red-500`},`*`,-1)]]),_:1}),F(_(q),{modelValue:t.value.industry,"onUpdate:modelValue":o[2]||=e=>t.value.industry=e},{default:D(()=>[F(_(Y),{id:`industry`,class:`mt-2 w-full`},{default:D(()=>[F(_(Z),{placeholder:`Select industry`})]),_:1}),F(_(J),null,{default:D(()=>[(P(!0),w(p,null,O(c.value,e=>(P(),d(_(X),{key:e,value:e},{default:D(()=>[f(x(e),1)]),_:2},1032,[`value`]))),128))]),_:1})]),_:1},8,[`modelValue`])])])]),C(`section`,be,[C(`div`,xe,[F(_(k),{class:`w-5 h-5 text-primary/80`}),o[17]||=C(`h3`,{class:`font-medium text-lg text-slate-800`},`Legal & Registration`,-1)]),C(`div`,Se,[C(`div`,Ce,[F(_(K),{for:`legalName`},{default:D(()=>[...o[18]||=[f(`Registered Legal Name`,-1)]]),_:1}),F(_(H),{id:`legalName`,modelValue:t.value.legalName,"onUpdate:modelValue":o[3]||=e=>t.value.legalName=e,placeholder:`e.g. Acme Corporation Limited`,class:`mt-2`},null,8,[`modelValue`]),o[19]||=C(`p`,{class:`text-[11px] text-muted-foreground mt-1`},`The official name as it appears on your registration documents.`,-1)]),C(`div`,null,[F(_(K),{for:`legalIDNumber`},{default:D(()=>[...o[20]||=[f(`Registration Number (RC/BN)`,-1)]]),_:1}),F(_(H),{id:`legalIDNumber`,modelValue:t.value.legalIDNumber,"onUpdate:modelValue":o[4]||=e=>t.value.legalIDNumber=e,placeholder:`e.g. RC123456`,class:`mt-2`},null,8,[`modelValue`]),o[21]||=C(`p`,{class:`text-[11px] text-muted-foreground mt-1`},`Found on your CAC certificate`,-1)]),C(`div`,null,[F(_(K),{for:`taxId`},{default:D(()=>[...o[22]||=[f(`Tax Identification Number (TIN)`,-1)]]),_:1}),F(_(H),{id:`taxId`,modelValue:t.value.taxId,"onUpdate:modelValue":o[5]||=e=>t.value.taxId=e,placeholder:`e.g. 12345678-0001`,class:`mt-2`},null,8,[`modelValue`]),o[23]||=C(`p`,{class:`text-[11px] text-muted-foreground mt-1`},`Used for tax reporting and invoices`,-1)])])]),C(`section`,we,[C(`div`,Te,[F(_(y),{class:`w-5 h-5 text-primary/80`}),o[24]||=C(`h3`,{class:`font-medium text-lg text-slate-800`},`Location & Contact`,-1)]),C(`div`,Ee,[C(`div`,null,[F(_(K),{for:`email`},{default:D(()=>[...o[25]||=[f(`Official Email`,-1)]]),_:1}),C(`div`,De,[F(_(u),{class:`absolute left-3 top-2.5 h-4 w-4 text-muted-foreground`}),F(_(H),{id:`email`,modelValue:t.value.email,"onUpdate:modelValue":o[6]||=e=>t.value.email=e,type:`email`,placeholder:`contact@company.com`,class:`pl-9`},null,8,[`modelValue`])])]),C(`div`,null,[F(_(K),{for:`phone`},{default:D(()=>[...o[26]||=[f(`Official Phone`,-1)]]),_:1}),C(`div`,Oe,[F(_(ie),{class:`absolute left-3 top-2.5 h-4 w-4 text-muted-foreground`}),F(_(H),{id:`phone`,modelValue:t.value.phone,"onUpdate:modelValue":o[7]||=e=>t.value.phone=e,type:`tel`,placeholder:`+234...`,class:`pl-9`},null,8,[`modelValue`])])]),C(`div`,ke,[F(_(K),{for:`fullAddress`},{default:D(()=>[...o[27]||=[f(`Office Address`,-1)]]),_:1}),F(_(H),{id:`fullAddress`,modelValue:t.value.fullAddress,"onUpdate:modelValue":o[8]||=e=>t.value.fullAddress=e,placeholder:`Street address, building, suite...`,class:`mt-2`},null,8,[`modelValue`])]),C(`div`,null,[F(_(K),{for:`country`},{default:D(()=>[...o[28]||=[f(`Country`,-1)]]),_:1}),F(_(q),{modelValue:t.value.country,"onUpdate:modelValue":[o[9]||=e=>t.value.country=e,b]},{default:D(()=>[F(_(Y),{id:`country`,class:`mt-2 w-full`},{default:D(()=>[F(_(Z),{placeholder:`Select country`})]),_:1}),F(_(J),null,{default:D(()=>[(P(!0),w(p,null,O(a.value,e=>(P(),d(_(X),{key:e.value,value:e.label},{default:D(()=>[C(`div`,Ae,[C(`span`,null,x(e.label),1)])]),_:2},1032,[`value`]))),128))]),_:1})]),_:1},8,[`modelValue`])]),C(`div`,null,[F(_(K),{for:`state`},{default:D(()=>[...o[29]||=[f(`State / Region`,-1)]]),_:1}),F(_(q),{modelValue:t.value.state,"onUpdate:modelValue":o[10]||=e=>t.value.state=e,disabled:i.value||!t.value.country},{default:D(()=>[F(_(Y),{id:`state`,class:`mt-2 w-full`},{default:D(()=>[i.value?(P(),d(_(Z),{key:0,placeholder:`Loading states...`})):(P(),d(_(Z),{key:1,placeholder:`Select state`}))]),_:1}),F(_(J),null,{default:D(()=>[(P(!0),w(p,null,O(s.value,e=>(P(),d(_(X),{key:e.value,value:e.label},{default:D(()=>[f(x(e.label),1)]),_:2},1032,[`value`]))),128))]),_:1})]),_:1},8,[`modelValue`,`disabled`])]),C(`div`,je,[F(_(K),{for:`website`},{default:D(()=>[...o[30]||=[f(`Website`,-1)]]),_:1}),C(`div`,Me,[F(_(E),{class:`absolute left-3 top-2.5 h-4 w-4 text-muted-foreground`}),F(_(H),{id:`website`,modelValue:t.value.website,"onUpdate:modelValue":o[11]||=e=>t.value.website=e,placeholder:`https://yourbusiness.com`,class:`pl-9`},null,8,[`modelValue`])])])])]),C(`div`,Ne,[F(_(V),{class:`px-8 min-w-[140px] rounded-full`,disabled:r.value||!m.value,onClick:T},{default:D(()=>[r.value?(P(),d(_(oe),{key:0,class:`mr-2 h-4 w-4 animate-spin`})):S(``,!0),r.value?(P(),w(`span`,Fe,`Saving...`)):(P(),w(`span`,Pe,`Save Changes`))]),_:1},8,[`disabled`])])])]))]))}},[[`__scopeId`,`data-v-95438e6e`]]),Le={class:`space-y-8`},Re={class:`flex items-start justify-between`},ze={class:`flex flex-col sm:flex-row gap-4`},Be={key:0,class:`space-y-4`},Ve={class:`flex items-center justify-between`},He={class:`flex items-start gap-4 flex-1`},Ue={class:`p-3 rounded-full bg-slate-100 dark:bg-slate-900`},We={class:`flex-1`},Ge={class:`flex items-center gap-2`},Ke={class:`font-semibold text-gray-900 dark:text-white`},qe={class:`text-sm text-gray-500 dark:text-gray-400 mt-1`},Je={key:0,class:`text-xs text-gray-400 dark:text-gray-500 mt-1`},Ye={class:`text-right`},Xe={class:`text-lg font-bold text-gray-900 dark:text-white`},Ze={class:`flex justify-center my-6`},Qe={class:`rounded-full bg-stone-100 text-blue-950 px-0.5 py-0.5 w-fit inline-flex items-center`},$e={class:`grid md:grid-cols-3 gap-6`},et={class:`mb-4`},tt={class:`text-lg font-bold text-gray-900 dark:text-white`},nt={class:`text-xs text-gray-500 dark:text-gray-400 mt-1`},rt={class:`mb-4`},it={class:`text-3xl font-bold text-gray-900 dark:text-white`},at={class:`text-gray-500 dark:text-gray-400`},ot={class:`space-y-2 mb-6 flex-1 text-sm`},st={class:`text-xs text-gray-600 dark:text-gray-300`},ct={__name:`ActiveSubscription`,props:{subscription:{type:Object,required:!0},payments:{type:Array,default:()=>[]},plans:{type:Array,required:!0},isYearly:{type:Boolean,default:!1}},emits:[`subscription-updated`,`subscription-cancelled`],setup(e,{emit:t}){let n=T().toast,r=e,i=t,a=g(!1),l=g(!1),u=g(r.isYearly),m=o(()=>r.subscription?r.subscription.plan||r.subscription.planName||`Current Plan`:`No Plan`),v=o(()=>r.subscription?(r.subscription.duration||r.subscription.billingCycle)===`YEARLY`?`Billed Yearly`:`Billed Monthly`:``),y=o(()=>{let e=r.subscription?.status?.toLowerCase();return e===`active`?`default`:e===`cancelled`||e===`expired`?`destructive`:e===`expiring`?`warning`:`secondary`});function E(e){return e?Number(e).toLocaleString(`en-NG`,{minimumFractionDigits:0,maximumFractionDigits:0}):`0`}function k(e){return r.subscription?(r.subscription.plan||r.subscription.planType)===e.planType:!1}async function A(e){a.value=!0;try{let t=u.value?e.idYearly:e.idMonthly,r=u.value?e.priceYearly:e.priceMonthly,o=u.value?`YEARLY`:`MONTHLY`;window.FlutterwaveCheckout||await j();let s=JSON.parse(localStorage.getItem(`user`)||`{}`),c=s.email||`user@example.com`,d=s.name||`User`;window.FlutterwaveCheckout({public_key:`FLWPUBK_TEST-SANDBOXDEMOKEY-X`,tx_ref:`SUB-CHANGE-${Date.now()}-${t}`,amount:r,currency:`NGN`,payment_plan:t,payment_options:`card,banktransfer,ussd`,customer:{email:c,name:d},customizations:{title:`Change Subscription Plan`,description:`${e.name} - ${o}`,logo:`https://seamlessly.ng/logo.png`},callback:async function(t){if(t.status===`successful`)try{await U.setSubscription({"payment.reference":`${t.transaction_id}`,"payment.provider":`FLUTTERWAVE`,plan:e.planType,duration:`${o}`}),n({title:`Success`,message:`Subscription plan changed successfully!`,variant:`success`}),l.value=!1,i(`subscription-updated`)}catch{n({title:`Error`,message:`Failed to update subscription.`,variant:`error`})}else n({title:`Payment Failed`,message:`Your payment was not successful. Please try again.`,variant:`error`});a.value=!1},onclose:function(){a.value=!1}})}catch{n({title:`Error`,message:`Failed to initiate plan change.`,variant:`error`}),a.value=!1}}function j(){return new Promise((e,t)=>{if(window.FlutterwaveCheckout){e();return}let n=document.createElement(`script`);n.src=`https://checkout.flutterwave.com/v3.js`,n.onload=e,n.onerror=t,document.head.appendChild(n)})}async function M(){if(confirm(`Are you sure you want to cancel your subscription? You'll lose access to premium features at the end of your billing period.`)){a.value=!0;try{await U.cancelSubscription(),n({title:`Cancelled`,message:`Subscription cancelled successfully. You'll retain access until the end of your billing period.`,variant:`success`}),i(`subscription-cancelled`),window.location.reload()}catch{n({title:`Error`,message:`Failed to cancel subscription.`,variant:`error`})}finally{a.value=!1}}}async function N(e){try{let t=await U.downloadReceipt(e);t.data&&t.data.url?window.open(t.data.url,`_blank`):n({title:`Error`,message:`Receipt download link not found.`,variant:`error`})}catch{n({title:`Error`,message:`Failed to download receipt.`,variant:`error`})}}return(t,n)=>(P(),w(`div`,Le,[F(W,{class:`overflow-hidden`},{default:D(()=>[F(ue,{class:`bg-gradient-to-r from-primary-50 to-primary-100 dark:from-gray-800 dark:to-gray-700`},{default:D(()=>[C(`div`,Re,[C(`div`,null,[F(de,{class:`text-2xl`},{default:D(()=>[f(x(m.value),1)]),_:1}),F(le,{class:`mt-2`},{default:D(()=>[f(x(v.value),1)]),_:1})]),F(Q,{variant:y.value,class:`text-sm`},{default:D(()=>[f(x(e.subscription?.status||`Active`),1)]),_:1},8,[`variant`])])]),_:1}),F(G,{class:`pt-6`},{default:D(()=>[C(`div`,ze,[F(V,{onClick:n[0]||=e=>l.value=!0,class:`flex-1 rounded-full bg-black dark:bg-white dark:text-black text-white hover:bg-gray-800 dark:hover:bg-gray-100`,disabled:a.value},{default:D(()=>[F(_(h),{class:`mr-2 h-4 w-4`}),n[4]||=f(` Change Plan `,-1)]),_:1},8,[`disabled`]),F(V,{onClick:M,variant:`outline`,class:`flex-1 rounded-full border-gray-300 text-gray-600 hover:bg-gray-50 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-950`,disabled:a.value},{default:D(()=>[F(_(s),{class:`mr-2 h-4 w-4`}),n[5]||=f(` Cancel Subscription `,-1)]),_:1},8,[`disabled`])])]),_:1})]),_:1}),C(`div`,null,[n[7]||=C(`h2`,{class:`text-2xl font-bold text-gray-900 dark:text-white mb-4`},`Payment History`,-1),e.payments&&e.payments.length>0?(P(),w(`div`,Be,[(P(!0),w(p,null,O(e.payments,e=>(P(),d(W,{key:e.id,class:`hover:shadow-md transition-shadow`},{default:D(()=>[F(G,{class:`pt-6`},{default:D(()=>[C(`div`,Ve,[C(`div`,He,[C(`div`,Ue,[F(_(te),{class:`h-5 w-5 text-blue-600 dark:text-blue-400`})]),C(`div`,We,[C(`div`,Ge,[C(`h3`,Ke,x(e.plan||`Subscription Payment`),1),F(Q,{variant:`outline`,class:`text-xs`},{default:D(()=>[f(x(e.status||`Completed`),1)]),_:2},1024)]),C(`p`,qe,` Completed on `+x(e.timeCompleted),1),e.reference?(P(),w(`p`,Je,` Ref: `+x(e.reference),1)):S(``,!0)])]),C(`div`,Ye,[C(`p`,Xe,` ₦`+x(E(e.amountPaid)),1),e.id?(P(),d(V,{key:0,onClick:t=>N(e.id),variant:`ghost`,size:`sm`,class:`mt-2 text-xs`},null,8,[`onClick`])):S(``,!0)])])]),_:2},1024)]),_:2},1024))),128))])):(P(),d(W,{key:1,class:`shadow-md`},{default:D(()=>[F(G,{class:`pt-12 pb-12 text-center`},{default:D(()=>[F(_(ee),{class:`h-12 w-12 text-gray-400 mx-auto mb-4`}),n[6]||=C(`p`,{class:`text-gray-500 dark:text-gray-400`},`No payment history yet`,-1)]),_:1})]),_:1}))]),F(I,{open:l.value,"onUpdate:open":n[3]||=e=>l.value=e},{default:D(()=>[F(L,{class:`max-w-5xl max-h-[90vh] overflow-y-auto`},{default:D(()=>[F(R,null,{default:D(()=>[F(B,{class:`text-2xl`},{default:D(()=>[...n[8]||=[f(`Change Your Plan`,-1)]]),_:1}),F(z,null,{default:D(()=>[...n[9]||=[f(` Select a new plan to upgrade or downgrade your subscription `,-1)]]),_:1})]),_:1}),C(`div`,Ze,[C(`div`,Qe,[C(`button`,{onClick:n[1]||=e=>u.value=!1,class:c([`rounded-full px-4 py-0.5 w-fit font-medium transition-all`,u.value?`text-gray-500 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white`:`bg-stone-50 dark:bg-gray-700 shadow-sm text-gray-900 dark:text-white`])},` Monthly `,2),C(`button`,{onClick:n[2]||=e=>u.value=!0,class:c([`rounded-full bg-stone-100 text-blue-950 px-4 py-0.5 w-fit font-medium transition-all`,u.value?`bg-stone-50 dark:bg-gray-700 shadow-sm text-gray-900 dark:text-white`:`text-gray-500 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white`])},[...n[10]||=[f(` Yearly `,-1),C(`span`,{class:`ml-2 text-xs text-green-600 font-bold`},`-17%`,-1)]],2)])]),C(`div`,$e,[(P(!0),w(p,null,O(e.plans,e=>(P(),w(`div`,{key:e.name,class:`relative flex flex-col p-6 bg-white dark:bg-gray-800 rounded-sm border border-gray-200 dark:border-gray-700 shadow-sm hover:shadow-md transition-shadow`},[C(`div`,et,[C(`h3`,tt,x(e.name),1),C(`p`,nt,x(e.description),1)]),C(`div`,rt,[C(`span`,it,` ₦`+x(E(u.value?e.priceYearly:e.priceMonthly)),1),C(`span`,at,`/`+x(u.value?`year`:`month`),1)]),C(`ul`,ot,[(P(!0),w(p,null,O(e.features.slice(0,6),e=>(P(),w(`li`,{key:e,class:`flex items-start`},[F(_(b),{class:`h-4 w-4 text-green-500 mr-2 flex-shrink-0 mt-0.5`}),C(`span`,st,x(e),1)]))),128))]),F(V,{onClick:t=>A(e),disabled:a.value||k(e),class:c([`w-full rounded-full font-semibold transition-colors`,k(e)?`bg-gray-100 dark:bg-gray-700 text-gray-400 cursor-not-allowed`:`bg-black hover:bg-gray-800 text-white dark:bg-white dark:text-black dark:hover:bg-gray-100`])},{default:D(()=>[f(x(k(e)?`Current Plan`:`Select Plan`),1)]),_:2},1032,[`onClick`,`disabled`,`class`])]))),128))])]),_:1})]),_:1},8,[`open`])]))}},lt={class:`container mx-auto py-10 px-4 max-w-7xl`},ut={__name:`Billing`,setup(e){let t=T().toast,n=g(!1),r=g(!1),i=g(null),a=g([]),o=g(!1),s=[{name:`Basic`,message:`Good for starters and mom-&-pop shops.`,priceMonthly:14500,priceYearly:145e3,idMonthly:227736,idYearly:227736,planType:`BASIC`,features:[`Transactions categorization`,`Financial statements`,`Custom dashboards`,`AI assisted planning`,`Human support`,`1 Bank account sync (NG)`,`Single user access`,`500 transactions per month`,`Bulk data export`,`Third Party integration`,`Cashflow forecast`,`Monthly Budget`,`Tax forms completion`]},{name:`SME/NGO`,message:`Perfect for growing businesses.`,priceMonthly:44500,priceYearly:445e3,idMonthly:227738,idYearly:227739,planType:`SME_NGO`,features:[`Transactions categorization`,`Financial statements`,`Custom dashboards`,`AI assisted planning`,`Live human support`,`5 Bank account sync (NG)`,`Infinite user access`,`1,000 transactions per month`,`Bulk data export`,`Third party integration`,`Cashflow forecast`,`Monthly Budget`,`Tax forms completion`]},{name:`Business`,message:`Deploy large-scale reconciliations.`,priceMonthly:1e5,priceYearly:1e6,idMonthly:227740,idYearly:227741,planType:`BUSINESS`,features:[`Transactions categorization`,`Financial statements`,`Custom dashboards`,`AI assisted planning`,`Live support`,`15 Bank account sync (NG)`,`Infinite user access`,`4,500 transactions per month`,`Bulk data export`,`Third party integration`,`Cashflow forecast`,`Monthly Budget`,`Tax forms completion`]}];j(async()=>{await c()});async function c(){try{let[e,t]=await Promise.all([U.getSubscription().catch(()=>null),U.getPayments().catch(()=>[])]);e&&e.data&&(i.value=e.data),t&&t.data?a.value=t.data:Array.isArray(t)&&(a.value=t)}catch{}}async function l(){r.value=!0;try{await U.cancelSubscription(),t({title:`Cancelled`,message:`Subscription cancelled successfully.`,variant:`success`}),i.value=null,await c(),o.value=!1}catch{t({title:`Error`,message:`Failed to cancel subscription.`,variant:`error`})}finally{r.value=!1}}return(e,t)=>(P(),w(p,null,[C(`div`,lt,[i.value?(P(),d(ct,{key:0,subscription:i.value,payments:a.value,plans:s,"is-yearly":n.value,onSubscriptionUpdated:c,onSubscriptionCancelled:c},null,8,[`subscription`,`payments`,`is-yearly`])):S(``,!0)]),F(_(I),{open:o.value,"onUpdate:open":t[1]||=e=>o.value=e},{default:D(()=>[F(_(L),{class:`sm:max-w-md bg-white`},{default:D(()=>[F(_(R),null,{default:D(()=>[F(_(B),null,{default:D(()=>[...t[2]||=[f(`Cancel Subscription`,-1)]]),_:1}),F(_(z),null,{default:D(()=>[...t[3]||=[f(` Are you sure you want to cancel your subscription? You will lose access to premium features at the end of your billing period. `,-1)]]),_:1})]),_:1}),F(_(se),{class:`gap-2 sm:gap-0`},{default:D(()=>[F(V,{variant:`outline`,onClick:t[0]||=e=>o.value=!1},{default:D(()=>[...t[4]||=[f(`Keep Subscription`,-1)]]),_:1}),F(V,{variant:`destructive`,onClick:l,disabled:r.value},{default:D(()=>[f(x(r.value?`Cancelling...`:`Confirm Cancellation`),1)]),_:1},8,[`disabled`])]),_:1})]),_:1})]),_:1},8,[`open`])],64))}},dt={class:`w-full`},ft={class:`border border-gray-200 rounded-2xl p-6 bg-white`},pt={class:`grid grid-cols-1 md:grid-cols-2 gap-6`},mt={class:`mt-8 text-right`},ht={key:0},gt={key:1},_t={class:`flex flex-col lg:flex-row gap-6`},vt={class:`flex-1 space-y-6`},yt={class:`text-lg font-semibold text-slate-800 mb-3 capitalize`},bt={class:`grid grid-cols-1 sm:grid-cols-2 gap-4`},xt={class:`flex justify-between items-start`},St={class:`font-semibold text-slate-800`},Ct={class:`text-sm text-slate-600 mb-3`},wt={class:`w-full lg:w-80 xl:w-96 border border-gray-200 rounded-2xl bg-white flex flex-col`},Tt={class:`font-semibold text-slate-800 mb-2`},Et={class:`text-sm text-slate-600 leading-relaxed whitespace-pre-line`},Dt={class:`flex-1 overflow-y-auto space-y-3`},Ot={class:`mt-4 flex gap-2`},kt={__name:`TrustCentre`,setup(e){let r=g(`registrations`),s=g(`overview`),u=g(!1),h=g({nationalTaxId:``,stateTaxId:``,businessRegId:``,notes:``}),y=g([]),b=g(null),S=g([]),T=g(``),E=o(()=>{let e={};return y.value.forEach(t=>{let n=t.policyLevel||`general`;e[n]||(e[n]=[]),e[n].push(t)}),e});j(async()=>{await ee(),await k()});async function ee(){try{y.value=await $.getFrameworks()}catch{M({title:`Error`,description:`Unable to load frameworks`})}}async function k(){try{let e=await $.getRegistration();Object.assign(h.value,e)}catch{}}async function te(){u.value=!0;try{await $.updateRegistration(h.value),M({title:`Saved`,description:`Compliance credentials updated.`})}catch{M({title:`Error`,description:`Failed to save credentials`})}finally{u.value=!1}}function A(e){b.value=e,s.value=`overview`}async function N(){if(!T.value.trim())return;let e={id:Date.now(),role:`user`,content:T.value};S.value.push(e),T.value=``,setTimeout(()=>{S.value.push({id:Date.now()+1,role:`assistant`,content:`This framework covers your obligations under the `+(b.value?.name||`selected policy`)+` and includes compliance filing schedules, due dates, and exemptions.`})},800)}return(e,o)=>(P(),w(`div`,dt,[F(_(t),{modelValue:r.value,"onUpdate:modelValue":o[6]||=e=>r.value=e,class:`w-full`},{default:D(()=>[F(_(i),{class:`mb-6 flex gap-2`},{default:D(()=>[F(_(a),{value:`registrations`,class:`rounded-full px-6 py-2`},{default:D(()=>[...o[7]||=[f(`Registrations`,-1)]]),_:1}),F(_(a),{value:`frameworks`,class:`rounded-full px-6 py-2`},{default:D(()=>[...o[8]||=[f(`Tax Frameworks`,-1)]]),_:1})]),_:1}),F(_(n),{value:`registrations`},{default:D(()=>[C(`div`,ft,[o[13]||=C(`h2`,{class:`text-lg font-semibold text-slate-800 mb-6`},`Registration Credentials`,-1),C(`div`,pt,[C(`div`,null,[F(_(K),{for:`nationalTaxId`},{default:D(()=>[...o[9]||=[f(`National Tax Identifier`,-1)]]),_:1}),F(_(H),{id:`nationalTaxId`,modelValue:h.value.nationalTaxId,"onUpdate:modelValue":o[0]||=e=>h.value.nationalTaxId=e,placeholder:`Enter your national tax identifier`,class:`rounded-full mt-2`},null,8,[`modelValue`])]),C(`div`,null,[F(_(K),{for:`stateTaxId`},{default:D(()=>[...o[10]||=[f(`State Tax Identifier`,-1)]]),_:1}),F(_(H),{id:`stateTaxId`,modelValue:h.value.stateTaxId,"onUpdate:modelValue":o[1]||=e=>h.value.stateTaxId=e,placeholder:`Enter your state tax identifier`,class:`rounded-full mt-2`},null,8,[`modelValue`])]),C(`div`,null,[F(_(K),{for:`businessRegId`},{default:D(()=>[...o[11]||=[f(`Registration Identifier`,-1)]]),_:1}),F(_(H),{id:`businessRegId`,modelValue:h.value.businessRegId,"onUpdate:modelValue":o[2]||=e=>h.value.businessRegId=e,placeholder:`Enter your official registration identifier`,class:`rounded-full mt-2`},null,8,[`modelValue`])]),C(`div`,null,[F(_(K),{for:`additionalNotes`},{default:D(()=>[...o[12]||=[f(`Additional Notes (optional)`,-1)]]),_:1}),ae(C(`textarea`,{id:`additionalNotes`,"onUpdate:modelValue":o[3]||=e=>h.value.notes=e,rows:`3`,class:`w-full rounded-2xl border-gray-300 focus:ring-2 focus:ring-blue-500 mt-2 p-3`,placeholder:`Provide any relevant compliance remarks...`},null,512),[[m,h.value.notes]])])]),C(`div`,mt,[F(_(V),{class:`rounded-full px-8`,onClick:te,disabled:u.value},{default:D(()=>[u.value?(P(),w(`span`,gt,`Processing...`)):(P(),w(`span`,ht,`Save Credentials`))]),_:1},8,[`disabled`])])])]),_:1}),F(_(n),{value:`frameworks`},{default:D(()=>[C(`div`,_t,[C(`div`,vt,[(P(!0),w(p,null,O(E.value,(e,t)=>(P(),w(`div`,{key:t},[C(`h3`,yt,x(t)+` Frameworks`,1),C(`div`,bt,[(P(!0),w(p,null,O(e,e=>(P(),d(_(W),{key:e.id,class:`p-5 border border-gray-200 hover:border-slate-800 transition rounded-xl`},{default:D(()=>[C(`div`,xt,[C(`div`,null,[C(`h4`,St,x(e.name),1),C(`p`,Ct,x(e.description),1),F(_(Q),{variant:`secondary`,class:`rounded-full text-xs`},{default:D(()=>[f(x(e.policyLevel),1)]),_:2},1024)]),F(_(V),{variant:`outline`,size:`sm`,class:`rounded-full`,onClick:t=>A(e)},{default:D(()=>[...o[14]||=[f(` View `,-1)]]),_:1},8,[`onClick`])])]),_:2},1024))),128))])]))),128))]),C(`div`,wt,[F(_(t),{modelValue:s.value,"onUpdate:modelValue":o[5]||=e=>s.value=e,class:`flex-1 flex flex-col`},{default:D(()=>[F(_(i),{class:`flex justify-around p-2 border-b border-gray-100`},{default:D(()=>[F(_(a),{value:`overview`,class:`rounded-full px-4 py-1 text-sm`},{default:D(()=>[...o[15]||=[f(`Overview`,-1)]]),_:1}),F(_(a),{value:`ask`,class:`rounded-full px-4 py-1 text-sm`},{default:D(()=>[...o[16]||=[f(`Ask AI`,-1)]]),_:1})]),_:1}),F(_(n),{value:`overview`,class:`flex-1 p-4 overflow-y-auto`},{default:D(()=>[C(`h4`,Tt,x(b.value?.name||`No Framework Selected`),1),C(`p`,Et,x(b.value?.longDescription||`Select a tax framework from the left to view details and guidance.`),1)]),_:1}),F(_(n),{value:`ask`,class:`flex-1 p-4 flex flex-col`},{default:D(()=>[C(`div`,Dt,[(P(!0),w(p,null,O(S.value,e=>(P(),w(`div`,{key:e.id,class:c([`text-sm p-3 rounded-xl`,e.role===`user`?`bg-blue-100 text-slate-800 self-end`:`bg-gray-100 text-slate-700 self-start`])},x(e.content),3))),128))]),C(`div`,Ot,[F(_(H),{modelValue:T.value,"onUpdate:modelValue":o[4]||=e=>T.value=e,placeholder:`Ask about tax obligations...`,class:`rounded-full flex-1`,onKeydown:v(l(N,[`prevent`]),[`enter`])},null,8,[`modelValue`,`onKeydown`]),F(_(V),{class:`rounded-full`,onClick:N},{default:D(()=>[...o[17]||=[f(`Send`,-1)]]),_:1})])]),_:1})]),_:1},8,[`modelValue`])])])]),_:1})]),_:1},8,[`modelValue`])]))}},At={class:`rounded-sm`},jt={class:`container mx-auto py-5 relative`},Mt={class:`flex justify-center`},Nt={class:`flex flex-col md:flex-row gap-8 space-y-6`},Pt={class:`flex-1`},Ft={class:`flex flex-col gap-8`},It={class:`block md:hidden mb-6`},Lt=A({__name:`Settings`,setup(i){ne(),N();let o=g(`general`);return(i,s)=>(P(),w(`div`,At,[C(`div`,jt,[C(`div`,Mt,[F(_(ce),{class:`w-full p-8 shadow-none border-none bg-transparent rounded-2xl min-h-[80vh]`},{default:D(()=>[C(`div`,Nt,[C(`div`,Pt,[s[10]||=C(`div`,{class:`flex flex-col sm:flex-row sm:justify-between w-full`},[C(`div`,null,[C(`h1`,{class:`text-2xl font-bold text-slate-800`},`Organisation Settings`),C(`p`,{class:`text-sm text-slate-600`},`Manage your organisation profile, team, and preferences`)])],-1),C(`div`,Ft,[C(`div`,It,[F(_(q),{modelValue:o.value,"onUpdate:modelValue":s[0]||=e=>o.value=e},{default:D(()=>[F(_(Y),{class:`w-full border rounded-xl py-2 px-3 text-sm`},{default:D(()=>[F(_(Z),{placeholder:`Select section`})]),_:1}),F(_(J),null,{default:D(()=>[F(_(e),null,{default:D(()=>[F(_(X),{value:`general`},{default:D(()=>[...s[2]||=[f(`General`,-1)]]),_:1}),F(_(X),{value:`billing`},{default:D(()=>[...s[3]||=[f(`Billing`,-1)]]),_:1}),F(_(X),{value:`trust-centre`},{default:D(()=>[...s[4]||=[f(`Trust Centre`,-1)]]),_:1})]),_:1})]),_:1})]),_:1},8,[`modelValue`])]),F(_(t),{modelValue:o.value,"onUpdate:modelValue":s[1]||=e=>o.value=e,"default-value":`general`,class:`mb-6 grid`},{default:D(()=>[s[8]||=C(`hr`,{class:`h-1 bg-slate-50 mt-10 mb-1 opacity-20`},null,-1),F(_(r),{class:`rounded-full bg-stone-100 text-blue-950 px-0.5 py-0.5 w-fit`},{default:D(()=>[F(_(a),{value:`general`,class:`px-4 py-1 rounded-full data-[state=active]:bg-stone-50 data-[state=active]:text-blue-950`},{default:D(()=>[...s[5]||=[f(` General `,-1)]]),_:1}),F(_(a),{value:`billing`,class:`px-4 py-1 rounded-full data-[state=active]:bg-stone-50 data-[state=active]:text-blue-950`},{default:D(()=>[...s[6]||=[f(` Billing `,-1)]]),_:1}),F(_(a),{value:`trust-centre`,class:`px-4 py-1 rounded-full data-[state=active]:bg-stone-50 data-[state=active]:text-blue-950`},{default:D(()=>[...s[7]||=[f(` Trust Centre `,-1)]]),_:1})]),_:1}),s[9]||=C(`hr`,{class:`h-1 bg-slate-50 mb-10 mt-2 opacity-30`},null,-1),F(_(n),{value:`general`,class:`mt-0`},{default:D(()=>[F(Ie)]),_:1}),F(_(n),{value:`billing`,class:`mt-0`},{default:D(()=>[F(ut)]),_:1}),F(_(n),{value:`trust-centre`,class:`mt-0`},{default:D(()=>[F(kt)]),_:1})]),_:1},8,[`modelValue`])])])])]),_:1})])])]))}},[[`__scopeId`,`data-v-a5eda648`]]);export{Lt as default};