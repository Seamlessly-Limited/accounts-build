import"./useFormControl-CjeW_yF1.js";import"./useNonce-DNy0wtrC.js";import"./nullish-CfjOSA4G.js";import"./ConfigProvider-BY88vHZH.js";import"./useHideOthers-CleQw0cI.js";import"./useDirection-ZgC7WO53.js";import"./PopperAnchor-DwwbE5MK.js";import"./useId-_W-wRvmL.js";import"./PopperContent-D0ERvMe6.js";import"./useTypeahead-Djp42Xey.js";import"./Teleport-DEa0s0fE.js";import"./utils-CELcxEFJ.js";import"./SelectViewport-Ekv9yKFk.js";import{Bi as e,Bt as t,C as n,Dt as r,H as i,Hi as a,It as o,Ki as s,La as c,Li as l,M as u,Oa as d,Pa as f,Ra as p,Rt as m,Ui as h,Vi as g,Wi as _,Yn as v,ba as y,ca as b,da as ee,fn as te,ft as ne,hr as re,ht as ie,ia as ae,it as oe,o as se,oa as x,pn as S,pr as C,qi as w,rr as T,tt as E,un as D,ur as O,yn as k}from"./index-BHNnQTTo.js";import{t as A}from"./WorkspaceStore-Mg88f_-M.js";import{n as j}from"./button-Db_hM3Yh.js";import{t as M}from"./Input-B0vU3uIy.js";import{a as N,i as P,n as F,r as I,t as L}from"./SelectValue-CnsvlWUN.js";var R={class:`h-full flex flex-col bg-gray-50`},z={class:`flex-none px-6 py-4 bg-white border-b border-gray-200 flex items-center justify-between`},B={class:`flex items-center space-x-3`},V={class:`w-10 h-10 rounded-xl bg-slate-600 flex items-center justify-center`},H={class:`text-sm text-gray-500`},U={class:`flex-none px-6 py-3 bg-white border-b border-gray-100 flex items-center gap-4`},W={class:`relative flex-1 max-w-md`},ce={class:`flex-1 overflow-auto`},G={key:0,class:`flex justify-center items-center h-64`},le={key:1,class:`flex flex-col items-center justify-center h-64 text-gray-500`},ue={key:2,class:`divide-y divide-gray-100`},de=[`onClick`],fe={class:`flex-1 min-w-0`},pe={class:`flex items-center gap-2`},me={class:`font-medium text-gray-900`},he={key:0,class:`px-1.5 py-0.5 text-xs bg-gray-100 text-gray-600 rounded`},ge={key:1,class:`px-1.5 py-0.5 text-xs bg-blue-100 text-blue-600 rounded`},_e={key:0,class:`text-sm text-gray-500 truncate`},ve={class:`flex-shrink-0 flex items-center gap-2`},ye={class:`px-2 py-1 text-xs font-medium bg-gray-100 text-gray-700 rounded-full flex items-center gap-1`},be={class:`flex-shrink-0 text-right w-20`},xe={class:`text-sm text-gray-500`},Se={__name:`DocTypeList`,props:{doctype:{type:String,default:`DocType`}},setup(Se){let K=A(),q=d(!0),J=d([]),Y=d(``),X=d(``),Ce={FileCode:k,FileText:S,Users:n,Package:r,Receipt:ne,Box:O,Store:i,Truck:u,BookOpen:C,Bell:re,Mail:o,Lock:m,File:te,Folder:D,Calendar:T,Settings:E},we=e(()=>{let e=new Set(J.value.map(e=>e.module).filter(Boolean));return Array.from(e).sort()}),Z=e(()=>{let e=J.value;if(Y.value){let t=Y.value.toLowerCase();e=e.filter(e=>e.name.toLowerCase().includes(t)||e.description?.toLowerCase().includes(t))}return X.value&&X.value!==`__all__`&&(e=e.filter(e=>e.module===X.value)),e});async function Q(){q.value=!0;try{J.value=(await se.get(`/org/doctypes`,{authorizeRequest:!0,organisationAware:!0}))?.data||[]}catch(e){console.error(`Failed to load DocTypes:`,e)}finally{q.value=!1}}function Te(e){console.log(`Opening DocType:`,e.name),K.openTab({id:`doctype-form-DocType-${e.name}`,title:e.name,icon:e.icon||`FileCode`,type:`doctype-form`,doctype:`DocType`,docName:e.name,isNew:!1,closable:!0})}function $(){console.log(`Creating new DocType`),K.openTab({id:`doctype-form-DocType-new`,title:`New DocType`,icon:`FileCode`,type:`doctype-form`,doctype:`DocType`,isNew:!0,closable:!0})}return ae(()=>{Q()}),(e,n)=>(x(),_(`div`,R,[g(`header`,z,[g(`div`,B,[g(`div`,V,[w(f(k),{class:`w-5 h-5 text-white`})]),g(`div`,null,[n[2]||=g(`h1`,{class:`text-xl font-bold text-gray-900`},`DocType`,-1),g(`p`,H,p(J.value.length)+` DocTypes`,1)])]),w(f(j),{onClick:$,class:`rounded-full`},{default:y(()=>[w(f(ie),{class:`w-4 h-4 mr-2`}),n[3]||=s(` New `,-1)]),_:1})]),g(`div`,U,[g(`div`,W,[w(f(oe),{class:`absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400`}),w(f(M),{modelValue:Y.value,"onUpdate:modelValue":n[0]||=e=>Y.value=e,placeholder:`Search DocTypes...`,class:`pl-10`},null,8,[`modelValue`])]),w(f(N),{modelValue:X.value,"onUpdate:modelValue":n[1]||=e=>X.value=e},{default:y(()=>[w(f(F),{class:`w-40 bg-white`},{default:y(()=>[w(f(L),{placeholder:`All Modules`})]),_:1}),w(f(P),null,{default:y(()=>[w(f(I),{value:`__all__`},{default:y(()=>[...n[4]||=[s(`All Modules`,-1)]]),_:1}),(x(!0),_(l,null,b(we.value,e=>(x(),a(f(I),{key:e,value:e},{default:y(()=>[s(p(e),1)]),_:2},1032,[`value`]))),128))]),_:1})]),_:1},8,[`modelValue`])]),g(`div`,ce,[q.value?(x(),_(`div`,G,[w(f(t),{class:`w-8 h-8 animate-spin text-gray-400`})])):Z.value.length===0?(x(),_(`div`,le,[w(f(k),{class:`w-12 h-12 mb-3 text-gray-300`}),n[6]||=g(`p`,null,`No DocTypes found`,-1),w(f(j),{onClick:$,variant:`link`,class:`mt-2`},{default:y(()=>[...n[5]||=[s(` Create your first DocType `,-1)]]),_:1})])):(x(),_(`div`,ue,[(x(!0),_(l,null,b(Z.value,e=>(x(),_(`div`,{key:e.name,class:`px-6 py-4 bg-white hover:bg-gray-50 cursor-pointer transition-colors flex items-center gap-4`,onClick:t=>Te(e)},[g(`div`,{class:`w-10 h-10 rounded-lg flex items-center justify-center flex-shrink-0`,style:c({backgroundColor:e.color||`#6366F1`})},[(x(),a(ee(Ce[e.icon]||f(S)),{class:`w-5 h-5 text-white`}))],4),g(`div`,fe,[g(`div`,pe,[g(`span`,me,p(e.name),1),e.is_child?(x(),_(`span`,he,` Child `)):h(``,!0),e.is_submittable?(x(),_(`span`,ge,` Submittable `)):h(``,!0)]),e.description?(x(),_(`p`,_e,p(e.description),1)):h(``,!0)]),g(`div`,ve,[g(`span`,ye,[e.module===`System`?(x(),a(f(m),{key:0,class:`w-3 h-3`})):h(``,!0),s(` `+p(e.module),1)])]),g(`div`,be,[g(`span`,xe,p(e.fields?.length||0)+` fields`,1)]),w(f(v),{class:`w-5 h-5 text-gray-300 flex-shrink-0`})],8,de))),128))]))])]))}};export{Se as default};