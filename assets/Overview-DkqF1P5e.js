import "./useFormControl-Dnp3iC5X.js"; import "./useNonce-CnEoXn07.js"; import "./nullish-CfjOSA4G.js"; import "./ConfigProvider-Ckl6KgMj.js"; import "./useHideOthers-L15EfXxs.js"; import "./useDirection-B1kSZwKq.js"; import "./PopperAnchor-Sq61S0mP.js"; import "./useId-Da-MS2me.js"; import "./PopperContent-b6gGwF_E.js"; import "./useTypeahead---iVCXRs.js"; import "./Teleport-BJpx-KiC.js"; import "./utils-BpsHH13c.js"; import "./utils-BFR0tnUV.js"; import "./RovingFocusGroup-BhwVgyO_.js"; import "./RovingFocusItem-DP4RL6Sr.js"; import "./SelectViewport-BHDGvtQj.js"; import { t as e } from "./SelectGroup-DgFFtqHX.js"; import { a as t, i as n, n as r, t as i } from "./tabs-B4YTpODo.js"; import { $i as a, D as ee, E as o, Ea as s, Fi as c, Gn as te, Hn as l, Li as u, Mi as d, Ni as f, Nt as p, Oa as ne, Oi as m, Pi as h, Ri as g, Rn as _, Rt as re, Ta as v, Yi as y, Zi as b, da as x, i as S, ji as C, ka as w, kt as ie, mr as ae, n as T, o as E, oa as oe, qn as se, r as ce, vr as le, ya as D } from "./index-CHNvwQRL.js"; import { t as O } from "./OrganisationService-DLV_nwEW.js"; import "./button-DSlecn3R.js"; import { t as k } from "./Card-DyXAPDF3.js"; import { a as A, i as j, n as M, r as N, t as P } from "./SelectValue-DyPaSYfc.js"; import { t as F } from "./TransactionService-CFmlLUIq.js"; var I = `/org/logs`, L = { getLogs(e) { return E.get(I, { query: e, organisationAware: !0, authorizeRequest: !0 }) } }, R = { class: `rounded-sm` }, z = { class: `container mx-auto py-5 relative` }, B = { class: `flex justify-center` }, V = { class: `flex flex-col md:flex-row gap-8 space-y-6` }, H = { class: `flex-1` }, U = { class: `flex flex-col gap-8` }, W = { class: `block md:hidden mb-6` }, ue = { class: `min-h-[220px] flex items-center justify-center text-slate-500` }, de = { class: `flex flex-col md:flex-row gap-4 w-full px-0` }, fe = { class: `grid grid-cols-1 sm:grid-cols-2 gap-4 w-full` }, pe = { class: `md:min-w-[375px]` }, me = { class: `flex items-center justify-between` }, he = { class: `text-right` }, ge = { class: `rounded-full size-10 text-xs bg-blue-300 text-white flex items-center justify-center` }, _e = { class: `space-y-4` }, ve = [`onClick`], ye = { class: `flex-1` }, be = { class: `flex items-center justify-between` }, xe = { class: `font-medium text-slate-700` }, Se = { class: `text-sm text-slate-500` }, Ce = { class: `pt-1 flex items-center gap-2` }, we = { key: 0, class: `rounded-full w-6 h-6 bg-green-500 text-white flex items-center justify-center` }, Te = { key: 1, class: `rounded-full w-6 h-6 bg-slate-200 text-slate-500 flex items-center justify-center` }, Ee = { class: `space-y-4` }, De = { key: 0, class: `flex items-end gap-1 h-32` }, G = [`title`], Oe = { key: 1, class: `h-32 flex items-center justify-center text-slate-400` }, ke = { key: 0, class: `flex justify-center py-8` }, Ae = { key: 1, class: `text-center py-8` }, je = { key: 2, class: `space-y-3` }, Me = { class: `flex items-center gap-3` }, Ne = { class: `font-medium text-slate-700 line-clamp-1` }, Pe = { class: `text-sm text-slate-500` }, Fe = { class: `space-y-6` }, Ie = { key: 0, class: `flex justify-center py-8` }, Le = { key: 1, class: `text-center py-8` }, Re = { key: 2, class: `relative` }, ze = { class: `space-y-4` }, Be = { class: `bg-slate-50 rounded-lg p-4` }, Ve = { class: `flex items-start justify-between` }, He = { class: `font-medium text-slate-700` }, Ue = { class: `text-sm text-slate-500 mt-1` }, We = { class: `inline-flex items-center gap-1` }, Ge = { class: `text-xs text-slate-400` }, Ke = { key: 0, class: `mt-2` }, qe = { class: `inline-flex items-center px-2 py-0.5 rounded-full text-xs bg-slate-200 text-slate-600` }, K = S({ __name: `Overview`, setup(S) { let E = ce(); T(); let I = D(`overview`); D({}); let K = D([]), q = D(!1), J = D([]), Y = D(!1), X = D([]), Z = D(!1), Je = C(() => K.value.slice(0, 20)); function Ye(e) { if (K.value.length === 0) return 0; let t = Math.max(...K.value.map(e => Math.abs(e.amount))); return t === 0 ? 0 : Math.abs(e) / t * 100 } function Q(e) { return new Intl.NumberFormat(`en-NG`, { style: `currency`, currency: `NGN`, minimumFractionDigits: 0, maximumFractionDigits: 0 }).format(e) } function $(e) { return e ? new Date(e).toLocaleDateString(`en-GB`, { day: `numeric`, month: `short`, year: `numeric` }) : `` } function Xe(e) { if (!e) return ``; let t = new Date(e), n = new Date - t, r = Math.floor(n / 6e4), i = Math.floor(n / 36e5), a = Math.floor(n / 864e5); return r < 1 ? `Just now` : r < 60 ? `${r}m ago` : i < 24 ? `${i}h ago` : a < 7 ? `${a}d ago` : $(e) } async function Ze() { q.value = !0; try { let e = await F.getTransactions({ size: 20, page: 0 }); K.value = e?.content || e || [] } catch (e) { console.error(`Failed to load transactions:`, e), K.value = [] } finally { q.value = !1 } } async function Qe() { Y.value = !0; try { let e = await L.getLogs({ size: 20, page: 0 }); J.value = e?.content || e || [] } catch (e) { console.error(`Failed to load logs:`, e), J.value = [] } finally { Y.value = !1 } } oe(I, e => { e === `transactions` && K.value.length === 0 && Ze(), e === `activity` && J.value.length === 0 && Qe() }), y(async () => { await $e() }); async function $e() { Z.value = !0; try { let e = await O.getSetupChecklist(); e?.items && (X.value = e.items) } catch (e) { console.error(`Failed to load checklist:`, e), X.value = [{ key: `team`, title: `Add team members`, description: `Invite collaborators to your organisation`, done: !1, route: `/team` }, { key: `jurisdiction`, title: `Set tax jurisdiction`, description: `Configure your tax authorities and policies`, done: !1, route: `/tax-jurisdiction` }] } finally { Z.value = !1 } } let et = C(() => { let e = X.value.length, t = X.value.filter(e => e.done).length; return Math.round(t / e * 100) }); function tt(e) { e.route && E.push(e.route) } return (y, S) => (b(), c(`div`, R, [d(`div`, z, [d(`div`, B, [g(v(k), { class: `w-full p-8 shadow-none border-none bg-transparent rounded-2xl min-h-[80vh]` }, { default: x(() => [d(`div`, V, [d(`div`, H, [S[30] ||= d(`div`, { class: `flex flex-col sm:flex-row sm:justify-between w-full` }, [d(`div`, null, [d(`h1`, { class: `text-2xl font-bold text-slate-800` }, `Organisation Overview`), d(`p`, { class: `text-sm text-slate-600` }, `Quick actions and charts for your workspace`)])], -1), d(`div`, U, [d(`div`, W, [g(v(A), { modelValue: I.value, "onUpdate:modelValue": S[0] ||= e => I.value = e }, { default: x(() => [g(v(M), { class: `w-full border rounded-xl py-2 px-3 text-sm` }, { default: x(() => [g(v(P), { placeholder: `Select section` })]), _: 1 }), g(v(j), null, { default: x(() => [g(v(e), null, { default: x(() => [g(v(N), { value: `overview` }, { default: x(() => [...S[6] ||= [u(`Overview`, -1)]]), _: 1 }), g(v(N), { value: `transactions` }, { default: x(() => [...S[7] ||= [u(`Transactions`, -1)]]), _: 1 }), g(v(N), { value: `activity` }, { default: x(() => [...S[8] ||= [u(`Activity`, -1)]]), _: 1 })]), _: 1 })]), _: 1 })]), _: 1 }, 8, [`modelValue`])]), g(v(t), { modelValue: I.value, "onUpdate:modelValue": S[5] ||= e => I.value = e, "default-value": `overview`, class: `mb-6 grid` }, { default: x(() => [S[28] ||= d(`hr`, { class: `h-1 bg-slate-50 mt-10 mb-1 opacity-20` }, null, -1), g(v(r), { class: `rounded-full bg-stone-100 text-blue-950 px-0.5 py-0.5 w-fit` }, { default: x(() => [g(v(i), { value: `overview`, class: `px-4 py-1 rounded-full data-[state=active]:bg-stone-50 data-[state=active]:text-blue-950` }, { default: x(() => [...S[9] ||= [u(` Start `, -1)]]), _: 1 }), g(v(i), { value: `transactions`, class: `px-4 py-1 rounded-full data-[state=active]:bg-stone-50 data-[state=active]:text-blue-950` }, { default: x(() => [...S[10] ||= [u(` Overview `, -1)]]), _: 1 }), g(v(i), { value: `activity`, class: `px-4 py-1 rounded-full data-[state=active]:bg-stone-50 data-[state=active]:text-blue-950` }, { default: x(() => [...S[11] ||= [u(` Activity `, -1)]]), _: 1 })]), _: 1 }), S[29] ||= d(`hr`, { class: `h-1 bg-slate-50 mb-10 mt-2 opacity-30` }, null, -1), g(v(n), { value: `overview`, class: `mt-0` }, { default: x(() => [d(`div`, ue, [d(`div`, de, [d(`div`, fe, [g(v(k), { class: `cursor-pointer hover:shadow-md p-5 flex items-start gap-4`, onClick: S[1] ||= e => y.goTo(`team`) }, { default: x(() => [g(v(ee), { class: `size-6 text-blue-500` }), S[12] ||= d(`div`, null, [d(`h5`, { class: `font-semibold text-slate-700` }, `Add a Team Member `), d(`p`, { class: `text-gray-600 text-sm` }, `Invite collaborators to your organisation. `)], -1), g(v(l), { class: `ml-auto text-muted-foreground` })]), _: 1 }), g(v(k), { class: `cursor-pointer hover:shadow-md p-5 flex items-start gap-4`, onClick: S[2] ||= e => y.goTo(`accounts`) }, { default: x(() => [g(v(re), { class: `size-6 text-blue-500` }), S[13] ||= d(`div`, null, [d(`h5`, { class: `font-semibold text-slate-700` }, `Connect Accounts `), d(`p`, { class: `text-gray-600 text-sm` }, `Link banking or accounting integrations. `)], -1), g(v(l), { class: `ml-auto text-muted-foreground` })]), _: 1 }), g(v(k), { class: `cursor-pointer hover:shadow-md p-5 flex items-start gap-4`, onClick: S[3] ||= e => y.goTo(`jurisdiction`) }, { default: x(() => [g(v(ie), { class: `size-6 text-violet-500` }), S[14] ||= d(`div`, null, [d(`h5`, { class: `font-semibold text-slate-700` }, `Tax Jurisdiction `), d(`p`, { class: `text-gray-600 text-sm` }, `View or change tax jurisdiction settings. `)], -1), g(v(l), { class: `ml-auto text-muted-foreground` })]), _: 1 }), g(v(k), { class: `cursor-pointer hover:shadow-md p-5 flex items-start gap-4`, onClick: S[4] ||= e => y.goTo(`settings`) }, { default: x(() => [g(v(se), { class: `size-6 text-slate-700` }), S[15] ||= d(`div`, null, [d(`h5`, { class: `font-semibold text-slate-700` }, `Reporting`), d(`p`, { class: `text-gray-600 text-sm` }, `Open quick reports and charts.`)], -1), g(v(l), { class: `ml-auto text-muted-foreground` })]), _: 1 })]), d(`aside`, pe, [g(v(k), { class: `p-6 sticky top-24` }, { default: x(() => [d(`div`, me, [S[16] ||= d(`div`, null, [d(`h4`, { class: `text-lg font-semibold text-slate-800` }, `Setup Checklist `), d(`p`, { class: `text-sm text-slate-600` }, `Complete these steps to finish setup `)], -1), d(`div`, he, [d(`div`, ge, w(et.value) + `% `, 1)])]), S[17] ||= d(`hr`, { class: `mb-2` }, null, -1), d(`div`, _e, [(b(!0), c(m, null, a(X.value, (e, t) => (b(), c(`div`, { key: t, class: `flex items-start gap-3 p-3 rounded-lg hover:bg-slate-50 cursor-pointer transition-colors`, onClick: t => tt(e) }, [d(`div`, ye, [d(`div`, be, [d(`div`, null, [d(`div`, xe, w(e.title), 1), d(`div`, Se, w(e.description), 1)])])]), d(`div`, Ce, [e.done ? (b(), c(`div`, we, [g(v(te), { class: `size-4` })])) : (b(), c(`div`, Te, w(t + 1), 1)), g(v(l), { class: `size-4 text-slate-400` })])], 8, ve))), 128))])]), _: 1 })])])])]), _: 1 }), g(v(n), { value: `transactions`, class: `mt-0` }, { default: x(() => [d(`div`, Ee, [g(v(k), { class: `p-6` }, { default: x(() => [S[19] ||= d(`div`, { class: `flex items-center justify-between mb-4` }, [d(`h3`, { class: `text-lg font-semibold text-slate-800` }, `Inflow Overview `), d(`span`, { class: `text-sm text-slate-500` }, `Last 20 transactions`)], -1), K.value.length > 0 ? (b(), c(`div`, De, [(b(!0), c(m, null, a(Je.value.reverse(), (e, t) => (b(), c(`div`, { key: t, class: s([`flex-1 rounded-t transition-all hover:opacity-80`, e.type === `CREDIT` ? `bg-sky-700 border-b-4 border-blue-700` : `bg-gradient-to-t from-stone-100 to-stone-200 border-b-4 border-blue-200`]), style: ne({ height: Ye(e.amount) + `%` }), title: `${Q(e.amount)} - ${e.description}` }, null, 14, G))), 128))])) : (b(), c(`div`, Oe, [...S[18] ||= [d(`span`, null, `No transaction data yet`, -1)]])), S[20] ||= d(`div`, { class: `flex gap-4 mt-4 text-sm` }, [d(`div`, { class: `flex items-center gap-2` }, [d(`div`, { class: `w-3 h-3 rounded bg-stone-100 border` }), d(`span`, { class: `text-slate-600` }, `Inflow`)]), d(`div`, { class: `flex items-center gap-2` }, [d(`div`, { class: `w-3 h-3 rounded bg-blue-600` }), d(`span`, { class: `text-slate-600` }, `Settlement`)])], -1)]), _: 1 }), g(v(k), { class: `p-6` }, { default: x(() => [S[22] ||= d(`h3`, { class: `text-lg font-semibold text-slate-800 mb-4` }, `Recent Transactions`, -1), q.value ? (b(), c(`div`, ke, [g(v(p), { class: `size-6 animate-spin text-slate-400` })])) : K.value.length === 0 ? (b(), c(`div`, Ae, [...S[21] ||= [d(`div`, { class: `text-lg font-medium text-slate-700` }, `No transactions yet `, -1), d(`p`, { class: `text-sm text-slate-500 mt-2` }, `Connect a bank or import CSV to see transactions`, -1)]])) : (b(), c(`div`, je, [(b(!0), c(m, null, a(K.value, e => (b(), c(`div`, { key: e.id, class: `flex items-center justify-between p-3 rounded-lg hover:bg-slate-50 transition-colors` }, [d(`div`, Me, [d(`div`, { class: s([`w-10 h-10 rounded-full flex items-center justify-center`, e.type === `CREDIT` ? `bg-blue-100 text-blue-600` : `bg-stone-100 text-stone-500`]) }, [e.type === `CREDIT` ? (b(), f(v(_), { key: 0, class: `size-5` })) : (b(), f(v(ae), { key: 1, class: `size-5` }))], 2), d(`div`, null, [d(`div`, Ne, w(e.description), 1), d(`div`, Pe, w($(e.transactionDate)), 1)])]), d(`div`, { class: s([`font-semibold`, e.type === `CREDIT` ? `text-blue-600` : `text-stone-600`]) }, w(Q(e.amount)), 3)]))), 128))]))]), _: 1 })])]), _: 1 }), g(v(n), { value: `activity`, class: `mt-0` }, { default: x(() => [d(`div`, Fe, [g(v(k), { class: `p-6` }, { default: x(() => [S[27] ||= d(`h3`, { class: `text-lg font-semibold text-slate-800 mb-4` }, `Recent Activity `, -1), Y.value ? (b(), c(`div`, Ie, [g(v(p), { class: `size-6 animate-spin text-slate-400` })])) : J.value.length === 0 ? (b(), c(`div`, Le, [g(v(le), { class: `size-12 mx-auto text-slate-300 mb-4` }), S[23] ||= d(`div`, { class: `text-lg font-medium text-slate-700` }, `No activity yet `, -1), S[24] ||= d(`p`, { class: `text-sm text-slate-500 mt-2` }, `Activity will appear here as you use the platform`, -1)])) : (b(), c(`div`, Re, [S[26] ||= d(`div`, { class: `absolute left-4 top-0 bottom-0 w-0.5 bg-slate-200` }, null, -1), d(`div`, ze, [(b(!0), c(m, null, a(J.value, e => (b(), c(`div`, { key: e.id, class: `relative pl-10` }, [S[25] ||= d(`div`, { class: `absolute left-2.5 w-3 h-3 rounded-full bg-blue-500 border-2 border-white` }, null, -1), d(`div`, Be, [d(`div`, Ve, [d(`div`, null, [d(`div`, He, w(e.description), 1), d(`div`, Ue, [d(`span`, We, [g(v(o), { class: `size-3` }), u(` ` + w(e.actorEmail), 1)])])]), d(`span`, Ge, w(Xe(e.createdAt)), 1)]), e.resourceType ? (b(), c(`div`, Ke, [d(`span`, qe, w(e.resourceType), 1)])) : h(``, !0)])]))), 128))])]))]), _: 1 })])]), _: 1 })]), _: 1 }, 8, [`modelValue`])])])])]), _: 1 })])])])) } }, [[`__scopeId`, `data-v-7befec12`]]); export { K as default };