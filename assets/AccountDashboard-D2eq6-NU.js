import "./useFormControl-Dnp3iC5X.js"; import "./ListboxItem-Bfe5qZhm.js"; import "./useNonce-CnEoXn07.js"; import "./nullish-CfjOSA4G.js"; import "./ConfigProvider-Ckl6KgMj.js"; import "./useHideOthers-L15EfXxs.js"; import { a as e, i as t, n, o as r, r as i, s as a, t as o } from "./PopoverTrigger-Bg99LXGu.js"; import "./useDirection-B1kSZwKq.js"; import { t as s } from "./PopperAnchor-Sq61S0mP.js"; import "./useId-Da-MS2me.js"; import "./useKbd-BvGB3m10.js"; import "./PopperContent-b6gGwF_E.js"; import "./useTypeahead---iVCXRs.js"; import "./DialogPortal-Dl-6IrmI.js"; import "./Teleport-BJpx-KiC.js"; import "./utils-BpsHH13c.js"; import "./DialogTitle-aue_-Krx.js"; import { a as c, o as l, s as u, t as d } from "./sheet-NRY9vGcQ.js"; import "./AvatarImage-BjURjWLm.js"; import "./utils-BFR0tnUV.js"; import "./RovingFocusGroup-BhwVgyO_.js"; import "./RovingFocusItem-DP4RL6Sr.js"; import "./VisuallyHiddenInput-B3HVdvGc.js"; import "./command-DyR1LHVy.js"; import { c as f, i as ee, n as p, r as te, s as ne, t as re } from "./ComboboxItem-BqMucZ-W.js"; import { t as ie } from "./ComboboxGroup-BeaaVWt-.js"; import "./Label-BsQm4x39.js"; import "./ScrollArea-DIt3oQvI.js"; import "./SelectViewport-BHDGvtQj.js"; import "./SwitchThumb-cSX5w37U.js"; import { a as m, i as h, n as g, t as _ } from "./tabs-B4YTpODo.js"; import { $i as v, Bi as y, Da as b, Ea as x, Ei as S, Fi as C, G as w, Gn as ae, Hi as T, Ii as E, Ir as D, Ki as O, Li as k, Lr as oe, Mi as A, Ni as j, Oi as M, Pi as N, Ri as P, Ta as F, Xn as se, Yi as ce, Zi as I, a as le, da as L, ea as R, hi as z, ji as B, jr as V, ka as H, n as ue, o as U, oa as de, r as fe, x as pe, ya as W, yr as G } from "./index-CHNvwQRL.js"; import { n as me, t as he } from "./DialogContent-BczLmPtx.js"; import { n as ge, r as _e, t as ve } from "./DialogTitle-Dz9VmaLr.js"; import { t as ye } from "./DialogFooter-DcKhuorP.js"; import { t as K } from "./Input-i1kcrjFD.js"; import { t as q } from "./button-BRhnnMH3.js"; import { n as J } from "./button-DSlecn3R.js"; import { t as be } from "./AccountAssistant-0Bj8o9vx.js"; import "./Textarea-cnn7tihP.js"; import "./badge-VpN0zBGl.js"; import { t as Y } from "./Card-DyXAPDF3.js"; import { t as xe } from "./Card-BJPZ_LNY.js"; import { t as X } from "./Label-q_qRHf8-.js"; import { a as Se, i as Ce, n as we, r as Z, t as Te } from "./SelectValue-DyPaSYfc.js"; import { t as Ee } from "./BankAccountService-CMPAALVv.js"; import { t as Q } from "./TransactionService-CFmlLUIq.js"; import { t as De } from "./badge-BQsIJJpl.js"; var Oe = y({ __name: `ComboboxAnchor`, props: { reference: { type: null, required: !1 }, asChild: { type: Boolean, required: !1 }, as: { type: null, required: !1 } }, setup(e) { let { forwardRef: t } = oe(); return (e, n) => (I(), j(F(s), { "as-child": ``, reference: e.reference }, { default: L(() => [P(F(V), O({ ref: F(t), "as-child": e.asChild, as: e.as }, e.$attrs), { default: L(() => [R(e.$slots, `default`)]), _: 3 }, 16, [`as-child`, `as`])]), _: 3 }, 8, [`reference`])) } }), ke = y({ __name: `ComboboxEmpty`, props: { asChild: { type: Boolean, required: !1 }, as: { type: null, required: !1 } }, setup(e) { let t = e, n = f(), r = B(() => n.ignoreFilter.value ? n.allItems.value.size === 0 : n.filterState.value.count === 0); return (e, n) => r.value ? (I(), j(F(V), b(O({ key: 0 }, t)), { default: L(() => [R(e.$slots, `default`, {}, () => [n[0] ||= k(`No options`)])]), _: 3 }, 16)) : N(`v-if`, !0) } }), Ae = y({ __name: `DialogTrigger`, props: { asChild: { type: Boolean }, as: {} }, setup(e) { let t = e; return (e, n) => (I(), j(F(u), b(T(t)), { default: L(() => [R(e.$slots, `default`)]), _: 3 }, 16)) } }), je = y({ __name: `ComboboxAnchor`, props: { reference: {}, asChild: { type: Boolean }, as: {}, class: {} }, setup(e) { let t = e, n = z(t, `class`), r = D(n); return (e, n) => (I(), j(F(Oe), O(F(r), { class: F(G)(`w-full`, t.class) }), { default: L(() => [R(e.$slots, `default`)]), _: 3 }, 16, [`class`])) } }), Me = y({ __name: `ComboboxEmpty`, props: { asChild: { type: Boolean }, as: {}, class: {} }, setup(e) { let t = e, n = z(t, `class`); return (e, r) => (I(), j(F(ke), O(F(n), { class: F(G)(`py-6 px-10 text-center text-sm`, t.class) }), { default: L(() => [R(e.$slots, `default`)]), _: 3 }, 16, [`class`])) } }), Ne = { class: `grid grid-cols-1 md:grid-cols-3 gap-6 mb-8` }, Pe = { class: `text-2xl font-bold text-slate-800 mt-2` }, Fe = { class: `text-lg font-semibold text-slate-800 mt-2` }, Ie = { class: `space-y-4` }, Le = { key: 0, class: `text-center py-8` }, Re = { key: 1, class: `text-center py-8 text-gray-500` }, ze = { class: `flex items-center gap-3` }, Be = { class: `w-10 h-10 rounded-full bg-gray-100 flex items-center justify-center` }, Ve = { class: `font-medium text-slate-800` }, He = { class: `text-xs text-gray-500` }, Ue = { __name: `OverviewTab`, props: { account: { type: Object, required: !0 } }, setup(e) { let t = e, n = W([]), r = W(!0); ce(async () => { await i() }); async function i() { try { r.value = !0, n.value = (await Q.getTransactions({ bankAccountReference: t.account.reference, page: 0, size: 5, sort: `transactionDate,desc` })).content || [] } catch (e) { console.error(`Failed to load recent transactions`, e) } finally { r.value = !1 } } function a(e) { return e == null ? `N/A` : new Intl.NumberFormat(`en-NG`, { style: `currency`, currency: t.account.currency || `NGN` }).format(e) } function o(e) { return e ? new Date(e).toLocaleDateString(`en-US`, { year: `numeric`, month: `short`, day: `numeric` }) : `Never` } function s(e) { return `fa-money-bill-wave` } return (t, i) => (I(), C(`div`, null, [A(`div`, Ne, [P(F(Y), { class: `p-6` }, { default: L(() => [i[0] ||= A(`h3`, { class: `text-sm font-medium text-gray-500` }, `Current Balance`, -1), A(`p`, Pe, H(a(e.account?.balance)), 1)]), _: 1 }), P(F(Y), { class: `p-6` }, { default: L(() => [i[1] ||= A(`h3`, { class: `text-sm font-medium text-gray-500` }, `Last Synced`, -1), A(`p`, Fe, H(o(e.account?.lastSyncedAt)), 1)]), _: 1 }), P(F(Y), { class: `p-6` }, { default: L(() => [...i[2] ||= [A(`h3`, { class: `text-sm font-medium text-gray-500` }, `Pending Review`, -1), A(`p`, { class: `text-2xl font-bold text-amber-600 mt-2` }, `0`, -1)]]), _: 1 })]), P(F(Y), { class: `p-6` }, { default: L(() => [i[4] ||= A(`h3`, { class: `text-lg font-semibold text-slate-800 mb-4` }, `Recent Activity`, -1), A(`div`, Ie, [r.value ? (I(), C(`div`, Le, [...i[3] ||= [A(`i`, { class: `fa fa-cog animate-spin text-gray-400` }, null, -1)]])) : n.value.length === 0 ? (I(), C(`div`, Re, ` No recent activity `)) : (I(!0), C(M, { key: 2 }, v(n.value, e => (I(), C(`div`, { key: e.id, class: `flex justify-between items-center py-3 border-b last:border-0` }, [A(`div`, ze, [A(`div`, Be, [A(`i`, { class: x([`fa text-gray-500`, s(e)]) }, null, 2)]), A(`div`, null, [A(`p`, Ve, H(e.description), 1), A(`p`, He, H(o(e.transactionDate)), 1)])]), A(`span`, { class: x([`font-semibold`, e.amount < 0 ? `text-slate-800` : e.type === `DEBIT` ? `text-red-600` : `text-green-600`]) }, H(a(e.amount)), 3)]))), 128))])]), _: 1 })])) } }, $ = `/org/categories`, We = { getCategories() { return U.get($, { organisationAware: !0, authorizeRequest: !0 }) }, createCategory(e) { return U.post($, { data: e, organisationAware: !0, authorizeRequest: !0 }) }, updateCategory(e, t) { return U.put(`${$}/${e}`, { data: t, organisationAware: !0, authorizeRequest: !0 }) }, deleteCategory(e) { return U.delete(`${$}/${e}`, { organisationAware: !0, authorizeRequest: !0 }) } }, Ge = { class: `space-y-6` }, Ke = { class: `grid grid-cols-1 md:grid-cols-2 gap-6` }, qe = { class: `p-4 border-b flex flex-col md:flex-row justify-between gap-4` }, Je = { class: `flex gap-2 flex-1` }, Ye = { class: `relative flex-1 max-w-sm` }, Xe = { class: `flex gap-2` }, Ze = { class: `overflow-x-auto` }, Qe = { class: `w-full text-sm text-left` }, $e = { class: `divide-y` }, et = { key: 0 }, tt = { key: 1 }, nt = { class: `px-6 py-4 whitespace-nowrap text-gray-600` }, rt = { class: `px-6 py-4 font-medium text-slate-800` }, it = { class: `px-6 py-4` }, at = { class: `flex items-center gap-2 p-2` }, ot = { class: `border-t mt-2 pt-2 px-2` }, st = { key: 0, class: `text-gray-400 w-4 h-4 flex items-center justify-center` }, ct = { key: 1, class: `text-green-500 w-4 h-4 flex items-center justify-center` }, lt = { class: `px-6 py-4 text-center` }, ut = { class: `p-4 border-t flex justify-between items-center text-sm text-gray-500` }, dt = { class: `flex gap-2` }, ft = { class: `grid gap-6 py-4` }, pt = { class: `grid grid-cols-2 gap-4` }, mt = { class: `space-y-2` }, ht = { class: `space-y-2` }, gt = { class: `grid grid-cols-2 gap-4` }, _t = { class: `space-y-2` }, vt = { class: `space-y-2` }, yt = { class: `grid grid-cols-2 gap-4` }, bt = { class: `space-y-2` }, xt = { class: `space-y-2` }, St = { class: `space-y-2` }, Ct = { class: `grid gap-4 py-4` }, wt = { class: `space-y-2` }, Tt = { __name: `TransactionsTab`, props: { account: { type: Object, required: !0 } }, setup(s) { let c = s, l = le().toast, u = W([]), d = W([]), f = W(!0), m = W(``), h = W(0), g = W(20), _ = W(0), y = W(!1), b = W(!1), w = W(``), T = W(!1), E = W(null), D = W(!1), O = W({ startDate: null, endDate: null, minAmount: null, maxAmount: null, type: `ALL`, status: `ALL`, categoryIds: [] }), oe = new e(`en-US`, { dateStyle: `medium` }), R = B({ get: () => O.value.startDate ? r(O.value.startDate) : void 0, set: e => { O.value.startDate = e ? e.toString() : null } }), z = B({ get: () => O.value.endDate ? r(O.value.endDate) : void 0, set: e => { O.value.endDate = e ? e.toString() : null } }), V = B(() => [...new Set(O.value.categoryIds)]); function ue(e) { E.value = e, b.value = !0 } ce(async () => { await Promise.all([U(), fe()]) }), de([h, m], () => { U() }); async function U() { try { f.value = !0; let e = { bankAccountReference: c.account.reference, page: h.value, size: g.value, sort: `transactionDate,desc`, search: m.value }; O.value.startDate && (e.startDate = O.value.startDate), O.value.endDate && (e.endDate = O.value.endDate), O.value.minAmount && (e.minAmount = O.value.minAmount), O.value.maxAmount && (e.maxAmount = O.value.maxAmount), O.value.type && O.value.type !== `ALL` && (e.type = O.value.type), O.value.status && O.value.status !== `ALL` && (e.status = O.value.status), O.value.categoryIds && O.value.categoryIds.length > 0 && (e.categoryIds = O.value.categoryIds); let t = await Q.getTransactions(e); t && (u.value = (t.content || []).map(e => ({ ...e, selectedCategoryId: e.category?.id || null, saving: !1 })), _.value = t.totalElements || 0) } catch (e) { console.error(`Failed to load transactions`, e) } finally { f.value = !1 } } async function fe() { try { d.value = await We.getCategories() || [] } catch (e) { console.error(`Failed to load categories`, e) } } async function J(e) { let t = e.category?.reference || null; if (e.selectedCategoryId) try { e.saving = !0; let t = await Q.categorizeTransaction(e.reference, e.selectedCategoryId); l({ title: `Categorized`, description: `Transaction updated successfully` }), t && t.category && (e.category = t.category, e.categoryName = t.category.name, e.selectedCategoryId = t.category.reference) } catch (n) { console.error(`Failed to categorize transaction`, n), e.selectedCategoryId = t, l({ title: `Error`, description: `Failed to categorize transaction`, variant: `destructive` }) } finally { e.saving = !1 } } async function be() { try { y.value = !0; let e = await Q.autoCategorizeAll(); l({ title: `Auto-Categorization Started`, description: e.message || `AI is processing your transactions.` }), setTimeout(U, 3e3) } catch { l({ title: `Error`, description: `Failed to start auto-categorization`, variant: `destructive` }) } finally { y.value = !1 } } async function Y() { if (w.value) try { T.value = !0; let e = await We.createCategory({ name: w.value }); d.value.push(e), E.value &&= (E.value.selectedCategoryId = e.reference, await J(E.value), null), b.value = !1, w.value = ``, l({ title: `Category Created`, description: `${e.name} added successfully` }) } catch { l({ title: `Error`, description: `Failed to create category`, variant: `destructive` }) } finally { T.value = !1 } } function Ee() { U() } function Oe() { h.value = 0, D.value = !1, U() } function ke() { O.value = { startDate: null, endDate: null, minAmount: null, maxAmount: null, type: `ALL`, status: `ALL`, categoryIds: [] }, Oe() } function Ae(e) { let t = O.value.categoryIds.indexOf(e); t !== -1 && O.value.categoryIds.splice(t, 1) } function Ne(e) { return e == null ? `N/A` : new Intl.NumberFormat(`en-NG`, { style: `currency`, currency: c.account.currency || `NGN` }).format(e) } function Pe(e) { return e ? new Date(e).toLocaleDateString(`en-US`, { year: `numeric`, month: `short`, day: `numeric` }) : `N/A` } function Fe(e) { return { APPROVED: `default`, PENDING_REVIEW: `warning`, REJECTED: `destructive` }[e] || `secondary` } return (e, r) => (I(), C(`div`, Ge, [A(`div`, Ke, [P(F(xe), { class: `p-6 flex items-center justify-between` }, { default: L(() => [r[15] ||= A(`div`, null, [A(`h3`, { class: `text-lg font-semibold text-slate-800` }, `AI Auto-Categorization`), A(`p`, { class: `text-gray-500 text-sm` }, `Automatically assign categories to transactions using AI.`)], -1), P(F(q), { onClick: be, disabled: y.value }, { default: L(() => [A(`i`, { class: x([`fa mr-2`, y.value ? `fa-cog animate-spin` : `fa-magic`]) }, null, 2), k(` ` + H(y.value ? `Processing...` : `Auto-Categorize All`), 1)]), _: 1 }, 8, [`disabled`])]), _: 1 })]), P(F(xe), { class: `p-0 overflow-hidden` }, { default: L(() => [A(`div`, qe, [A(`div`, Je, [A(`div`, Ye, [r[16] ||= A(`i`, { class: `fa fa-search absolute left-3 top-1/2 -translate-y-1/2 text-gray-400` }, null, -1), P(F(K), { modelValue: m.value, "onUpdate:modelValue": r[0] ||= e => m.value = e, placeholder: `Search transactions...`, class: `pl-9 rounded-full` }, null, 8, [`modelValue`])]), P(F(q), { variant: `outline`, class: `rounded-full`, onClick: r[1] ||= e => D.value = !0 }, { default: L(() => [...r[17] ||= [A(`i`, { class: `fa fa-filter mr-2` }, null, -1), k(` Filter `, -1)]]), _: 1 })]), A(`div`, Xe, [P(F(q), { variant: `outline`, class: `rounded-full`, onClick: Ee }, { default: L(() => [A(`i`, { class: x([`fa fa-sync-alt`, { "animate-spin": f.value }]) }, null, 2)]), _: 1 })])]), A(`div`, Ze, [A(`table`, Qe, [r[23] ||= A(`thead`, { class: `bg-gray-50 text-gray-600 font-medium border-b` }, [A(`tr`, null, [A(`th`, { class: `px-6 py-3` }, `Date`), A(`th`, { class: `px-6 py-3` }, `Description`), A(`th`, { class: `px-6 py-3` }, `Category`), A(`th`, { class: `px-6 py-3 text-right` }, `Amount`), A(`th`, { class: `px-6 py-3 text-center` }, `Status`)])], -1), A(`tbody`, $e, [f.value && u.value.length === 0 ? (I(), C(`tr`, et, [...r[18] ||= [A(`td`, { colspan: `5`, class: `px-6 py-12 text-center text-gray-500` }, [A(`i`, { class: `fa fa-cog animate-spin mr-2` }), k(` Loading transactions... `)], -1)]])) : u.value.length === 0 ? (I(), C(`tr`, tt, [...r[19] ||= [A(`td`, { colspan: `5`, class: `px-6 py-12 text-center text-gray-500` }, ` No transactions found `, -1)]])) : N(``, !0), (I(!0), C(M, null, v(u.value, e => (I(), C(`tr`, { key: e.id, class: `hover:bg-gray-50 transition-colors` }, [A(`td`, nt, H(Pe(e.transactionDate)), 1), A(`td`, rt, H(e.description), 1), A(`td`, it, [A(`div`, at, [P(F(te), { "model-value": e.selectedCategoryId, "onUpdate:modelValue": t => { e.selectedCategoryId = t, J(e) }, class: `relative w-full max-w-xs` }, { default: L(() => [P(F(ee), { class: `w-full` }, { default: L(() => [P(F(p), { class: `rounded-full w-full shadow-none border-stone-100 bg-stone-50 focus:bg-white mt-1 text-xs`, placeholder: e.categoryName || `Select category...`, "display-value": e => d.value.find(t => t.reference === e)?.name || `` }, null, 8, [`placeholder`, `display-value`])]), _: 2 }, 1024), P(F(ne), { class: `absolute bg-white z-50 border rounded-sm mt-1 px-2 py-3 max-h-[200px] overflow-y-auto w-full min-w-[200px]` }, { default: L(() => [(I(!0), C(M, null, v(d.value, e => (I(), j(F(re), { key: e.reference, value: e.reference, class: `px-4 py-2 rounded-full cursor-pointer hover:bg-gray-100 text-xs` }, { default: L(() => [k(H(e.name), 1)]), _: 2 }, 1032, [`value`]))), 128)), A(`div`, ot, [P(F(q), { variant: `ghost`, size: `sm`, class: `w-full justify-start text-blue-600 rounded-full`, onClick: S(t => ue(e), [`stop`]) }, { default: L(() => [...r[20] ||= [A(`i`, { class: `fa fa-plus mr-2` }, null, -1), k(` Create New `, -1)]]), _: 1 }, 8, [`onClick`])])]), _: 2 }, 1024)]), _: 2 }, 1032, [`model-value`, `onUpdate:modelValue`]), e.saving ? (I(), C(`div`, st, [...r[21] ||= [A(`i`, { class: `fa fa-cog animate-spin text-xs` }, null, -1)]])) : e.selectedCategoryId && e.selectedCategoryId === e.category?.id ? (I(), C(`div`, ct, [...r[22] ||= [A(`i`, { class: `fa fa-check text-xs` }, null, -1)]])) : N(``, !0)])]), A(`td`, { class: x([`px-6 py-4 text-right font-semibold`, e.amount < 0 ? `text-slate-800` : e.type == `DEBIT` ? `text-red-800` : `text-green-700`]) }, H(Ne(e.amount)), 3), A(`td`, lt, [P(F(De), { variant: Fe(e.status), class: `rounded-full text-xs` }, { default: L(() => [k(H(e.status), 1)]), _: 2 }, 1032, [`variant`])])]))), 128))])])]), A(`div`, ut, [A(`span`, null, `Showing ` + H(h.value * g.value + 1) + ` to ` + H(Math.min((h.value + 1) * g.value, _.value)) + ` of ` + H(_.value) + ` results`, 1), A(`div`, dt, [P(F(q), { variant: `outline`, size: `sm`, disabled: h.value === 0, onClick: r[2] ||= e => h.value-- }, { default: L(() => [...r[24] ||= [k(` Previous `, -1)]]), _: 1 }, 8, [`disabled`]), P(F(q), { variant: `outline`, size: `sm`, disabled: (h.value + 1) * g.value >= _.value, onClick: r[3] ||= e => h.value++ }, { default: L(() => [...r[25] ||= [k(` Next `, -1)]]), _: 1 }, 8, [`disabled`])])])]), _: 1 }), P(F(me), { open: D.value, "onUpdate:open": r[11] ||= e => D.value = e }, { default: L(() => [P(F(he), { class: `sm:max-w-[500px]` }, { default: L(() => [P(F(ge), null, { default: L(() => [P(F(ve), null, { default: L(() => [...r[26] ||= [k(`Filter Transactions`, -1)]]), _: 1 }), P(F(_e), null, { default: L(() => [...r[27] ||= [k(`Refine your transaction list.`, -1)]]), _: 1 })]), _: 1 }), A(`div`, ft, [A(`div`, pt, [A(`div`, mt, [P(F(X), null, { default: L(() => [...r[28] ||= [k(`Start Date`, -1)]]), _: 1 }), P(F(i), null, { default: L(() => [P(F(o), { "as-child": `` }, { default: L(() => [P(F(q), { variant: `outline`, class: x(F(G)(`w-full justify-start text-left font-normal rounded-full`, !R.value && `text-muted-foreground`)) }, { default: L(() => [P(F(se), { class: `mr-2 h-4 w-4` }), k(` ` + H(R.value ? F(oe).format(R.value.toDate(F(a)())) : `Pick a date`), 1)]), _: 1 }, 8, [`class`])]), _: 1 }), P(F(n), { class: `w-auto p-0` }, { default: L(() => [P(F(t), { modelValue: R.value, "onUpdate:modelValue": r[4] ||= e => R.value = e, "initial-focus": `` }, null, 8, [`modelValue`])]), _: 1 })]), _: 1 })]), A(`div`, ht, [P(F(X), null, { default: L(() => [...r[29] ||= [k(`End Date`, -1)]]), _: 1 }), P(F(i), null, { default: L(() => [P(F(o), { "as-child": `` }, { default: L(() => [P(F(q), { variant: `outline`, class: x(F(G)(`w-full justify-start text-left font-normal rounded-full`, !z.value && `text-muted-foreground`)) }, { default: L(() => [P(F(se), { class: `mr-2 h-4 w-4` }), k(` ` + H(z.value ? F(oe).format(z.value.toDate(F(a)())) : `Pick a date`), 1)]), _: 1 }, 8, [`class`])]), _: 1 }), P(F(n), { class: `w-auto p-0` }, { default: L(() => [P(F(t), { modelValue: z.value, "onUpdate:modelValue": r[5] ||= e => z.value = e, "initial-focus": `` }, null, 8, [`modelValue`])]), _: 1 })]), _: 1 })])]), A(`div`, gt, [A(`div`, _t, [P(F(X), null, { default: L(() => [...r[30] ||= [k(`Min Amount`, -1)]]), _: 1 }), P(F(K), { type: `number`, modelValue: O.value.minAmount, "onUpdate:modelValue": r[6] ||= e => O.value.minAmount = e, placeholder: `0.00`, class: `rounded-full` }, null, 8, [`modelValue`])]), A(`div`, vt, [P(F(X), null, { default: L(() => [...r[31] ||= [k(`Max Amount`, -1)]]), _: 1 }), P(F(K), { type: `number`, modelValue: O.value.maxAmount, "onUpdate:modelValue": r[7] ||= e => O.value.maxAmount = e, placeholder: `∞`, class: `rounded-full` }, null, 8, [`modelValue`])])]), A(`div`, yt, [A(`div`, bt, [P(F(X), null, { default: L(() => [...r[32] ||= [k(`Type`, -1)]]), _: 1 }), P(F(Se), { modelValue: O.value.type, "onUpdate:modelValue": r[8] ||= e => O.value.type = e }, { default: L(() => [P(F(we), { class: `rounded-full` }, { default: L(() => [P(F(Te), { placeholder: `All` })]), _: 1 }), P(F(Ce), null, { default: L(() => [P(F(Z), { value: `ALL` }, { default: L(() => [...r[33] ||= [k(`All`, -1)]]), _: 1 }), P(F(Z), { value: `DEBIT` }, { default: L(() => [...r[34] ||= [k(`Debit`, -1)]]), _: 1 }), P(F(Z), { value: `CREDIT` }, { default: L(() => [...r[35] ||= [k(`Credit`, -1)]]), _: 1 })]), _: 1 })]), _: 1 }, 8, [`modelValue`])]), A(`div`, xt, [P(F(X), null, { default: L(() => [...r[36] ||= [k(`Status`, -1)]]), _: 1 }), P(F(Se), { modelValue: O.value.status, "onUpdate:modelValue": r[9] ||= e => O.value.status = e }, { default: L(() => [P(F(we), { class: `rounded-full` }, { default: L(() => [P(F(Te), { placeholder: `All` })]), _: 1 }), P(F(Ce), null, { default: L(() => [P(F(Z), { value: `ALL` }, { default: L(() => [...r[37] ||= [k(`All`, -1)]]), _: 1 }), P(F(Z), { value: `APPROVED` }, { default: L(() => [...r[38] ||= [k(`Approved`, -1)]]), _: 1 }), P(F(Z), { value: `PENDING_REVIEW` }, { default: L(() => [...r[39] ||= [k(`Pending Review`, -1)]]), _: 1 }), P(F(Z), { value: `REJECTED` }, { default: L(() => [...r[40] ||= [k(`Rejected`, -1)]]), _: 1 })]), _: 1 })]), _: 1 }, 8, [`modelValue`])])]), A(`div`, St, [P(F(X), null, { default: L(() => [...r[41] ||= [k(`Categories`, -1)]]), _: 1 }), P(F(te), { modelValue: O.value.categoryIds, "onUpdate:modelValue": r[10] ||= e => O.value.categoryIds = e, multiple: `` }, { default: L(() => [P(F(je), { class: `flex h-auto min-h-10 w-full flex-wrap items-center justify-start gap-1 rounded-full border bg-transparent px-3 py-2 text-sm shadow-sm ring-offset-background placeholder:text-muted-foreground focus-within:ring-0 focus-within:ring-ring focus-within:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50` }, { default: L(() => [(I(!0), C(M, null, v(V.value, e => (I(), j(F(De), { key: e, variant: `outline`, class: `rounded-full px-2 py-0.5 text-xs flex items-center bg-white gap-1` }, { default: L(() => [k(H(d.value.find(t => t.reference === e)?.name) + ` `, 1), P(F(pe), { class: `h-3 w-3 cursor-pointer hover:text-red-500`, onClick: S(t => Ae(e), [`stop`]) }, null, 8, [`onClick`])]), _: 2 }, 1024))), 128)), P(F(p), { class: `flex-1 h-6 min-w-[100px] border-none shadow-none focus-visible:ring-0 p-0 text-sm bg-transparent placeholder:text-muted-foreground`, placeholder: `Select categories...` })]), _: 1 }), P(F(ne), { class: `z-50 min-w-[200px] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md` }, { default: L(() => [P(F(Me), null, { default: L(() => [...r[42] ||= [k(`No category found.`, -1)]]), _: 1 }), P(F(ie), null, { default: L(() => [(I(!0), C(M, null, v(d.value, e => (I(), j(F(re), { key: e.reference, value: e.reference, class: `cursor-pointer select-none rounded-sm px-2 py-1.5 text-sm outline-none data-[highlighted]:bg-accent data-[highlighted]:text-accent-foreground` }, { default: L(() => [k(H(e.name) + ` `, 1), P(F(ae), { class: x(F(G)(`mr-2 h-4 w-4`, O.value.categoryIds.includes(e.reference) ? `opacity-100` : `opacity-0`)) }, null, 8, [`class`])]), _: 2 }, 1032, [`value`]))), 128))]), _: 1 })]), _: 1 })]), _: 1 }, 8, [`modelValue`])])]), P(F(ye), { class: `gap-2` }, { default: L(() => [P(F(q), { variant: `ghost`, onClick: ke, class: `rounded-full` }, { default: L(() => [...r[43] ||= [k(`Clear Filters`, -1)]]), _: 1 }), P(F(q), { onClick: Oe, class: `rounded-full` }, { default: L(() => [...r[44] ||= [k(`Apply`, -1)]]), _: 1 })]), _: 1 })]), _: 1 })]), _: 1 }, 8, [`open`]), P(F(me), { open: b.value, "onUpdate:open": r[14] ||= e => b.value = e }, { default: L(() => [P(F(he), { class: `sm:max-w-[425px]` }, { default: L(() => [P(F(ge), null, { default: L(() => [P(F(ve), null, { default: L(() => [...r[45] ||= [k(`Create New Category`, -1)]]), _: 1 }), P(F(_e), null, { default: L(() => [...r[46] ||= [k(`Add a new category for your transactions.`, -1)]]), _: 1 })]), _: 1 }), A(`div`, Ct, [A(`div`, wt, [P(F(X), null, { default: L(() => [...r[47] ||= [k(`Name`, -1)]]), _: 1 }), P(F(K), { modelValue: w.value, "onUpdate:modelValue": r[12] ||= e => w.value = e, placeholder: `e.g., Office Supplies`, class: `rounded-full` }, null, 8, [`modelValue`])])]), P(F(ye), null, { default: L(() => [P(F(q), { variant: `outline`, onClick: r[13] ||= e => b.value = !1, class: `rounded-full` }, { default: L(() => [...r[48] ||= [k(`Cancel`, -1)]]), _: 1 }), P(F(q), { onClick: Y, disabled: T.value, class: `rounded-full` }, { default: L(() => [k(H(T.value ? `Creating...` : `Create`), 1)]), _: 1 }, 8, [`disabled`])]), _: 1 })]), _: 1 })]), _: 1 }, 8, [`open`])])) } }, Et = { class: `p-6` }, Dt = { class: `mb-8 text-center` }, Ot = { class: `text-gray-500 text-sm` }, kt = { key: 0, class: `grid grid-cols-1 md:grid-cols-2 gap-4` }, At = { key: 1, class: `mt-6 text-center` }, jt = { key: 2, class: `space-y-6` }, Mt = { class: `flex justify-between` }, Nt = { key: 3, class: `text-center py-12` }, Pt = { key: 4, class: `space-y-6 text-center` }, Ft = { __name: `UploadWizard`, props: { account: { type: Object, required: !0 } }, emits: [`upload-complete`, `close`], setup(e, { emit: t }) { let n = e, r = t, i = le().toast, a = W(1), o = W(null), s = W(null); function c(e) { o.value = e, e === `file` ? a.value = 2 : i({ title: `Coming Soon`, description: `Bank API integration will be available shortly.`, variant: `secondary` }) } function l() { s.value.click() } function u(e) { let t = e.target.files[0]; t && f(t) } function d(e) { let t = e.dataTransfer.files[0]; t && f(t) } async function f(e) { a.value = 3; try { await Q.uploadTransactionFile(n.account.reference, e), a.value = 4, i({ title: `Upload Complete`, description: `File uploaded successfully.`, variant: `success` }) } catch (e) { a.value = 2, i({ title: `Upload Failed`, description: e.message || `Failed to upload file.`, variant: `destructive` }) } } function ee() { r(`upload-complete`), setTimeout(() => { a.value = 1, o.value = null }, 500) } return (t, n) => (I(), C(`div`, Et, [A(`div`, Dt, [n[5] ||= A(`h2`, { class: `text-xl font-semibold text-slate-800` }, `Sync Transactions`, -1), A(`p`, Ot, `Choose how you want to import transactions into ` + H(e.account?.accountName || `this account`), 1)]), a.value === 1 ? (I(), C(`div`, kt, [P(F(Y), { class: x([`p-6 cursor-pointer hover:border-blue-500 transition-all border-2`, o.value === `file` ? `border-blue-500 bg-blue-50` : `border-transparent hover:bg-slate-50`]), onClick: n[0] ||= e => c(`file`) }, { default: L(() => [...n[6] ||= [A(`div`, { class: `flex flex-col items-center text-center gap-3` }, [A(`div`, { class: `h-12 w-12 rounded-full bg-blue-100 flex items-center justify-center text-blue-600` }, [A(`i`, { class: `fa fa-file-upload text-xl` })]), A(`div`, null, [A(`h3`, { class: `font-medium text-slate-800` }, `Upload File`), A(`p`, { class: `text-xs text-gray-500 mt-1` }, `PDF, CSV, or Excel bank statements`)])], -1)]]), _: 1 }, 8, [`class`]), P(F(Y), { class: x([`p-6 cursor-pointer hover:border-yellow-500 transition-all border-2`, o.value === `api` ? `border-yellow-500 bg-yellow-50` : `border-transparent hover:bg-slate-50`]), onClick: n[1] ||= e => c(`api`) }, { default: L(() => [...n[7] ||= [A(`div`, { class: `flex flex-col items-center text-center gap-3` }, [A(`div`, { class: `h-12 w-12 rounded-full bg-yellow-100 flex items-center justify-center text-yellow-600` }, [A(`i`, { class: `fa fa-university text-xl` })]), A(`div`, null, [A(`h3`, { class: `font-medium text-slate-800` }, `Connect Bank API`), A(`p`, { class: `text-xs text-gray-500 mt-1` }, `Mono, Flutterwave, Paystack`)])], -1)]]), _: 1 }, 8, [`class`])])) : N(``, !0), a.value === 1 ? (I(), C(`div`, At, [P(F(J), { variant: `ghost`, onClick: n[2] ||= e => t.$emit(`close`) }, { default: L(() => [...n[8] ||= [k(`Cancel`, -1)]]), _: 1 })])) : N(``, !0), a.value === 2 && o.value === `file` ? (I(), C(`div`, jt, [A(`div`, { class: `border-2 shadow-md border-gray-300 rounded-lg p-12 text-center hover:bg-gray-50 transition-colors cursor-pointer`, onDragover: n[3] ||= S(() => { }, [`prevent`]), onDrop: S(d, [`prevent`]), onClick: l }, [A(`input`, { type: `file`, ref_key: `fileInput`, ref: s, class: `hidden`, onChange: u, accept: `.csv,.xlsx,.xls,.pdf` }, null, 544), n[9] ||= A(`i`, { class: `fa fa-cloud-upload-alt text-5xl text-blue-100 mb-4` }, null, -1), n[10] ||= A(`h3`, { class: `text-lg font-medium text-slate-700` }, `Click or drag file to upload`, -1), n[11] ||= A(`p`, { class: `text-sm text-gray-500 mt-2` }, `Supported formats: CSV, Excel, PDF`, -1)], 32), A(`div`, Mt, [P(F(J), { variant: `ghost`, onClick: n[4] ||= e => a.value = 1 }, { default: L(() => [...n[12] ||= [k(`Back`, -1)]]), _: 1 })])])) : N(``, !0), a.value === 3 ? (I(), C(`div`, Nt, [...n[13] ||= [E(`<div class="relative w-24 h-24 mx-auto mb-6"><div class="absolute inset-0 border-4 border-gray-100 rounded-full"></div><div class="absolute inset-0 border-4 border-blue-500 rounded-full border-t-transparent animate-spin"></div><i class="fa fa-magic absolute inset-0 flex items-center justify-center text-blue-500 text-2xl"></i></div><h3 class="text-lg font-medium text-slate-800">Processing...</h3><p class="text-gray-500 mt-2">Uploading and analyzing your transaction file.</p>`, 3)]])) : N(``, !0), a.value === 4 ? (I(), C(`div`, Pt, [n[15] ||= A(`div`, { class: `bg-green-50 text-green-700 p-6 rounded-full w-20 h-20 mx-auto flex items-center justify-center` }, [A(`i`, { class: `fa fa-check text-3xl` })], -1), n[16] ||= A(`div`, null, [A(`h3`, { class: `text-xl font-semibold text-slate-800` }, `Upload Successful!`), A(`p`, { class: `text-gray-500 mt-2` }, `Your transactions are being processed in the background.`)], -1), P(F(J), { onClick: ee, class: `w-full md:w-auto min-w-[200px]` }, { default: L(() => [...n[14] ||= [k(`View Transactions`, -1)]]), _: 1 })])) : N(``, !0)])) } }, It = { __name: `ReviewQueue`, props: { account: { type: Object, required: !0 } }, setup(e) { return (e, t) => (I(), j(F(Y), { class: `p-0 overflow-hidden` }, { default: L(() => [...t[0] ||= [A(`div`, { class: `p-6 border-b` }, [A(`h2`, { class: `text-lg font-semibold text-slate-800` }, `Review Queue`), A(`p`, { class: `text-gray-500 text-sm` }, `Transactions flagged for manual review (low confidence).`)], -1), A(`div`, { class: `text-center py-12 text-gray-500` }, [A(`i`, { class: `fa fa-check-double text-4xl text-gray-200 mb-4` }), A(`p`, null, `No items in review queue`), A(`p`, { class: `text-xs mt-1` }, `Great job! All transactions are processed.`)], -1)]]), _: 1 })) } }, Lt = { class: `relative w-full min-h-screen overflow-y-scroll rounded-sm py-5`, style: { "scrollbar-width": `none` } }, Rt = { class: `container mx-auto p-8 relative` }, zt = { class: `flex flex-col md:flex-row justify-between items-start md:items-center gap-4 mb-8` }, Bt = { class: `flex flex-col` }, Vt = { class: `text-2xl font-bold text-slate-800 flex items-center gap-2` }, Ht = { class: `text-gray-600 text-sm` }, Ut = { class: `flex gap-3 w-full md:w-auto` }, Wt = { class: `min-h-[400px]` }, Gt = { key: 0, class: `flex justify-center items-center h-64` }, Kt = { class: `mb-6 z-0 relative` }, qt = { __name: `AccountDashboard`, setup(e) { let t = ue(), n = fe(), r = le().toast, i = t.params.reference, a = W(null), o = W(!0), s = W(!1), u = W(`overview`), f = W(0), ee = [{ id: `overview`, name: `Overview`, icon: `fa-chart-pie` }, { id: `transactions`, name: `Transactions`, icon: `fa-list` }, { id: `review`, name: `Review Queue`, icon: `fa-tasks` }, { id: `settings`, name: `Settings`, icon: `fa-cog` }]; ce(async () => { await p() }); async function p() { try { if (o.value = !0, a.value = ((await Ee.getBankAccounts()).data || []).find(e => e.reference === i), !a.value) throw Error(`Account not found`) } catch { r({ id: `load-error`, title: `Error`, description: `Failed to load account details`, variant: `destructive` }), n.push(`/accounts`) } finally { o.value = !1 } } function te() { s.value = !1, u.value = `transactions`, p(), f.value++ } function ne(e) { return e ? `****${e.slice(-4)}` : `N/A` } return (e, t) => (I(), C(`div`, Lt, [A(`div`, Rt, [A(`div`, zt, [A(`div`, Bt, [A(`h1`, Vt, H(a.value?.accountName || `Loading...`), 1), A(`p`, Ht, H(a.value?.bankName) + ` • ` + H(ne(a.value?.accountNumber)), 1)]), A(`div`, Ut, [P(F(me), { open: s.value, "onUpdate:open": t[1] ||= e => s.value = e }, { default: L(() => [P(F(Ae), { "as-child": `` }, { default: L(() => [P(F(J), { variant: `outline`, class: `rounded-full flex-1 md:flex-none`, disabled: !a.value }, { default: L(() => [...t[3] ||= [A(`i`, { class: `fa fa-sync mr-2` }, null, -1), k(` Sync `, -1)]]), _: 1 }, 8, [`disabled`])]), _: 1 }), P(F(he), { class: `max-w-3xl p-0` }, { default: L(() => [P(Ft, { account: a.value, onUploadComplete: te, onClose: t[0] ||= e => s.value = !1 }, null, 8, [`account`])]), _: 1 })]), _: 1 }, 8, [`open`]), P(F(l), null, { default: L(() => [P(F(d), { "as-child": `` }, { default: L(() => [P(F(J), { class: `rounded-full flex-1 md:flex-none shadow-md hover:shadow-blue-400` }, { default: L(() => [P(F(w), { class: `mr-2 h-4 w-4 text-blue-200` }), t[4] ||= k(` Flow `, -1)]), _: 1 })]), _: 1 }), P(F(c), { class: `w-[400px] sm:w-[540px] p-0 border-l shadow-2xl` }, { default: L(() => [P(be, { account: a.value }, null, 8, [`account`])]), _: 1 })]), _: 1 })])]), A(`div`, Wt, [o.value ? (I(), C(`div`, Gt, [...t[5] ||= [A(`i`, { class: `fa fa-cog animate-spin text-3xl text-gray-400` }, null, -1)]])) : (I(), j(F(m), { key: 1, modelValue: u.value, "onUpdate:modelValue": t[2] ||= e => u.value = e, class: `w-full` }, { default: L(() => [A(`div`, Kt, [t[6] ||= A(`hr`, { class: `h-1 bg-slate-50 mb-1 mt-10 opacity-20` }, null, -1), P(F(g), { class: `rounded-full bg-stone-100 text-blue-950 px-0.5 py-0.5 w-fit` }, { default: L(() => [(I(), C(M, null, v(ee, e => P(F(_), { key: e.id, value: e.id, class: `px-4 py-1 rounded-full data-[state=active]:bg-stone-50 data-[state=active]:text-blue-950 transition-all` }, { default: L(() => [A(`i`, { class: x([`fa mr-2`, e.icon]) }, null, 2), k(` ` + H(e.name), 1)]), _: 2 }, 1032, [`value`])), 64))]), _: 1 }), t[7] ||= A(`hr`, { class: `h-1 bg-slate-50 mt-2 mb-10 opacity-30` }, null, -1)]), P(F(h), { value: `overview`, class: `` }, { default: L(() => [P(Ue, { account: a.value }, null, 8, [`account`])]), _: 1 }), P(F(h), { value: `transactions`, class: `` }, { default: L(() => [(I(), j(Tt, { account: a.value, key: f.value }, null, 8, [`account`]))]), _: 1 }), P(F(h), { value: `review`, class: `` }, { default: L(() => [P(It, { account: a.value }, null, 8, [`account`])]), _: 1 }), P(F(h), { value: `settings`, class: `` }, { default: L(() => [...t[8] ||= [A(`div`, { class: `p-8 text-center text-gray-500 bg-slate-50 rounded-lg border shadow-md` }, [A(`i`, { class: `fa fa-cog text-4xl mb-4 text-gray-300` }), A(`p`, null, `Settings coming soon`)], -1)]]), _: 1 })]), _: 1 }, 8, [`modelValue`]))])])])) } }; export { qt as default };