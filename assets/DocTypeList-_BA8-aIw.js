import"./useFormControl-BoSoz5bk.js";import"./useNonce-Cry77bU8.js";import"./nullish-CfjOSA4G.js";import"./ConfigProvider-BeNpEDZu.js";import"./useHideOthers-8j3pZZC2.js";import"./useDirection-CkCaHLjJ.js";import"./PopperAnchor-DePKnfPt.js";import"./useId-C9uHTJK1.js";import"./PopperContent-CkzV4Efh.js";import"./useTypeahead-J2lSWUJi.js";import"./Teleport-CO7T90ZX.js";import"./utils-1j6W-LC4.js";import"./SelectViewport-C4doWK-Y.js";import{Aa as e,Bi as t,Ft as n,H as r,Hi as i,Ii as a,It as ee,Kn as te,Li as o,N as ne,Na as s,Ni as c,Nt as re,Pa as l,Ri as u,Ui as d,dr as f,ea as p,er as m,et as h,ft as ie,ga as g,ia as _,in as ae,lr as oe,lt as se,mn as v,na as y,nt as b,o as x,on as S,sa as C,sn as w,sr as T,w as E,wa as D,wt as O,zi as k}from"./index-BW6FH5S4.js";import{t as A}from"./WorkspaceStore-DkbvTQrR.js";import{n as j}from"./button-Cg1Yo4L-.js";import{t as M}from"./Input-uGdyVDA7.js";import{a as N,i as P,n as F,r as I,t as L}from"./SelectValue-CL8oqzYK.js";var R={class:`h-full flex flex-col bg-gray-50`},z={class:`flex-none px-6 py-4 bg-white border-b border-gray-200 flex items-center justify-between`},B={class:`flex items-center space-x-3`},V={class:`w-10 h-10 rounded-xl bg-slate-600 flex items-center justify-center`},H={class:`text-sm text-gray-500`},U={class:`flex-none px-6 py-3 bg-white border-b border-gray-100 flex items-center gap-4`},ce={class:`relative flex-1 max-w-md`},W={class:`flex-1 overflow-auto`},G={key:0,class:`flex justify-center items-center h-64`},le={key:1,class:`flex flex-col items-center justify-center h-64 text-gray-500`},ue={key:2,class:`divide-y divide-gray-100`},de=[`onClick`],fe={class:`flex-1 min-w-0`},pe={class:`flex items-center gap-2`},me={class:`font-medium text-gray-900`},he={key:0,class:`px-1.5 py-0.5 text-xs bg-gray-100 text-gray-600 rounded`},ge={key:1,class:`px-1.5 py-0.5 text-xs bg-blue-100 text-blue-600 rounded`},_e={key:0,class:`text-sm text-gray-500 truncate`},ve={class:`flex-shrink-0 flex items-center gap-2`},ye={class:`px-2 py-1 text-xs font-medium bg-gray-100 text-gray-700 rounded-full flex items-center gap-1`},be={class:`flex-shrink-0 text-right w-20`},xe={class:`text-sm text-gray-500`},Se={__name:`DocTypeList`,props:{doctype:{type:String,default:`DocType`}},setup(Se){let K=A(),q=D(!0),J=D([]),Y=D(``),X=D(``),Ce={FileCode:v,FileText:w,Users:E,Package:O,Receipt:se,Box:T,Store:r,Truck:ne,BookOpen:oe,Bell:f,Mail:re,Lock:n,File:S,Folder:ae,Calendar:m,Settings:h},we=a(()=>{let e=new Set(J.value.map(e=>e.module).filter(Boolean));return Array.from(e).sort()}),Z=a(()=>{let e=J.value;if(Y.value){let t=Y.value.toLowerCase();e=e.filter(e=>e.name.toLowerCase().includes(t)||e.description?.toLowerCase().includes(t))}return X.value&&X.value!==`__all__`&&(e=e.filter(e=>e.module===X.value)),e});async function Q(){q.value=!0;try{J.value=(await x.get(`/org/doctypes`,{authorizeRequest:!0,organisationAware:!0}))?.data||[]}catch(e){console.error(`Failed to load DocTypes:`,e)}finally{q.value=!1}}function Te(e){console.log(`Opening DocType:`,e.name),K.openTab({id:`doctype-form-DocType-${e.name}`,title:e.name,icon:e.icon||`FileCode`,type:`doctype-form`,doctype:`DocType`,docName:e.name,isNew:!1,closable:!0})}function $(){console.log(`Creating new DocType`),K.openTab({id:`doctype-form-DocType-new`,title:`New DocType`,icon:`FileCode`,type:`doctype-form`,doctype:`DocType`,isNew:!0,closable:!0})}return p(()=>{Q()}),(r,a)=>(y(),t(`div`,R,[o(`header`,z,[o(`div`,B,[o(`div`,V,[d(e(v),{class:`w-5 h-5 text-white`})]),o(`div`,null,[a[2]||=o(`h1`,{class:`text-xl font-bold text-gray-900`},`DocType`,-1),o(`p`,H,l(J.value.length)+` DocTypes`,1)])]),d(e(j),{onClick:$,class:`rounded-full`},{default:g(()=>[d(e(ie),{class:`w-4 h-4 mr-2`}),a[3]||=i(` New `,-1)]),_:1})]),o(`div`,U,[o(`div`,ce,[d(e(b),{class:`absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400`}),d(e(M),{modelValue:Y.value,"onUpdate:modelValue":a[0]||=e=>Y.value=e,placeholder:`Search DocTypes...`,class:`pl-10`},null,8,[`modelValue`])]),d(e(N),{modelValue:X.value,"onUpdate:modelValue":a[1]||=e=>X.value=e},{default:g(()=>[d(e(F),{class:`w-40 bg-white`},{default:g(()=>[d(e(L),{placeholder:`All Modules`})]),_:1}),d(e(P),null,{default:g(()=>[d(e(I),{value:`__all__`},{default:g(()=>[...a[4]||=[i(`All Modules`,-1)]]),_:1}),(y(!0),t(c,null,_(we.value,t=>(y(),u(e(I),{key:t,value:t},{default:g(()=>[i(l(t),1)]),_:2},1032,[`value`]))),128))]),_:1})]),_:1},8,[`modelValue`])]),o(`div`,W,[q.value?(y(),t(`div`,G,[d(e(ee),{class:`w-8 h-8 animate-spin text-gray-400`})])):Z.value.length===0?(y(),t(`div`,le,[d(e(v),{class:`w-12 h-12 mb-3 text-gray-300`}),a[6]||=o(`p`,null,`No DocTypes found`,-1),d(e(j),{onClick:$,variant:`link`,class:`mt-2`},{default:g(()=>[...a[5]||=[i(` Create your first DocType `,-1)]]),_:1})])):(y(),t(`div`,ue,[(y(!0),t(c,null,_(Z.value,r=>(y(),t(`div`,{key:r.name,class:`px-6 py-4 bg-white hover:bg-gray-50 cursor-pointer transition-colors flex items-center gap-4`,onClick:e=>Te(r)},[o(`div`,{class:`w-10 h-10 rounded-lg flex items-center justify-center flex-shrink-0`,style:s({backgroundColor:r.color||`#6366F1`})},[(y(),u(C(Ce[r.icon]||e(w)),{class:`w-5 h-5 text-white`}))],4),o(`div`,fe,[o(`div`,pe,[o(`span`,me,l(r.name),1),r.is_child?(y(),t(`span`,he,` Child `)):k(``,!0),r.is_submittable?(y(),t(`span`,ge,` Submittable `)):k(``,!0)]),r.description?(y(),t(`p`,_e,l(r.description),1)):k(``,!0)]),o(`div`,ve,[o(`span`,ye,[r.module===`System`?(y(),u(e(n),{key:0,class:`w-3 h-3`})):k(``,!0),i(` `+l(r.module),1)])]),o(`div`,be,[o(`span`,xe,l(r.fields?.length||0)+` fields`,1)]),d(e(te),{class:`w-5 h-5 text-gray-300 flex-shrink-0`})],8,de))),128))]))])]))}};export{Se as default};