import{Ct as e,It as t,Rt as n,Tt as r,a as i,bt as a,gn as o,n as s,on as c,r as l,t as u,wt as d}from"./index-BQW5AyZv.js";import{t as f}from"./OrganisationService-CpWD90CD.js";import{t as p}from"./icon-CrJBptxP.js";var m={class:`min-h-screen flex items-center justify-center relative overflow-hidden`},h={class:`container mx-auto px-4 relative z-10`},g={class:`max-w-lg mx-auto`},_={class:`bg-white shadow-xl rounded-2xl p-10 flex flex-col items-center text-center animate-slide-up`},v={key:0},y={key:1},b={key:2},x={class:`text-gray-600 mb-4`},S={class:`font-semibold text-primary`},C={class:`italic`},w=l({__name:`Invite`,setup(l){let p=i().toast,w=u(),T=s(),E=c(!0),D=c(!1),O=c(``),k=c(``),A=w.params.reference;t(async()=>{try{if(!JSON.parse(localStorage.getItem(`user`)||`{}`).name)return localStorage.setItem(`postAuthenticationPath`,T.currentRoute.value.path),T.push(`/login`);let{data:e}=await f.getMember(A);O.value=e.name,k.value=e.role,E.value=!1}catch{E.value=!1,D.value=!0,setTimeout(()=>{T.push(`/`)},5e3)}});async function j(){try{let{data:e}=await f.updateMember(A,{acceptInvite:!0});e.status==`ACTIVE`&&(localStorage.setItem(`organisation`,JSON.stringify(e)),localStorage.setItem(`organisation.reference`,e.reference),window.location=`/`);return}catch(e){p({duration:5e3,title:`Heads Up!`,message:e.message||`We encountered an error accepting this invitation. Please check your network `,variant:`error`})}}return(t,i)=>(n(),e(`div`,m,[i[6]||=a(`div`,{class:`absolute inset-0 bg-slate-950/10 animate-fade-in`},null,-1),a(`div`,h,[a(`div`,g,[a(`div`,_,[i[5]||=a(`div`,{class:`w-24 h-24 rounded-full bg-white shadow ring-1 ring-slate-200 flex items-center justify-center mb-6`},[a(`img`,{src:`/img/icon.png`,class:`w-16 h-16`,alt:`App Icon`})],-1),E.value?(n(),e(`div`,v,[...i[0]||=[a(`h2`,{class:`text-xl font-semibold mb-2`},`Checking your invitation...`,-1),a(`div`,{class:`flex justify-center pt-10`},[a(`div`,{class:`loader`})],-1)]])):D.value?(n(),e(`div`,y,[...i[1]||=[d(`<h2 class="text-xl font-semibold text-red-600 mb-2" data-v-a2a3b269> Invitation Invalid </h2><p class="text-gray-500" data-v-a2a3b269> This invitation link is no longer valid. Please request a new one from the organisation admin. </p><p class="text-gray-700 mt-3" data-v-a2a3b269> You are being redirected back in. </p><div class="flex justify-center pt-10" data-v-a2a3b269><div class="loader" data-v-a2a3b269></div></div>`,4)]])):(n(),e(`div`,b,[i[4]||=a(`h2`,{class:`text-2xl font-semibold mb-3`},`Youâ€™ve Been Invited`,-1),a(`p`,x,[i[2]||=r(` You have been invited to join `,-1),a(`span`,S,o(O.value),1),r(` as `+o([`MANAGER`,`MEMBER`].includes(k.value)?`a`:`an`)+` `,1),a(`span`,C,o(k.value),1),i[3]||=r(`. `,-1)]),a(`button`,{onClick:j,class:`inline-flex items-center justify-center rounded-full mt-6 px-5 pt-1 pb-1.5 bg-primary text-white font-semibold hover:bg-primary-dark transition`},` Accept Invitation `)]))])])])]))}},[[`__scopeId`,`data-v-a2a3b269`]]);export{w as default};