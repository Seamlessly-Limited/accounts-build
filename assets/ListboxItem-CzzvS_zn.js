import{$ as e,D as t,F as n,I as r,R as i,T as a,V as o,W as s,X as c,b as l,d as u,f as d,ft as f,gt as p,rt as m,tt as h,v as g,vt as _,x as v,z as y}from"./index-YI6KouJw.js";import{n as b,t as x}from"./Collection-tbJdTjiy.js";import{l as S,n as C,r as w}from"./VisuallyHidden-B4V-wydk.js";import{a as T}from"./DismissableLayer-CVKjpA2J.js";import{n as E}from"./dist-AeQc7kvP.js";import{_ as D,f as O,t as k,u as A}from"./useForwardExpose-BQik0q1A.js";import{t as j}from"./useDirection-CGBuu1U5.js";import{n as ee}from"./Presence-BvCetuOx.js";import{r as te}from"./PopperContent-CHuBc5js.js";import{i as ne}from"./utils-DsDNH-tF.js";import{t as re}from"./VisuallyHiddenInput-Cr1HHJec.js";function ie(e,t,n){let r=e.findIndex(e=>b(e,t)),i=e.findIndex(e=>b(e,n));if(r===-1||i===-1)return[];let[a,o]=[r,i].sort((e,t)=>e-t);return e.slice(a,o+1)}function M(e){let t=g(()=>_(e)),n=g(()=>new Intl.Collator(`en`,{usage:`search`,...t.value}));return{startsWith:(e,t)=>t.length===0?!0:(e=e.normalize(`NFC`),t=t.normalize(`NFC`),n.value.compare(e.slice(0,t.length),t)===0),endsWith:(e,t)=>t.length===0?!0:(e=e.normalize(`NFC`),t=t.normalize(`NFC`),n.value.compare(e.slice(-t.length),t)===0),contains:(e,t)=>{if(t.length===0)return!0;e=e.normalize(`NFC`),t=t.normalize(`NFC`);let r=0,i=t.length;for(;r+i<=e.length;r++){let a=e.slice(r,r+i);if(n.value.compare(t,a)===0)return!0}return!1}}}function ae(){return{ALT:`Alt`,ARROW_DOWN:`ArrowDown`,ARROW_LEFT:`ArrowLeft`,ARROW_RIGHT:`ArrowRight`,ARROW_UP:`ArrowUp`,BACKSPACE:`Backspace`,CAPS_LOCK:`CapsLock`,CONTROL:`Control`,DELETE:`Delete`,END:`End`,ENTER:`Enter`,ESCAPE:`Escape`,F1:`F1`,F10:`F10`,F11:`F11`,F12:`F12`,F2:`F2`,F3:`F3`,F4:`F4`,F5:`F5`,F6:`F6`,F7:`F7`,F8:`F8`,F9:`F9`,HOME:`Home`,META:`Meta`,PAGE_DOWN:`PageDown`,PAGE_UP:`PageUp`,SHIFT:`Shift`,SPACE:` `,TAB:`Tab`,CTRL:`Control`,ASTERISK:`*`,SPACE_CODE:`Space`}}function N(e,t,n){return e===void 0?!1:Array.isArray(e)?e.some(e=>P(e,t,n)):P(e,t,n)}function P(e,t,n){return e===void 0||t===void 0?!1:typeof e==`string`?e===t:typeof n==`function`?n(e,t):typeof n==`string`?e?.[n]===t?.[n]:b(e,t)}var[F,oe]=S(`ListboxRoot`),I=t({__name:`ListboxRoot`,props:{modelValue:{type:null,required:!1},defaultValue:{type:null,required:!1},multiple:{type:Boolean,required:!1},orientation:{type:String,required:!1,default:`vertical`},dir:{type:String,required:!1},disabled:{type:Boolean,required:!1},selectionBehavior:{type:String,required:!1,default:`toggle`},highlightOnHover:{type:Boolean,required:!1},by:{type:[String,Function],required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1},name:{type:String,required:!1},required:{type:Boolean,required:!1}},emits:[`update:modelValue`,`highlight`,`entryFocus`,`leave`],setup(e,{expose:t,emit:n}){let i=e,a=n,{multiple:u,highlightOnHover:d,orientation:m,disabled:g,selectionBehavior:y,dir:b}=p(i),{getItems:S}=x({isProvider:!0}),{handleTypeaheadSearch:w}=te(),{primitiveElement:T,currentElement:D}=C(),k=ae(),M=j(b),N=ee(D),F=f(),I=f(!1),L=f(!0),R=A(i,`modelValue`,a,{defaultValue:i.defaultValue??(u.value?[]:void 0),passive:i.modelValue===void 0,deep:!0});function z(e){if(I.value=!0,i.multiple){let t=Array.isArray(R.value)?[...R.value]:[],n=t.findIndex(t=>P(t,e,i.by));i.selectionBehavior===`toggle`?(n===-1?t.push(e):t.splice(n,1),R.value=t):(R.value=[e],F.value=e)}else i.selectionBehavior===`toggle`&&P(R.value,e,i.by)?R.value=void 0:R.value=e;setTimeout(()=>{I.value=!1},1)}let B=f(null),V=f(null),H=f(!1),U=f(!1),W=O(),G=O(),K=O();function q(){return S().map(e=>e.ref).filter(e=>e.dataset.disabled!==``)}function J(e,t=!0){if(!e)return;B.value=e,L.value&&B.value.focus(),t&&B.value.scrollIntoView({block:`nearest`});let n=S().find(t=>t.ref===e);a(`highlight`,n)}function se(e){if(H.value)K.trigger(e);else{let t=S().find(t=>P(t.value,e,i.by));t&&(B.value=t.ref,J(t.ref))}}function ce(e){B.value&&B.value.isConnected&&(e.preventDefault(),e.stopPropagation(),U.value||B.value.click())}function le(e){if(L.value){if(I.value=!0,H.value)G.trigger(e);else{let t=e.altKey||e.ctrlKey||e.metaKey;if(t&&e.key===`a`&&u.value){let t=S();R.value=[...t.map(e=>e.value)],e.preventDefault(),J(t[t.length-1].ref)}else if(!t){let t=w(e.key,S());t&&J(t)}}setTimeout(()=>{I.value=!1},1)}}function ue(){U.value=!0}function Y(){r(()=>{U.value=!1})}function X(){r(()=>{let e=new KeyboardEvent(`keydown`,{key:`PageUp`});Q(e)})}function Z(e){let t=B.value;t?.isConnected&&(V.value=t),B.value=null,a(`leave`,e)}function de(e){let t=new CustomEvent(`listbox.entryFocus`,{bubbles:!1,cancelable:!0});if(e.currentTarget?.dispatchEvent(t),a(`entryFocus`,t),!t.defaultPrevented)if(V.value)J(V.value);else{let e=q()?.[0];J(e)}}function Q(e){let t=ne(e,m.value,M.value);if(!t)return;let n=q();if(B.value){if(t===`last`)n.reverse();else if(t===`prev`||t===`next`){t===`prev`&&n.reverse();let e=n.indexOf(B.value);n=n.slice(e+1)}fe(e,n[0])}if(n.length){let e=!B.value&&t===`prev`?n.length-1:0;J(n[e])}if(H.value)return G.trigger(e)}function fe(e,t){if(!(H.value||i.selectionBehavior!==`replace`||!u.value||!Array.isArray(R.value))&&!((e.altKey||e.ctrlKey||e.metaKey)&&!e.shiftKey)&&e.shiftKey){let n=S().filter(e=>e.ref.dataset.disabled!==``),r=n.find(e=>e.ref===t)?.value;if(e.key===k.END?r=n[n.length-1].value:e.key===k.HOME&&(r=n[0].value),!r||!F.value)return;R.value=ie(n.map(e=>e.value),F.value,r)}}async function $(e){if(await r(),H.value)W.trigger(e);else{let e=q(),t=e.find(e=>e.dataset.state===`checked`);t?J(t):e.length&&J(e[0])}}return c(R,()=>{I.value||r(()=>{$()})},{immediate:!0,deep:!0}),t({highlightedElement:B,highlightItem:se,highlightFirstItem:X,highlightSelected:$,getItems:S}),oe({modelValue:R,onValueChange:z,multiple:u,orientation:m,dir:M,disabled:g,highlightOnHover:d,highlightedElement:B,isVirtual:H,virtualFocusHook:W,virtualKeydownHook:G,virtualHighlightHook:K,by:i.by,firstValue:F,selectionBehavior:y,focusable:L,onLeave:Z,onEnter:de,changeHighlight:J,onKeydownEnter:ce,onKeydownNavigation:Q,onKeydownTypeAhead:le,onCompositionStart:ue,onCompositionEnd:Y,highlightFirstItem:X}),(e,t)=>(o(),l(_(E),{ref_key:`primitiveElement`,ref:T,as:e.as,"as-child":e.asChild,dir:_(M),"data-disabled":_(g)?``:void 0,onPointerleave:Z,onFocusout:t[0]||=async e=>{let t=e.relatedTarget||e.target;await r(),B.value&&_(D)&&!_(D).contains(t)&&Z(e)}},{default:h(()=>[s(e.$slots,`default`,{modelValue:_(R)}),_(N)&&e.name?(o(),l(_(re),{key:0,name:e.name,value:_(R),disabled:_(g),required:e.required},null,8,[`name`,`value`,`disabled`,`required`])):v(`v-if`,!0)]),_:3},8,[`as`,`as-child`,`dir`,`data-disabled`]))}}),L=t({__name:`ListboxContent`,props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},setup(e){let{CollectionSlot:t}=x(),n=F(),r=D(!1,10);return(e,i)=>(o(),l(_(t),null,{default:h(()=>[a(_(E),{role:`listbox`,as:e.as,"as-child":e.asChild,tabindex:_(n).focusable.value?_(n).highlightedElement.value?`-1`:`0`:`-1`,"aria-orientation":_(n).orientation.value,"aria-multiselectable":!!_(n).multiple.value,"data-orientation":_(n).orientation.value,onMousedown:i[0]||=d(e=>r.value=!0,[`left`]),onFocus:i[1]||=e=>{_(r)||_(n).onEnter(e)},onKeydown:[i[2]||=u(e=>{_(n).orientation.value===`vertical`&&(e.key===`ArrowLeft`||e.key===`ArrowRight`)||_(n).orientation.value===`horizontal`&&(e.key===`ArrowUp`||e.key===`ArrowDown`)||(e.preventDefault(),_(n).focusable.value&&_(n).onKeydownNavigation(e))},[`down`,`up`,`left`,`right`,`home`,`end`]),u(_(n).onKeydownEnter,[`enter`]),_(n).onKeydownTypeAhead]},{default:h(()=>[s(e.$slots,`default`)]),_:3},8,[`as`,`as-child`,`tabindex`,`aria-orientation`,`aria-multiselectable`,`data-orientation`,`onKeydown`])]),_:3}))}}),R=t({__name:`ListboxFilter`,props:{modelValue:{type:String,required:!1},autoFocus:{type:Boolean,required:!1},disabled:{type:Boolean,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:`input`}},emits:[`update:modelValue`],setup(t,{emit:n}){let r=t,a=A(r,`modelValue`,n,{defaultValue:``,passive:r.modelValue===void 0}),c=F(),{primitiveElement:p,currentElement:m}=C(),v=g(()=>r.disabled||c.disabled.value||!1),b=f();return e(()=>b.value=c.highlightedElement.value?.id),i(()=>{c.focusable.value=!1,setTimeout(()=>{r.autoFocus&&m.value?.focus()},1)}),y(()=>{c.focusable.value=!0}),(e,t)=>(o(),l(_(E),{ref_key:`primitiveElement`,ref:p,as:e.as,"as-child":e.asChild,value:_(a),disabled:v.value?``:void 0,"data-disabled":v.value?``:void 0,"aria-disabled":v.value??void 0,"aria-activedescendant":b.value,type:`text`,onKeydown:[u(d(_(c).onKeydownNavigation,[`prevent`]),[`down`,`up`,`home`,`end`]),u(_(c).onKeydownEnter,[`enter`])],onInput:t[0]||=e=>{a.value=e.target.value,_(c).highlightFirstItem()},onCompositionstart:_(c).onCompositionStart,onCompositionend:_(c).onCompositionEnd},{default:h(()=>[s(e.$slots,`default`,{modelValue:_(a)})]),_:3},8,[`as`,`as-child`,`value`,`disabled`,`data-disabled`,`aria-disabled`,`aria-activedescendant`,`onKeydown`,`onCompositionstart`,`onCompositionend`]))}}),[z,B]=S(`ListboxGroup`),V=t({__name:`ListboxGroup`,props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},setup(e){let t=e,r=w(void 0,`reka-listbox-group`);return B({id:r}),(e,i)=>(o(),l(_(E),n({role:`group`},t,{"aria-labelledby":_(r)}),{default:h(()=>[s(e.$slots,`default`)]),_:3},16,[`aria-labelledby`]))}}),H=`listbox.select`,[U,W]=S(`ListboxItem`),G=t({__name:`ListboxItem`,props:{value:{type:null,required:!0},disabled:{type:Boolean,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:`div`}},emits:[`select`],setup(e,{emit:t}){let r=e,i=t,c=w(void 0,`reka-listbox-item`),{CollectionItem:f}=x(),{forwardRef:p,currentElement:v}=k(),y=F(),b=g(()=>v.value===y.highlightedElement.value),S=g(()=>N(y.modelValue.value,r.value,y.by)),C=g(()=>y.disabled.value||r.disabled);async function D(e){i(`select`,e),!e?.defaultPrevented&&!C.value&&e&&(y.onValueChange(r.value),y.changeHighlight(v.value))}function O(e){let t={originalEvent:e,value:r.value};T(H,D,t)}return W({isSelected:S}),(e,t)=>(o(),l(_(f),{value:e.value},{default:h(()=>[m([b.value,S.value],()=>a(_(E),n({id:_(c)},e.$attrs,{ref:_(p),role:`option`,tabindex:_(y).focusable.value?b.value?`0`:`-1`:-1,"aria-selected":S.value,as:e.as,"as-child":e.asChild,disabled:C.value?``:void 0,"data-disabled":C.value?``:void 0,"data-highlighted":b.value?``:void 0,"data-state":S.value?`checked`:`unchecked`,onClick:O,onKeydown:u(d(O,[`prevent`]),[`space`]),onPointermove:t[0]||=()=>{_(y).highlightedElement.value!==_(v)&&_(y).highlightOnHover.value&&!_(y).focusable.value&&_(y).changeHighlight(_(v),!1)}}),{default:h(()=>[s(e.$slots,`default`)]),_:3},16,[`id`,`tabindex`,`aria-selected`,`as`,`as-child`,`disabled`,`data-disabled`,`data-highlighted`,`data-state`,`onKeydown`]),t,1)]),_:3},8,[`value`]))}});export{L as a,M as c,R as i,V as n,I as o,z as r,F as s,G as t};