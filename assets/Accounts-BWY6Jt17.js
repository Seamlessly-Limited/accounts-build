import"./ohash.D__AXeF1-CGofPpTT.js";import"./ListboxItem--eeE1Ofm.js";import"./ConfigProvider-CSiMpAid.js";import"./useHideOthers-CSWJCzqR.js";import"./useDirection-C2SDL-n6.js";import"./useFormControl-B9IqKiyX.js";import"./useId-D_f_Mvzd.js";import"./PopperContent-BAGZO826.js";import"./DialogTitle-D2Geg3s2.js";import"./utils-CvELSmVb.js";import"./VisuallyHiddenInput-CLl_KtnM.js";import{a as e,i as t,n,r,t as i}from"./ComboboxItem-DVcc-v9-.js";import"./Label-ypSykHE1.js";import{At as ee,Bt as a,Ct as o,Dt as s,Et as c,It as te,Qt as l,Rt as u,St as d,Tt as f,Vt as p,a as ne,bt as m,fn as h,gn as g,gt as _,h as v,in as re,mt as y,n as ie,on as b,pn as x,xt as S,yt as C}from"./index-BQW5AyZv.js";import{t as w}from"./BankAccountService-ClC2Qmm3.js";import{t as ae}from"./Card-BgNz8ERj.js";import{t as T}from"./button-B1v-VAlV.js";import{t as E}from"./Input-D15QVAFK.js";import{t as D}from"./Label-WSP5QvF4.js";import"./badge-C4URinkR.js";import{a as O,i as k,n as A,r as j,t as M}from"./DialogTitle-DX8vz-_o.js";var N=s({__name:`DialogFooter`,props:{class:{}},setup(e){let t=e;return(e,n)=>(u(),o(`div`,{"data-slot":`dialog-footer`,class:x(h(v)(`flex flex-col-reverse gap-2 sm:flex-row sm:justify-end`,t.class))},[p(e.$slots,`default`)],2))}}),oe={class:`relative min-h-screen overflow-y-scroll rounded-sm flex justify-center w-full py-10`,style:{"scrollbar-width":`none`}},se={class:`container py-12 md:py-15 relative w-full md:w-11/12 lg:w-4/5`},ce={class:`flex flex-col md:flex-row justify-between items-start md:items-center gap-4 mb-8`},le={class:`flex gap-3 w-full md:w-auto`},ue={key:0,class:`text-center py-20`},de={key:1,class:`text-center py-40`},fe={key:2,class:`grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6`},pe={class:`flex justify-between items-start mb-4`},me={class:`flex-1 flex-row`},he={class:`font-semibold text-lg text-slate-800 transition-colors h-14`},ge={class:`text-sm text-slate-700 mb-auto`},_e={class:`space-y-2 my-auto text-sm text-gray-600`},ve={class:`flex items-center`},ye={key:0,class:`flex items-center`},be={class:`font-semibold text-slate-700`},xe={key:1,class:`flex items-center`},Se={class:`text-xs`},Ce={class:`flex justify-between items-center mt-6 pt-4 border-t gap-2`},we={class:`grid gap-4 py-4 px-1`},Te={class:`flex gap-2 items-end`},Ee={class:`space-y-2 flex-1`},De={class:`space-y-2 relative`,style:{"max-width":`75px`}},Oe={class:`space-y-2`},ke={class:`space-y-2`},Ae={class:`space-y-2`},je={class:`space-y-2`},Me={key:0,class:`fa fa-cog animate-spin mr-2`},Ne={key:1,class:`fa fa-plus mr-2`},Pe={class:`text-slate-700`},Fe={key:0,class:`fa fa-cog animate-spin mr-2`},Ie={key:1,class:`fa fa-trash mr-2`},P={__name:`Accounts`,setup(s){let p=ie(),v=ne().toast,P=b(!0),F=b(!1),I=b(!1);b(!1);let L=b(!1),R=b(!1),z=b([]),B=re({}),V=b(null),H=b(``),U=b(``),W=b(``),G=[{label:`Nigeria`,value:`NG`},{label:`United States`,value:`US`},{label:`United Kingdom`,value:`GB`},{label:`South Africa`,value:`ZA`},{label:`Ghana`,value:`GH`},{label:`Kenya`,value:`KE`}],K=b([]),q=b(!1),J=[{label:`NGN - Nigerian Naira`,value:`NGN`},{label:`ZAR - South African Rand`,value:`ZAR`},{label:`GHS - Ghanaian Cedi`,value:`GHS`},{label:`KES - Kenyan Shilling`,value:`KES`},{label:`EGP - Egyptian Pound`,value:`EGP`},{label:`MAD - Moroccan Dirham`,value:`MAD`},{label:`TZS - Tanzanian Shilling`,value:`TZS`},{label:`UGX - Ugandan Shilling`,value:`UGX`},{label:`ETB - Ethiopian Birr`,value:`ETB`},{label:`XOF - West African CFA Franc`,value:`XOF`},{label:`XAF - Central African CFA Franc`,value:`XAF`},{label:`USD - US Dollar`,value:`USD`},{label:`CAD - Canadian Dollar`,value:`CAD`},{label:`MXN - Mexican Peso`,value:`MXN`},{label:`BRL - Brazilian Real`,value:`BRL`},{label:`ARS - Argentine Peso`,value:`ARS`},{label:`CLP - Chilean Peso`,value:`CLP`},{label:`COP - Colombian Peso`,value:`COP`},{label:`PEN - Peruvian Sol`,value:`PEN`},{label:`JMD - Jamaican Dollar`,value:`JMD`},{label:`TTD - Trinidad and Tobago Dollar`,value:`TTD`},{label:`CNY - Chinese Yuan`,value:`CNY`},{label:`JPY - Japanese Yen`,value:`JPY`},{label:`INR - Indian Rupee`,value:`INR`},{label:`KRW - South Korean Won`,value:`KRW`},{label:`SGD - Singapore Dollar`,value:`SGD`},{label:`HKD - Hong Kong Dollar`,value:`HKD`},{label:`AUD - Australian Dollar`,value:`AUD`},{label:`NZD - New Zealand Dollar`,value:`NZD`},{label:`THB - Thai Baht`,value:`THB`},{label:`MYR - Malaysian Ringgit`,value:`MYR`},{label:`IDR - Indonesian Rupiah`,value:`IDR`},{label:`PHP - Philippine Peso`,value:`PHP`},{label:`VND - Vietnamese Dong`,value:`VND`},{label:`PKR - Pakistani Rupee`,value:`PKR`},{label:`BDT - Bangladeshi Taka`,value:`BDT`},{label:`LKR - Sri Lankan Rupee`,value:`LKR`},{label:`TWD - New Taiwan Dollar`,value:`TWD`},{label:`EUR - Euro`,value:`EUR`},{label:`GBP - British Pound`,value:`GBP`},{label:`CHF - Swiss Franc`,value:`CHF`},{label:`SEK - Swedish Krona`,value:`SEK`},{label:`NOK - Norwegian Krone`,value:`NOK`},{label:`DKK - Danish Krone`,value:`DKK`},{label:`PLN - Polish Zloty`,value:`PLN`},{label:`CZK - Czech Koruna`,value:`CZK`},{label:`HUF - Hungarian Forint`,value:`HUF`},{label:`RON - Romanian Leu`,value:`RON`},{label:`BGN - Bulgarian Lev`,value:`BGN`},{label:`HRK - Croatian Kuna`,value:`HRK`},{label:`RUB - Russian Ruble`,value:`RUB`},{label:`UAH - Ukrainian Hryvnia`,value:`UAH`},{label:`TRY - Turkish Lira`,value:`TRY`},{label:`ISK - Icelandic Krona`,value:`ISK`},{label:`AED - UAE Dirham`,value:`AED`},{label:`SAR - Saudi Riyal`,value:`SAR`},{label:`QAR - Qatari Riyal`,value:`QAR`},{label:`KWD - Kuwaiti Dinar`,value:`KWD`},{label:`BHD - Bahraini Dinar`,value:`BHD`},{label:`OMR - Omani Rial`,value:`OMR`},{label:`JOD - Jordanian Dinar`,value:`JOD`},{label:`ILS - Israeli Shekel`,value:`ILS`},{label:`LBP - Lebanese Pound`,value:`LBP`},{label:`IQD - Iraqi Dinar`,value:`IQD`}],Y=[{label:`Savings`,value:`savings`},{label:`Current`,value:`current`},{label:`Checking`,value:`checking`},{label:`Business`,value:`business`}],X=b({country:`NG`,bankName:``,accountName:``,accountNumber:``,accountType:``,currency:`NGN`}),Le=C(()=>{if(!H.value)return K;let e=H.value.toLowerCase();return K.value.filter(t=>t.label.toLowerCase().includes(e))}),Re=C(()=>{if(!U.value)return Y;let e=U.value.toLowerCase();return Y.filter(t=>t.label.toLowerCase().includes(e)||t.value.toLowerCase().includes(e))}),ze=C(()=>{if(!W.value)return J;let e=W.value.toLowerCase();return J.filter(t=>t.label.toLowerCase().includes(e)||t.value.toLowerCase().includes(e))});te(async()=>{await Z(),await Q(X.value.country)});async function Z(){try{P.value=!0,z.value=(await w.getBankAccounts()).data||[]}catch(e){v({id:`load-accounts-error`,title:`Uh oh! Something went wrong.`,description:e.message||`We could not load your bank accounts`,action:ee(T,{variant:`default`,size:`sm`,onClick:Z},`Retry`)})}finally{P.value=!1}}async function Q(e){if(e)try{q.value=!0;let{data:t}=await w.getBanksByCountry(e);t&&(K.value=t.map(e=>({label:e.name,value:e.name,code:e.code,id:e.code})))}catch(e){console.error(`Failed to fetch banks:`,e),K.value=[]}finally{q.value=!1}}async function Be(){try{F.value=!0;let{data:e}=await w.addBankAccount(X.value);v({id:`account-added`,title:`Success!`,description:`Bank account added successfully`}),L.value=!1,z.value.push(e),qe(),p.push(`/accounts/${e.reference}#blue`)}catch(e){v({id:`add-account-error`,title:`Error`,description:e.message||`Failed to add bank account`,variant:`destructive`})}finally{F.value=!1}}async function $(e){try{B[e.reference]=!0,await w.syncBankAccount(e.reference),v({id:`sync-${e.reference}`,title:`Synced!`,description:`${e.accountName} has been synced successfully`}),await Z()}catch(t){v({id:`sync-error-${e.reference}`,title:`Sync Failed`,description:t.message||`Failed to sync account`,variant:`destructive`})}finally{B[e.reference]=!1}}function Ve(e){V.value=e,R.value=!0}async function He(){if(V.value)try{I.value=!0,await w.removeBankAccount(V.value.reference),v({id:`account-removed`,title:`Removed`,description:`Bank account removed successfully`}),R.value=!1,z.value=z.value.filter(e=>e.reference!==V.value.reference),V.value=null}catch(e){v({id:`remove-account-error`,title:`Error`,description:e.message||`Failed to remove bank account`,variant:`destructive`})}finally{I.value=!1}}function Ue(e){p.push(`/accounts/${e.reference}`)}function We(e){return e?`****${e.slice(-4)}`:`N/A`}function Ge(e=0){return new Intl.NumberFormat(`en-NG`,{style:`currency`,currency:`NGN`}).format(e||0)}function Ke(e){return e?new Date(e).toLocaleDateString(`en-US`,{year:`numeric`,month:`short`,day:`numeric`}):`Never`}function qe(){X.value={bankName:``,accountName:``,accountNumber:``,accountType:``,currency:`NGN`}}return(ee,s)=>(u(),o(`div`,oe,[m(`div`,se,[m(`div`,ce,[s[14]||=m(`div`,null,[m(`h1`,{class:`text-3xl font-bold text-slate-700`},`Connected Accounts`),m(`p`,{class:`text-gray-600 mt-2`},`Manage your bank accounts and reconciliation`)],-1),m(`div`,le,[c(h(T),{class:`rounded-full flex-1 md:flex-none`,onClick:s[0]||=e=>L.value=!0},{default:l(()=>[...s[13]||=[m(`i`,{class:`fa fa-plus mr-2`},null,-1),f(` Add Account `,-1)]]),_:1})])]),s[24]||=m(`hr`,{class:`h-1 bg-slate-50 my-10`},null,-1),P.value?(u(),o(`div`,ue,[...s[15]||=[m(`i`,{class:`fa fa-cog animate-spin text-4xl text-gray-500`},null,-1),m(`p`,{class:`mt-4 text-gray-600`},`Loading accounts...`,-1)]])):z.value.length===0?(u(),o(`div`,de,[s[17]||=m(`i`,{class:`fa fa-university text-4xl text-gray-300 mb-4`},null,-1),s[18]||=m(`h3`,{class:`text-xl font-semibold text-gray-700`},`No bank accounts connected`,-1),s[19]||=m(`p`,{class:`text-gray-600 mt-2 mb-6`},`Connect your first bank account to start managing finances`,-1),c(h(T),{class:`rounded-full px-8`,onClick:s[1]||=e=>L.value=!0},{default:l(()=>[...s[16]||=[m(`i`,{class:`fa fa-plus mr-2`},null,-1),f(` Add Bank Account `,-1)]]),_:1})])):(u(),o(`div`,fe,[(u(!0),o(_,null,a(z.value,e=>(u(),S(h(ae),{key:e.reference,class:`p-6 shadow-none transition-all cursor-pointer border-2 hover:border-dashed hover:border-slate-200 group`,onClick:t=>Ue(e)},{default:l(()=>[m(`div`,pe,[m(`div`,me,[m(`h3`,he,g(e.accountName),1),m(`p`,ge,g(e.bankName),1)])]),m(`div`,_e,[m(`div`,ve,[s[20]||=m(`i`,{class:`fa fa-hashtag mr-2 w-4`},null,-1),m(`span`,null,g(We(e.accountNumber)),1)]),e.balance===void 0?d(``,!0):(u(),o(`div`,ye,[s[21]||=m(`i`,{class:`fa fa-wallet mr-2 w-4`},null,-1),m(`span`,be,g(Ge(e.balance)),1)])),e.lastSyncedAt?(u(),o(`div`,xe,[s[22]||=m(`i`,{class:`fa fa-sync mr-2 w-4`},null,-1),m(`span`,Se,g(Ke(e.lastSyncedAt)),1)])):d(``,!0)]),m(`div`,Ce,[c(h(T),{variant:`outline`,size:`sm`,onClick:y(t=>$(e),[`stop`]),disabled:B[e.reference],class:`rounded-full hover:bg-gray-50 hover:border`},{default:l(()=>[m(`i`,{class:x([`fa`,B[e.reference]?`fa-cog animate-spin`:`fa-sync`])},null,2)]),_:2},1032,[`onClick`,`disabled`]),c(h(T),{variant:`ghost`,size:`sm`,onClick:y(t=>Ve(e),[`stop`]),class:`rounded-full text-red-600 hover:border border-red-100 hover:bg-red-50`},{default:l(()=>[...s[23]||=[m(`i`,{class:`fa fa-trash`},null,-1)]]),_:1},8,[`onClick`])])]),_:2},1032,[`onClick`]))),128))]))]),c(h(O),{open:L.value,"onUpdate:open":s[10]||=e=>L.value=e},{default:l(()=>[c(h(k),{class:`sm:max-w-[500px] overflow-y-scroll`},{default:l(()=>[c(h(A),null,{default:l(()=>[c(h(M),null,{default:l(()=>[...s[25]||=[f(`Add Bank Account`,-1)]]),_:1}),c(h(j),null,{default:l(()=>[...s[26]||=[f(` Connect a new bank account to track transactions and reconcile finances. `,-1)]]),_:1})]),_:1}),m(`form`,{onSubmit:y(Be,[`prevent`]),class:`overflow-y-scroll max-h-[75vh]`},[m(`div`,we,[m(`div`,Te,[m(`div`,Ee,[c(h(D),null,{default:l(()=>[...s[27]||=[f(`Bank Name`,-1)]]),_:1}),c(h(r),{modelValue:X.value.bankName,"onUpdate:modelValue":s[2]||=e=>X.value.bankName=e,class:`relative`,required:``,disabled:q.value},{default:l(()=>[c(h(t),{class:`w-full`},{default:l(()=>[c(h(n),{class:`rounded-full w-full`,placeholder:q.value?`Loading banks...`:`Search or select a bank in your country...`,disabled:q.value},null,8,[`placeholder`,`disabled`])]),_:1}),c(h(e),{class:`absolute bg-white z-50 border border-slate-300 rounded-sm mt-1 px-2 py-3 max-h-[250px] overflow-y-scroll w-full`},{default:l(()=>[(u(!0),o(_,null,a(Le.value.value,e=>(u(),S(h(i),{key:e.id,value:e.label,class:`px-4 py-2 rounded-full cursor-pointer hover:bg-gray-100`},{default:l(()=>[f(g(e.label),1)]),_:2},1032,[`value`]))),128))]),_:1})]),_:1},8,[`modelValue`,`disabled`])]),m(`div`,De,[c(h(r),{modelValue:X.value.country,"onUpdate:modelValue":[s[3]||=e=>X.value.country=e,s[4]||=e=>{Q(e),X.value.bankName=``}],class:`relative`,required:``,"display-value":e=>G.find(t=>t.value===e)?.label||e},{default:l(()=>[c(h(t),{class:`w-full`},{default:l(()=>[c(h(n),{class:`rounded-full w-full text-xs pr-7`,pl3000aceholder:`Country`}),s[28]||=m(`i`,{class:`fa fa-globe absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 text-xs pointer-events-none`},null,-1)]),_:1}),c(h(e),{class:`absolute bg-white z-50 border border-slate-300 rounded-sm mt-1 px-2 py-3 max-h-[250px] overflow-y-scroll min-w-[200px] right-0`},{default:l(()=>[(u(),o(_,null,a(G,e=>c(h(i),{key:e.value,value:e.value,class:`px-4 py-2 rounded-full cursor-pointer hover:bg-gray-100`},{default:l(()=>[f(g(e.label),1)]),_:2},1032,[`value`])),64))]),_:1})]),_:1},8,[`modelValue`,`display-value`])])]),m(`div`,Oe,[c(h(D),null,{default:l(()=>[...s[29]||=[f(`Account Name`,-1)]]),_:1}),c(h(E),{modelValue:X.value.accountName,"onUpdate:modelValue":s[5]||=e=>X.value.accountName=e,placeholder:`e.g., Business Checking, Main Account`,class:`rounded-full`,required:``},null,8,[`modelValue`])]),m(`div`,ke,[c(h(D),null,{default:l(()=>[...s[30]||=[f(`Account Number`,-1)]]),_:1}),c(h(E),{modelValue:X.value.accountNumber,"onUpdate:modelValue":s[6]||=e=>X.value.accountNumber=e,placeholder:`Enter account number`,class:`rounded-full`,type:`text`,required:``},null,8,[`modelValue`])]),m(`div`,Ae,[c(h(D),null,{default:l(()=>[...s[31]||=[f(`Account Type`,-1)]]),_:1}),c(h(r),{modelValue:X.value.accountType,"onUpdate:modelValue":s[7]||=e=>X.value.accountType=e,class:`relative`,required:``},{default:l(()=>[c(h(t),{class:`w-full`},{default:l(()=>[c(h(n),{class:`rounded-full w-full`,placeholder:`Search or select account type...`})]),_:1}),c(h(e),{class:`absolute bg-white z-50 border rounded-sm mt-1 px-2 py-3 max-h-[250px] overflow-y-auto w-full`},{default:l(()=>[(u(!0),o(_,null,a(Re.value,e=>(u(),S(h(i),{key:e.value,value:e.value,class:`px-4 py-2 rounded-full cursor-pointer hover:bg-gray-100`},{default:l(()=>[f(g(e.label),1)]),_:2},1032,[`value`]))),128))]),_:1})]),_:1},8,[`modelValue`])]),m(`div`,je,[c(h(D),null,{default:l(()=>[...s[32]||=[f(`Currency`,-1)]]),_:1}),c(h(r),{modelValue:X.value.currency,"onUpdate:modelValue":s[8]||=e=>X.value.currency=e,class:`relative`,required:``},{default:l(()=>[c(h(t),{class:`w-full`},{default:l(()=>[c(h(n),{class:`rounded-full w-full`,placeholder:`Search or select currency...`})]),_:1}),c(h(e),{class:`absolute bg-white z-50 border rounded-sm mt-1 px-2 py-3 max-h-[250px] overflow-y-auto w-full`},{default:l(()=>[(u(!0),o(_,null,a(ze.value,e=>(u(),S(h(i),{key:e.value,value:e.value,class:`px-4 py-2 rounded-full cursor-pointer hover:bg-gray-100`},{default:l(()=>[f(g(e.label),1)]),_:2},1032,[`value`]))),128))]),_:1})]),_:1},8,[`modelValue`])])]),c(h(N),{class:`gap-2`},{default:l(()=>[c(h(T),{type:`button`,variant:`outline`,class:`rounded-full`,onClick:s[9]||=e=>L.value=!1},{default:l(()=>[...s[33]||=[f(` Cancel `,-1)]]),_:1}),c(h(T),{type:`submit`,class:`rounded-full`,disabled:F.value},{default:l(()=>[F.value?(u(),o(`i`,Me)):(u(),o(`i`,Ne)),f(` `+g(F.value?`Adding...`:`Add Account`),1)]),_:1},8,[`disabled`])]),_:1})],32)]),_:1})]),_:1},8,[`open`]),c(h(O),{open:R.value,"onUpdate:open":s[12]||=e=>R.value=e},{default:l(()=>[c(h(k),{class:`sm:max-w-[425px]`},{default:l(()=>[c(h(A),null,{default:l(()=>[c(h(M),null,{default:l(()=>[...s[34]||=[f(`Remove Bank Account?`,-1)]]),_:1}),c(h(j),null,{default:l(()=>[s[35]||=f(` You're about to remove `,-1),m(`strong`,Pe,g(V.value?.accountName),1),f(` from `+g(V.value?.bankName)+`. This action cannot be undone. `,1)]),_:1})]),_:1}),c(h(N),{class:`gap-2 mt-4`},{default:l(()=>[c(h(T),{type:`button`,variant:`outline`,class:`rounded-full flex-1`,onClick:s[11]||=e=>R.value=!1},{default:l(()=>[...s[36]||=[f(` Cancel `,-1)]]),_:1}),c(h(T),{type:`button`,variant:`destructive`,class:`rounded-full flex-1`,onClick:He,disabled:I.value},{default:l(()=>[I.value?(u(),o(`i`,Fe)):(u(),o(`i`,Ie)),f(` `+g(I.value?`Removing...`:`Remove`),1)]),_:1},8,[`disabled`])]),_:1})]),_:1})]),_:1},8,[`open`])]))}};export{P as default};