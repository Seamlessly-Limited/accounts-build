import{Aa as e,Bi as t,Hi as n,It as r,Li as i,P as a,Pa as o,Ri as s,Ui as c,Yn as l,g as u,na as d,o as f,wa as p,xr as m,zi as h}from"./index-BW6FH5S4.js";import{t as g}from"./WorkspaceStore-DkbvTQrR.js";var _={class:`h-full flex flex-col`},v={class:`flex-none px-6 py-4 border-b border-gray-100 flex items-center justify-between`},y={class:`flex items-center space-x-4`},b={class:`p-2 rounded-lg bg-amber-50`},x={class:`text-sm text-gray-500`},S={class:`flex-1 overflow-auto p-6 bg-gray-50`},C={class:`max-w-lg mx-auto bg-white rounded-xl border border-gray-200 shadow-sm p-6`},w={key:0,class:`flex justify-center py-12`},T={key:1,class:`text-center py-8`},E={class:`w-16 h-16 mx-auto mb-4 rounded-full bg-green-100 flex items-center justify-center`},D={class:`text-gray-500 mb-6`},O={key:2,class:`space-y-6`},k={class:`text-center`},A={class:`w-16 h-16 mx-auto mb-4 rounded-full bg-amber-100 flex items-center justify-center`},j={class:`bg-gray-50 rounded-lg p-4 space-y-2`},M={class:`flex justify-between text-sm`},N={class:`font-medium text-gray-900`},P={class:`flex justify-between text-sm`},F={class:`font-medium text-gray-900`},I={class:`flex gap-3`},L=[`disabled`],R={__name:`ArchiveView`,props:{doctype:{type:String,required:!0},name:{type:String,required:!0}},setup(R){let z=R,{toast:B}=u(),V=g(),H=p(!1),U=p(!1),W=p(!1);async function G(){U.value=!0;try{await f.patch(`/org/doc/${encodeURIComponent(z.doctype)}/${encodeURIComponent(z.name)}`,{data:{archived:!0},authorizeRequest:!0,organisationAware:!0}),W.value=!0,B({title:`Archived`,description:`${z.name} has been archived.`,variant:`success`}),V.notifyDocSaved(z.doctype,z.name)}catch(e){console.error(`Archive error:`,e),B({title:`Archive Failed`,description:e.message,variant:`destructive`})}finally{U.value=!1}}function K(){V.closeTab(`archive-${z.doctype}-${z.name}`)}return(u,f)=>(d(),t(`div`,_,[i(`header`,v,[i(`div`,y,[i(`div`,b,[c(e(m),{class:`w-6 h-6 text-amber-600`})]),i(`div`,null,[f[0]||=i(`h1`,{class:`text-xl font-bold text-gray-900`},`Archive Document`,-1),i(`p`,x,o(R.doctype)+` â€¢ `+o(R.name),1)])])]),i(`div`,S,[i(`div`,C,[H.value?(d(),t(`div`,w,[...f[1]||=[i(`div`,{class:`animate-spin rounded-full h-8 w-8 border-b-2 border-black`},null,-1)]])):W.value?(d(),t(`div`,T,[i(`div`,E,[c(e(l),{class:`w-8 h-8 text-green-600`})]),f[2]||=i(`h3`,{class:`text-lg font-semibold text-gray-900 mb-2`},`Document Archived`,-1),i(`p`,D,o(R.name)+` has been moved to the archive.`,1),i(`button`,{onClick:K,class:`px-6 py-2 bg-black text-white rounded-full text-sm font-medium hover:bg-gray-900 transition-colors`},` Close `)])):(d(),t(`div`,O,[i(`div`,k,[i(`div`,A,[c(e(a),{class:`w-8 h-8 text-amber-600`})]),f[3]||=i(`h3`,{class:`text-lg font-semibold text-gray-900 mb-2`},`Archive this document?`,-1),f[4]||=i(`p`,{class:`text-gray-500`},`Archiving will hide the document from lists but you can restore it later.`,-1)]),i(`div`,j,[i(`div`,M,[f[5]||=i(`span`,{class:`text-gray-500`},`Document`,-1),i(`span`,N,o(R.name),1)]),i(`div`,P,[f[6]||=i(`span`,{class:`text-gray-500`},`Type`,-1),i(`span`,F,o(R.doctype),1)])]),i(`div`,I,[i(`button`,{onClick:K,class:`flex-1 px-4 py-2 border border-gray-200 rounded-full text-sm font-medium text-gray-600 hover:bg-gray-50 transition-colors`},` Cancel `),i(`button`,{onClick:G,disabled:U.value,class:`flex-1 px-4 py-2 bg-amber-600 text-white rounded-full text-sm font-medium hover:bg-amber-700 disabled:opacity-50 flex items-center justify-center gap-2 transition-colors`},[U.value?(d(),s(e(r),{key:0,class:`w-4 h-4 animate-spin`})):h(``,!0),n(` `+o(U.value?`Archiving...`:`Archive Document`),1)],8,L)])]))])])]))}};export{R as default};