import"./useFormControl-BUeRR8ws.js";import"./useNonce-A3DG0I5d.js";import"./nullish-CfjOSA4G.js";import"./CheckboxIndicator-B8wef4SR.js";import"./useArrowNavigation-siWGBYoD.js";import"./ConfigProvider-CjeiZORM.js";import"./useHideOthers-BZr43-2a.js";import"./PopoverTrigger-Dr_6iFZM.js";import"./useDirection-omVKeWCW.js";import"./PopperAnchor-Bn9fO7QQ.js";import"./useId-DfGyiNma.js";import"./useKbd-BvGB3m10.js";import"./PopperContent-ULdTR4NQ.js";import"./useTypeahead-DDqMy18N.js";import"./Teleport-kyzT_9hu.js";import"./utils-DUPUPfs8.js";import"./utils-DtgOUvbf.js";import"./RovingFocusGroup-dKe4QrSY.js";import"./RovingFocusItem-BbeIHai7.js";import"./VisuallyHiddenInput-Dgtu0ASA.js";import"./DropdownMenuTrigger-Bf0ty0Jy.js";import"./DropdownMenuLabel-DTipf7y4.js";import"./MenuSeparator-CE9DtT8D.js";import"./DropdownMenuSeparator-BuOL-z1s.js";import"./Label-DzRxMhJ9.js";import"./SelectViewport-DIJL5JzE.js";import{a as e,i as t,r as n,t as r}from"./tabs-qcWw1iiE.js";import{$t as i,A as a,B as o,Bi as s,Bt as c,C as ee,Cn as te,Dt as ne,Et as re,F as l,Fa as u,Fi as d,Ft as ie,Gt as ae,H as f,Hi as p,Ht as m,I as oe,In as se,It as ce,Jn as h,Jt as g,K as le,Ki as _,La as ue,Li as v,Ln as de,M as fe,Mi as pe,Nn as me,Oa as y,On as he,Pa as b,Pn as x,R as S,Ra as C,Rt as ge,Sn as _e,St as w,Tn as ve,Tt as T,Ui as E,Vi as D,Vt as O,Wi as k,Yn as ye,Zn as A,a as be,ar as xe,b as Se,ba as j,bt as Ce,ca as M,ct as we,da as N,fn as Te,ft as Ee,hr as De,ht as Oe,i as ke,ia as Ae,in as P,ir as F,kt as I,ln as je,lr as Me,nn as Ne,o as L,oa as R,pn as Pe,pr as z,qi as B,r as Fe,rr as Ie,tt as Le,un as Re,ur as ze,wt as Be,xa as Ve,y as He,yn as Ue,yr as We,yt as Ge}from"./index-Caanq2Pw.js";import{t as Ke}from"./purify.es-C6pmr44S.js";import"./button-ByjIr43L.js";import{t as qe}from"./WorkspaceStore-c1j8aQzy.js";import{t as V}from"./Input-BqTp7zeg.js";import{i as Je,n as H,r as Ye,t as Xe}from"./DropdownMenuTrigger-Bj5bdVEL.js";import{t as Ze}from"./DropdownMenuLabel-YBZYog_-.js";import{t as Qe}from"./DropdownMenuSeparator-CI59pXKa.js";import{n as U}from"./button-CftfoJKm.js";import{t as W}from"./Input-CsNoXwRL.js";import{t as $e}from"./Textarea-q89aahN6.js";import{t as G}from"./Card-DJ9SUIXQ.js";import{t as K}from"./Label-Ci10SlF1.js";import{t as q}from"./Checkbox-DyaB0OJb.js";import{t as et}from"./DateField-CmAxNkWw.js";import{a as J,i as Y,n as X,r as Z,t as Q}from"./SelectValue-BiNo_ZDO.js";import{t as tt}from"./marked.esm-nzyc4KJ4.js";import{a as nt,i as rt,n as it,r as at,t as ot}from"./SelectValue-DtBuIz-X.js";const $={DATA:{label:`Short Text`,icon:`Type`,category:`text`,dbType:`VARCHAR(255)`,description:`Single line text input`},TEXT:{label:`Long Text`,icon:`AlignLeft`,category:`text`,dbType:`TEXT`,description:`Multi-line text area`},SMALL_TEXT:{label:`Small Text`,icon:`Text`,category:`text`,dbType:`VARCHAR(500)`,description:`Short multi-line text`},LONG_TEXT:{label:`Rich Text`,icon:`FileText`,category:`text`,dbType:`TEXT`,description:`Long text with larger UI`},INT:{label:`Integer`,icon:`Hash`,category:`number`,dbType:`BIGINT`,description:`Whole number`},FLOAT:{label:`Decimal`,icon:`Calculator`,category:`number`,dbType:`DOUBLE PRECISION`,description:`Decimal number`},CURRENCY:{label:`Currency`,icon:`DollarSign`,category:`number`,dbType:`DECIMAL(19,4)`,description:`Money with 4 decimal places`},PERCENT:{label:`Percent`,icon:`Percent`,category:`number`,dbType:`DECIMAL(5,2)`,description:`Percentage (0-100)`},DATE:{label:`Date`,icon:`Calendar`,category:`datetime`,dbType:`DATE`,description:`Date picker`},DATETIME:{label:`Date & Time`,icon:`CalendarClock`,category:`datetime`,dbType:`TIMESTAMP`,description:`Date and time picker`},TIME:{label:`Time`,icon:`Clock`,category:`datetime`,dbType:`TIME`,description:`Time picker`},DURATION:{label:`Duration`,icon:`Timer`,category:`datetime`,dbType:`BIGINT`,description:`Duration in seconds`},CHECKBOX:{label:`Checkbox`,icon:`CheckSquare`,category:`choice`,dbType:`BOOLEAN`,description:`Yes/No checkbox`},SELECT:{label:`Select`,icon:`List`,category:`choice`,dbType:`VARCHAR(255)`,description:`Single select dropdown`,requiresOptions:!0},MULTI_SELECT:{label:`Multi Select`,icon:`ListChecks`,category:`choice`,dbType:`JSONB`,description:`Multiple selection`},LINK:{label:`Link`,icon:`Link2`,category:`relationship`,dbType:`VARCHAR(255)`,description:`Link to another DocType`,requiresOptions:!0,optionsLabel:`Target DocType`},TABLE:{label:`Table`,icon:`Table`,category:`relationship`,dbType:null,description:`Child table`,requiresOptions:!0,optionsLabel:`Child DocType`},ATTACH:{label:`Attachment`,icon:`Paperclip`,category:`file`,dbType:`VARCHAR(500)`,description:`File attachment`},ATTACH_IMAGE:{label:`Image`,icon:`Image`,category:`file`,dbType:`VARCHAR(500)`,description:`Image attachment`},SIGNATURE:{label:`Signature`,icon:`PenTool`,category:`file`,dbType:`TEXT`,description:`Signature capture`},PHONE:{label:`Phone`,icon:`Phone`,category:`contact`,dbType:`VARCHAR(50)`,description:`Phone number`},EMAIL:{label:`Email`,icon:`Mail`,category:`contact`,dbType:`VARCHAR(255)`,description:`Email address`},COLOR:{label:`Color`,icon:`Palette`,category:`special`,dbType:`VARCHAR(20)`,description:`Hex color picker`},JSON:{label:`JSON`,icon:`Braces`,category:`special`,dbType:`JSONB`,description:`Arbitrary JSON data`},PASSWORD:{label:`Password`,icon:`Lock`,category:`special`,dbType:`VARCHAR(255)`,description:`Masked password input`},READ_ONLY:{label:`Read Only`,icon:`Eye`,category:`special`,dbType:null,description:`Display only, no storage`},HTML:{label:`HTML`,icon:`Code`,category:`special`,dbType:`TEXT`,description:`Rich HTML content`},GEOLOCATION:{label:`Geolocation`,icon:`MapPin`,category:`special`,dbType:`JSONB`,description:`Lat/Lng coordinates`},SECTION_BREAK:{label:`Section Break`,icon:`Minus`,category:`layout`,dbType:null,description:`Section separator`,isLayout:!0},COLUMN_BREAK:{label:`Column Break`,icon:`Columns`,category:`layout`,dbType:null,description:`Column separator`,isLayout:!0},TAB_BREAK:{label:`Tab Break`,icon:`LayoutGrid`,category:`layout`,dbType:null,description:`Tab separator`,isLayout:!0}},st={text:{label:`Text`,icon:`Type`},number:{label:`Number`,icon:`Hash`},datetime:{label:`Date & Time`,icon:`Calendar`},choice:{label:`Choice`,icon:`List`},relationship:{label:`Relationship`,icon:`Link2`},file:{label:`File`,icon:`Paperclip`},contact:{label:`Contact`,icon:`User`},special:{label:`Special`,icon:`Sparkles`},layout:{label:`Layout`,icon:`LayoutGrid`}},ct=[{value:`Accounting`,label:`Accounting`,icon:`BookOpen`,color:`#10B981`},{value:`Billing`,label:`Billing`,icon:`Receipt`,color:`#84CC16`},{value:`Buying`,label:`Buying`,icon:`ShoppingBag`,color:`#EAB308`},{value:`CRM`,label:`CRM`,icon:`Users`,color:`#F97316`},{value:`Sales`,label:`Sales`,icon:`TrendingUp`,color:`#EF4444`},{value:`Stock`,label:`Stock`,icon:`Package`,color:`#EC4899`},{value:`System`,label:`System`,icon:`Settings`,color:`#000000`}],lt=[{value:`AUTO_INCREMENT`,label:`Auto Increment`,description:`Sequential numbers (e.g., 00001, 00002)`},{value:`UUID`,label:`UUID`,description:`Random unique identifier`}],ut={name:``,module:`CRM`,description:``,documentation:``,icon:`File`,color:`#3B82F6`,isChild:!1,isSubmittable:!1,isSingle:!1,trackChanges:!0,hasId:!0,idPrefix:``,idSuffix:``,idMinLength:5,idGenerationStrategy:`AUTO_INCREMENT`,titleField:`name`,searchFields:``,sortField:`created_at`,sortOrder:`DESC`,fields:[]},dt={fieldname:``,label:``,fieldtype:`DATA`,options:``,reqd:!1,is_unique:!1,default_value:``,hidden:!1,read_only:!1,in_list_view:!1,in_filter:!1,search_index:!1,placeholder:``,description:``};function ft(){let e={};for(let[t,n]of Object.entries($))e[n.category]||(e[n.category]=[]),e[n.category].push({type:t,...n});return e}function pt(e){return e.toLowerCase().replace(/[^a-z0-9\s]/g,``).replace(/\s+/g,`_`).substring(0,63)}var mt={class:`flex items-center justify-between mb-4`},ht={key:0,class:`border-2 shadow-md border-gray-200 rounded-lg p-8 text-center`},gt={key:0,class:`text-sm text-gray-400`},_t={key:1,class:`text-sm text-gray-400`},vt={key:1,class:`space-y-2`},yt=[`onClick`],bt={class:`flex-1 min-w-0`},xt={class:`flex items-center gap-2`},St={class:`font-medium truncate`},Ct={key:0,class:`text-red-500 text-xs`},wt={class:`flex items-center gap-2 text-xs text-gray-500`},Tt={class:`bg-gray-100 px-1 rounded`},Et={class:`px-1.5 py-0.5 bg-gray-100 rounded`},Dt={key:0,class:`p-4 border-t bg-gray-50/50 space-y-4`},Ot={class:`grid grid-cols-2 gap-4`},kt={class:`space-y-1.5`},At={class:`space-y-1.5`},jt={key:0,class:`col-span-2 space-y-1.5`},Mt={key:1,class:`space-y-1.5 flex-1`},Nt={key:2,class:`space-y-1.5`},Pt={class:`col-span-2 pt-4 border-t`},Ft={class:`grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-4`},It={class:`col-span-2 space-y-1.5`},Lt={__name:`FieldBuilder`,props:{modelValue:{type:Array,default:()=>[]},availableDocTypes:{type:Array,default:()=>[]},disabled:{type:Boolean,default:!1}},emits:[`update:modelValue`],setup(e,{emit:t}){let n=e,r=t,c=y(null),ee={Type:a,AlignLeft:S,Text:S,Hash:Ne,Calculator:xe,DollarSign:he,Percent:Ce,Calendar:Ie,CalendarClock:F,Clock:de,Timer:oe,CheckSquare:le,List:O,ListChecks:m,Link2:ae,Table:o,Paperclip:Be,Image:i,PenTool:w,Phone:Ge,Mail:ce,Palette:re,Braces:Me,Lock:ge,Eye:_e,Code:se,Minus:I,Columns:x,LayoutGrid:g,MapPin:ie},te={text:`bg-blue-500`,number:`bg-green-500`,datetime:`bg-blue-400`,choice:`bg-orange-500`,relationship:`bg-pink-500`,file:`bg-yellow-500`,contact:`bg-cyan-500`,special:`bg-gray-500`,layout:`bg-slate-400`},ne=[{key:`reqd`,label:`Required`},{key:`in_list_view`,label:`Show in List`},{key:`in_filter`,label:`Filterable`},{key:`search_index`,label:`Indexed`},{key:`is_unique`,label:`Unique`},{key:`hidden`,label:`Hidden`},{key:`read_only`,label:`Read Only`}],f=new WeakMap,ue=0,fe=s(()=>ft()),pe=ne;function me(e){return f.has(e)||f.set(e,`f-${++ue}`),f.get(e)}function ve(e){let t=$[e]?.category;return te[t]||`bg-gray-500`}function T(e){return $[e]||null}function be(e){let t={...dt,fieldtype:e,fieldname:``,label:``};r(`update:modelValue`,[...n.modelValue,t]),c.value=n.modelValue.length}function Se(e){let t=[...n.modelValue];t.splice(e,1),r(`update:modelValue`,t),c.value===e?c.value=null:c.value>e&&c.value--}function we(e,t){let i=e+t;if(i<0||i>=n.modelValue.length)return;let a=[...n.modelValue],[o]=a.splice(e,1);a.splice(i,0,o),r(`update:modelValue`,a),c.value===e?c.value=i:c.value===i&&(c.value=e)}function Te(e){c.value=c.value===e?null:e}function Ee(e){!e.fieldname&&e.label&&(e.fieldname=pt(e.label))}return(t,n)=>(R(),p(b(G),{class:`p-6 bg-white/80`},{default:j(()=>[D(`div`,mt,[n[4]||=D(`div`,null,[D(`h3`,{class:`font-semibold text-lg`},`Fields`),D(`p`,{class:`text-sm text-gray-500`},`Define the data structure for this DocType`)],-1),e.disabled?E(``,!0):(R(),p(b(Je),{key:0},{default:j(()=>[B(b(Xe),{asChild:``},{default:j(()=>[B(b(U),{class:`rounded-full`},{default:j(()=>[B(b(Oe),{class:`w-4 h-4 mr-2`}),n[2]||=_(` Add Field `,-1)]),_:1})]),_:1}),B(b(Ye),{class:`w-56 overflow-y-scroll max-h-[400px]`,style:{"scrollbar-width":`none`}},{default:j(()=>[B(b(Ze),null,{default:j(()=>[...n[3]||=[_(`Field Type`,-1)]]),_:1}),B(b(Qe)),(R(!0),k(v,null,M(fe.value,(e,t)=>(R(),k(v,{key:t},[B(b(Ze),{class:`text-xs text-gray-400 uppercase`},{default:j(()=>[_(C(b(st)[t]?.label||t),1)]),_:2},1024),(R(!0),k(v,null,M(e,e=>(R(),p(b(H),{key:e.type,onClick:t=>be(e.type)},{default:j(()=>[(R(),p(N(ee[e.icon]),{class:`w-4 h-4 mr-2`})),_(` `+C(e.label),1)]),_:2},1032,[`onClick`]))),128)),B(b(Qe))],64))),128))]),_:1})]),_:1}))]),e.modelValue.length===0?(R(),k(`div`,ht,[B(b(O),{class:`w-12 h-12 mx-auto text-gray-300 mb-3`}),n[5]||=D(`p`,{class:`text-gray-500`},`No fields defined yet`,-1),e.disabled?(R(),k(`p`,_t,`This DocType has no fields and is read-only.`)):(R(),k(`p`,gt,`Click "Add Field" to start building your DocType`))])):(R(),k(`div`,vt,[(R(!0),k(v,null,M(e.modelValue,(t,r)=>(R(),k(`div`,{key:me(t),class:u([`border border-gray-200 rounded-lg bg-white transition-all overflow-hidden`,{"ring-2 ring-blue-500 shadow-md scale-[1.01] z-10":c.value===r}])},[D(`div`,{class:`flex items-center gap-3 p-3 cursor-pointer hover:bg-gray-50`,onClick:e=>Te(r)},[D(`div`,{class:`cursor-grab text-gray-400 hover:text-gray-600`,onMousedown:n[0]||=d(()=>{},[`stop`])},[B(b(P),{class:`w-4 h-4`})],32),D(`div`,{class:u([`w-8 h-8 rounded flex items-center justify-center transition-colors`,ve(t.fieldtype)])},[(R(),p(N(ee[b($)[t.fieldtype]?.icon||`Type`]),{class:`w-4 h-4 text-white`}))],2),D(`div`,bt,[D(`div`,xt,[D(`span`,St,C(t.label||`Untitled Field`),1),t.reqd?(R(),k(`span`,Ct,`*`)):E(``,!0)]),D(`div`,wt,[D(`code`,Tt,C(t.fieldname||`...`),1),D(`span`,Et,C(b($)[t.fieldtype]?.label||t.fieldtype),1)])]),e.disabled?E(``,!0):(R(),k(`div`,{key:0,class:`flex items-center gap-1`,onClick:n[1]||=d(()=>{},[`stop`])},[B(b(U),{variant:`ghost`,size:`sm`,onClick:e=>we(r,-1),disabled:r===0,class:`h-8 w-8 p-0`},{default:j(()=>[B(b(h),{class:`w-4 h-4`})]),_:1},8,[`onClick`,`disabled`]),B(b(U),{variant:`ghost`,size:`sm`,onClick:e=>we(r,1),disabled:r===e.modelValue.length-1,class:`h-8 w-8 p-0`},{default:j(()=>[B(b(A),{class:`w-4 h-4`})]),_:1},8,[`onClick`,`disabled`]),B(b(U),{variant:`ghost`,size:`sm`,class:`text-red-500 hover:text-red-600 hover:bg-red-50 h-8 w-8 p-0`,onClick:e=>Se(r)},{default:j(()=>[B(b(l),{class:`w-4 h-4`})]),_:1},8,[`onClick`])])),B(b(ye),{class:u([`w-4 h-4 text-gray-400 transition-transform`,{"rotate-90":c.value===r}])},null,8,[`class`])],8,yt),c.value===r?(R(),k(`div`,Dt,[D(`div`,Ot,[D(`div`,kt,[B(b(K),null,{default:j(()=>[...n[6]||=[_(`Label *`,-1)]]),_:1}),B(b(W),{modelValue:t.label,"onUpdate:modelValue":e=>t.label=e,placeholder:`Display label`,onInput:e=>Ee(t),disabled:e.disabled},null,8,[`modelValue`,`onUpdate:modelValue`,`onInput`,`disabled`])]),D(`div`,At,[B(b(K),null,{default:j(()=>[...n[7]||=[_(`Field Name *`,-1)]]),_:1}),B(b(W),{modelValue:t.fieldname,"onUpdate:modelValue":e=>t.fieldname=e,placeholder:`database_column_name`,class:`font-mono text-sm`},null,8,[`modelValue`,`onUpdate:modelValue`]),n[8]||=D(`p`,{class:`text-xs text-gray-400`},`Lowercase with underscores`,-1)]),T(t.fieldtype)?(R(),k(v,{key:0},[T(t.fieldtype)?.requiresOptions?(R(),k(`div`,jt,[B(b(K),null,{default:j(()=>[_(C(T(t.fieldtype)?.optionsLabel||`Options`)+` *`,1)]),_:2},1024),[`SELECT`,`MULTI_SELECT`].includes(t.fieldtype)?(R(),p(b($e),{key:0,modelValue:t.options,"onUpdate:modelValue":e=>t.options=e,placeholder:`Option 1
Option 2
Option 3`,class:`font-mono text-sm`,rows:`3`},null,8,[`modelValue`,`onUpdate:modelValue`])):(R(),p(b(nt),{key:1,modelValue:t.options,"onUpdate:modelValue":e=>t.options=e,disabled:e.disabled},{default:j(()=>[B(b(it),{class:`bg-white`},{default:j(()=>[B(b(ot),{placeholder:`Select DocType`})]),_:1}),B(b(rt),null,{default:j(()=>[(R(!0),k(v,null,M(e.availableDocTypes,e=>(R(),p(b(at),{key:e,value:e},{default:j(()=>[_(C(e),1)]),_:2},1032,[`value`]))),128))]),_:1})]),_:1},8,[`modelValue`,`onUpdate:modelValue`,`disabled`]))])):E(``,!0),T(t.fieldtype)?.isLayout?E(``,!0):(R(),k(`div`,Mt,[B(b(K),null,{default:j(()=>[...n[9]||=[_(`Default Value`,-1)]]),_:1}),t.fieldtype===`DATE`?(R(),p(et,{key:0,modelValue:t.default_value,"onUpdate:modelValue":e=>t.default_value=e,placeholder:`Pick default date`,disabled:e.disabled},null,8,[`modelValue`,`onUpdate:modelValue`,`disabled`])):(R(),p(b(W),{key:1,modelValue:t.default_value,"onUpdate:modelValue":e=>t.default_value=e,placeholder:`Default value`,disabled:e.disabled},null,8,[`modelValue`,`onUpdate:modelValue`,`disabled`]))])),[`DATA`,`TEXT`,`SMALL_TEXT`,`LONG_TEXT`,`PHONE`,`EMAIL`].includes(t.fieldtype)?(R(),k(`div`,Nt,[B(b(K),null,{default:j(()=>[...n[10]||=[_(`Placeholder`,-1)]]),_:1}),B(b(W),{modelValue:t.placeholder,"onUpdate:modelValue":e=>t.placeholder=e,placeholder:`Placeholder text`,disabled:e.disabled},null,8,[`modelValue`,`onUpdate:modelValue`,`disabled`])])):E(``,!0)],64)):E(``,!0),D(`div`,Pt,[D(`div`,Ft,[(R(!0),k(v,null,M(b(pe),n=>(R(),k(`div`,{key:n.key,class:`flex items-center space-x-2`},[B(b(q),{checked:t[n.key],"onUpdate:checked":e=>t[n.key]=e,disabled:e.disabled},null,8,[`checked`,`onUpdate:checked`,`disabled`]),B(b(K),{class:`text-sm font-normal cursor-pointer`},{default:j(()=>[_(C(n.label),1)]),_:2},1024)]))),128))])]),D(`div`,It,[B(b(K),null,{default:j(()=>[...n[11]||=[_(`Help Text`,-1)]]),_:1}),B(b(W),{modelValue:t.description,"onUpdate:modelValue":e=>t.description=e,placeholder:`Help text shown below the field`,disabled:e.disabled},null,8,[`modelValue`,`onUpdate:modelValue`,`disabled`])])])])):E(``,!0)],2))),128))]))]),_:1}))}},Rt={class:`h-full flex flex-col bg-[radial-gradient(ellipse_at_top,_var(--tw-gradient-stops))] to-slate-100/50 from-stone-100/60 from-5%`},zt={class:`flex-none px-6 py-4 bg-white border-b border-gray-200 flex items-center justify-between sticky top-0 z-10`},Bt={class:`flex items-center space-x-4`},Vt={class:`text-xl font-bold text-gray-900 mt-1`},Ht={class:`flex items-center space-x-3`},Ut={key:0,class:`flex-none px-6 py-2 bg-slate-50 border-b border-slate-200 flex items-center justify-center gap-2 text-slate-600 text-sm font-medium`},Wt={key:1,class:`flex-none px-6 py-2 bg-amber-50 border-b border-amber-100 flex items-center justify-center gap-2 text-amber-800 text-sm font-medium`},Gt={class:`flex-1 overflow-hidden flex`},Kt={class:`flex-1 overflow-auto p-6`},qt={key:0,class:`flex justify-center items-center h-64`},Jt={key:1,class:`max-w-4xl mx-auto space-y-6`},Yt={class:`flex justify-center mb-8`},Xt={class:`grid grid-cols-2 gap-6`},Zt={class:`col-span-2 md:col-span-1`},Qt={class:`col-span-2 md:col-span-1`},$t={key:0,class:`text-xs text-amber-600 mt-1`},en={class:`col-span-2`},tn={key:0,class:`flex items-center gap-2`},nn={class:`flex items-center gap-2`},rn={class:`flex items-center gap-2 mt-1.5`},an=[`disabled`],on={class:`col-span-2 pt-4 border-t`},sn={class:`grid grid-cols-2 md:grid-cols-4 gap-4 mt-3`},cn={class:`flex items-center space-x-2`},ln={class:`flex items-center space-x-2`},un={class:`flex items-center space-x-2`},dn={key:0,class:`col-span-2`},fn={class:`space-y-6`},pn={class:`flex items-center space-x-2`},mn={key:0,class:`grid grid-cols-2 gap-6 pt-4 border-t`},hn={class:`col-span-2 p-4 bg-gray-50 rounded-lg`},gn={class:`font-mono text-lg mt-1`},_n={class:`grid grid-cols-2 gap-6`},vn={class:`space-y-6`},yn={class:`flex items-center space-x-2`},bn={key:0,class:`pt-4 border-t space-y-4`},xn={class:`p-4 bg-blue-50 rounded-lg`},Sn={class:`flex items-center gap-2 mt-2 text-sm`},Cn={class:`space-y-4`},wn={class:`flex items-center gap-2`},Tn={key:0},En=[`innerHTML`],Dn={key:0,class:`w-96 border-l bg-gray-900 text-gray-100 overflow-auto`},On={class:`p-4 border-b border-gray-700 flex items-center justify-between`},kn={class:`p-4 text-xs overflow-auto`},An={key:1,class:`w-96 border-l bg-white overflow-auto`},jn={class:`p-4 border-b border-gray-200 flex items-center justify-between`},Mn={class:`flex items-center gap-2`},Nn={class:`p-4`},Pn=[`innerHTML`],Fn={key:1,class:`text-center py-8`},In={__name:`DocTypeEditor`,props:{doctype:{type:String,default:`DocType`},name:{type:String,default:null},isNew:{type:Boolean,default:!0}},setup(a){let l=a;Fe();let d=be().toast,m=qe(),oe=y(!1),h=y(!1),g=y({...ut}),x=y(`general`),S=y(!1),w=y(!1),ye=y([]),A=y(!1),xe=s(()=>{if(!g.value.documentation)return`<p class="text-gray-400 italic">No documentation yet.</p>`;let e=tt.parse(g.value.documentation);return Ke.sanitize(e)}),Oe={FileCode:Ue,FileText:Pe,Users:ee,Package:ne,Receipt:Ee,Box:ze,Store:f,Truck:fe,BookOpen:z,Bell:De,Mail:ce,Lock:ge,File:Te,Folder:Re,Calendar:Ie,Clock:de,DollarSign:he,Percent:Ce,CheckSquare:le,Link2:ae,Table:o,Paperclip:Be,Image:i,Phone:Ge,Palette:re,Code:se,MapPin:ie,Settings:Le,List:O,Hash:Ne,Layout:T,GitBranch:je},ke=`FileText.Users.Package.Receipt.Box.Store.Truck.BookOpen.Bell.Mail.Lock.File.Folder.Calendar.Clock.DollarSign.Percent.CheckSquare.Link2.Table.Paperclip.Image.Phone.Palette.Code.MapPin.Settings`.split(`.`),P=s(()=>g.value.module===`System`),F=s(()=>g.value.organisation!==null&&g.value.organisation!==void 0),I=s(()=>P.value&&!F.value&&!l.isNew),Me=s(()=>ct.filter(e=>e.value!==`System`||g.value.module===`System`)),Ze=s(()=>(g.value.fields||[]).filter(e=>![`SECTION_BREAK`,`COLUMN_BREAK`,`TAB_BREAK`,`TABLE`].includes(e.fieldtype))),W=s(()=>{let e=g.value.idPrefix||``,t=g.value.idSuffix||``,n=g.value.idMinLength||5,r=g.value.idGenerationStrategy===`UUID`?`a1b2c3d4`:`1`.padStart(n,`0`);return`${e}${r}${t}`}),et=s(()=>{let e={...g.value};return e.tableName||delete e.tableName,e.parentDocType||delete e.parentDocType,e.idPrefix||delete e.idPrefix,e.idSuffix||delete e.idSuffix,JSON.stringify(e,null,2)});async function nt(){if(l.isNew){let e=m.openTabs.find(e=>e.id===m.activeTabId);e?.data&&(g.value={...ut,...e.data});return}try{let e=await L.get(`/org/doctypes/${encodeURIComponent(l.name)}`,{authorizeRequest:!0,organisationAware:!0}),t=e?.data||e;g.value={...ut,...t,fields:t.fields||[]}}catch{d({message:`Failed to load DocType`,variant:`error`})}finally{oe.value=!1}}async function rt(){try{ye.value=((await L.get(`/org/doctypes`,{authorizeRequest:!0,organisationAware:!0}))?.data||[]).filter(e=>!e.is_child).map(e=>e.name)}catch(e){console.warn(`Failed to load DocTypes:`,e)}}async function it(){if(!g.value.name?.trim()){d({message:`DocType name is required`,variant:`error`}),x.value=`general`;return}if(!g.value.module){d({message:`Module is required`,variant:`error`}),x.value=`general`;return}h.value=!0;try{let e={name:g.value.name,module:g.value.module,description:g.value.description,icon:g.value.icon,color:g.value.color,is_child:g.value.isChild,parent_doctype:g.value.parentDocType,is_submittable:g.value.isSubmittable,is_single:g.value.isSingle,track_changes:g.value.trackChanges,has_id:g.value.hasId,id_prefix:g.value.idPrefix,id_suffix:g.value.idSuffix,id_min_length:g.value.idMinLength,id_generation_strategy:g.value.idGenerationStrategy,title_field:g.value.titleField,search_fields:g.value.searchFields,sort_field:g.value.sortField,sort_order:g.value.sortOrder,documentation:g.value.documentation,fields:g.value.fields.map((e,t)=>({...e,idx:t}))};await L.post(`/org/doctypes`,{data:e,authorizeRequest:!0,organisationAware:!0}),l.isNew?(d({message:`DocType "${g.value.name}" created successfully`,variant:`success`}),m.closeTab(`doctype-form-DocType-new`),m.openTab({id:`doctype-${g.value.name.toLowerCase().replace(/\s+/g,`-`)}`,title:g.value.name,icon:g.value.icon||`FileText`,type:`doctype`,doctype:g.value.name,closable:!0})):(d({message:`DocType "${g.value.name}" updated`,variant:`success`}),nt())}catch{d({message:`Failed to save DocType`,variant:`error`})}finally{h.value=!1}}async function at(){let e=JSON.parse(JSON.stringify(g.value.fields)),t=g.value.module===`System`?`CRM`:g.value.module;m.openTab({id:`doctype-form-DocType-new-${Date.now()}`,title:`New DocType (Copy)`,icon:g.value.icon||`FileCode`,type:`doctype-form`,doctype:`DocType`,isNew:!0,closable:!0,data:{...g.value,name:`${g.value.name} Copy`,module:t,fields:e}})}function ot(){S.value=!S.value,S.value&&(w.value=!1)}function $(){w.value=!w.value,w.value&&(S.value=!1)}async function st(){try{await navigator.clipboard.writeText(et.value),d({message:`JSON copied to clipboard`,variant:`success`})}catch{d({message:`Failed to copy`,variant:`error`})}}async function dt(){if(confirm(`Are you sure you want to reset this DocType to its system default? All your customizations will be lost.`))try{await L.delete(`/org/doctypes/${encodeURIComponent(l.name)}`,{authorizeRequest:!0,organisationAware:!0}),d({message:`DocType reset to default`,variant:`success`}),nt()}catch{d({message:`Failed to reset DocType`,variant:`error`})}}return Ae(()=>{nt(),rt()}),(i,o)=>(R(),k(`div`,Rt,[D(`header`,zt,[D(`div`,Bt,[D(`div`,{class:`w-10 h-10 rounded-xl flex items-center justify-center`,style:ue({backgroundColor:g.value.color||`#6366F1`})},[(R(),p(N(Oe[g.value.icon]||b(Ue)),{class:`w-5 h-5 text-white`}))],4),D(`div`,null,[o[26]||=D(`span`,{class:`text-xs text-gray-500 uppercase tracking-wide`},`DocType Builder`,-1),D(`h1`,Vt,C(a.isNew?`New DocType`:g.value.name),1)])]),D(`div`,Ht,[F.value?(R(),p(b(U),{key:0,variant:`outline`,class:`rounded-full`,onClick:dt},{default:j(()=>[B(b(we),{class:`w-4 h-4 mr-2`}),o[27]||=_(` Reset to Default `,-1)]),_:1})):E(``,!0),B(b(Je),null,{default:j(()=>[B(b(Xe),{asChild:``},{default:j(()=>[B(b(U),{variant:`outline`,class:`rounded-full w-9 h-9 p-0`},{default:j(()=>[B(b(ve),{class:`w-4 h-4`})]),_:1})]),_:1}),B(b(Ye),{align:`end`},{default:j(()=>[B(b(H),{onClick:ot},{default:j(()=>[S.value?(R(),p(b(te),{key:1,class:`w-4 h-4 mr-2`})):(R(),p(b(_e),{key:0,class:`w-4 h-4 mr-2`})),_(` `+C(S.value?`Hide JSON Preview`:`Show JSON Preview`),1)]),_:1}),B(b(H),{onClick:$},{default:j(()=>[B(b(z),{class:`w-4 h-4 mr-2`}),_(` `+C(w.value?`Hide Documentation`:`Show Documentation`),1)]),_:1}),!a.isNew&&!P.value?(R(),p(b(Qe),{key:0})):E(``,!0),!a.isNew&&!P.value?(R(),p(b(H),{key:1,onClick:at},{default:j(()=>[B(b(me),{class:`w-4 h-4 mr-2`}),o[28]||=_(` Duplicate DocType `,-1)]),_:1})):E(``,!0)]),_:1})]),_:1}),!I.value||a.isNew?(R(),p(b(U),{key:1,onClick:it,disabled:h.value,class:`rounded-full`},{default:j(()=>[h.value?(R(),p(b(c),{key:0,class:`w-4 h-4 animate-spin mr-2`})):E(``,!0),_(` `+C(a.isNew?`Create DocType`:`Save Changes`),1)]),_:1},8,[`disabled`])):E(``,!0)])]),P.value&&!F.value&&!a.isNew?(R(),k(`div`,Ut,[B(b(ge),{class:`w-4 h-4`}),o[29]||=_(` System DocType. This definition is read-only and managed by the platform. `,-1)])):E(``,!0),F.value?(R(),k(`div`,Wt,[B(b(He),{class:`w-4 h-4`}),o[30]||=_(` Active Override. You are using a customized version of this DocType. `,-1)])):E(``,!0),D(`div`,Gt,[D(`div`,Kt,[oe.value?(R(),k(`div`,qt,[...o[31]||=[D(`div`,{class:`animate-spin rounded-full h-8 w-8 border-b-2 border-black`},null,-1)]])):(R(),k(`div`,Jt,[B(b(e),{modelValue:x.value,"onUpdate:modelValue":o[24]||=e=>x.value=e,class:`w-full`},{default:j(()=>[D(`div`,Yt,[B(b(n),{class:`rounded-full bg-stone-50/80 flex w-fit shadow-sm border border-slate-200/50 px-0 py-0`},{default:j(()=>[B(b(r),{value:`general`,class:`px-6 py-1.5 rounded-full data-[state=active]:bg-white data-[state=active]:text-slate-900 data-[state=active]:shadow-sm transition-all duration-200`},{default:j(()=>[B(b(Le),{class:`w-4 h-4 mr-2`}),o[32]||=_(` General `,-1)]),_:1}),B(b(r),{value:`fields`,class:`px-6 py-1.5 rounded-full data-[state=active]:bg-white data-[state=active]:text-slate-900 data-[state=active]:shadow-sm transition-all duration-200`},{default:j(()=>[B(b(O),{class:`w-4 h-4 mr-2`}),o[33]||=_(` Fields `,-1)]),_:1}),B(b(r),{value:`naming`,class:`px-6 py-1.5 rounded-full data-[state=active]:bg-white data-[state=active]:text-slate-900 data-[state=active]:shadow-sm transition-all duration-200`},{default:j(()=>[B(b(Ne),{class:`w-4 h-4 mr-2`}),o[34]||=_(` ID Config `,-1)]),_:1}),B(b(r),{value:`display`,class:`px-6 py-1.5 rounded-full data-[state=active]:bg-white data-[state=active]:text-slate-900 data-[state=active]:shadow-sm transition-all duration-200`},{default:j(()=>[B(b(T),{class:`w-4 h-4 mr-2`}),o[35]||=_(` Display `,-1)]),_:1}),B(b(r),{value:`workflow`,class:`px-6 py-1.5 rounded-full data-[state=active]:bg-white data-[state=active]:text-slate-900 data-[state=active]:shadow-sm transition-all duration-200`},{default:j(()=>[B(b(je),{class:`w-4 h-4 mr-2`}),o[36]||=_(` Workflow `,-1)]),_:1}),B(b(r),{value:`documentation`,class:`px-6 py-1.5 rounded-full data-[state=active]:bg-white data-[state=active]:text-slate-900 data-[state=active]:shadow-sm transition-all duration-200`},{default:j(()=>[B(b(z),{class:`w-4 h-4 mr-2`}),o[37]||=_(` Documentation `,-1)]),_:1})]),_:1})]),B(b(t),{value:`general`,class:`mt-6`},{default:j(()=>[B(b(G),{class:`p-6 bg-white/80`},{default:j(()=>[D(`div`,Xt,[D(`div`,Zt,[B(b(K),{for:`name`},{default:j(()=>[...o[38]||=[_(`DocType Name *`,-1)]]),_:1}),B(b(V),{id:`name`,modelValue:g.value.name,"onUpdate:modelValue":o[0]||=e=>g.value.name=e,placeholder:`e.g., Customer, Invoice`,class:`mt-1.5`,disabled:!a.isNew||I.value},null,8,[`modelValue`,`disabled`]),o[39]||=D(`p`,{class:`text-xs text-gray-500 mt-1`},`Unique identifier. Cannot be changed after creation.`,-1)]),D(`div`,Qt,[B(b(K),{for:`module`},{default:j(()=>[...o[40]||=[_(`Module *`,-1)]]),_:1}),B(b(J),{modelValue:g.value.module,"onUpdate:modelValue":o[1]||=e=>g.value.module=e,disabled:I.value},{default:j(()=>[B(b(X),{class:`mt-1.5 bg-white`},{default:j(()=>[B(b(Q),{placeholder:`Select module`})]),_:1}),B(b(Y),null,{default:j(()=>[(R(!0),k(v,null,M(Me.value,e=>(R(),p(b(Z),{key:e.value,value:e.value},{default:j(()=>[_(C(e.label),1)]),_:2},1032,[`value`]))),128))]),_:1})]),_:1},8,[`modelValue`,`disabled`]),g.value.module===`System`&&a.isNew?(R(),k(`p`,$t,` Warning: DocTypes in the "System" module become immutable after creation. `)):E(``,!0)]),D(`div`,en,[B(b(K),{for:`description`},{default:j(()=>[...o[41]||=[_(`Description`,-1)]]),_:1}),B(b($e),{id:`description`,modelValue:g.value.description,"onUpdate:modelValue":o[2]||=e=>g.value.description=e,placeholder:`Brief description of this DocType`,class:`mt-1.5`,rows:`2`,disabled:I.value},null,8,[`modelValue`,`disabled`])]),D(`div`,null,[B(b(K),{for:`icon`},{default:j(()=>[...o[42]||=[_(`Icon`,-1)]]),_:1}),B(b(J),{modelValue:g.value.icon,"onUpdate:modelValue":o[3]||=e=>g.value.icon=e,disabled:I.value},{default:j(()=>[B(b(X),{class:`mt-1.5 bg-white`},{default:j(()=>[B(b(Q),{placeholder:`Select icon`},{default:j(()=>[g.value.icon?(R(),k(`div`,tn,[(R(),p(N(Oe[g.value.icon]),{class:`w-4 h-4`})),_(` `+C(g.value.icon),1)])):E(``,!0)]),_:1})]),_:1}),B(b(Y),{class:`max-h-60`},{default:j(()=>[(R(),k(v,null,M(ke,e=>B(b(Z),{key:e,value:e},{default:j(()=>[D(`div`,nn,[(R(),p(N(Oe[e]),{class:`w-4 h-4`})),_(` `+C(e),1)])]),_:2},1032,[`value`])),64))]),_:1})]),_:1},8,[`modelValue`,`disabled`])]),D(`div`,null,[B(b(K),{for:`color`},{default:j(()=>[...o[43]||=[_(`Color`,-1)]]),_:1}),D(`div`,rn,[Ve(D(`input`,{type:`color`,"onUpdate:modelValue":o[4]||=e=>g.value.color=e,class:`w-10 h-10 rounded border cursor-pointer`,disabled:I.value},null,8,an),[[pe,g.value.color]]),B(b(V),{modelValue:g.value.color,"onUpdate:modelValue":o[5]||=e=>g.value.color=e,placeholder:`#3B82F6`,class:`flex-1`,disabled:I.value},null,8,[`modelValue`,`disabled`])])]),D(`div`,on,[B(b(K),{class:`text-base font-semibold`},{default:j(()=>[...o[44]||=[_(`Behavior`,-1)]]),_:1}),D(`div`,sn,[D(`div`,cn,[B(b(q),{id:`isChild`,checked:g.value.isChild,"onUpdate:checked":o[6]||=e=>g.value.isChild=e,disabled:I.value},null,8,[`checked`,`disabled`]),B(b(K),{for:`isChild`,class:`text-sm`},{default:j(()=>[...o[45]||=[_(`Child Table`,-1)]]),_:1})]),D(`div`,ln,[B(b(q),{id:`isSingle`,checked:g.value.isSingle,"onUpdate:checked":o[7]||=e=>g.value.isSingle=e,disabled:I.value},null,8,[`checked`,`disabled`]),B(b(K),{for:`isSingle`,class:`text-sm`},{default:j(()=>[...o[46]||=[_(`Single Record`,-1)]]),_:1})]),D(`div`,un,[B(b(q),{id:`trackChanges`,checked:g.value.trackChanges,"onUpdate:checked":o[8]||=e=>g.value.trackChanges=e,disabled:I.value},null,8,[`checked`,`disabled`]),B(b(K),{for:`trackChanges`,class:`text-sm`},{default:j(()=>[...o[47]||=[_(`Track Changes`,-1)]]),_:1})])])]),g.value.isChild?(R(),k(`div`,dn,[B(b(K),{for:`parentDocType`},{default:j(()=>[...o[48]||=[_(`Parent DocType *`,-1)]]),_:1}),B(b(J),{modelValue:g.value.parentDocType,"onUpdate:modelValue":o[9]||=e=>g.value.parentDocType=e,disabled:I.value},{default:j(()=>[B(b(X),{class:`mt-1.5 bg-white`},{default:j(()=>[B(b(Q),{placeholder:`Select parent DocType`})]),_:1}),B(b(Y),null,{default:j(()=>[(R(!0),k(v,null,M(ye.value,e=>(R(),p(b(Z),{key:e,value:e},{default:j(()=>[_(C(e),1)]),_:2},1032,[`value`]))),128))]),_:1})]),_:1},8,[`modelValue`,`disabled`])])):E(``,!0)])]),_:1})]),_:1}),B(b(t),{value:`fields`,class:`mt-6`},{default:j(()=>[B(Lt,{modelValue:g.value.fields,"onUpdate:modelValue":o[10]||=e=>g.value.fields=e,availableDocTypes:ye.value,disabled:I.value},null,8,[`modelValue`,`availableDocTypes`,`disabled`])]),_:1}),B(b(t),{value:`naming`,class:`mt-6`},{default:j(()=>[B(b(G),{class:`p-6 bg-white/80`},{default:j(()=>[D(`div`,fn,[D(`div`,pn,[B(b(q),{id:`hasId`,checked:g.value.hasId,"onUpdate:checked":o[11]||=e=>g.value.hasId=e,disabled:I.value},null,8,[`checked`,`disabled`]),B(b(K),{for:`hasId`},{default:j(()=>[...o[49]||=[_(`Generate Human-Readable ID`,-1)]]),_:1})]),g.value.hasId?(R(),k(`div`,mn,[D(`div`,null,[B(b(K),{for:`idPrefix`},{default:j(()=>[...o[50]||=[_(`ID Prefix`,-1)]]),_:1}),B(b(V),{id:`idPrefix`,modelValue:g.value.idPrefix,"onUpdate:modelValue":o[12]||=e=>g.value.idPrefix=e,placeholder:`e.g., INV-, CUST-`,class:`mt-1.5`,disabled:I.value},null,8,[`modelValue`,`disabled`])]),D(`div`,null,[B(b(K),{for:`idSuffix`},{default:j(()=>[...o[51]||=[_(`ID Suffix`,-1)]]),_:1}),B(b(V),{id:`idSuffix`,modelValue:g.value.idSuffix,"onUpdate:modelValue":o[13]||=e=>g.value.idSuffix=e,placeholder:`e.g., -2024`,class:`mt-1.5`,disabled:I.value},null,8,[`modelValue`,`disabled`])]),D(`div`,null,[B(b(K),{for:`idMinLength`},{default:j(()=>[...o[52]||=[_(`Padding Length`,-1)]]),_:1}),B(b(V),{id:`idMinLength`,modelValue:g.value.idMinLength,"onUpdate:modelValue":o[14]||=e=>g.value.idMinLength=e,modelModifiers:{number:!0},type:`number`,min:`0`,max:`20`,class:`mt-1.5`,disabled:I.value},null,8,[`modelValue`,`disabled`]),o[53]||=D(`p`,{class:`text-xs text-gray-500 mt-1`},`Zero-pad numbers to this length (e.g., 5 → 00001)`,-1)]),D(`div`,null,[B(b(K),{for:`idGenerationStrategy`},{default:j(()=>[...o[54]||=[_(`Generation Strategy`,-1)]]),_:1}),B(b(J),{modelValue:g.value.idGenerationStrategy,"onUpdate:modelValue":o[15]||=e=>g.value.idGenerationStrategy=e,disabled:I.value},{default:j(()=>[B(b(X),{class:`mt-1.5 bg-white`},{default:j(()=>[B(b(Q))]),_:1}),B(b(Y),null,{default:j(()=>[(R(!0),k(v,null,M(b(lt),e=>(R(),p(b(Z),{key:e.value,value:e.value},{default:j(()=>[_(C(e.label),1)]),_:2},1032,[`value`]))),128))]),_:1})]),_:1},8,[`modelValue`,`disabled`])]),D(`div`,hn,[B(b(K),{class:`text-sm text-gray-600`},{default:j(()=>[...o[55]||=[_(`Preview`,-1)]]),_:1}),D(`p`,gn,C(W.value),1)])])):E(``,!0)])]),_:1})]),_:1}),B(b(t),{value:`display`,class:`mt-6`},{default:j(()=>[B(b(G),{class:`p-6 bg-white/80`},{default:j(()=>[D(`div`,_n,[D(`div`,null,[B(b(K),{for:`titleField`},{default:j(()=>[...o[56]||=[_(`Title Field`,-1)]]),_:1}),B(b(J),{modelValue:g.value.titleField,"onUpdate:modelValue":o[16]||=e=>g.value.titleField=e,disabled:I.value},{default:j(()=>[B(b(X),{class:`mt-1.5 bg-white`},{default:j(()=>[B(b(Q),{placeholder:`Select field for title`})]),_:1}),B(b(Y),null,{default:j(()=>[B(b(Z),{value:`name`},{default:j(()=>[...o[57]||=[_(`name (default)`,-1)]]),_:1}),(R(!0),k(v,null,M(Ze.value,e=>(R(),p(b(Z),{key:e.fieldname,value:e.fieldname},{default:j(()=>[_(C(e.label)+` (`+C(e.fieldname)+`) `,1)]),_:2},1032,[`value`]))),128))]),_:1})]),_:1},8,[`modelValue`,`disabled`]),o[58]||=D(`p`,{class:`text-xs text-gray-500 mt-1`},`Field displayed as the document title`,-1)]),D(`div`,null,[B(b(K),{for:`searchFields`},{default:j(()=>[...o[59]||=[_(`Search Fields`,-1)]]),_:1}),B(b(V),{id:`searchFields`,modelValue:g.value.searchFields,"onUpdate:modelValue":o[17]||=e=>g.value.searchFields=e,placeholder:`e.g., name,email,phone`,class:`mt-1.5`,disabled:I.value},null,8,[`modelValue`,`disabled`]),o[60]||=D(`p`,{class:`text-xs text-gray-500 mt-1`},`Comma-separated field names for search`,-1)]),D(`div`,null,[B(b(K),{for:`sortField`},{default:j(()=>[...o[61]||=[_(`Default Sort Field`,-1)]]),_:1}),B(b(J),{modelValue:g.value.sortField,"onUpdate:modelValue":o[18]||=e=>g.value.sortField=e,disabled:I.value},{default:j(()=>[B(b(X),{class:`mt-1.5 bg-white`},{default:j(()=>[B(b(Q),{placeholder:`Select sort field`})]),_:1}),B(b(Y),null,{default:j(()=>[B(b(Z),{value:`created_at`},{default:j(()=>[...o[62]||=[_(`Created At`,-1)]]),_:1}),B(b(Z),{value:`updated_at`},{default:j(()=>[...o[63]||=[_(`Updated At`,-1)]]),_:1}),B(b(Z),{value:`name`},{default:j(()=>[...o[64]||=[_(`Name`,-1)]]),_:1}),(R(!0),k(v,null,M(Ze.value,e=>(R(),p(b(Z),{key:e.fieldname,value:e.fieldname},{default:j(()=>[_(C(e.label)+` (`+C(e.fieldname)+`) `,1)]),_:2},1032,[`value`]))),128))]),_:1})]),_:1},8,[`modelValue`,`disabled`])]),D(`div`,null,[B(b(K),{for:`sortOrder`},{default:j(()=>[...o[65]||=[_(`Sort Order`,-1)]]),_:1}),B(b(J),{modelValue:g.value.sortOrder,"onUpdate:modelValue":o[19]||=e=>g.value.sortOrder=e,disabled:I.value},{default:j(()=>[B(b(X),{class:`mt-1.5 bg-white`},{default:j(()=>[B(b(Q))]),_:1}),B(b(Y),null,{default:j(()=>[B(b(Z),{value:`DESC`},{default:j(()=>[...o[66]||=[_(`Descending (newest first)`,-1)]]),_:1}),B(b(Z),{value:`ASC`},{default:j(()=>[...o[67]||=[_(`Ascending (oldest first)`,-1)]]),_:1})]),_:1})]),_:1},8,[`modelValue`,`disabled`])])])]),_:1})]),_:1}),B(b(t),{value:`workflow`,class:`mt-6`},{default:j(()=>[B(b(G),{class:`p-6 bg-white/80`},{default:j(()=>[D(`div`,vn,[D(`div`,yn,[B(b(q),{id:`isSubmittable`,checked:g.value.isSubmittable,"onUpdate:checked":o[20]||=e=>g.value.isSubmittable=e,disabled:I.value},null,8,[`checked`,`disabled`]),B(b(K),{for:`isSubmittable`,class:`text-base`},{default:j(()=>[...o[68]||=[_(`Enable Submission Workflow`,-1)]]),_:1})]),o[73]||=D(`p`,{class:`text-sm text-gray-600`},` When enabled, documents follow a Draft → Submitted → Cancelled lifecycle. Submitted documents cannot be edited. `,-1),g.value.isSubmittable?(R(),k(`div`,bn,[D(`div`,xn,[o[72]||=D(`h4`,{class:`font-medium text-blue-900`},`Workflow States`,-1),D(`div`,Sn,[o[69]||=D(`span`,{class:`px-2 py-1 bg-gray-200 rounded`},`Draft (0)`,-1),B(b(We),{class:`w-4 h-4 text-gray-400`}),o[70]||=D(`span`,{class:`px-2 py-1 bg-green-200 rounded`},`Submitted (1)`,-1),B(b(We),{class:`w-4 h-4 text-gray-400`}),o[71]||=D(`span`,{class:`px-2 py-1 bg-red-200 rounded`},`Cancelled (2)`,-1)])])])):E(``,!0)])]),_:1})]),_:1}),B(b(t),{value:`documentation`,class:`mt-6`},{default:j(()=>[B(b(G),{class:`p-6 bg-white/80`},{default:j(()=>[D(`div`,Cn,[D(`div`,wn,[D(`button`,{onClick:o[21]||=e=>A.value=!1,class:u([`px-3 py-1.5 text-sm font-medium rounded-full transition-colors`,A.value?`bg-gray-100 text-gray-600 hover:bg-gray-200`:`bg-black text-white`])},` Edit `,2),D(`button`,{onClick:o[22]||=e=>A.value=!0,class:u([`px-3 py-1.5 text-sm font-medium rounded-full transition-colors`,A.value?`bg-black text-white`:`bg-gray-100 text-gray-600 hover:bg-gray-200`])},` Preview `,2)]),A.value?(R(),k(`div`,{key:1,class:`prose prose-sm max-w-none min-h-[400px] p-4 bg-gray-50 rounded-lg border`,innerHTML:xe.value},null,8,En)):(R(),k(`div`,Tn,[B(b($e),{modelValue:g.value.documentation,"onUpdate:modelValue":o[23]||=e=>g.value.documentation=e,placeholder:`Write documentation in Markdown...`,class:`font-mono text-sm min-h-[400px]`,disabled:I.value},null,8,[`modelValue`,`disabled`]),o[74]||=D(`p`,{class:`text-xs text-gray-500 mt-2`},` Use Markdown formatting. Tables, code blocks, and links are supported. `,-1)]))])]),_:1})]),_:1})]),_:1},8,[`modelValue`])]))]),S.value?(R(),k(`div`,Dn,[D(`div`,On,[o[75]||=D(`span`,{class:`font-medium`},`JSON Preview`,-1),B(b(U),{variant:`ghost`,size:`sm`,onClick:st,class:`text-gray-300 hover:text-white`},{default:j(()=>[B(b(me),{class:`w-4 h-4`})]),_:1})]),D(`pre`,kn,[D(`code`,null,C(et.value),1)])])):E(``,!0),w.value?(R(),k(`div`,An,[D(`div`,jn,[D(`div`,Mn,[B(b(z),{class:`w-4 h-4 text-gray-500`}),o[76]||=D(`span`,{class:`font-medium text-gray-900`},`Documentation`,-1)]),B(b(U),{variant:`ghost`,size:`sm`,onClick:o[25]||=e=>w.value=!1,class:`text-gray-400 hover:text-gray-600`},{default:j(()=>[B(b(Se),{class:`w-4 h-4`})]),_:1})]),D(`div`,Nn,[g.value.documentation?(R(),k(`div`,{key:0,class:`prose prose-sm max-w-none`,innerHTML:xe.value},null,8,Pn)):(R(),k(`div`,Fn,[B(b(z),{class:`w-12 h-12 mx-auto text-gray-300 mb-3`}),o[77]||=D(`p`,{class:`text-gray-500`},`No documentation yet`,-1),o[78]||=D(`p`,{class:`text-sm text-gray-400 mt-1`},`Add documentation in the Documentation tab`,-1)]))])])):E(``,!0)])]))}},Ln=ke(In,[[`__scopeId`,`data-v-346760e6`]]);export{Ln as default};