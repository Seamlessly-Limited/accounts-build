const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/WelcomeView-D-5xCC0E.js","assets/index-DUz5oLRf.js","assets/index-DXnjN6aA.css","assets/PopperContent-CYLydaJo.js","assets/useHideOthers-BMVpLdiv.js","assets/ConfigProvider-CX3z9H2g.js","assets/useFormControl-DNz7k4w5.js","assets/DialogPortal-ByZ-ApFh.js","assets/Teleport-nEgZhyc-.js","assets/utils-Bv7ngM-A.js","assets/useId-D49Isxay.js","assets/DialogTitle-msxagOR7.js","assets/DropdownMenuTrigger-BH8h516Z.js","assets/PopperAnchor-BDMp0DVx.js","assets/RovingFocusGroup-BE-sAXeo.js","assets/utils-BngY0H0a.js","assets/useDirection-CVICsvLJ.js","assets/useArrowNavigation-siWGBYoD.js","assets/useTypeahead-DQhWDs5L.js","assets/DropdownMenuLabel-DJRJ4H65.js","assets/DropdownMenuSeparator-2LegL34y.js","assets/MenuSeparator-B2rQS07Y.js","assets/Label-BzNmG4jj.js","assets/SelectViewport-VrHoVk6u.js","assets/useNonce-Zz8BWqvg.js","assets/nullish-CfjOSA4G.js","assets/badge-Hbofivxn.js","assets/button-Cr-p9NtE.js","assets/DialogTitle-DurXYDAQ.js","assets/DialogFooter-dWoO3X0T.js","assets/Label-CWrJyZfV.js","assets/SelectValue-D4XDsd7U.js","assets/WelcomeView-D4vKaSKo.css","assets/DocumentViewer-DgS9UMwt.js","assets/SpreadsheetEditor-D8Y07wfz.js","assets/Input-xYmHuRgS.js","assets/ChartEditor-C3zuR-Sb.js","assets/TextEditor-Dwjyw1Iu.js","assets/ImageViewer-DXgHqijd.js","assets/ReconciliationView-Ddehd2_1.js","assets/ScrollAreaViewport-kHdgICuG.js","assets/ScrollArea-BiuMWB9a.js","assets/TaxReportTab-BDxSNdfn.js","assets/PopoverTrigger-4W5OujoO.js","assets/useKbd-BvGB3m10.js","assets/badge-Dwb2m8FL.js","assets/button-CLcRjLYE.js","assets/Card-X2H1JOHs.js","assets/Label-BF80UCQs.js","assets/LiteEditor-VYC-y2W-.js","assets/WorkspaceStore-DloGvRxv.js","assets/ArchiveView-Cc3hAmJW.js","assets/DocumentView-DnTOd61b.js","assets/ComboboxItem-yuuEIVEa.js","assets/ListboxItem-gURPCPWT.js","assets/VisuallyHiddenInput-DzwRJu2R.js","assets/ComboboxGroup-oY2S-egi.js","assets/SelectGroup-mRhUQAYm.js","assets/DynamicIcon-9hv_PMkg.js","assets/LinkField-JIFjc5kv.js","assets/BottomSheet-BbvV1osc.js","assets/BottomSheet-C0veGV1Z.css","assets/DialogContent-Cu4jeHS4.js","assets/DialogTitle-Cnc8au_F.js","assets/DialogFooter-CZX4uIFg.js","assets/DropdownMenuTrigger-DAfLkUey.js","assets/DropdownMenuSeparator-CkaniFT2.js","assets/Input-nMYpliAi.js","assets/SelectValue-B-w7Avnt.js","assets/Textarea-B2ujhXoz.js","assets/viewRegistry-DuQEad4b.js","assets/DocForm-BDvxZvMs.js","assets/ContextMenu-B8Vfd3EW.js","assets/DocList-CfG6nTeW.js","assets/DocForm-APoJdUnp.js"])))=>i.map(i=>d[i]);
import"./useFormControl-DNz7k4w5.js";import"./ListboxItem-gURPCPWT.js";import"./useNonce-Zz8BWqvg.js";import"./ConfigProvider-CX3z9H2g.js";import"./useHideOthers-BMVpLdiv.js";import"./useDirection-CVICsvLJ.js";import"./useId-D49Isxay.js";import"./useKbd-BvGB3m10.js";import"./useTypeahead-DQhWDs5L.js";import"./DialogPortal-ByZ-ApFh.js";import"./Teleport-nEgZhyc-.js";import"./utils-Bv7ngM-A.js";import"./DialogTitle-msxagOR7.js";import"./AvatarImage-LwU6r6fz.js";import"./utils-BngY0H0a.js";import"./VisuallyHiddenInput-DzwRJu2R.js";import"./command-CC-2PlX_.js";import"./ScrollAreaViewport-kHdgICuG.js";import"./SwitchThumb-D-sePx6Z.js";import{$n as e,Ai as t,Bi as n,Bn as r,Bt as i,C as a,Di as o,Fi as s,Gi as c,Gn as l,Ht as ee,Ji as u,Ki as d,Mn as te,Ni as f,Oi as p,Pi as m,Qi as h,Qt as g,Sa as _,Si as v,Ta as y,U as b,Ut as ne,Wn as re,Xt as ie,Yi as x,Z as ae,b as oe,bi as se,bt as ce,ca as le,dn as S,ha as C,i as ue,in as de,ji as w,ki as T,lt as fe,n as E,na as D,nn as pe,ot as O,qi as k,r as A,sa as j,t as M,tn as N,wi as P,xa as F,zn as I}from"./index-DUz5oLRf.js";import{t as L}from"./WorkspaceStore-DloGvRxv.js";import{n as R}from"./button-Cr-p9NtE.js";import{t as me}from"./BottomSheet-BbvV1osc.js";import{a as he,i as ge,n as _e,r as ve,t as ye}from"./DialogTitle-DurXYDAQ.js";import{t as be}from"./DialogFooter-dWoO3X0T.js";import{t as z}from"./viewRegistry-DuQEad4b.js";import{t as B}from"./AccountAssistant-DK2tEXr-.js";import"./ScrollArea-BiuMWB9a.js";import"./Textarea-BZP_ZaBh.js";import"./badge-Hbofivxn.js";var xe={class:`flex flex-col h-full relative`},Se={class:`flex items-center bg-white border-b border-slate-100 overflow-x-auto no-scrollbar`},Ce=[`onClick`,`onContextmenu`],we={class:`max-w-32 truncate`},Te={key:0,class:`h-2 w-2 rounded-full bg-blue-500`},Ee={class:`flex-1 overflow-hidden`},De={key:13,class:`flex items-center justify-center h-full text-slate-400`},Oe={class:`text-center`},V={__name:`WorkspacePanel`,props:{account:Object,openTabs:Array,activeTabId:String},emits:[`tab-change`,`tab-close`,`tab-reorder`,`new-tab`,`open-applications`],setup(r,{emit:c}){let d=s(()=>M(()=>import(`./WelcomeView-D-5xCC0E.js`),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32]))),b=s(()=>M(()=>import(`./DocumentViewer-DgS9UMwt.js`),__vite__mapDeps([33,1,2,27]))),ue=s(()=>M(()=>import(`./SpreadsheetEditor-D8Y07wfz.js`),__vite__mapDeps([34,1,2,27,35]))),E=s(()=>M(()=>import(`./ChartEditor-C3zuR-Sb.js`),__vite__mapDeps([36,1,2]))),D=s(()=>M(()=>import(`./TextEditor-Dwjyw1Iu.js`),__vite__mapDeps([37,1,2,27]))),A=s(()=>M(()=>import(`./ImageViewer-DXgHqijd.js`),__vite__mapDeps([38,1,2,27]))),I=s(()=>M(()=>import(`./ReconciliationView-Ddehd2_1.js`),__vite__mapDeps([39,1,2,5,40,24,16,26,27,41]))),L=s(()=>M(()=>import(`./TaxReportTab-BDxSNdfn.js`),__vite__mapDeps([42,1,2,3,43,4,5,8,13,16,10,44,27,22,45,46,47,48]))),B=s(()=>M(()=>import(`./LiteEditor-VYC-y2W-.js`),__vite__mapDeps([49,1,2,50]))),V=s(()=>M(()=>import(`./ArchiveView-Cc3hAmJW.js`),__vite__mapDeps([51,1,2,50]))),H=s(()=>M(()=>import(`./DocumentView-DnTOd61b.js`),__vite__mapDeps([52,1,2,3,4,5,6,53,54,15,55,16,10,44,18,56,7,8,9,11,12,13,14,17,20,21,22,23,24,25,57,58,59,60,61,46,62,63,64,65,66,67,48,68,69,70,50,71]))),U=s(()=>M(()=>import(`./ContextMenu-B8Vfd3EW.js`),__vite__mapDeps([72,1,2]))),W=s(()=>M(()=>import(`./DocList-CfG6nTeW.js`),__vite__mapDeps([73,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,21,23,24,25,62,63,64,65,67,68,70,50]))),G=s(()=>M(()=>import(`./DocForm-APoJdUnp.js`),__vite__mapDeps([74,3,1,2,4,5,6,53,54,15,55,16,10,44,18,56,8,9,13,23,24,25,57,58,59,60,61,67,68,70,50,71]))),K=r,q=c;n(`openTab`);let J=C({show:!1,x:0,y:0,target:null}),Y=C({show:!1,tabId:null,tabTitle:``}),X=C({open:!1,doctype:null,name:null,isNew:!1,onSave:null});function ke(e,t=`new`,n=null){X.value={open:!0,doctype:e,name:t,isNew:t===`new`,onSave:n}}function Ae(e){X.value.open=!1,X.value.onSave&&X.value.onSave(e)}u(`openDocSheet`,ke);let je=e=>{let t=z(e,`list`);return t?s(t):W},Me=e=>{let t=z(e,`form`);return t?s(t):G},Ne=e=>{let t=z(e,`view`);return t?s(t):H},Pe=o(()=>{let e=J.value.target;if(!e)return[];let t=[{label:`Close to the Right`,action:`close-right`},{label:`Close Others`,action:`close-others`},{label:`Close All`,action:`close-all`}];return e.closable!==!1&&t.push({label:`Close`,action:`close`}),t}),Z={flow:ne,document:N,spreadsheet:pe,chart:l,text:N,image:ee,reconciliation:ie,invoice:O,"tax-report":N,doctype:N,"doctype-form":N,"doctype-view":S,"lite-editor":N,archive:g,Package:ce,Box:e,Users:a,FileText:N,Landmark:i,Folder:g,Settings:ae,BarChart:re,HelpCircle:te,Receipt:O,Edit:N,Archive:g,Eye:S};function Fe(e){return e.icon&&Z[e.icon]?Z[e.icon]:Z[e.type]||N}function Q(e){return e.doctype?e.doctype:e.id&&e.id.startsWith(`doctype-`)?e.id.replace(`doctype-`,``).split(`-`).map(e=>e.charAt(0).toUpperCase()+e.slice(1)).join(` `):e.title}function Ie(e){e.unsaved?Y.value={show:!0,tabId:e.id,tabTitle:e.title}:q(`tab-close`,e.id)}function Le(){q(`tab-close`,Y.value.tabId),Y.value.show=!1}function Re(){q(`tab-close`,Y.value.tabId),Y.value.show=!1}function ze(e,t){let n=`doctype-${Q(e).toLowerCase().replace(/\s+/g,`-`)}`;q(`tab-close`,e.id),K.openTabs.find(e=>e.id===n)&&q(`tab-change`,n)}function $(e){let t=K.openTabs.find(t=>t.id===e);t&&(t.unsaved=!0)}function Be(e,t){J.value={show:!0,x:e.clientX,y:e.clientY,target:t}}function Ve(e){let t=J.value.target;if(J.value.show=!1,t)switch(e){case`close`:t.closable!==!1&&Ie(t);break;case`close-others`:K.openTabs.filter(e=>e.id!==t.id&&e.closable!==!1).forEach(e=>q(`tab-close`,e.id));break;case`close-all`:K.openTabs.filter(e=>e.closable!==!1).forEach(e=>q(`tab-close`,e.id));break;case`close-right`:{let e=K.openTabs.findIndex(e=>e.id===t.id);K.openTabs.slice(e+1).filter(e=>e.closable!==!1).forEach(e=>q(`tab-close`,e.id));break}}}return(e,n)=>(k(),w(`div`,xe,[p(`div`,Se,[(k(!0),w(P,null,x(r.openTabs,n=>(k(),w(`div`,{key:n.id,class:_([`group flex items-center gap-2 px-3 py-2 border-r border-slate-100 cursor-pointer text-sm transition-colors min-w-max`,r.activeTabId===n.id?`bg-stone-50 text-slate-900`:`bg-white text-slate-500 hover:bg-slate-50`]),onClick:t=>e.$emit(`tab-change`,n.id),onContextmenu:v(e=>Be(e,n),[`prevent`])},[(k(),T(h(Fe(n)),{class:`h-3.5 w-3.5`})),p(`span`,we,y(n.title),1),n.unsaved?(k(),w(`div`,Te)):t(``,!0),n.closable===!1?t(``,!0):(k(),T(F(R),{key:1,variant:`ghost`,size:`sm`,class:`h-5 w-5 p-0 opacity-0 group-hover:opacity-100 hover:bg-slate-200 rounded-sm`,onClick:v(e=>Ie(n),[`stop`])},{default:j(()=>[m(F(oe),{class:`h-3 w-3`})]),_:1},8,[`onClick`]))],42,Ce))),128)),m(F(R),{variant:`ghost`,size:`sm`,class:`h-8 w-8 p-0 ml-1`,onClick:n[0]||=t=>e.$emit(`open-applications`)},{default:j(()=>[m(F(fe),{class:`h-4 w-4`})]),_:1})]),p(`div`,Ee,[(k(!0),w(P,null,x(r.openTabs,e=>le((k(),w(`div`,{key:e.id,class:`h-full`},[e.type===`flow`?(k(),T(F(d),{key:0,account:r.account},null,8,[`account`])):e.type===`doctype`?(k(),T(h(je(Q(e))),{key:1,doctype:Q(e)},null,8,[`doctype`])):e.type===`doctype-form`?(k(),T(h(Me(Q(e))),{key:2,doctype:Q(e),name:e.docName,isNew:e.isNew,onSaved:t=>ze(e,t)},null,40,[`doctype`,`name`,`isNew`,`onSaved`])):e.type===`doctype-view`?(k(),T(h(Ne(Q(e))),{key:3,doctype:Q(e),name:e.docName,initialMode:e.initialMode},null,8,[`doctype`,`name`,`initialMode`])):e.type===`document`?(k(),T(F(b),{key:4,document:e.data},null,8,[`document`])):e.type===`spreadsheet`?(k(),T(F(ue),{key:5,document:e.data,onChange:t=>$(e.id)},null,8,[`document`,`onChange`])):e.type===`chart`?(k(),T(F(E),{key:6,document:e.data,onChange:t=>$(e.id)},null,8,[`document`,`onChange`])):e.type===`text`?(k(),T(F(D),{key:7,document:e.data,onChange:t=>$(e.id)},null,8,[`document`,`onChange`])):e.type===`image`?(k(),T(F(A),{key:8,document:e.data},null,8,[`document`])):e.type===`reconciliation`?(k(),T(F(I),{key:9,sessionReference:e.data?.reference,account:r.account},null,8,[`sessionReference`,`account`])):e.type===`tax-report`?(k(),T(F(L),{key:10,account:r.account},null,8,[`account`])):e.type===`lite-editor`?(k(),T(F(B),{key:11,doctype:Q(e),name:e.docName},null,8,[`doctype`,`name`])):e.type===`archive`?(k(),T(F(V),{key:12,doctype:Q(e),name:e.docName},null,8,[`doctype`,`name`])):(k(),w(`div`,De,[p(`div`,Oe,[m(F(de),{class:`h-12 w-12 mx-auto mb-4 opacity-50`}),p(`p`,null,`Unknown tab type: `+y(e.type),1)])]))],512)),[[se,r.activeTabId===e.id]])),128))]),J.value.show?(k(),T(F(U),{key:0,x:J.value.x,y:J.value.y,items:Pe.value,onClose:n[1]||=e=>J.value.show=!1,onSelect:Ve},null,8,[`x`,`y`,`items`])):t(``,!0),m(F(he),{open:Y.value.show,"onUpdate:open":n[3]||=e=>Y.value.show=e},{default:j(()=>[m(F(ge),{class:`sm:max-w-md`},{default:j(()=>[m(F(_e),null,{default:j(()=>[m(F(ye),null,{default:j(()=>[...n[5]||=[f(`Unsaved Changes`,-1)]]),_:1}),m(F(ve),null,{default:j(()=>[f(` "`+y(Y.value.tabTitle)+`" has unsaved changes. Do you want to save before closing? `,1)]),_:1})]),_:1}),m(F(be),{class:`flex gap-2 sm:justify-end`},{default:j(()=>[m(F(R),{variant:`outline`,onClick:Re},{default:j(()=>[...n[6]||=[f(` Don't Save `,-1)]]),_:1}),m(F(R),{variant:`ghost`,onClick:n[2]||=e=>Y.value.show=!1},{default:j(()=>[...n[7]||=[f(` Cancel `,-1)]]),_:1}),m(F(R),{onClick:Le},{default:j(()=>[...n[8]||=[f(` Save `,-1)]]),_:1})]),_:1})]),_:1})]),_:1},8,[`open`]),m(me,{modelValue:X.value.open,"onUpdate:modelValue":n[4]||=e=>X.value.open=e,"initial-height":100},{default:j(()=>[X.value.open?(k(),T(F(G),{key:0,doctype:X.value.doctype,name:X.value.name,isNew:X.value.isNew,onSaved:Ae},null,8,[`doctype`,`name`,`isNew`])):t(``,!0)]),_:1},8,[`modelValue`])]))}},H=ue(V,[[`__scopeId`,`data-v-7e12d12d`]]),U={class:`relative border-t-2 border-white flex h-full w-full overflow-hidden`},W={class:`flex-1 flex flex-col bg-stone-50 min-w-0`},G={class:`p-2 border-b border-slate-100 flex items-center justify-between`},K={key:0,class:`text-xs font-semibold text-slate-500 uppercase tracking-wider`},q={key:1,class:`flex flex-col items-center py-2`},J={__name:`FlowWorkspace`,props:{account:Object},emits:[`close`,`account-change`,`open-applications`],setup(e,{emit:n}){let i=e,a=L(),s=C(!0),c=C(null),l=o(()=>({tab:a.openTabs.find(e=>e.id===a.activeTabId),account:i.account}));return u(`openTab`,a.openTab),(n,i)=>(k(),w(`div`,U,[p(`div`,W,[m(H,{ref_key:`workspaceRef`,ref:c,account:e.account,"open-tabs":F(a).openTabs,"active-tab-id":F(a).activeTabId,onTabChange:i[0]||=e=>F(a).setActiveTab(e),onTabClose:i[1]||=e=>F(a).closeTab(e),onTabReorder:i[2]||=e=>F(a).reorderTabs(e),onOpenApplications:i[3]||=e=>n.$emit(`open-applications`)},null,8,[`account`,`open-tabs`,`active-tab-id`])]),p(`div`,{class:_([`hidden border-l border-slate-100 bg-white transition-all duration-300 flex-col`,s.value?`w-12`:`w-96`])},[p(`div`,G,[m(F(R),{variant:`ghost`,size:`sm`,class:`h-6 w-6 p-0`,onClick:i[4]||=e=>s.value=!s.value},{default:j(()=>[s.value?(k(),T(F(r),{key:0,class:`h-4 w-4`})):(k(),T(F(I),{key:1,class:`h-4 w-4`}))]),_:1}),s.value?t(``,!0):(k(),w(`span`,K,` Flow Assistant `))]),s.value?(k(),w(`div`,q,[m(F(R),{variant:`ghost`,size:`sm`,class:`h-8 w-8 p-0`,title:`Open Assistant`,onClick:i[5]||=e=>s.value=!1},{default:j(()=>[m(F(b),{class:`h-4 w-4 text-blue-500`})]),_:1})])):(k(),T(B,{key:0,account:e.account,context:l.value,class:`flex-1 overflow-hidden`},null,8,[`account`,`context`]))],2)]))}},Y={class:`h-full bg-white`},X={__name:`Workspace`,setup(e){let t=E(),r=A(),i=L(),a=n(`openApplications`,()=>{}),s=C(!1);c(()=>{let e=window.location.hash.slice(1);e&&e!==i.activeTabId&&i.openTabs.some(t=>t.id===e)&&i.setActiveTab(e,{skipHistory:!0}),window.addEventListener(`popstate`,l)}),d(()=>{window.removeEventListener(`popstate`,l)});function l(){let e=window.location.hash.slice(1);t.path===`/workspace`&&(s.value=!0,e&&e!==i.activeTabId?i.openTabs.some(t=>t.id===e)&&i.setActiveTab(e,{skipHistory:!0}):e||i.setActiveTab(`flow`,{skipHistory:!0}),setTimeout(()=>{s.value=!1},50))}D(()=>t.hash,(e,t)=>{if(s.value)return;let n=e?.slice(1);n&&n!==i.activeTabId&&i.openTabs.some(e=>e.id===n)&&i.setActiveTab(n,{skipHistory:!0})}),D(()=>i.activeTabId,(e,t)=>{if(s.value)return;let n=window.location.hash.slice(1);e&&e!==n&&r.push({path:`/workspace`,hash:`#${e}`})});let ee=o(()=>null);return(e,t)=>(k(),w(`div`,Y,[m(J,{account:ee.value,onClose:t[0]||=e=>F(r).push(`/`),onAccountChange:()=>{},onOpenApplications:F(a)},null,8,[`account`,`onOpenApplications`])]))}};export{X as default};