import"./useFormControl-BoSoz5bk.js";import"./useNonce-Cry77bU8.js";import"./nullish-CfjOSA4G.js";import"./CheckboxIndicator-Cu1vLZmL.js";import"./ConfigProvider-BeNpEDZu.js";import"./useHideOthers-8j3pZZC2.js";import"./useDirection-CkCaHLjJ.js";import"./PopperAnchor-DePKnfPt.js";import"./useId-C9uHTJK1.js";import"./PopperContent-CkzV4Efh.js";import"./useTypeahead-J2lSWUJi.js";import"./DialogPortal-DagulIUC.js";import"./Teleport-CO7T90ZX.js";import"./utils-1j6W-LC4.js";import"./DialogTitle-KNRScshA.js";import"./utils-d0L3vlW4.js";import"./RovingFocusGroup-Dae6_7oN.js";import"./RovingFocusItem-h4PGPL5z.js";import"./VisuallyHiddenInput-Cr3vcfNb.js";import"./Label-BQWlwCJI.js";import"./SelectViewport-C4doWK-Y.js";import{a as e,i as t,n,t as r}from"./tabs-C51D2d71.js";import{Aa as i,Ai as ee,Bi as a,Hi as o,I as s,Ii as te,It as c,Jt as ne,Li as l,Ni as u,Ot as re,P as ie,Pa as d,Qi as f,Ri as p,Ui as m,Z as ae,a as oe,ea as se,ft as ce,ga as h,ia as g,ir as le,ja as _,lt as ue,na as v,o as y,tt as de,wa as b,zi as x}from"./index-BW6FH5S4.js";import{n as fe,t as pe}from"./DialogContent-DzO0B1dQ.js";import{n as S,r as C,t as w}from"./DialogTitle-BAO4s_Rj.js";import{t as T}from"./DialogFooter-BGPl6WoG.js";import{t as E}from"./Input-AKTRhZx5.js";import{t as D}from"./button-BIS6kOZQ.js";import{t as me}from"./Card-DmhOqSpI.js";import{t as O}from"./Label-CWz-ReQU.js";import{a as k,i as A,n as j,r as M,t as he}from"./SelectValue-CvGnKkl4.js";import{t as ge}from"./Checkbox-x25APZEJ.js";import{t as N}from"./ComplianceService-DSKt-eW3.js";var _e={class:`container mx-auto py-5 relative`},ve={class:`flex justify-center`},ye={class:`w-full p-8 space-y-6 shadow-none border-none bg-transparent rounded-2xl min-h-[80vh]`},be={class:`flex flex-col sm:flex-row sm:justify-between w-full`},xe={class:`flex gap-2 mt-4`},Se={class:`grid grid-cols-1 lg:grid-cols-3 gap-6`},Ce={class:`lg:col-span-2`},we={class:`flex items-center gap-2 mb-4`},Te={class:`flex gap-2`},Ee={class:`lg:col-span-1`},De={class:`space-y-4`},Oe={class:`space-y-2`},ke={class:`space-y-2`},Ae={class:`space-y-2`},je={class:`pt-2`},Me={class:`p-4 bg-blue-50/50 rounded-xl border border-blue-100 mt-4`},Ne={class:`flex gap-3`},Pe={key:0,class:`flex justify-center py-8`},Fe={key:1,class:`text-center py-8`},Ie={key:2,class:`space-y-2`},Le={class:`flex items-center gap-3`},Re={class:`font-medium text-sm text-slate-700`},ze={class:`text-xs text-slate-500`},Be={key:0,class:`flex justify-center py-8`},Ve={key:1,class:`text-center py-8`},He={key:2,class:`space-y-2`},Ue={class:`flex items-center gap-3`},We={class:`font-medium text-sm text-slate-700`},Ge={class:`text-xs text-slate-500`},Ke={class:`space-y-4`},qe={class:`text-xs font-bold text-slate-400 uppercase mb-2`},Je={class:`space-y-2`},Ye=[`onClick`],Xe={class:`font-medium text-sm text-slate-700`},Ze={class:`text-[10px] text-slate-500 line-clamp-1`},Qe={class:`space-y-4 py-4`},$e={class:`space-y-2`},et={class:`space-y-2`},tt={class:`space-y-2`},nt={class:`space-y-2`},rt={class:`space-y-4 py-4`},it={class:`space-y-2`},at={class:`space-y-2`},ot={class:`space-y-2`},st={key:0,class:`text-xs text-amber-600`},ct={class:`space-y-2`},lt={class:`space-y-2`},ut={class:`bg-amber-50 border border-amber-200 border-solid rounded-md p-4`},dt={class:`flex items-start gap-3`},ft={class:`text-sm text-amber-800`},pt={class:`font-medium`},mt={__name:`TaxJurisdiction`,setup(mt){let P=oe().toast,ht=b(`kyc`),F=b([]),I=b([]),L=b(!1),R=b(!1),z=b(!1),B=b(!1),V=b(!1),H=b({nationalTaxId:``,stateTaxId:``,businessRegId:``,notes:``}),gt=b([]),_t=b(null),U=b(!1),W=b(!1),G=b(!1),K=b(null),q=b(!1),J=b({authority_name:``,authority_code:``,jurisdiction_level:`Federal`,country:`Nigeria`,is_active:!0}),Y=b({policy_name:``,policy_code:``,tax_authority:``,rate:null,applies_to:`All`,is_active:!0}),X=b(``),Z=b(null),Q=b([{isBot:!0,text:`Welcome! I'm here to help you set up your tax jurisdiction. The first phase is KYC (Know Your Customer) registration.`},{isBot:!0,text:`Please ensure your National Tax Identifier (TIN) and Business Registration number are correctly entered in the KYC tab.`},{isBot:!0,text:`Once registration is complete, we can move on to adding Tax Authorities and configuring your VAT/WHT policies.`}]),vt=te(()=>{let e={};return gt.value.forEach(t=>{let n=t.policyLevel||`federal`;e[n]||(e[n]=[]),e[n].push(t)}),e});async function yt(){try{let e=await N.getRegistration();e&&Object.assign(H.value,e)}catch(e){console.error(`Failed to load registration:`,e)}}async function bt(){try{gt.value=await N.getFrameworks()}catch(e){console.error(`Failed to load frameworks:`,e)}}async function xt(){V.value=!0;try{await N.updateRegistration(H.value),P({message:`Compliance credentials updated successfully`,variant:`success`}),Q.value.push({isBot:!0,text:`Great! Your registration details are saved. Now let's look at your Tax Authorities. Would you like to add FIRS now?`}),ht.value=`authorities`,$()}catch(e){P({title:`Failed to save`,message:e.message,variant:`error`})}finally{V.value=!1}}function St(e){_t.value=e,Q.value.push({isBot:!0,text:`Viewing framework: ${e.name}. ${e.longDescription}`}),$()}async function Ct(){L.value=!0;try{F.value=(await y.get(`/org/doc/TaxAuthority`,{authorizeRequest:!0,organisationAware:!0}))?.data?.content||[]}catch(e){console.error(`Failed to load authorities:`,e),F.value=[]}finally{L.value=!1}}async function wt(){R.value=!0;try{I.value=(await y.get(`/org/doc/TaxPolicy`,{authorizeRequest:!0,organisationAware:!0}))?.data?.content||[]}catch(e){console.error(`Failed to load policies:`,e),I.value=[]}finally{R.value=!1}}async function Tt(){z.value=!0;try{let e=await y.post(`/org/doc/TaxAuthority`,{data:J.value,authorizeRequest:!0,organisationAware:!0});e?.data?.name?F.value.push(e.data):await Ct(),U.value=!1,Pt(),P({message:`Tax authority added successfully`,variant:`success`})}catch(e){P({title:`Failed to add authority`,message:e.message,variant:`error`})}finally{z.value=!1}}async function Et(){B.value=!0;try{let e=await y.post(`/org/doc/TaxPolicy`,{data:Y.value,authorizeRequest:!0,organisationAware:!0});e?.data?.name?I.value.push(e.data):await wt(),W.value=!1,Ft(),P({message:`Tax policy added successfully`,variant:`success`})}catch(e){P({title:`Failed to add policy`,message:e.message,variant:`error`})}finally{B.value=!1}}async function Dt(e){try{await y.patch(`/org/doc/TaxAuthority/${encodeURIComponent(e.name)}`,{data:{is_active:!e.is_active},authorizeRequest:!0,organisationAware:!0}),e.is_active=!e.is_active}catch(e){P({title:`Failed to update authority`,message:e.message,variant:`error`})}}async function Ot(e){try{await y.patch(`/org/doc/TaxPolicy/${encodeURIComponent(e.name)}`,{data:{is_active:!e.is_active},authorizeRequest:!0,organisationAware:!0}),e.is_active=!e.is_active}catch(e){P({title:`Failed to update policy`,message:e.message,variant:`error`})}}function kt(e){let t=I.value.filter(t=>t.tax_authority===e.name);if(t.length>0){let e=t.map(e=>e.policy_name).join(`, `);P({title:`Cannot delete authority`,message:`This authority has ${t.length} linked policies: ${e}. Delete the policies first.`,variant:`error`,duration:5e3});return}K.value={type:`authority`,item:e},G.value=!0}function At(e){K.value={type:`policy`,item:e},G.value=!0}function jt(){G.value=!1,K.value=null}async function Mt(){if(!K.value)return;q.value=!0;let{type:e,item:t}=K.value;try{e===`authority`?(await y.delete(`/org/doc/TaxAuthority/${encodeURIComponent(t.name)}`,{authorizeRequest:!0,organisationAware:!0}),F.value=F.value.filter(e=>e.name!==t.name),P({message:`Authority deleted`,variant:`success`})):(await y.delete(`/org/doc/TaxPolicy/${encodeURIComponent(t.name)}`,{authorizeRequest:!0,organisationAware:!0}),I.value=I.value.filter(e=>e.name!==t.name),P({message:`Policy deleted`,variant:`success`})),G.value=!1,K.value=null}catch(e){P({title:`Failed to delete`,message:e.message,variant:`error`})}finally{q.value=!1}}function Nt(){if(!X.value.trim())return;let e=X.value;Q.value.push({isBot:!1,text:e}),X.value=``,$(),setTimeout(()=>{let t=`I can help you with that! `,n=e.toLowerCase();n.includes(`vat`)?t+=`VAT (Value Added Tax) in Nigeria is currently 7.5%. It applies to most goods and services. Would you like me to add it as a policy?`:n.includes(`wht`)?t+=`Withholding Tax (WHT) in Nigeria varies by transaction type: 5% for services, 10% for contracts. Shall I explain more?`:t+=`For Nigerian businesses, the key tax authorities are FIRS (Federal) and your state IRS. Would you like specific guidance?`,Q.value.push({isBot:!0,text:t}),$()},500)}function $(){f(()=>{Z.value&&(Z.value.scrollTop=Z.value.scrollHeight)})}function Pt(){J.value={authority_name:``,authority_code:``,jurisdiction_level:`Federal`,country:`Nigeria`,is_active:!0}}function Ft(){Y.value={policy_name:``,policy_code:``,tax_authority:``,rate:null,applies_to:`All`,is_active:!0}}return se(async()=>{await Promise.all([yt(),bt(),Ct(),wt()])}),(te,f)=>(v(),a(`div`,_e,[l(`div`,ve,[l(`div`,ye,[l(`div`,be,[f[25]||=l(`div`,null,[l(`h1`,{class:`text-2xl font-bold text-slate-800`},`Tax Jurisdiction`),l(`p`,{class:`text-sm text-slate-600`},`Configure your tax authorities and policies`)],-1),l(`div`,xe,[m(i(D),{class:`flex gap-2 rounded-full`,onClick:f[0]||=e=>U.value=!0},{default:h(()=>[m(i(le),{class:`h-4 w-4`}),f[24]||=o(` Add Authority `,-1)]),_:1})])]),l(`div`,Se,[l(`div`,Ce,[m(i(me),{class:`p-6 h-full min-h-[500px] flex flex-col`},{default:h(()=>[l(`div`,we,[m(i(re),{class:`h-5 w-5 text-blue-500`}),f[26]||=l(`h3`,{class:`font-semibold text-slate-700`},`Tax Setup Assistant`,-1)]),l(`div`,{ref_key:`chatContainer`,ref:Z,class:`flex-1 overflow-y-auto space-y-4 mb-4`},[(v(!0),a(u,null,g(Q.value,(e,t)=>(v(),a(`div`,{key:t,class:_(e.isBot?`flex items-start gap-3`:`flex items-start gap-3 flex-row-reverse`)},[l(`div`,{class:_([`rounded-full w-8 h-8 flex items-center justify-center text-sm font-medium`,e.isBot?`bg-blue-100 text-blue-600`:`bg-slate-100 text-slate-600`])},d(e.isBot?`ðŸ¤–`:`ðŸ‘¤`),3),l(`div`,{class:_([`max-w-[80%] rounded-lg p-3 text-sm`,e.isBot?`bg-slate-50 text-slate-700`:`bg-blue-50 text-blue-800`])},d(e.text),3)],2))),128))],512),l(`div`,Te,[m(i(E),{modelValue:X.value,"onUpdate:modelValue":f[1]||=e=>X.value=e,placeholder:`Ask about tax setup...`,class:`flex-1 rounded-full`,onKeyup:ee(Nt,[`enter`])},null,8,[`modelValue`]),m(i(D),{class:`rounded-full`,onClick:Nt},{default:h(()=>[m(i(de),{class:`h-4 w-4`})]),_:1})])]),_:1})]),l(`div`,Ee,[m(i(me),{class:`p-6 sticky top-24`},{default:h(()=>[m(i(e),{modelValue:ht.value,"onUpdate:modelValue":f[9]||=e=>ht.value=e,"default-value":`kyc`,class:`mb-4`},{default:h(()=>[m(i(n),{class:`rounded-full bg-stone-100 text-blue-950 px-0.5 py-0.5 w-full`},{default:h(()=>[m(i(r),{value:`kyc`,class:`flex-1 px-3 py-1 rounded-full text-sm data-[state=active]:bg-stone-50 data-[state=active]:text-blue-950`},{default:h(()=>[...f[27]||=[o(` KYC `,-1)]]),_:1}),m(i(r),{value:`authorities`,class:`flex-1 px-3 py-1 rounded-full text-sm data-[state=active]:bg-stone-50 data-[state=active]:text-blue-950`},{default:h(()=>[...f[28]||=[o(` Authorities `,-1)]]),_:1}),m(i(r),{value:`policies`,class:`flex-1 px-3 py-1 rounded-full text-sm data-[state=active]:bg-stone-50 data-[state=active]:text-blue-950`},{default:h(()=>[...f[29]||=[o(` Policies `,-1)]]),_:1}),m(i(r),{value:`frameworks`,class:`flex-1 px-3 py-1 rounded-full text-sm data-[state=active]:bg-stone-50 data-[state=active]:text-blue-950`},{default:h(()=>[...f[30]||=[o(` Frameworks `,-1)]]),_:1})]),_:1}),m(i(t),{value:`kyc`,class:`mt-4`},{default:h(()=>[l(`div`,De,[l(`div`,Oe,[m(i(O),{for:`nationalTaxId`,class:`text-xs font-semibold text-slate-500 uppercase`},{default:h(()=>[...f[31]||=[o(`National Tax Identifier (TIN)`,-1)]]),_:1}),m(i(E),{id:`nationalTaxId`,modelValue:H.value.nationalTaxId,"onUpdate:modelValue":f[2]||=e=>H.value.nationalTaxId=e,placeholder:`e.g., 12345678-0001`,class:`rounded-xl bg-stone-50/50`},null,8,[`modelValue`])]),l(`div`,ke,[m(i(O),{for:`stateTaxId`,class:`text-xs font-semibold text-slate-500 uppercase`},{default:h(()=>[...f[32]||=[o(`State Tax Identifier`,-1)]]),_:1}),m(i(E),{id:`stateTaxId`,modelValue:H.value.stateTaxId,"onUpdate:modelValue":f[3]||=e=>H.value.stateTaxId=e,placeholder:`Enter state tax ID`,class:`rounded-xl bg-stone-50/50`},null,8,[`modelValue`])]),l(`div`,Ae,[m(i(O),{for:`businessRegId`,class:`text-xs font-semibold text-slate-500 uppercase`},{default:h(()=>[...f[33]||=[o(`Business Registration Number (RC/BN)`,-1)]]),_:1}),m(i(E),{id:`businessRegId`,modelValue:H.value.businessRegId,"onUpdate:modelValue":f[4]||=e=>H.value.businessRegId=e,placeholder:`e.g., RC 1234567`,class:`rounded-xl bg-stone-50/50`},null,8,[`modelValue`])]),l(`div`,je,[m(i(D),{class:`w-full rounded-full`,onClick:xt,disabled:V.value},{default:h(()=>[V.value?(v(),p(i(c),{key:0,class:`h-4 w-4 mr-2 animate-spin`})):(v(),p(i(ae),{key:1,class:`h-4 w-4 mr-2`})),f[34]||=o(` Save Credentials `,-1)]),_:1},8,[`disabled`])]),l(`div`,Me,[l(`div`,Ne,[m(i(ne),{class:`h-5 w-5 text-blue-500 shrink-0`}),f[35]||=l(`p`,{class:`text-xs text-blue-700 leading-relaxed`},` Ensure your registration details match your official documents from CAMA/CAC and FIRS. `,-1)])])])]),_:1}),m(i(t),{value:`authorities`,class:`mt-4`},{default:h(()=>[L.value?(v(),a(`div`,Pe,[m(i(c),{class:`h-6 w-6 animate-spin text-slate-400`})])):F.value.length===0?(v(),a(`div`,Fe,[m(i(le),{class:`h-12 w-12 text-slate-300 mx-auto mb-2`}),f[37]||=l(`p`,{class:`text-sm text-slate-500`},`No tax authorities added`,-1),m(i(D),{variant:`link`,class:`text-sm mt-2`,onClick:f[5]||=e=>U.value=!0},{default:h(()=>[...f[36]||=[o(` + Add your first authority `,-1)]]),_:1})])):(v(),a(`div`,Ie,[(v(!0),a(u,null,g(F.value,e=>(v(),a(`div`,{key:e.name,class:`flex items-center justify-between p-3 rounded-lg border border-slate-200 hover:border-blue-300 transition-colors`},[l(`div`,Le,[m(i(ge),{checked:e.is_active,"onUpdate:checked":t=>Dt(e)},null,8,[`checked`,`onUpdate:checked`]),l(`div`,null,[l(`div`,Re,d(e.authority_name),1),l(`div`,ze,d(e.authority_code)+` â€¢ `+d(e.jurisdiction_level),1)])]),m(i(D),{variant:`ghost`,size:`sm`,onClick:t=>kt(e)},{default:h(()=>[m(i(s),{class:`h-4 w-4 text-slate-400`})]),_:1},8,[`onClick`])]))),128)),m(i(D),{variant:`outline`,class:`w-full mt-4 rounded-full`,onClick:f[6]||=e=>U.value=!0},{default:h(()=>[m(i(ce),{class:`h-4 w-4 mr-2`}),f[38]||=o(` Add Authority `,-1)]),_:1})]))]),_:1}),m(i(t),{value:`policies`,class:`mt-4`},{default:h(()=>[R.value?(v(),a(`div`,Be,[m(i(c),{class:`h-6 w-6 animate-spin text-slate-400`})])):I.value.length===0?(v(),a(`div`,Ve,[m(i(ue),{class:`h-12 w-12 text-slate-300 mx-auto mb-2`}),f[40]||=l(`p`,{class:`text-sm text-slate-500`},`No tax policies configured`,-1),m(i(D),{variant:`link`,class:`text-sm mt-2`,onClick:f[7]||=e=>W.value=!0},{default:h(()=>[...f[39]||=[o(` + Add a tax policy `,-1)]]),_:1})])):(v(),a(`div`,He,[(v(!0),a(u,null,g(I.value,e=>(v(),a(`div`,{key:e.name,class:`flex items-center justify-between p-3 rounded-lg border border-slate-200 hover:border-green-300 transition-colors`},[l(`div`,Ue,[m(i(ge),{checked:e.is_active,"onUpdate:checked":t=>Ot(e)},null,8,[`checked`,`onUpdate:checked`]),l(`div`,null,[l(`div`,We,d(e.policy_name),1),l(`div`,Ge,d(e.policy_code)+` â€¢ `+d(e.rate)+`%`,1)])]),m(i(D),{variant:`ghost`,size:`sm`,onClick:t=>At(e)},{default:h(()=>[m(i(s),{class:`h-4 w-4 text-slate-400`})]),_:1},8,[`onClick`])]))),128)),m(i(D),{variant:`outline`,class:`w-full mt-4 rounded-full`,onClick:f[8]||=e=>W.value=!0},{default:h(()=>[m(i(ce),{class:`h-4 w-4 mr-2`}),f[41]||=o(` Add Policy `,-1)]),_:1})]))]),_:1}),m(i(t),{value:`frameworks`,class:`mt-4`},{default:h(()=>[l(`div`,Ke,[(v(!0),a(u,null,g(vt.value,(e,t)=>(v(),a(`div`,{key:t},[l(`h4`,qe,d(t),1),l(`div`,Je,[(v(!0),a(u,null,g(e,e=>(v(),a(`div`,{key:e.id,class:`p-3 rounded-xl border border-slate-200 hover:border-blue-300 cursor-pointer transition-all bg-white`,onClick:t=>St(e)},[l(`div`,Xe,d(e.name),1),l(`div`,Ze,d(e.description),1)],8,Ye))),128))])]))),128))])]),_:1})]),_:1},8,[`modelValue`])]),_:1})])]),m(i(fe),{open:U.value,"onUpdate:open":f[15]||=e=>U.value=e},{default:h(()=>[m(i(pe),{class:`sm:max-w-md bg-white`},{default:h(()=>[m(i(S),null,{default:h(()=>[m(i(w),null,{default:h(()=>[...f[42]||=[o(`Add Tax Authority`,-1)]]),_:1}),m(i(C),null,{default:h(()=>[...f[43]||=[o(` Add a tax authority that has jurisdiction over your organisation. `,-1)]]),_:1})]),_:1}),l(`div`,Qe,[l(`div`,$e,[m(i(O),{for:`authority-name`},{default:h(()=>[...f[44]||=[o(`Authority Name`,-1)]]),_:1}),m(i(E),{id:`authority-name`,modelValue:J.value.authority_name,"onUpdate:modelValue":f[10]||=e=>J.value.authority_name=e,placeholder:`e.g., Federal Inland Revenue Service`},null,8,[`modelValue`])]),l(`div`,et,[m(i(O),{for:`authority-code`},{default:h(()=>[...f[45]||=[o(`Code`,-1)]]),_:1}),m(i(E),{id:`authority-code`,modelValue:J.value.authority_code,"onUpdate:modelValue":f[11]||=e=>J.value.authority_code=e,placeholder:`e.g., FIRS`},null,8,[`modelValue`])]),l(`div`,tt,[m(i(O),{for:`jurisdiction-level`},{default:h(()=>[...f[46]||=[o(`Jurisdiction Level`,-1)]]),_:1}),m(i(k),{modelValue:J.value.jurisdiction_level,"onUpdate:modelValue":f[12]||=e=>J.value.jurisdiction_level=e},{default:h(()=>[m(i(j),{class:`w-full rounded-full`},{default:h(()=>[m(i(he),{placeholder:`Select level`})]),_:1}),m(i(A),null,{default:h(()=>[m(i(M),{value:`Federal`},{default:h(()=>[...f[47]||=[o(`Federal`,-1)]]),_:1}),m(i(M),{value:`State`},{default:h(()=>[...f[48]||=[o(`State`,-1)]]),_:1}),m(i(M),{value:`Local`},{default:h(()=>[...f[49]||=[o(`Local`,-1)]]),_:1})]),_:1})]),_:1},8,[`modelValue`])]),l(`div`,nt,[m(i(O),{for:`country`},{default:h(()=>[...f[50]||=[o(`Country`,-1)]]),_:1}),m(i(E),{id:`country`,modelValue:J.value.country,"onUpdate:modelValue":f[13]||=e=>J.value.country=e,placeholder:`e.g., Nigeria`},null,8,[`modelValue`])])]),m(i(T),{class:`gap-2 sm:gap-2`},{default:h(()=>[m(i(D),{class:`rounded-full`,variant:`outline`,onClick:f[14]||=e=>U.value=!1},{default:h(()=>[...f[51]||=[o(` Cancel `,-1)]]),_:1}),m(i(D),{class:`rounded-full`,onClick:Tt,disabled:!J.value.authority_name||!J.value.authority_code||z.value},{default:h(()=>[z.value?(v(),p(i(c),{key:0,class:`h-4 w-4 mr-2 animate-spin`})):x(``,!0),f[52]||=o(` Add Authority `,-1)]),_:1},8,[`disabled`])]),_:1})]),_:1})]),_:1},8,[`open`]),m(i(fe),{open:W.value,"onUpdate:open":f[22]||=e=>W.value=e},{default:h(()=>[m(i(pe),{class:`sm:max-w-md bg-white`},{default:h(()=>[m(i(S),null,{default:h(()=>[m(i(w),null,{default:h(()=>[...f[53]||=[o(`Add Tax Policy`,-1)]]),_:1}),m(i(C),null,{default:h(()=>[...f[54]||=[o(` Add a tax policy that applies to your transactions. `,-1)]]),_:1})]),_:1}),l(`div`,rt,[l(`div`,it,[m(i(O),{for:`policy-name`},{default:h(()=>[...f[55]||=[o(`Policy Name`,-1)]]),_:1}),m(i(E),{id:`policy-name`,modelValue:Y.value.policy_name,"onUpdate:modelValue":f[16]||=e=>Y.value.policy_name=e,placeholder:`e.g., Value Added Tax`},null,8,[`modelValue`])]),l(`div`,at,[m(i(O),{for:`policy-code`},{default:h(()=>[...f[56]||=[o(`Code`,-1)]]),_:1}),m(i(E),{id:`policy-code`,modelValue:Y.value.policy_code,"onUpdate:modelValue":f[17]||=e=>Y.value.policy_code=e,placeholder:`e.g., VAT`},null,8,[`modelValue`])]),l(`div`,ot,[m(i(O),{for:`tax-authority`},{default:h(()=>[...f[57]||=[o(`Tax Authority`,-1)]]),_:1}),m(i(k),{modelValue:Y.value.tax_authority,"onUpdate:modelValue":f[18]||=e=>Y.value.tax_authority=e,disabled:F.value.length===0},{default:h(()=>[m(i(j),{class:`w-full rounded-full`},{default:h(()=>[m(i(he),{placeholder:F.value.length===0?`Add an authority first`:`Select authority`},null,8,[`placeholder`])]),_:1}),m(i(A),null,{default:h(()=>[(v(!0),a(u,null,g(F.value,e=>(v(),p(i(M),{key:e.name,value:e.name},{default:h(()=>[o(d(e.authority_name),1)]),_:2},1032,[`value`]))),128))]),_:1})]),_:1},8,[`modelValue`,`disabled`]),F.value.length===0?(v(),a(`p`,st,` You need to add a tax authority before creating policies. `)):x(``,!0)]),l(`div`,ct,[m(i(O),{for:`rate`},{default:h(()=>[...f[58]||=[o(`Rate (%)`,-1)]]),_:1}),m(i(E),{id:`rate`,modelValue:Y.value.rate,"onUpdate:modelValue":f[19]||=e=>Y.value.rate=e,modelModifiers:{number:!0},type:`number`,step:`0.01`,placeholder:`e.g., 7.5`},null,8,[`modelValue`])]),l(`div`,lt,[m(i(O),{for:`applies-to`},{default:h(()=>[...f[59]||=[o(`Applies To`,-1)]]),_:1}),m(i(k),{modelValue:Y.value.applies_to,"onUpdate:modelValue":f[20]||=e=>Y.value.applies_to=e},{default:h(()=>[m(i(j),{class:`w-full rounded-full`},{default:h(()=>[m(i(he),{placeholder:`Select type`})]),_:1}),m(i(A),null,{default:h(()=>[m(i(M),{value:`All`},{default:h(()=>[...f[60]||=[o(`All`,-1)]]),_:1}),m(i(M),{value:`Transactions`},{default:h(()=>[...f[61]||=[o(`Transactions`,-1)]]),_:1}),m(i(M),{value:`Invoices`},{default:h(()=>[...f[62]||=[o(`Invoices`,-1)]]),_:1}),m(i(M),{value:`Contracts`},{default:h(()=>[...f[63]||=[o(`Contracts`,-1)]]),_:1}),m(i(M),{value:`Payments`},{default:h(()=>[...f[64]||=[o(`Payments`,-1)]]),_:1})]),_:1})]),_:1},8,[`modelValue`])])]),m(i(T),{class:`gap-2 sm:gap-2`},{default:h(()=>[m(i(D),{class:`rounded-full`,variant:`outline`,onClick:f[21]||=e=>W.value=!1},{default:h(()=>[...f[65]||=[o(` Cancel `,-1)]]),_:1}),m(i(D),{class:`rounded-full`,onClick:Et,disabled:!Y.value.policy_name||!Y.value.policy_code||!Y.value.tax_authority||!Y.value.rate||Y.value.rate<=0||B.value},{default:h(()=>[B.value?(v(),p(i(c),{key:0,class:`h-4 w-4 mr-2 animate-spin`})):x(``,!0),f[66]||=o(` Add Policy `,-1)]),_:1},8,[`disabled`])]),_:1})]),_:1})]),_:1},8,[`open`]),m(i(fe),{open:G.value,"onUpdate:open":f[23]||=e=>G.value=e},{default:h(()=>[m(i(pe),{class:`sm:max-w-md bg-white`},{default:h(()=>[m(i(S),null,{default:h(()=>[m(i(w),null,{default:h(()=>[...f[67]||=[o(`Confirm Deletion`,-1)]]),_:1}),m(i(C),null,{default:h(()=>[...f[68]||=[o(` Are you sure you want to delete this item? `,-1)]]),_:1})]),_:1}),l(`div`,ut,[l(`div`,dt,[m(i(ie),{class:`h-5 w-5 text-amber-600 mt-0.5`}),l(`div`,ft,[l(`p`,pt,d(K.value?.item?.authority_name||K.value?.item?.policy_name),1),f[69]||=l(`p`,{class:`mt-1`},`This action cannot be undone.`,-1)])])]),m(i(T),{class:`gap-2 sm:gap-2`},{default:h(()=>[m(i(D),{class:`rounded-full`,variant:`outline`,onClick:jt,disabled:q.value},{default:h(()=>[...f[70]||=[o(` Cancel `,-1)]]),_:1},8,[`disabled`]),m(i(D),{class:`rounded-full`,variant:`destructive`,onClick:Mt,disabled:q.value},{default:h(()=>[q.value?(v(),p(i(c),{key:0,class:`h-4 w-4 mr-2 animate-spin`})):(v(),p(i(s),{key:1,class:`h-4 w-4 mr-2`})),o(` `+d(q.value?`Deleting...`:`Delete`),1)]),_:1},8,[`disabled`])]),_:1})]),_:1})]),_:1},8,[`open`])])])]))}};export{mt as default};