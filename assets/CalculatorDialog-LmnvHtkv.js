import{$t as e,Aa as t,Bi as n,En as r,Et as i,Fi as a,Gi as o,Ii as s,Li as c,Na as l,Ni as u,Pa as d,Ri as f,Tn as p,Ui as m,bn as h,ft as g,ga as _,i as v,ia as y,ja as b,na as x,sa as S,wa as C,wi as w,x as T,zi as E}from"./index-BW6FH5S4.js";var D={class:`w-72 rounded-2xl bg-slate-900 shadow-2xl overflow-hidden border border-neutral-700/50`},O={class:`flex items-center gap-2 text-neutral-400`},k={class:`px-4 py-5 bg-slate-950`},A={class:`flex items-center justify-between mb-1`},j={class:`text-neutral-500 text-xs h-4`},M={class:`grid grid-cols-4 gap-1 p-2 bg-slate-950`},ee=[`onClick`],te={key:1},N=o({__name:`CalculatorDialog`,props:{open:{type:Boolean}},emits:[`update:open`],setup(o,{emit:v}){let N=v,P=C(`0`),F=C(``),I=C(``),L=C(null),R=C(!1),z=C(null),B=C(!1),V=C({x:0,y:0}),H=C({x:0,y:0}),U=C(!1),W=s(()=>{if(P.value===``)return`0`;let e=parseFloat(P.value);if(isNaN(e)||P.value.endsWith(`.`))return P.value;let t=P.value.split(`.`),n=parseInt(t[0]).toLocaleString(`en-US`);return t.length===2?`${n}.${t[1]}`:n}),G=e=>{if(R.value){P.value=e,F.value=e,R.value=!1;return}e===`.`&&P.value.includes(`.`)||(P.value===`0`&&e!==`.`?P.value=e:P.value+=e,F.value=P.value)},K=e=>{F.value!==``&&(I.value!==``&&q(),L.value=e,I.value=F.value,F.value=``,R.value=!0)},q=()=>{let e,t=parseFloat(I.value),n=parseFloat(F.value||P.value);if(!(isNaN(t)||isNaN(n))){switch(L.value){case`+`:e=t+n;break;case`-`:e=t-n;break;case`×`:e=t*n;break;case`÷`:e=n===0?NaN:t/n;break;default:return}isNaN(e)?P.value=`Error`:P.value=String(Math.round(e*1e10)/1e10),F.value=P.value,I.value=``,L.value=null,R.value=!0}},J=()=>{P.value=`0`,F.value=``,I.value=``,L.value=null,R.value=!1},Y=()=>{P.value.length===1||P.value===`Error`?(P.value=`0`,F.value=``):(P.value=P.value.slice(0,-1),F.value=P.value)},X=()=>{P.value===`0`||P.value===`Error`||(P.value.startsWith(`-`)?P.value=P.value.slice(1):P.value=`-`+P.value,F.value=P.value)},Z=()=>{let e=parseFloat(P.value);isNaN(e)||(P.value=String(e/100),F.value=P.value)},ne=e=>{if(!z.value)return;B.value=!0;let t=z.value.getBoundingClientRect();V.value={x:e.clientX-t.left,y:e.clientY-t.top},U.value||=(H.value={x:t.left,y:t.top},!0),document.addEventListener(`mousemove`,Q),document.addEventListener(`mouseup`,$)},Q=e=>{if(!B.value||!z.value)return;let t=z.value.getBoundingClientRect(),n=window.innerWidth,r=window.innerHeight,i=e.clientX-V.value.x,a=e.clientY-V.value.y;i=Math.max(0,Math.min(i,n-t.width)),a=Math.max(0,Math.min(a,r-t.height)),H.value={x:i,y:a}},$=()=>{B.value=!1,document.removeEventListener(`mousemove`,Q),document.removeEventListener(`mouseup`,$)},re=()=>{N(`update:open`,!1),J(),U.value=!1},ie=[{label:`C`,action:J,class:`bg-neutral-200 hover:bg-neutral-300 text-neutral-700`},{label:`±`,action:X,class:`bg-neutral-200 hover:bg-neutral-300 text-neutral-700`},{label:`%`,action:Z,class:`bg-neutral-200 hover:bg-neutral-300 text-neutral-700`},{label:`÷`,action:()=>K(`÷`),class:`bg-slate-500 hover:bg-slate-600 text-white`,icon:p},{label:`7`,action:()=>G(`7`),class:`bg-neutral-700 hover:bg-neutral-600 text-white`},{label:`8`,action:()=>G(`8`),class:`bg-neutral-700 hover:bg-neutral-600 text-white`},{label:`9`,action:()=>G(`9`),class:`bg-neutral-700 hover:bg-neutral-600 text-white`},{label:`×`,action:()=>K(`×`),class:`bg-slate-500 hover:bg-slate-600 text-white`},{label:`4`,action:()=>G(`4`),class:`bg-neutral-700 hover:bg-neutral-600 text-white`},{label:`5`,action:()=>G(`5`),class:`bg-neutral-700 hover:bg-neutral-600 text-white`},{label:`6`,action:()=>G(`6`),class:`bg-neutral-700 hover:bg-neutral-600 text-white`},{label:`-`,action:()=>K(`-`),class:`bg-slate-500 hover:bg-slate-600 text-white`,icon:i},{label:`1`,action:()=>G(`1`),class:`bg-neutral-700 hover:bg-neutral-600 text-white`},{label:`2`,action:()=>G(`2`),class:`bg-neutral-700 hover:bg-neutral-600 text-white`},{label:`3`,action:()=>G(`3`),class:`bg-neutral-700 hover:bg-neutral-600 text-white`},{label:`+`,action:()=>K(`+`),class:`bg-slate-500 hover:bg-slate-600 text-white`,icon:g},{label:`0`,action:()=>G(`0`),class:`bg-neutral-700 hover:bg-neutral-600 text-white col-span-2`},{label:`.`,action:()=>G(`.`),class:`bg-neutral-700 hover:bg-neutral-600 text-white`},{label:`=`,action:q,class:`bg-slate-500 hover:bg-slate-600 text-white`,icon:h}];return(i,s)=>(x(),f(a,{to:`body`},[m(w,{name:`calculator`},{default:_(()=>[o.open?(x(),n(`div`,{key:0,ref_key:`dialogRef`,ref:z,class:b([`fixed z-[100] select-none`,{"cursor-grabbing":B.value}]),style:l(U.value?{left:`${H.value.x}px`,top:`${H.value.y}px`}:{left:`50%`,top:`50%`,transform:`translate(-50%, -50%)`})},[c(`div`,D,[c(`div`,{class:`flex items-center justify-between px-3 py-2 bg-slate-800 cursor-grab active:cursor-grabbing`,onMousedown:ne},[c(`div`,O,[m(t(e),{class:`w-4 h-4 text-yellow-200`}),s[0]||=c(`span`,{class:`text-xs font-medium`},`Calculator`,-1)]),c(`button`,{onClick:re,class:`p-1 rounded-full hover:bg-neutral-700 text-neutral-400 hover:text-white transition-colors`},[m(t(T),{class:`w-4 h-4`})])],32),c(`div`,k,[c(`div`,A,[c(`span`,j,d(I.value)+` `+d(L.value||``),1),c(`button`,{onClick:Y,class:`p-1 rounded hover:bg-neutral-800 text-neutral-500 hover:text-neutral-300 transition-colors`},[m(t(r),{class:`w-4 h-4`})])]),c(`div`,{class:b([`text-right text-4xl font-light text-white tracking-tight overflow-hidden`,{"text-red-400":P.value===`Error`}])},d(W.value),3)]),c(`div`,M,[(x(),n(u,null,y(ie,(e,t)=>c(`button`,{key:t,onClick:e.action,class:b([`h-14 rounded-xl font-medium text-xl transition-all duration-150 active:scale-95`,e.class])},[e.icon?(x(),f(S(e.icon),{key:0,class:`w-5 h-5 mx-auto`})):(x(),n(`span`,te,d(e.label),1))],10,ee)),64))])])],6)):E(``,!0)]),_:1})]))}}),P=v(N,[[`__scopeId`,`data-v-7f0eba23`]]);export{P as default};