import "./useFormControl-Dnp3iC5X.js"; import "./ListboxItem-Bfe5qZhm.js"; import "./ConfigProvider-Ckl6KgMj.js"; import "./useHideOthers-L15EfXxs.js"; import "./useDirection-B1kSZwKq.js"; import "./useId-Da-MS2me.js"; import "./useKbd-BvGB3m10.js"; import "./PopperContent-b6gGwF_E.js"; import "./useTypeahead---iVCXRs.js"; import "./DialogPortal-Dl-6IrmI.js"; import "./Teleport-BJpx-KiC.js"; import "./utils-BpsHH13c.js"; import "./DialogTitle-aue_-Krx.js"; import "./utils-BFR0tnUV.js"; import "./VisuallyHiddenInput-B3HVdvGc.js"; import { i as e, n as t, r as n, s as r, t as i } from "./ComboboxItem-BqMucZ-W.js"; import "./Label-BsQm4x39.js"; import { $i as a, Ea as ee, Ei as o, Fi as s, Li as c, Mi as l, Ni as u, Oi as d, Pi as f, Ri as p, Ta as m, Ui as te, Yi as h, Zi as g, _a as ne, a as re, da as _, ji as v, ka as y, r as ie, ya as b } from "./index-CHNvwQRL.js"; import { n as x } from "./button-DSlecn3R.js"; import { a as S, i as C, n as w, r as T, t as E } from "./DialogTitle-BK5ecu1H.js"; import { t as D } from "./DialogFooter-CuLepmCa.js"; import { t as O } from "./Input-C1gBbhGk.js"; import "./badge-VpN0zBGl.js"; import { t as ae } from "./Card-DyXAPDF3.js"; import { t as k } from "./Label--GHB7iKy.js"; import { t as A } from "./BankAccountService-CMPAALVv.js"; var oe = { class: `relative min-h-screen overflow-y-scroll rounded-sm flex justify-center w-full py-5`, style: { "scrollbar-width": `none` } }, se = { class: `container mx-auto p-8` }, ce = { class: `flex flex-col md:flex-row justify-between items-start md:items-center gap-4 mb-8` }, le = { class: `flex mt-4 gap-3 w-full md:w-auto` }, ue = { key: 0, class: `text-center py-20` }, de = { key: 1, class: `text-center py-40` }, fe = { key: 2, class: `grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 pt-2` }, pe = { class: `flex justify-between items-start mb-4` }, me = { class: `flex-1 flex-row` }, he = { class: `font-semibold text-lg text-slate-800 transition-colors h-14` }, ge = { class: `text-sm text-slate-700 mb-auto` }, _e = { class: `space-y-2 my-auto text-sm text-gray-600` }, ve = { class: `flex items-center` }, ye = { key: 0, class: `flex items-center` }, be = { class: `font-semibold text-slate-700` }, xe = { key: 1, class: `flex items-center` }, Se = { class: `text-xs` }, j = { class: `justify-between items-center mt-6 pt-4 border-t gap-2 hidden` }, Ce = { class: `grid gap-4 py-4 px-1` }, we = { class: `flex gap-2 items-end` }, Te = { class: `space-y-2 flex-1` }, Ee = { class: `space-y-2 relative`, style: { "max-width": `75px` } }, De = { class: `space-y-2` }, Oe = { class: `space-y-2` }, ke = { class: `space-y-2` }, Ae = { class: `space-y-2` }, je = { key: 0, class: `fa fa-cog animate-spin mr-2` }, Me = { key: 1, class: `fa fa-plus mr-2` }, Ne = { class: `text-slate-700` }, Pe = { key: 0, class: `fa fa-cog animate-spin mr-2` }, Fe = { key: 1, class: `fa fa-trash mr-2` }, Ie = { __name: `Accounts`, setup(Ie) { let M = ie(), N = re().toast, P = b(!0), F = b(!1), I = b(!1); b(!1); let L = b(!1), R = b(!1), z = b([]), B = ne({}), V = b(null), H = b(``), U = b(``), W = b(``), G = [{ label: `Nigeria`, value: `NG` }, { label: `United States`, value: `US` }, { label: `United Kingdom`, value: `GB` }, { label: `South Africa`, value: `ZA` }, { label: `Ghana`, value: `GH` }, { label: `Kenya`, value: `KE` }], K = b([]), q = b(!1), J = [{ label: `NGN - Nigerian Naira`, value: `NGN` }, { label: `ZAR - South African Rand`, value: `ZAR` }, { label: `GHS - Ghanaian Cedi`, value: `GHS` }, { label: `KES - Kenyan Shilling`, value: `KES` }, { label: `EGP - Egyptian Pound`, value: `EGP` }, { label: `MAD - Moroccan Dirham`, value: `MAD` }, { label: `TZS - Tanzanian Shilling`, value: `TZS` }, { label: `UGX - Ugandan Shilling`, value: `UGX` }, { label: `ETB - Ethiopian Birr`, value: `ETB` }, { label: `XOF - West African CFA Franc`, value: `XOF` }, { label: `XAF - Central African CFA Franc`, value: `XAF` }, { label: `USD - US Dollar`, value: `USD` }, { label: `CAD - Canadian Dollar`, value: `CAD` }, { label: `MXN - Mexican Peso`, value: `MXN` }, { label: `BRL - Brazilian Real`, value: `BRL` }, { label: `ARS - Argentine Peso`, value: `ARS` }, { label: `CLP - Chilean Peso`, value: `CLP` }, { label: `COP - Colombian Peso`, value: `COP` }, { label: `PEN - Peruvian Sol`, value: `PEN` }, { label: `JMD - Jamaican Dollar`, value: `JMD` }, { label: `TTD - Trinidad and Tobago Dollar`, value: `TTD` }, { label: `CNY - Chinese Yuan`, value: `CNY` }, { label: `JPY - Japanese Yen`, value: `JPY` }, { label: `INR - Indian Rupee`, value: `INR` }, { label: `KRW - South Korean Won`, value: `KRW` }, { label: `SGD - Singapore Dollar`, value: `SGD` }, { label: `HKD - Hong Kong Dollar`, value: `HKD` }, { label: `AUD - Australian Dollar`, value: `AUD` }, { label: `NZD - New Zealand Dollar`, value: `NZD` }, { label: `THB - Thai Baht`, value: `THB` }, { label: `MYR - Malaysian Ringgit`, value: `MYR` }, { label: `IDR - Indonesian Rupiah`, value: `IDR` }, { label: `PHP - Philippine Peso`, value: `PHP` }, { label: `VND - Vietnamese Dong`, value: `VND` }, { label: `PKR - Pakistani Rupee`, value: `PKR` }, { label: `BDT - Bangladeshi Taka`, value: `BDT` }, { label: `LKR - Sri Lankan Rupee`, value: `LKR` }, { label: `TWD - New Taiwan Dollar`, value: `TWD` }, { label: `EUR - Euro`, value: `EUR` }, { label: `GBP - British Pound`, value: `GBP` }, { label: `CHF - Swiss Franc`, value: `CHF` }, { label: `SEK - Swedish Krona`, value: `SEK` }, { label: `NOK - Norwegian Krone`, value: `NOK` }, { label: `DKK - Danish Krone`, value: `DKK` }, { label: `PLN - Polish Zloty`, value: `PLN` }, { label: `CZK - Czech Koruna`, value: `CZK` }, { label: `HUF - Hungarian Forint`, value: `HUF` }, { label: `RON - Romanian Leu`, value: `RON` }, { label: `BGN - Bulgarian Lev`, value: `BGN` }, { label: `HRK - Croatian Kuna`, value: `HRK` }, { label: `RUB - Russian Ruble`, value: `RUB` }, { label: `UAH - Ukrainian Hryvnia`, value: `UAH` }, { label: `TRY - Turkish Lira`, value: `TRY` }, { label: `ISK - Icelandic Krona`, value: `ISK` }, { label: `AED - UAE Dirham`, value: `AED` }, { label: `SAR - Saudi Riyal`, value: `SAR` }, { label: `QAR - Qatari Riyal`, value: `QAR` }, { label: `KWD - Kuwaiti Dinar`, value: `KWD` }, { label: `BHD - Bahraini Dinar`, value: `BHD` }, { label: `OMR - Omani Rial`, value: `OMR` }, { label: `JOD - Jordanian Dinar`, value: `JOD` }, { label: `ILS - Israeli Shekel`, value: `ILS` }, { label: `LBP - Lebanese Pound`, value: `LBP` }, { label: `IQD - Iraqi Dinar`, value: `IQD` }], Y = [{ label: `Savings`, value: `savings` }, { label: `Current`, value: `current` }, { label: `Checking`, value: `checking` }, { label: `Business`, value: `business` }], X = b({ country: `NG`, bankName: ``, accountName: ``, accountNumber: ``, accountType: ``, currency: `NGN` }), Le = v(() => { if (!H.value) return K; let e = H.value.toLowerCase(); return K.value.filter(t => t.label.toLowerCase().includes(e)) }), Re = v(() => { if (!U.value) return Y; let e = U.value.toLowerCase(); return Y.filter(t => t.label.toLowerCase().includes(e) || t.value.toLowerCase().includes(e)) }), ze = v(() => { if (!W.value) return J; let e = W.value.toLowerCase(); return J.filter(t => t.label.toLowerCase().includes(e) || t.value.toLowerCase().includes(e)) }); h(async () => { await Z(), await Q(X.value.country) }); async function Z() { try { P.value = !0, z.value = (await A.getBankAccounts()).data || [] } catch (e) { N({ id: `load-accounts-error`, title: `Uh oh! Something went wrong.`, description: e.message || `We could not load your bank accounts`, action: te(x, { variant: `default`, size: `sm`, onClick: Z }, `Retry`) }) } finally { P.value = !1 } } async function Q(e) { if (e) try { q.value = !0; let { data: t } = await A.getBanksByCountry(e); t && (K.value = t.map(e => ({ label: e.name, value: e.name, code: e.code, id: e.code }))) } catch (e) { console.error(`Failed to fetch banks:`, e), K.value = [] } finally { q.value = !1 } } async function $() { try { F.value = !0; let { data: e } = await A.addBankAccount(X.value); N({ id: `account-added`, title: `Success!`, description: `Bank account added successfully` }), L.value = !1, z.value.push(e), qe(), M.push(`/accounts/${e.reference}#blue`) } catch (e) { N({ id: `add-account-error`, title: `Error`, description: e.message || `Failed to add bank account`, variant: `destructive` }) } finally { F.value = !1 } } async function Be(e) { try { B[e.reference] = !0, await A.syncBankAccount(e.reference), N({ id: `sync-${e.reference}`, title: `Synced!`, description: `${e.accountName} has been synced successfully` }), await Z() } catch (t) { N({ id: `sync-error-${e.reference}`, title: `Sync Failed`, description: t.message || `Failed to sync account`, variant: `destructive` }) } finally { B[e.reference] = !1 } } function Ve(e) { V.value = e, R.value = !0 } async function He() { if (V.value) try { I.value = !0, await A.removeBankAccount(V.value.reference), N({ id: `account-removed`, title: `Removed`, description: `Bank account removed successfully` }), R.value = !1, z.value = z.value.filter(e => e.reference !== V.value.reference), V.value = null } catch (e) { N({ id: `remove-account-error`, title: `Error`, description: e.message || `Failed to remove bank account`, variant: `destructive` }) } finally { I.value = !1 } } function Ue(e) { M.push(`/accounts/${e.reference}`) } function We(e) { return e ? `****${e.slice(-4)}` : `N/A` } function Ge(e = 0) { return new Intl.NumberFormat(`en-NG`, { style: `currency`, currency: `NGN` }).format(e || 0) } function Ke(e) { return e ? new Date(e).toLocaleDateString(`en-US`, { year: `numeric`, month: `short`, day: `numeric` }) : `Never` } function qe() { X.value = { bankName: ``, accountName: ``, accountNumber: ``, accountType: ``, currency: `NGN` } } return (te, h) => (g(), s(`div`, oe, [l(`div`, se, [l(`div`, ce, [h[14] ||= l(`div`, null, [l(`h1`, { class: `text-2xl font-bold text-slate-700` }, `Connected Accounts`), l(`p`, { class: `text-sm text-gray-600` }, `Manage your bank accounts and reconciliation`)], -1), l(`div`, le, [p(m(x), { class: `rounded-full flex-1 md:flex-none`, onClick: h[0] ||= e => L.value = !0 }, { default: _(() => [...h[13] ||= [l(`i`, { class: `fa fa-plus mr-2` }, null, -1), c(` Add Account `, -1)]]), _: 1 })])]), h[24] ||= l(`hr`, { class: `h-1 bg-slate-50 my-10 opacity-30` }, null, -1), P.value ? (g(), s(`div`, ue, [...h[15] ||= [l(`i`, { class: `fa fa-cog animate-spin text-4xl text-gray-500` }, null, -1), l(`p`, { class: `mt-4 text-gray-600` }, `Loading accounts...`, -1)]])) : z.value.length === 0 ? (g(), s(`div`, de, [h[17] ||= l(`i`, { class: `fa fa-university text-4xl text-gray-300 mb-4` }, null, -1), h[18] ||= l(`h3`, { class: `text-xl font-semibold text-gray-700` }, `No bank accounts connected`, -1), h[19] ||= l(`p`, { class: `text-gray-600 mt-2 mb-6` }, `Connect your first bank account to start managing finances`, -1), p(m(x), { class: `rounded-full px-8`, onClick: h[1] ||= e => L.value = !0 }, { default: _(() => [...h[16] ||= [l(`i`, { class: `fa fa-plus mr-2` }, null, -1), c(` Add Bank Account `, -1)]]), _: 1 })])) : (g(), s(`div`, fe, [(g(!0), s(d, null, a(z.value, e => (g(), u(m(ae), { key: e.reference, class: `p-6 shadow-none transition-all cursor-pointer border-2 hover:shadow-md hover:border-slate-200 group`, onClick: t => Ue(e) }, { default: _(() => [l(`div`, pe, [l(`div`, me, [l(`h3`, he, y(e.accountName), 1), l(`p`, ge, y(e.bankName), 1)])]), l(`div`, _e, [l(`div`, ve, [h[20] ||= l(`i`, { class: `fa fa-hashtag mr-2 w-4` }, null, -1), l(`span`, null, y(We(e.accountNumber)), 1)]), e.balance === void 0 ? f(``, !0) : (g(), s(`div`, ye, [h[21] ||= l(`i`, { class: `fa fa-vault mr-2 w-4` }, null, -1), l(`span`, be, y(Ge(e.balance)), 1)])), e.lastSyncedAt ? (g(), s(`div`, xe, [h[22] ||= l(`i`, { class: `fa fa-sync mr-2 w-4` }, null, -1), l(`span`, Se, y(Ke(e.lastSyncedAt)), 1)])) : f(``, !0)]), l(`div`, j, [p(m(x), { variant: `outline`, size: `sm`, onClick: o(t => Be(e), [`stop`]), disabled: B[e.reference], class: `rounded-full hover:bg-gray-50 hover:border` }, { default: _(() => [l(`i`, { class: ee([`fa`, B[e.reference] ? `fa-cog animate-spin` : `fa-sync`]) }, null, 2)]), _: 2 }, 1032, [`onClick`, `disabled`]), p(m(x), { variant: `ghost`, size: `sm`, onClick: o(t => Ve(e), [`stop`]), class: `rounded-full text-red-600 hover:border border-red-100 hover:bg-red-50` }, { default: _(() => [...h[23] ||= [l(`i`, { class: `fa fa-trash` }, null, -1)]]), _: 1 }, 8, [`onClick`])])]), _: 2 }, 1032, [`onClick`]))), 128))]))]), p(m(S), { open: L.value, "onUpdate:open": h[10] ||= e => L.value = e }, { default: _(() => [p(m(C), { class: `sm:max-w-[500px] overflow-y-scroll` }, { default: _(() => [p(m(w), null, { default: _(() => [p(m(E), null, { default: _(() => [...h[25] ||= [c(`Add Bank Account`, -1)]]), _: 1 }), p(m(T), null, { default: _(() => [...h[26] ||= [c(` Connect a new bank account to track transactions and reconcile finances. `, -1)]]), _: 1 })]), _: 1 }), l(`form`, { onSubmit: o($, [`prevent`]), class: `overflow-y-scroll max-h-[75vh]` }, [l(`div`, Ce, [l(`div`, we, [l(`div`, Te, [p(m(k), null, { default: _(() => [...h[27] ||= [c(`Bank Name`, -1)]]), _: 1 }), p(m(n), { modelValue: X.value.bankName, "onUpdate:modelValue": h[2] ||= e => X.value.bankName = e, class: `relative`, required: ``, disabled: q.value }, { default: _(() => [p(m(e), { class: `w-full` }, { default: _(() => [p(m(t), { class: `rounded-full w-full`, placeholder: q.value ? `Loading banks...` : `Search or select a bank in your country...`, disabled: q.value }, null, 8, [`placeholder`, `disabled`])]), _: 1 }), p(m(r), { class: `absolute bg-white z-50 border border-slate-300 rounded-sm mt-1 px-2 py-3 max-h-[250px] overflow-y-scroll w-full` }, { default: _(() => [(g(!0), s(d, null, a(Le.value.value, e => (g(), u(m(i), { key: e.id, value: e.label, class: `px-4 py-2 rounded-full cursor-pointer hover:bg-gray-100` }, { default: _(() => [c(y(e.label), 1)]), _: 2 }, 1032, [`value`]))), 128))]), _: 1 })]), _: 1 }, 8, [`modelValue`, `disabled`])]), l(`div`, Ee, [p(m(n), { modelValue: X.value.country, "onUpdate:modelValue": [h[3] ||= e => X.value.country = e, h[4] ||= e => { Q(e), X.value.bankName = `` }], class: `relative`, required: ``, "display-value": e => G.find(t => t.value === e)?.label || e }, { default: _(() => [p(m(e), { class: `w-full` }, { default: _(() => [p(m(t), { class: `rounded-full w-full text-xs pr-7`, pl3000aceholder: `Country` }), h[28] ||= l(`i`, { class: `fa fa-globe absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 text-xs pointer-events-none` }, null, -1)]), _: 1 }), p(m(r), { class: `absolute bg-white z-50 border border-slate-300 rounded-sm mt-1 px-2 py-3 max-h-[250px] overflow-y-scroll min-w-[200px] right-0` }, { default: _(() => [(g(), s(d, null, a(G, e => p(m(i), { key: e.value, value: e.value, class: `px-4 py-2 rounded-full cursor-pointer hover:bg-gray-100` }, { default: _(() => [c(y(e.label), 1)]), _: 2 }, 1032, [`value`])), 64))]), _: 1 })]), _: 1 }, 8, [`modelValue`, `display-value`])])]), l(`div`, De, [p(m(k), null, { default: _(() => [...h[29] ||= [c(`Account Name`, -1)]]), _: 1 }), p(m(O), { modelValue: X.value.accountName, "onUpdate:modelValue": h[5] ||= e => X.value.accountName = e, placeholder: `e.g., Business Checking, Main Account`, class: `rounded-full`, required: `` }, null, 8, [`modelValue`])]), l(`div`, Oe, [p(m(k), null, { default: _(() => [...h[30] ||= [c(`Account Number`, -1)]]), _: 1 }), p(m(O), { modelValue: X.value.accountNumber, "onUpdate:modelValue": h[6] ||= e => X.value.accountNumber = e, placeholder: `Enter account number`, class: `rounded-full`, type: `text`, required: `` }, null, 8, [`modelValue`])]), l(`div`, ke, [p(m(k), null, { default: _(() => [...h[31] ||= [c(`Account Type`, -1)]]), _: 1 }), p(m(n), { modelValue: X.value.accountType, "onUpdate:modelValue": h[7] ||= e => X.value.accountType = e, class: `relative`, required: `` }, { default: _(() => [p(m(e), { class: `w-full` }, { default: _(() => [p(m(t), { class: `rounded-full w-full`, placeholder: `Search or select account type...` })]), _: 1 }), p(m(r), { class: `absolute bg-white z-50 border rounded-sm mt-1 px-2 py-3 max-h-[250px] overflow-y-auto w-full` }, { default: _(() => [(g(!0), s(d, null, a(Re.value, e => (g(), u(m(i), { key: e.value, value: e.value, class: `px-4 py-2 rounded-full cursor-pointer hover:bg-gray-100` }, { default: _(() => [c(y(e.label), 1)]), _: 2 }, 1032, [`value`]))), 128))]), _: 1 })]), _: 1 }, 8, [`modelValue`])]), l(`div`, Ae, [p(m(k), null, { default: _(() => [...h[32] ||= [c(`Currency`, -1)]]), _: 1 }), p(m(n), { modelValue: X.value.currency, "onUpdate:modelValue": h[8] ||= e => X.value.currency = e, class: `relative`, required: `` }, { default: _(() => [p(m(e), { class: `w-full` }, { default: _(() => [p(m(t), { class: `rounded-full w-full`, placeholder: `Search or select currency...` })]), _: 1 }), p(m(r), { class: `absolute bg-white z-50 border rounded-sm mt-1 px-2 py-3 max-h-[250px] overflow-y-auto w-full` }, { default: _(() => [(g(!0), s(d, null, a(ze.value, e => (g(), u(m(i), { key: e.value, value: e.value, class: `px-4 py-2 rounded-full cursor-pointer hover:bg-gray-100` }, { default: _(() => [c(y(e.label), 1)]), _: 2 }, 1032, [`value`]))), 128))]), _: 1 })]), _: 1 }, 8, [`modelValue`])])]), p(m(D), { class: `gap-2` }, { default: _(() => [p(m(x), { type: `button`, variant: `outline`, class: `rounded-full`, onClick: h[9] ||= e => L.value = !1 }, { default: _(() => [...h[33] ||= [c(` Cancel `, -1)]]), _: 1 }), p(m(x), { type: `submit`, class: `rounded-full`, disabled: F.value }, { default: _(() => [F.value ? (g(), s(`i`, je)) : (g(), s(`i`, Me)), c(` ` + y(F.value ? `Adding...` : `Add Account`), 1)]), _: 1 }, 8, [`disabled`])]), _: 1 })], 32)]), _: 1 })]), _: 1 }, 8, [`open`]), p(m(S), { open: R.value, "onUpdate:open": h[12] ||= e => R.value = e }, { default: _(() => [p(m(C), { class: `sm:max-w-[425px]` }, { default: _(() => [p(m(w), null, { default: _(() => [p(m(E), null, { default: _(() => [...h[34] ||= [c(`Remove Bank Account?`, -1)]]), _: 1 }), p(m(T), null, { default: _(() => [h[35] ||= c(` You're about to remove `, -1), l(`strong`, Ne, y(V.value?.accountName), 1), c(` from ` + y(V.value?.bankName) + `. This action cannot be undone. `, 1)]), _: 1 })]), _: 1 }), p(m(D), { class: `gap-2 mt-4` }, { default: _(() => [p(m(x), { type: `button`, variant: `outline`, class: `rounded-full flex-1`, onClick: h[11] ||= e => R.value = !1 }, { default: _(() => [...h[36] ||= [c(` Cancel `, -1)]]), _: 1 }), p(m(x), { type: `button`, variant: `destructive`, class: `rounded-full flex-1`, onClick: He, disabled: I.value }, { default: _(() => [I.value ? (g(), s(`i`, Pe)) : (g(), s(`i`, Fe)), c(` ` + y(I.value ? `Removing...` : `Remove`), 1)]), _: 1 }, 8, [`disabled`])]), _: 1 })]), _: 1 })]), _: 1 }, 8, [`open`])])) } }; export { Ie as default };