import{An as e,Bi as t,Fa as n,Hi as r,La as i,Li as a,Oa as o,Oi as s,Pa as c,Ra as l,Ui as u,Vi as d,Wi as f,Yi as p,b as m,ba as h,ca as g,da as _,ht as v,i as y,in as b,kn as x,kt as S,oa as C,qi as w,wn as T,zi as ee}from"./index-BjUg3jag.js";var E={class:`w-72 rounded-2xl bg-slate-900 shadow-2xl overflow-hidden border border-neutral-700/50`},D={class:`flex items-center gap-2 text-neutral-400`},O={class:`px-4 py-5 bg-slate-950`},k={class:`flex items-center justify-between mb-1`},A={class:`text-neutral-500 text-xs h-4`},te={class:`grid grid-cols-4 gap-1 p-2 bg-slate-950`},ne=[`onClick`],j={key:1},M=p({__name:`CalculatorDialog`,props:{open:{type:Boolean}},emits:[`update:open`],setup(p,{emit:y}){let M=y,N=o(`0`),P=o(``),F=o(``),I=o(null),L=o(!1),R=o(null),z=o(!1),B=o({x:0,y:0}),V=o({x:0,y:0}),H=o(!1),U=t(()=>{if(N.value===``)return`0`;let e=parseFloat(N.value);if(isNaN(e)||N.value.endsWith(`.`))return N.value;let t=N.value.split(`.`),n=parseInt(t[0]).toLocaleString(`en-US`);return t.length===2?`${n}.${t[1]}`:n}),W=e=>{if(L.value){N.value=e,P.value=e,L.value=!1;return}e===`.`&&N.value.includes(`.`)||(N.value===`0`&&e!==`.`?N.value=e:N.value+=e,P.value=N.value)},G=e=>{P.value!==``&&(F.value!==``&&K(),I.value=e,F.value=P.value,P.value=``,L.value=!0)},K=()=>{let e,t=parseFloat(F.value),n=parseFloat(P.value||N.value);if(!(isNaN(t)||isNaN(n))){switch(I.value){case`+`:e=t+n;break;case`-`:e=t-n;break;case`×`:e=t*n;break;case`÷`:e=n===0?NaN:t/n;break;default:return}isNaN(e)?N.value=`Error`:N.value=String(Math.round(e*1e10)/1e10),P.value=N.value,F.value=``,I.value=null,L.value=!0}},q=()=>{N.value=`0`,P.value=``,F.value=``,I.value=null,L.value=!1},J=()=>{N.value.length===1||N.value===`Error`?(N.value=`0`,P.value=``):(N.value=N.value.slice(0,-1),P.value=N.value)},Y=()=>{N.value===`0`||N.value===`Error`||(N.value.startsWith(`-`)?N.value=N.value.slice(1):N.value=`-`+N.value,P.value=N.value)},X=()=>{let e=parseFloat(N.value);isNaN(e)||(N.value=String(e/100),P.value=N.value)},Z=e=>{if(!R.value)return;z.value=!0;let t=R.value.getBoundingClientRect();B.value={x:e.clientX-t.left,y:e.clientY-t.top},H.value||=(V.value={x:t.left,y:t.top},!0),document.addEventListener(`mousemove`,Q),document.addEventListener(`mouseup`,$)},Q=e=>{if(!z.value||!R.value)return;let t=R.value.getBoundingClientRect(),n=window.innerWidth,r=window.innerHeight,i=e.clientX-B.value.x,a=e.clientY-B.value.y;i=Math.max(0,Math.min(i,n-t.width)),a=Math.max(0,Math.min(a,r-t.height)),V.value={x:i,y:a}},$=()=>{z.value=!1,document.removeEventListener(`mousemove`,Q),document.removeEventListener(`mouseup`,$)},re=()=>{M(`update:open`,!1),q(),H.value=!1},ie=[{label:`C`,action:q,class:`bg-neutral-200 hover:bg-neutral-300 text-neutral-700`},{label:`±`,action:Y,class:`bg-neutral-200 hover:bg-neutral-300 text-neutral-700`},{label:`%`,action:X,class:`bg-neutral-200 hover:bg-neutral-300 text-neutral-700`},{label:`÷`,action:()=>G(`÷`),class:`bg-slate-500 hover:bg-slate-600 text-white`,icon:x},{label:`7`,action:()=>W(`7`),class:`bg-neutral-700 hover:bg-neutral-600 text-white`},{label:`8`,action:()=>W(`8`),class:`bg-neutral-700 hover:bg-neutral-600 text-white`},{label:`9`,action:()=>W(`9`),class:`bg-neutral-700 hover:bg-neutral-600 text-white`},{label:`×`,action:()=>G(`×`),class:`bg-slate-500 hover:bg-slate-600 text-white`},{label:`4`,action:()=>W(`4`),class:`bg-neutral-700 hover:bg-neutral-600 text-white`},{label:`5`,action:()=>W(`5`),class:`bg-neutral-700 hover:bg-neutral-600 text-white`},{label:`6`,action:()=>W(`6`),class:`bg-neutral-700 hover:bg-neutral-600 text-white`},{label:`-`,action:()=>G(`-`),class:`bg-slate-500 hover:bg-slate-600 text-white`,icon:S},{label:`1`,action:()=>W(`1`),class:`bg-neutral-700 hover:bg-neutral-600 text-white`},{label:`2`,action:()=>W(`2`),class:`bg-neutral-700 hover:bg-neutral-600 text-white`},{label:`3`,action:()=>W(`3`),class:`bg-neutral-700 hover:bg-neutral-600 text-white`},{label:`+`,action:()=>G(`+`),class:`bg-slate-500 hover:bg-slate-600 text-white`,icon:v},{label:`0`,action:()=>W(`0`),class:`bg-neutral-700 hover:bg-neutral-600 text-white col-span-2`},{label:`.`,action:()=>W(`.`),class:`bg-neutral-700 hover:bg-neutral-600 text-white`},{label:`=`,action:K,class:`bg-slate-500 hover:bg-slate-600 text-white`,icon:T}];return(t,o)=>(C(),r(ee,{to:`body`},[w(s,{name:`calculator`},{default:h(()=>[p.open?(C(),f(`div`,{key:0,ref_key:`dialogRef`,ref:R,class:n([`fixed z-[100] select-none`,{"cursor-grabbing":z.value}]),style:i(H.value?{left:`${V.value.x}px`,top:`${V.value.y}px`}:{left:`50%`,top:`50%`,transform:`translate(-50%, -50%)`})},[d(`div`,E,[d(`div`,{class:`flex items-center justify-between px-3 py-2 bg-slate-800 cursor-grab active:cursor-grabbing`,onMousedown:Z},[d(`div`,D,[w(c(b),{class:`w-4 h-4 text-yellow-200`}),o[0]||=d(`span`,{class:`text-xs font-medium`},`Calculator`,-1)]),d(`button`,{onClick:re,class:`p-1 rounded-full hover:bg-neutral-700 text-neutral-400 hover:text-white transition-colors`},[w(c(m),{class:`w-4 h-4`})])],32),d(`div`,O,[d(`div`,k,[d(`span`,A,l(F.value)+` `+l(I.value||``),1),d(`button`,{onClick:J,class:`p-1 rounded hover:bg-neutral-800 text-neutral-500 hover:text-neutral-300 transition-colors`},[w(c(e),{class:`w-4 h-4`})])]),d(`div`,{class:n([`text-right text-4xl font-light text-white tracking-tight overflow-hidden`,{"text-red-400":N.value===`Error`}])},l(U.value),3)]),d(`div`,te,[(C(),f(a,null,g(ie,(e,t)=>d(`button`,{key:t,onClick:e.action,class:n([`h-14 rounded-xl font-medium text-xl transition-all duration-150 active:scale-95`,e.class])},[e.icon?(C(),r(_(e.icon),{key:0,class:`w-5 h-5 mx-auto`})):(C(),f(`span`,j,l(e.label),1))],10,ne)),64))])])],6)):u(``,!0)]),_:1})]))}}),N=y(M,[[`__scopeId`,`data-v-7f0eba23`]]);export{N as default};