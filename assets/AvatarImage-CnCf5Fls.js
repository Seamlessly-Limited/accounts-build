import{$t as e,Dt as t,Ht as n,K as r,Nt as i,O as a,Ot as o,P as s,Tt as c,Ut as l,Wt as u,an as d,en as f,fn as p,gn as m,in as h,qt as g,rt as _,vn as v,vt as y}from"./index-BNQA11Dp.js";var[b,x]=_(`AvatarRoot`),S=i({__name:`AvatarRoot`,props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:`span`}},setup(e){return s(),x({imageLoadingStatus:p(`idle`)}),(e,n)=>(u(),t(v(a),{"as-child":e.asChild,as:e.as},{default:h(()=>[g(e.$slots,`default`)]),_:3},8,[`as-child`,`as`]))}}),C=i({__name:`AvatarFallback`,props:{delayMs:{type:Number,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:`span`}},setup(e){let n=e,i=b();s();let c=p(n.delayMs===void 0);return f(e=>{if(n.delayMs&&r){let t=window.setTimeout(()=>{c.value=!0},n.delayMs);e(()=>{window.clearTimeout(t)})}}),(e,n)=>c.value&&v(i).imageLoadingStatus.value!==`loaded`?(u(),t(v(a),{key:0,"as-child":e.asChild,as:e.as},{default:h(()=>[g(e.$slots,`default`)]),_:3},8,[`as-child`,`as`])):o(`v-if`,!0)}});function w(e,t){return e?t?(e.src!==t&&(e.src=t),e.complete&&e.naturalWidth>0?`loaded`:`loading`):`error`:`idle`}function T(e,{referrerPolicy:t,crossOrigin:i}={}){let a=p(!1),o=p(null),s=c(()=>a.value?(!o.value&&r&&(o.value=new window.Image),o.value):null),u=p(w(s.value,e.value)),d=e=>()=>{a.value&&(u.value=e)};return n(()=>{a.value=!0,f(n=>{let r=s.value;if(!r)return;u.value=w(r,e.value);let a=d(`loaded`),o=d(`error`);r.addEventListener(`load`,a),r.addEventListener(`error`,o),t?.value&&(r.referrerPolicy=t.value),typeof i?.value==`string`&&(r.crossOrigin=i.value),n(()=>{r.removeEventListener(`load`,a),r.removeEventListener(`error`,o)})})}),l(()=>{a.value=!1}),u}var E=i({__name:`AvatarImage`,props:{src:{type:String,required:!0},referrerPolicy:{type:null,required:!1},crossOrigin:{type:null,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:`img`}},emits:[`loadingStatusChange`],setup(n,{emit:r}){let i=n,o=r,{src:c,referrerPolicy:l,crossOrigin:f}=m(i);s();let p=b(),_=T(c,{referrerPolicy:l,crossOrigin:f});return e(_,e=>{o(`loadingStatusChange`,e),e!==`idle`&&(p.imageLoadingStatus.value=e)},{immediate:!0}),(e,n)=>d((u(),t(v(a),{role:`img`,"as-child":e.asChild,as:e.as,src:v(c),"referrer-policy":v(l)},{default:h(()=>[g(e.$slots,`default`)]),_:3},8,[`as-child`,`as`,`src`,`referrer-policy`])),[[y,v(_)===`loaded`]])}});export{C as n,S as r,E as t};