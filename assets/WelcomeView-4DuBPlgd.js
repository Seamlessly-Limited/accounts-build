import"./useFormControl-CX6GmaYB.js";import"./useNonce-DVUBjIDW.js";import"./nullish-CfjOSA4G.js";import"./useArrowNavigation-siWGBYoD.js";import"./ConfigProvider-Bfe_xD5n.js";import"./useHideOthers-Bcr8f6vD.js";import"./useDirection-aXfNvefe.js";import"./PopperAnchor-erCS4IxC.js";import"./useId-BvCsSMTc.js";import"./PopperContent-CZ1wdiMA.js";import"./useTypeahead-YiphYzOv.js";import"./DialogPortal-CSfKRGHj.js";import"./Teleport-BfhtEng-.js";import"./utils-CD-h--se.js";import"./DialogTitle-M8G0eeQi.js";import"./utils-BNDbqo5S.js";import"./RovingFocusGroup-CBpQnJIU.js";import{a as e,i as t,n,r,t as i}from"./DropdownMenuTrigger-BewHzeOm.js";import{t as a}from"./DropdownMenuLabel-DYbfkNAj.js";import"./MenuSeparator-Ccy1pRZ5.js";import{t as o}from"./DropdownMenuSeparator-Bxgm0VAC.js";import"./Label-DcDcP2xg.js";import"./SelectViewport-DjSqcfiH.js";import{$i as s,Bi as c,Bt as l,Fa as u,Fi as d,Gr as f,Hi as p,Ki as m,Li as h,O as g,Oa as _,Or as v,Pa as y,Ra as b,Tn as ee,Ui as x,Vi as S,Wi as C,Wr as w,X as te,Yi as T,Zn as E,_t as D,an as O,b as k,ba as A,ca as j,cn as M,cr as ne,da as N,dr as re,ft as ie,i as P,ia as ae,la as F,mn as I,o as L,oa as R,pn as z,qi as B,ta as V,tr as H,vt as U,wi as W}from"./index-BjUg3jag.js";import{n as G}from"./button-DNrl_4di.js";import{a as K,i as q,n as J,r as oe,t as se}from"./DialogTitle-fBRgBiwO.js";import{t as ce}from"./DialogFooter-DEWX8V5m.js";import{t as le}from"./badge-DcWXCUwR.js";import{t as ue}from"./Label-B71BjG_z.js";import{a as de,i as fe,n as pe,r as Y,t as me}from"./SelectValue-CXcSz8ZP.js";var he=T({__name:`DropdownMenu`,props:{defaultOpen:{type:Boolean},open:{type:Boolean},dir:{},modal:{type:Boolean}},emits:[`update:open`],setup(t,{emit:n}){let r=w(t,n);return(t,n)=>(R(),p(y(e),V({"data-slot":`dropdown-menu`},y(r)),{default:A(()=>[F(t.$slots,`default`)]),_:3},16))}}),ge=T({__name:`DropdownMenuContent`,props:{forceMount:{type:Boolean},loop:{type:Boolean},side:{},sideOffset:{default:4},sideFlip:{type:Boolean},align:{},alignOffset:{},alignFlip:{type:Boolean},avoidCollisions:{type:Boolean},collisionBoundary:{},collisionPadding:{},arrowPadding:{},sticky:{},hideWhenDetached:{type:Boolean},positionStrategy:{},updatePositionStrategy:{},disableUpdateOnLayoutShift:{type:Boolean},prioritizePosition:{type:Boolean},reference:{},asChild:{type:Boolean},as:{},class:{}},emits:[`escapeKeyDown`,`pointerDownOutside`,`focusOutside`,`interactOutside`,`closeAutoFocus`],setup(e,{emit:r}){let i=e,a=r,o=W(i,`class`),s=w(o,a);return(e,r)=>(R(),p(y(n),null,{default:A(()=>[B(y(t),V({"data-slot":`dropdown-menu-content`},y(s),{class:y(v)(`bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 max-h-(--reka-dropdown-menu-content-available-height) min-w-[8rem] origin-(--reka-dropdown-menu-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border p-1 shadow-md`,i.class)}),{default:A(()=>[F(e.$slots,`default`)]),_:3},16,[`class`])]),_:3}))}}),_e=T({__name:`DropdownMenuItem`,props:{disabled:{type:Boolean},textValue:{},asChild:{type:Boolean},as:{},class:{},inset:{type:Boolean},variant:{default:`default`}},setup(e){let t=e,n=W(t,`inset`,`variant`,`class`),i=f(n);return(n,a)=>(R(),p(y(r),V({"data-slot":`dropdown-menu-item`,"data-inset":e.inset?``:void 0,"data-variant":e.variant},y(i),{class:y(v)(`focus:bg-white focus:text-accent-foreground data-[variant=destructive]:text-destructive-foreground data-[variant=destructive]:focus:bg-destructive/10 dark:data-[variant=destructive]:focus:bg-destructive/40 data-[variant=destructive]:focus:text-destructive-foreground data-[variant=destructive]:*:[svg]:!text-destructive-foreground [&_svg:not([class*='text-'])]:text-muted-foreground relative flex cursor-default items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 data-[inset]:pl-8 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4`,t.class)}),{default:A(()=>[F(n.$slots,`default`)]),_:3},16,[`data-inset`,`data-variant`,`class`]))}}),ve=T({__name:`DropdownMenuLabel`,props:{asChild:{type:Boolean},as:{},class:{},inset:{type:Boolean}},setup(e){let t=e,n=W(t,`class`,`inset`),r=f(n);return(n,i)=>(R(),p(y(a),V({"data-slot":`dropdown-menu-label`,"data-inset":e.inset?``:void 0},y(r),{class:y(v)(`px-2 py-1.5 text-sm font-medium data-[inset]:pl-8`,t.class)}),{default:A(()=>[F(n.$slots,`default`)]),_:3},16,[`data-inset`,`class`]))}}),ye=T({__name:`DropdownMenuSeparator`,props:{asChild:{type:Boolean},as:{},class:{}},setup(e){let t=e,n=W(t,`class`);return(e,r)=>(R(),p(y(o),V({"data-slot":`dropdown-menu-separator`},y(n),{class:y(v)(`bg-border -mx-1 my-1 h-px`,t.class)}),null,16,[`class`]))}}),be=T({__name:`DropdownMenuTrigger`,props:{disabled:{type:Boolean},asChild:{type:Boolean},as:{}},setup(e){let t=f(e);return(e,n)=>(R(),p(y(i),V({"data-slot":`dropdown-menu-trigger`},y(t)),{default:A(()=>[F(e.$slots,`default`)]),_:3},16))}}),xe={async getDocuments(e=0,t=50){return L.get(`/org/documents`,{query:{page:e,size:t},authorizeRequest:!0,organisationAware:!0})},async getDocumentsByCategory(e){return L.get(`/org/documents/category/${e}`,{authorizeRequest:!0,organisationAware:!0})},async searchDocuments(e){return L.get(`/org/documents/search`,{query:{query:e},authorizeRequest:!0,organisationAware:!0})},async getDocumentCounts(){return L.get(`/org/documents/counts`,{authorizeRequest:!0,organisationAware:!0})},async getDocument(e){return L.get(`/org/documents/${e}`,{authorizeRequest:!0,organisationAware:!0})},async uploadDocument(e,t,n={}){let r=new FormData;return r.append(`file`,e),r.append(`category`,t),r.append(`metadata`,JSON.stringify(n)),L.post(`/org/documents/upload`,{data:r,headers:{"Content-Type":`multipart/form-data`},authorizeRequest:!0,organisationAware:!0})},async updateDocument(e,t){return L.put(`/org/documents/${e}`,{data:t,authorizeRequest:!0,organisationAware:!0})},async archiveDocument(e){return L.delete(`/org/documents/${e}`,{authorizeRequest:!0,organisationAware:!0})},async getVersionHistory(e){return L.get(`/org/documents/${e}/versions`,{authorizeRequest:!0,organisationAware:!0})},async restoreVersion(e,t){return L.post(`/org/documents/${e}/versions/${t}/restore`,{data:{},authorizeRequest:!0,organisationAware:!0})}},Se={class:`h-full w-full p-8 text-center overflow-auto flex flex-col items-center`},Ce={class:`w-full max-w-lg relative flex flex-col items-center justify-center my-auto`},we={class:`mb-8`},Te={class:`grid grid-cols-2 gap-3 max-w-lg w-full mb-4`},Ee={class:u([`h-10 w-10 rounded-full flex items-center justify-center bg-slate-950 opacity-85 hover:opacity-100`])},De={class:`text-sm font-medium`},Oe={class:`max-w-lg w-full mb-8`},ke={class:u([`h-8 w-8 rounded-lg flex items-center justify-center flex-shrink-0`])},Ae={class:`flex-1 text-sm`},je=[`onClick`,`title`],Me={key:0,class:`w-full max-w-lg`},Ne={class:`space-y-2`},Pe={class:`truncate`},Fe={class:`ml-auto text-xs text-slate-400`},Ie={key:1,class:`mt-8 w-full max-w-lg p-4 bg-slate-50 rounded-xl`},Le={class:`flex items-center justify-between mb-2`},Re={class:`text-sm font-medium text-slate-700`},ze={class:`text-2xl font-bold text-slate-900`},Be={class:`text-xs text-slate-500 mt-1`},Ve={key:0,class:`py-4`},He={class:`flex items-center gap-3 p-3 bg-slate-50 rounded-lg`},Ue={class:`flex-1 min-w-0`},We={class:`text-sm font-medium truncate`},X={class:`text-xs text-slate-500`},Ge={class:`mt-4`},Ke={key:1,class:`py-8`},Z=`flow_pinned_actions`,Q={__name:`WelcomeView`,props:{account:Object},setup(e){let t=e,n=s(`openTab`),r=s(`openDocSheet`),i=s(`openApplications`);function a(){i?.()}let o=_(null),f=_(!1),v=_({show:!1,file:null,category:`BANK_STATEMENT`}),w=_([]);ae(()=>{let e=localStorage.getItem(Z);if(e)try{w.value=JSON.parse(e)}catch{w.value=[`invoice`,`sale`]}else w.value=[`invoice`,`sale`]});let T=[{id:`invoice`,label:`New Invoice`,icon:ie,bgClass:`bg-blue-100`,iconClass:`text-blue-600`},{id:`sale`,label:`New Walk-in Sale`,icon:te,bgClass:`bg-pink-100`,iconClass:`text-pink-600`},{id:`product`,label:`New Product`,icon:re,bgClass:`bg-pink-100`,iconClass:`text-pink-600`},{id:`reports`,label:`Generate Report`,icon:ne,bgClass:`bg-emerald-100`,iconClass:`text-emerald-600`}],P=c(()=>T.filter(e=>w.value.includes(e.id)));function F(e){return w.value.includes(e)}function L(e){let t=w.value.indexOf(e);t>-1?w.value.splice(t,1):w.value.push(e),localStorage.setItem(Z,JSON.stringify(w.value))}let V=_([]);function W(e){switch(e.id){case`upload`:v.value.show=!0,v.value.file=null,v.value.category=`BANK_STATEMENT`;break;case`reconcile`:r?.(`Reconciliation Session`,`new`,e=>{let t=e.name||e.reference;t&&n?.({id:`reconciliation-${t}`,type:`reconciliation`,title:`Reconciliation: ${t}`,data:{reference:t}})});break;case`table`:n?.({id:`new-table-`+Date.now(),type:`spreadsheet`,title:`Untitled Table`,data:null,unsaved:!0});break;case`invoice`:r?.(`Sales Invoice`,`new`,e=>{let t=e.name||e.reference;t&&n?.({id:`doctype-Sales Invoice-${t}`,type:`doctype-form`,title:`Sales Invoice: ${t}`,doctype:`Sales Invoice`,docName:t,isNew:!1,data:null})});break;case`chart`:n?.({id:`new-chart-`+Date.now(),type:`chart`,title:`New Chart`,data:null,unsaved:!0});break;case`journal`:r?.(`Journal Entry`,`new`,e=>{let t=e.name||e.reference;t&&n?.({id:`doctype-Journal Entry-${t}`,type:`doctype-form`,title:`Journal Entry: ${t}`,doctype:`Journal Entry`,docName:t,isNew:!1,data:null})});break;case`expense`:r?.(`Expense`,`new`,e=>{let t=e.name||e.reference;t&&n?.({id:`doctype-Expense-${t}`,type:`doctype-form`,title:`Expense: ${t}`,doctype:`Expense`,docName:t,isNew:!1,data:null})});break;case`calculator`:console.log(`Open calculator`);break;case`search-docs`:n?.({id:`search-docs`,type:`search`,title:`Search Documents`,data:null});break;case`sale`:r?.(`Sale`,`new`,e=>{let t=e.name||e.reference;t&&n?.({id:`doctype-Sale-${t}`,type:`doctype-form`,title:`Sale: ${t}`,doctype:`Sale`,docName:t,isNew:!1,data:null})});break;case`product`:r?.(`Product`,`new`,e=>{let t=e.name||e.reference;t&&n?.({id:`doctype-Product-${t}`,type:`doctype-form`,title:`Product: ${t}`,doctype:`Product`,docName:t,isNew:!0,data:null})});break;case`browse-files`:n?.({id:`file-browser`,type:`browser`,title:`File Browser`,data:null});break;case`reports`:n?.({id:`tax-report-`+Date.now(),type:`tax-report`,title:`Tax Report`,data:null});break;default:console.log(`Action not implemented:`,e.id)}}function Q(){o.value?.click()}function $(e){let t=e.target.files?.[0];t&&(v.value.file=t,t.name.toLowerCase().includes(`statement`)?v.value.category=`BANK_STATEMENT`:t.name.toLowerCase().includes(`invoice`)?v.value.category=`INVOICE`:t.name.toLowerCase().includes(`receipt`)&&(v.value.category=`RECEIPT`))}function qe(e){let t=e.dataTransfer?.files?.[0];t&&(v.value.file=t)}function Je(){v.value.file=null,o.value&&(o.value.value=``)}async function Ye(){if(v.value.file){f.value=!0;try{let e=await xe.uploadDocument(v.value.file,v.value.category);v.value.show=!1,e&&n?.({id:`doc-${e.reference}`,type:`document`,title:e.name||v.value.file.name,data:e})}catch(e){console.error(`Upload failed:`,e)}finally{f.value=!1}}}function Xe(e){n?.({id:e.id,type:e.type,title:e.name,data:e})}function Ze(e){return{spreadsheet:I,document:z,chart:H,reconciliation:M}[e.type]||z}function Qe(e){if(!e)return``;let t=new Date(e),n=new Date-t,r=Math.floor(n/6e4);return r<60?`${r}m ago`:r<1440?`${Math.floor(r/60)}h ago`:t.toLocaleDateString()}function $e(e){return e==null?`N/A`:new Intl.NumberFormat(`en-NG`,{style:`currency`,currency:t.account?.currency||`NGN`}).format(e)}function et(e){return e?new Date(e).toLocaleDateString(`en-US`,{month:`short`,day:`numeric`,hour:`2-digit`,minute:`2-digit`}):`Never`}function tt(e){return e<1024?e+` B`:e<1024*1024?(e/1024).toFixed(1)+` KB`:(e/(1024*1024)).toFixed(1)+` MB`}return(t,n)=>(R(),C(`div`,Se,[S(`div`,Ce,[S(`div`,we,[S(`div`,{onClick:n[0]||=e=>a(),class:`h-20 w-20 cursor-pointer rounded-2xl bg-gradient-to-br from-slate-950 to-neutral-950 flex items-center justify-center shadow-lg opacity-95`},[B(y(O),{class:`size-10 text-white`})])]),S(`h1`,{class:`text-2xl font-bold text-slate-800 mb-2 cursor-pointer`,onClick:n[1]||=e=>a()},` Flow Seamlessly`),n[9]||=S(`p`,{class:`text-sm text-slate-500 max-w-md mb-8`},` Your integrated accounting workspace. Upload documents, reconcile accounts, and let AI do the heavy lifting. `,-1),S(`div`,Te,[(R(!0),C(h,null,j(P.value,e=>(R(),p(y(G),{key:e.id,variant:`outline`,class:`h-auto p-4 flex flex-col items-center gap-2 hover:bg-slate-50 rounded-[6px] hover:border-blue-200 transition-all`,onClick:t=>W(e)},{default:A(()=>[S(`div`,Ee,[(R(),p(N(e.icon),{class:u([`h-5 w-5 text-white font-bold`])}))]),S(`span`,De,b(e.label),1)]),_:2},1032,[`onClick`]))),128))]),S(`div`,Oe,[B(y(he),null,{default:A(()=>[B(y(be),{asChild:``},{default:A(()=>[B(y(G),{variant:`ghost`,class:`w-full text-slate-500 hover:text-slate-700`},{default:A(()=>[B(y(ee),{class:`h-4 w-4 mr-2`}),n[6]||=m(` Quick Actions `,-1),B(y(E),{class:`h-4 w-4 ml-2`})]),_:1})]),_:1}),B(y(ge),{class:`w-72 bg-stone-50 border-4 border-white rounded-[8px] overflow-y-scroll max-h-[350px] no-scrollbar`,align:`center`},{default:A(()=>[B(y(ve),null,{default:A(()=>[...n[7]||=[m(`All Actions`,-1)]]),_:1}),B(y(ye)),(R(),C(h,null,j(T,e=>S(`div`,{key:e.id},[B(y(_e),{class:`flex items-center gap-3 cursor-pointer hover:bg-white py-1.5 px-2 rounded-full`,onClick:t=>W(e)},{default:A(()=>[S(`div`,ke,[(R(),p(N(e.icon),{class:u([`h-4 w-4`])}))]),S(`span`,Ae,b(e.label),1),S(`button`,{onClick:d(t=>L(e.id),[`stop`]),class:`p-1 rounded hover:bg-slate-100 transition-colors`,title:F(e.id)?`Unpin from quick actions`:`Pin to quick actions`},[F(e.id)?(R(),p(y(D),{key:0,class:`h-4 w-4 text-blue-500`})):(R(),p(y(U),{key:1,class:`h-4 w-4 text-slate-400`}))],8,je)]),_:2},1032,[`onClick`])])),64))]),_:1})]),_:1})]),V.value.length>0?(R(),C(`div`,Me,[n[8]||=S(`h3`,{class:`text-xs font-semibold text-slate-500 uppercase tracking-wider mb-3 text-left`},`Recent`,-1),S(`div`,Ne,[(R(!0),C(h,null,j(V.value,e=>(R(),p(y(G),{key:e.id,variant:`ghost`,class:`w-full justify-start text-sm h-auto py-2 px-3`,onClick:t=>Xe(e)},{default:A(()=>[(R(),p(N(Ze(e)),{class:`h-4 w-4 mr-3 text-slate-400`})),S(`span`,Pe,b(e.name),1),S(`span`,Fe,b(Qe(e.openedAt)),1)]),_:2},1032,[`onClick`]))),128))])])):x(``,!0),e.account?(R(),C(`div`,Ie,[S(`div`,Le,[S(`span`,Re,b(e.account.accountName),1),B(y(le),{variant:`secondary`},{default:A(()=>[m(b(e.account.bankName),1)]),_:1})]),S(`div`,ze,b($e(e.account.balance)),1),S(`p`,Be,` Last synced: `+b(et(e.account.lastSyncedAt)),1)])):x(``,!0)]),S(`input`,{ref_key:`fileInput`,ref:o,type:`file`,class:`hidden`,accept:`.pdf,.csv,.xlsx,.xls,.jpg,.jpeg,.png`,onChange:$},null,544),B(y(K),{open:v.value.show,"onUpdate:open":n[5]||=e=>v.value.show=e},{default:A(()=>[B(y(q),{class:`sm:max-w-md`},{default:A(()=>[B(y(J),null,{default:A(()=>[B(y(se),null,{default:A(()=>[...n[10]||=[m(`Upload Document`,-1)]]),_:1}),B(y(oe),null,{default:A(()=>[...n[11]||=[m(` Select a file to upload. Supported formats: PDF, CSV, Excel, Images. `,-1)]]),_:1})]),_:1}),v.value.file?(R(),C(`div`,Ve,[S(`div`,He,[B(y(z),{class:`h-8 w-8 text-blue-500`}),S(`div`,Ue,[S(`p`,We,b(v.value.file.name),1),S(`p`,X,b(tt(v.value.file.size)),1)]),B(y(G),{variant:`ghost`,size:`sm`,class:`h-8 w-8 p-0`,onClick:Je},{default:A(()=>[B(y(k),{class:`h-4 w-4`})]),_:1})]),S(`div`,Ge,[B(y(ue),{class:`text-xs`},{default:A(()=>[...n[12]||=[m(`Document Category`,-1)]]),_:1}),B(y(de),{modelValue:v.value.category,"onUpdate:modelValue":n[2]||=e=>v.value.category=e,class:`mt-1`},{default:A(()=>[B(y(pe),null,{default:A(()=>[B(y(me),{placeholder:`Select category`})]),_:1}),B(y(fe),null,{default:A(()=>[B(y(Y),{value:`BANK_STATEMENT`},{default:A(()=>[...n[13]||=[m(`Bank Statement`,-1)]]),_:1}),B(y(Y),{value:`INVOICE`},{default:A(()=>[...n[14]||=[m(`Invoice`,-1)]]),_:1}),B(y(Y),{value:`RECEIPT`},{default:A(()=>[...n[15]||=[m(`Receipt`,-1)]]),_:1}),B(y(Y),{value:`REPORT`},{default:A(()=>[...n[16]||=[m(`Report`,-1)]]),_:1}),B(y(Y),{value:`OTHER`},{default:A(()=>[...n[17]||=[m(`Other`,-1)]]),_:1})]),_:1})]),_:1},8,[`modelValue`])])])):(R(),C(`div`,Ke,[S(`div`,{class:`border-2 shadow-md border-slate-200 rounded-lg p-8 text-center cursor-pointer hover:border-blue-300 hover:bg-blue-50/50 transition-colors`,onClick:Q,onDragover:n[3]||=d(()=>{},[`prevent`]),onDrop:d(qe,[`prevent`])},[B(y(g),{class:`h-10 w-10 text-slate-400 mx-auto mb-3`}),n[18]||=S(`p`,{class:`text-sm text-slate-600`},`Click to browse or drag & drop`,-1),n[19]||=S(`p`,{class:`text-xs text-slate-400 mt-1`},`PDF, CSV, Excel, Images`,-1)],32)])),B(y(ce),null,{default:A(()=>[B(y(G),{variant:`outline`,onClick:n[4]||=e=>v.value.show=!1},{default:A(()=>[...n[20]||=[m(`Cancel`,-1)]]),_:1}),B(y(G),{onClick:Ye,disabled:!v.value.file||f.value},{default:A(()=>[f.value?(R(),p(y(l),{key:0,class:`h-4 w-4 mr-2 animate-spin`})):x(``,!0),m(` `+b(f.value?`Uploading...`:`Upload`),1)]),_:1},8,[`disabled`])]),_:1})]),_:1})]),_:1},8,[`open`])]))}},$=P(Q,[[`__scopeId`,`data-v-78e260f5`]]);export{$ as default};