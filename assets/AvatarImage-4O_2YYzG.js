import{Et as e,Gt as t,Jt as n,K as r,O as i,Ot as a,P as o,Pt as s,Ut as c,Wt as l,_n as u,an as d,en as f,kt as p,on as m,pn as h,rt as g,tn as _,yn as v,yt as y}from"./index-NPUXaZ2c.js";var[b,x]=g(`AvatarRoot`),S=s({__name:`AvatarRoot`,props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:`span`}},setup(e){return o(),x({imageLoadingStatus:h(`idle`)}),(e,r)=>(t(),a(v(i),{"as-child":e.asChild,as:e.as},{default:d(()=>[n(e.$slots,`default`)]),_:3},8,[`as-child`,`as`]))}}),C=s({__name:`AvatarFallback`,props:{delayMs:{type:Number,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:`span`}},setup(e){let s=e,c=b();o();let l=h(s.delayMs===void 0);return _(e=>{if(s.delayMs&&r){let t=window.setTimeout(()=>{l.value=!0},s.delayMs);e(()=>{window.clearTimeout(t)})}}),(e,r)=>l.value&&v(c).imageLoadingStatus.value!==`loaded`?(t(),a(v(i),{key:0,"as-child":e.asChild,as:e.as},{default:d(()=>[n(e.$slots,`default`)]),_:3},8,[`as-child`,`as`])):p(`v-if`,!0)}});function w(e,t){return e?t?(e.src!==t&&(e.src=t),e.complete&&e.naturalWidth>0?`loaded`:`loading`):`error`:`idle`}function T(t,{referrerPolicy:n,crossOrigin:i}={}){let a=h(!1),o=h(null),s=e(()=>a.value?(!o.value&&r&&(o.value=new window.Image),o.value):null),u=h(w(s.value,t.value)),d=e=>()=>{a.value&&(u.value=e)};return c(()=>{a.value=!0,_(e=>{let r=s.value;if(!r)return;u.value=w(r,t.value);let a=d(`loaded`),o=d(`error`);r.addEventListener(`load`,a),r.addEventListener(`error`,o),n?.value&&(r.referrerPolicy=n.value),typeof i?.value==`string`&&(r.crossOrigin=i.value),e(()=>{r.removeEventListener(`load`,a),r.removeEventListener(`error`,o)})})}),l(()=>{a.value=!1}),u}var E=s({__name:`AvatarImage`,props:{src:{type:String,required:!0},referrerPolicy:{type:null,required:!1},crossOrigin:{type:null,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:`img`}},emits:[`loadingStatusChange`],setup(e,{emit:r}){let s=e,c=r,{src:l,referrerPolicy:p,crossOrigin:h}=u(s);o();let g=b(),_=T(l,{referrerPolicy:p,crossOrigin:h});return f(_,e=>{c(`loadingStatusChange`,e),e!==`idle`&&(g.imageLoadingStatus.value=e)},{immediate:!0}),(e,r)=>m((t(),a(v(i),{role:`img`,"as-child":e.asChild,as:e.as,src:v(l),"referrer-policy":v(p)},{default:d(()=>[n(e.$slots,`default`)]),_:3},8,[`as-child`,`as`,`src`,`referrer-policy`])),[[y,v(_)===`loaded`]])}});export{C as n,S as r,E as t};